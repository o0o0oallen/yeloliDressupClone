window.__require=function e(t,o,n){function a(i,s){if(!o[i]){if(!t[i]){var l=i.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+i+"'")}}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)a(n[i]);return a}({AnimNode:[function(e,t,o){"use strict";cc._RF.push(t,"e3284wLuZFKh46Gwdd+Sdn8","AnimNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/manager/mgrCfg"),r=e("../../game/manager/mgrDirector"),i=e("../utils/Tools"),s=e("../component/LifeCycleMonitor"),l=function(e){function t(t){var o=e.call(this)||this;return o.nodeResource=null,o.clipName=null,o.animData=a.default.get("anim_node_db",t),o.addComponent(s.default).setOnLoadCallback(o.onLoad.bind(o)),o}return n(t,e),t.prototype.onLoad=function(){this._loadResourceNode()},t.prototype._onPreDestroy=function(){if(cc.isValid(this.nodeResource)){var t=this.nodeResource.getComponent(cc.Animation);cc.isValid(t)&&t.stop()}e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResourceNode=function(){var e=this,t=this.animData;r.default.loadRes(t.prefabFileName,cc.Prefab,function(t,o){if(t)cc.warn("AnimNode._loadResourceNode error:",t);else if(cc.isValid(e)){var n=cc.instantiate(o);n.parent=e,e.nodeResource=n,e.play(e.clipName),e.callback&&e.registerEventCallback(e.callback)}else cc.warn("AnimNode._loadResourceNode on loadRes finish, this is invalid!")})},t.prototype.reset=function(){this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.animData.scaleX,this.scaleY=this.animData.scaleY,this.setColorEx(cc.color(255,255,255)),this.opacity=255},t.prototype.play=function(e){if(this.clipName=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(cc.Animation);if(cc.isValid(t)){if(!e){var o=t.getClips();o.length>0?e=o[0].name:cc.warn("AnimNode.play clip not found!",e)}t.play(e)}}},t.prototype.registerEventCallback=function(e){if(this.unregisterEventCallback(),this.callback=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(cc.Animation);t.on("play",this.onAnimationPlay,this),t.on("stop",this.onAnimationStop,this),t.on("pause",this.onAnimationPause,this),t.on("resume",this.onAnimationResume,this),t.on("lastframe",this.onAnimationLastframe,this),t.on("finished",this.onAnimationFinished,this)}},t.prototype.unregisterEventCallback=function(){if(this.callback=null,this.nodeResource&&cc.isValid(this)){var e=this.nodeResource.getComponent(cc.Animation);e.off("play",this.onAnimationPlay,this),e.off("stop",this.onAnimationStop,this),e.off("pause",this.onAnimationPause,this),e.off("resume",this.onAnimationResume,this),e.off("lastframe",this.onAnimationLastframe,this),e.off("finished",this.onAnimationFinished,this)}},t.prototype.isLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype._onEvent=function(e,t){if(cc.isValid(this.nodeResource)){var o=this.nodeResource.getComponent(cc.Animation).currentClip.name;cc.log("_onEvent",t,o),this.callback instanceof Function&&this.callback({name:t,clipName:o})}},t.prototype.onAnimationPlay=function(e){this._onEvent(e,"play")},t.prototype.onAnimationStop=function(e){this._onEvent(e,"stop")},t.prototype.onAnimationPause=function(e){this._onEvent(e,"pause")},t.prototype.onAnimationResume=function(e){this._onEvent(e,"resume")},t.prototype.onAnimationLastframe=function(e){this._onEvent(e,"lastframe")},t.prototype.onAnimationFinished=function(e){this._onEvent(e,"finished")},t.prototype.setColorEx=function(e){this.nodeResource&&cc.isValid(this)&&i.default.setCascadeColor(this,e)},t}(cc.Node);o.default=l,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/Tools":"Tools"}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"b84der7CppMXapFQITVgKSQ","Base64");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){}return e.encodeForUrl=function(e){var t=this.encode(e);return t?t=(t=t.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e)):null},e.encode=function(e){var t,o,n,a,r,i,s,l="",c=0;for(e=this._utf8_encode(e);c<e.length;)a=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(o=e.charCodeAt(c++))>>4,i=(15&o)<<2|(n=e.charCodeAt(c++))>>6,s=63&n,isNaN(o)?i=s=64:isNaN(n)&&(s=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return l},e.decode=function(e){var t,o,n,a,r,i,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(a=this._keyStr.indexOf(e.charAt(l++)))>>4,o=(15&a)<<4|(r=this._keyStr.indexOf(e.charAt(l++)))>>2,n=(3&r)<<6|(i=this._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(o)),64!=i&&(s+=String.fromCharCode(n));return s=this._utf8_decode(s)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",o=0,n=0,a=0,r=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(a=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),r=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&r),o+=3);return t},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=n([r],e)}());o.default=i,cc._RF.pop()},{}],CfgParser:[function(e,t,o){"use strict";cc._RF.push(t,"28a48t7aL9M2aeRvb7tTw6M","CfgParser");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){}var t;return t=e,e.parseCfgByJsonObj=function(e,t,o){var n=this.preprocess(e,t);return this.formatDb(e,n,o,t.fields)},e.parseNumber=function(e){var t=parseFloat(e);return isNaN(t)&&(t=null),t},e.parseString=function(e){return e},e.parseArray=function(e){var t=null;try{(t=JSON.parse(e))instanceof Array||(t=null)}catch(e){}return t},e.parseObject=function(e){var t=null;try{(t=JSON.parse(e))instanceof Object||(t=null)}catch(e){}return t},e.parseBoolean=function(e){return"TRUE"==e||"true"==e},e.parseValue=function(e,t){var o=this.PARSE_FUNCTIONS[t];if(!o)return"";var n=o(e);if(null==n){var a=this.PARSE_DEFAULT_VALUE_CREATORS[t]();return e.length>0&&cc.log("[\u8b66\u544a] CfgParser.parseValue \u89e3\u6790\u9519\u8bef\uff1atype="+t+", srcValue=["+e+"], \u9ed8\u8ba4\u503c=["+a+"]]"),a}return n},e.preprocess=function(e,t){var o=[],n=t.types||[],a=t.fields||[],r=t.values||[];if(!(r.length<=0)){if(n.length!=r[0].length||a.length!=r[0].length)return cc.log("[\u8b66\u544a] CfgParser.preprocessData  "+e+" \u6570\u636e\u957f\u5ea6\u4e0d\u5339\u914d\uff01"),[];for(var i=0;i<r.length;i++){for(var s=r[i],l={},c=0;c<s.length;c++){var u=n[c],d=a[c],p=s[c];l[d]=this.parseValue(p,u)}o.push(l)}return o}cc.log("[\u8b66\u544a] CfgParser.preprocessData "+e+" \u6570\u636e\u4e3a\u7a7a")},e.formatDb=function(e,t,o,n){for(var a=o.split(""),r={},i=0;i<t.length;i++){for(var s=t[i],l=r,c=0;c<a.length-1;c++){var u=l[p=s[n[c]]];u||(u=c==a.length-2&&"a"==a[a.length-1]?[]:{},l[p]=u),l=u}var d=a[a.length-1];if("m"==d){var p;if(null!=l[p=s[n[a.length-1]]]){var f="db";for(c=0;c<a.length;c++)f+="["+s[n[c]]+"]";cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" \u5b57\u6bb5\u88ab\u8986\u76d6\uff01",f,l[p])}l[p]=s}else"a"==d&&(l instanceof Array||1==a.length&&(r=l=[]),l instanceof Array?l.push(s):cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" a\u6a21\u5f0f\uff0c\u5bb9\u5668\u4e0d\u662f\u6570\u7ec4\uff01"))}return r},e.PARSE_FUNCTIONS={A:t.parseArray,O:t.parseObject,N:t.parseString,S:t.parseString,I:t.parseNumber,F:t.parseNumber,B:t.parseBoolean},e.PARSE_DEFAULT_VALUE_CREATORS={A:function(){return[]},O:function(){return{}},N:function(){return""},S:function(){return""},I:function(){return 0},F:function(){return 0},B:function(){return!1}},e=t=n([r],e)}());o.default=i,cc._RF.pop()},{}],ColorEx:[function(e,t,o){"use strict";cc._RF.push(t,"70766VGg+dMipLj4pfvkxPb","ColorEx"),cc.Color.prototype.fromHEX=function(e){e=0===e.indexOf("#")?e.substring(1):e;var t=parseInt(e.substr(0,2),16)||0,o=parseInt(e.substr(2,2),16)||0,n=parseInt(e.substr(4,2),16)||0,a=parseInt(e.substr(6,2),16);return isNaN(a)&&(a=255),this._val=(a<<24>>>0)+(n<<16)+(o<<8)+t,this},cc._RF.pop()},{}],ConstBase:[function(e,t,o){"use strict";cc._RF.push(t,"191d3P1jLRN+bkOhVFvaW9X","ConstBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.GAME_VERSION="unknown",e._GLOBAL_ORDER_DIALOG=1e4,e.B_PROMISE_RESOLVE_NEED_WAIT=!0,e.PROMISE_RESOLVE_WAIT_TIME=1,e.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1152,minHeight:1024},e}();o.default=n,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"c54bf4JLl9PjLK3VwVekJ0m","Const");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass;a.property;(function(e){e[e.faild=0]="faild",e[e.success=1]="success"})(o.RESP_CODE||(o.RESP_CODE={})),function(e){e[e.statis=1]="statis",e[e.add=2]="add"}(o.ObjectiveCounterType||(o.ObjectiveCounterType={})),function(e){e[e.msgDataField=1]="msgDataField",e[e.customScript=2]="customScript"}(o.ObjectiveCounterFilterType||(o.ObjectiveCounterFilterType={})),function(e){e[e.fixed=1]="fixed",e[e.msgDataField=2]="msgDataField",e[e.customScript=3]="customScript"}(o.ObjectiveCounterScoreCalculatorType||(o.ObjectiveCounterScoreCalculatorType={})),function(e){e[e.talk=1]="talk",e[e.effect=2]="effect",e[e.questOptions=3]="questOptions",e[e.msg=4]="msg"}(o.MovieTalkType||(o.MovieTalkType={})),function(e){e[e.enterHud=1]="enterHud",e[e.afterMovie=2]="afterMovie",e[e.objectiveAllCompleted=3]="objectiveAllCompleted"}(o.QuestAutoSubmitMode||(o.QuestAutoSubmitMode={})),function(e){e[e.manual=0]="manual",e[e.enterHud=1]="enterHud",e[e.initPlayer=2]="initPlayer"}(o.QuestAutoAccpetMode||(o.QuestAutoAccpetMode={})),function(e){e[e.zhcn=0]="zhcn",e[e.en=1]="en",e[e.vi=2]="vi",e[e.pt=3]="pt",e[e.id=4]="id",e[e.hi=5]="hi"}(o.LanguageState||(o.LanguageState={})),function(e){e[e.locked=1]="locked",e[e.unlocked=2]="unlocked",e[e.finished=3]="finished",e[e.received=4]="received"}(o.AchievementState||(o.AchievementState={})),function(e){e[e.locked=1]="locked",e[e.accpeted=2]="accpeted",e[e.submitted=3]="submitted"}(o.QuestState||(o.QuestState={})),function(e){e[e.sprite=1]="sprite",e[e.spine=2]="spine",e[e.particle=3]="particle",e[e.animNode=4]="animNode"}(o.ResourceType||(o.ResourceType={})),function(e){e[e.canSign=1]="canSign",e[e.signed=2]="signed",e[e.signOver=3]="signOver",e[e.waitGap=4]="waitGap"}(o.SignState||(o.SignState={})),function(e){e[e.canSign=1]="canSign",e[e.signed=2]="signed",e[e.signOver=3]="signOver",e[e.waitGap=4]="waitGap"}(o.OnlineState||(o.OnlineState={})),function(e){e[e.none_passAll=0]="none_passAll",e[e.none_blockkAll=1]="none_blockkAll",e[e.none_passHole=2]="none_passHole",e[e.mask_passAll=3]="mask_passAll",e[e.mask_blockAll=4]="mask_blockAll",e[e.mask_passHole=5]="mask_passHole"}(o.GuideMaskType||(o.GuideMaskType={})),function(e){e[e.hair=11]="hair",e[e.skirt=12]="skirt",e[e.coat=13]="coat",e[e.upper=14]="upper",e[e.lower=15]="lower",e[e.socks=16]="socks",e[e.shoes=17]="shoes",e[e.face=18]="face",e[e.decorHair=20]="decorHair",e[e.decorEar=21]="decorEar",e[e.decorNeck=22]="decorNeck",e[e.decorFace=23]="decorFace",e[e.decorBack=24]="decorBack",e[e.decorArm=26]="decorArm",e[e.decorLeft=27]="decorLeft",e[e.decorRight=28]="decorRight",e[e.decorSpecial=29]="decorSpecial",e[e.body=101]="body",e[e.shadow=102]="shadow"}(o.PartType||(o.PartType={}));var i=function(){function e(){}return e.LOCAL_PATCH_INFO=null,e.GAME_VERSION="1.0.2",e.HAD_TIP_USER_LOGIN=!0,e.IS_INHUB_FIRSTTIME=!0,e.SDCARD_PATH="",e.PACKAGE_VERSION=null,e.SDK_VERSION="",e.PAY_CHANNEL=null,e.LOCAL_PUBLISH_CHANNEL="",e.ANDROID_SWITCH_ABOUT=!1,e.ANDROID_SWITCH_MUSIC_ENABLED=!1,e.B_SDK_HAS_WEB_VIEW=!0,e.ACHIEVEMENT_CATEGORY_LIST=1,e.ACHIEVEMENT_CATEGORY_FARM=2,e.ACHIEVEMENT_CATEGORY_COOKBOOK=3,e.ACHIEVEMENT_CATEGORY_ROOM=4,e.ACHIEVEMENT_CATEGORY_KITCHEN=5,e.ITEM_ID_RMB=1,e.ITEM_ID_GOLD=2,e.ITEM_ID_KEY=3,e.ITEM_ID_ENERGY=4,e.ITEM_ID_MAX_ENERGY=5,e.ITEM_ID_CLOTH_TRIAL=6,e.ITEM_ID_FRAGMENT=7,e.ITEM_ID_OPEN_CHEST=8,e.ITEM_ID_VIDEO_SHARE_COUNT=9,e.ITEM_ID_SHARE_COUNT=10,e.ITEM_ID_BIG_REWARD_COUNT=11,e.ITEM_ID_PVP_LIKE_COUNT=12,e.ITEM_ID_SELECT_PART_SUCCESS_COUNT=13,e.ITEM_ID_VIP=113,e.ITEM_ID_IGNORE_AD=114,e.ITEM_FLAG_MONEY=1,e.ITEM_FLAG_PART=2,e.ITEM_FLAG_PART_BLUEPRINT=3,e.ITEM_FLAG_MATERIAL=4,e.ITEM_FLAG_PLAYER_ATTR=5,e.ITEM_FLAG_NPC_GIFT=6,e.ROOM_CELL_WIDTH=47.5,e.ROOM_CELL_HEIGHT=29.5,e.ROOM_PART_GRID_SIZE=10,e.ROOM_ATTR_ID_CONSTRUCTION=24101,e.ROOM_ATTR_ID_SEAT=24201,e.ROOM_ATTR_ID_DECORATION=24301,e.GLOBAL_ORDER_TIP_ICON=900,e.GLOBAL_ORDER_DIALOG=1e3,e.GLOBAL_ORDER_TIP=1100,e.GLOBAL_ORDER_GUIDE=1200,e.KITCHEN_MATERIAL_FLY_TO_SPEED=2e4,e.KITCHEN_MATERIAL_FLY_TO_MIN_DURATION=.2,e.KITCHEN_MATERIAL_FLY_BACK_SPEED=2e4,e.KITCHEN_MATERIAL_FLY_BACK_MIN_DURATION=.2,e.ROOM_ACTOR_MOVE_SPEED=100,e.ROOM_ACTOR_MIN_IDLE_TIME=2e3,e.ROOM_ACTOR_MAX_IDLE_TIME=1e4,e.ROOM_NEW_CUSTOMER_MIN_GAP=5e3,e.ROOM_NEW_CUSTOMER_MAX_GAP=5e3,e.ROOM_CUSTOMER_LEAVE_RATIO=10,e.FARM_STOLEN_INTERVAL=3600,e.SHOP_ID_PET_GIFT=110,e.WISH_GOLD_POOL_ID=1,e.WISH_DIAMOND_POOL_ID=2,e.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1280,minHeight:1024},e.SERVER_HOST="https://rank.ultralisk.cn",e.SERVER_URL_FORMAT="%s/ultralisk/",e.SERVER_APP_ID=55,e.SERVER_RANK_ID=59,e.WARP_SCENE_MIN_LOAD_TIME=.1,e.B_PROMISE_RESOLVE_NEED_WAIT=!0,e.PROMISE_RESOLVE_WAIT_TIME=1,e.AD_VIDEO_VALID_COUNT=1,e.FRIEND_SHIP_TYPE_NEWS=1,e.FRIEND_SHIP_TYPE_MSG=2,e.ITEM_ID_PLAYER=99,e.ITEM_ID_ARENA_FREE_COUNT=46,e.ITEM_ID_ARENA_JOIN_COUNT=47,e.ITEM_ID_ARENA_WIN_COUNT=48,e.ITEM_ID_ARENA_FREE_MAX_COUNT=49,e.ONE_STAGE_LEN=5,e.RECORD_DATA_KEY="record_game56",e=n([r],e)}();o.default=i,cc._RF.pop()},{}],CustomMaterialBase:[function(e,t,o){"use strict";cc._RF.push(t,"bb82e/71OtHAKFXE+SZgj59","CustomMaterialBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShaderLib"),r=e("../utils/Tools"),i=cc.renderer.renderEngine,s=i.renderer,l=i.gfx,c=function(e){function t(t){var o=e.call(this,!1)||this;o.customParams={},o.customDefines={};var n=a.ShaderLib.getShader(t);n||cc.error("CustomSpineMaterial.consturctor shader not found!",t);var r=new s.Pass(t);r.setDepth(!1,!1),r.setCullMode(l.CULL_NONE),r.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var i=new s.Technique(["transparent"],n.techParams,[r]),c=new s.Effect([i],{},n.defines);o.name=t,o._mainTech=i,o._effect=c;for(var u=0;u<n.techParams.length;u++){var d=n.techParams[u];null!=d.defaultValue&&o.setCustomParamValue(d.name,d.defaultValue)}return o}return n(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.name);return e._mainTech.copy(this._mainTech),r.default.forEachMap(this.customParams,function(t,o){e.setCustomParamValue(t,o)}),r.default.forEachMap(this.customDefines,function(t,o){e.setCustomDefineValue(t,o)}),e.updateHash(),e},t.prototype.resetToDefault=function(){for(var e=a.ShaderLib.getShader(this.name),t=0;t<e.techParams.length;t++){null!=(o=e.techParams[t]).defaultValue&&this.getCustomParamValue(o.name)!=o.defaultValue&&this.setCustomParamValue(o.name,o.defaultValue)}for(t=0;t<e.defines.length;t++){var o;null!=(o=e.defines[t]).value&&this.getCustomDefineValue(o.name)!=o.value&&this.setCustomDefineValue(o.name,o.value)}},t.prototype.getCustomParamValue=function(e){return this.customParams[e]},t.prototype.setCustomParamValue=function(e,t){this.customParams[e]=t,this._effect.setProperty(e,t)},t.prototype.getCustomDefineValue=function(e){return this.customDefines[e]},t.prototype.setCustomDefineValue=function(e,t){this.customDefines[e]=t,this._effect.define(e,t)},t}(i.Material);o.CustomMaterialBase=c,cc._RF.pop()},{"../utils/Tools":"Tools","./ShaderLib":"ShaderLib"}],CustomSpineMaterial:[function(e,t,o){"use strict";cc._RF.push(t,"2416fvgPihAV7JrbUVFBFY4","CustomSpineMaterial");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShaderLib"),r=e("./CustomMaterialBase"),i=cc.renderer.renderEngine,s=(i.renderer,i.gfx,i.Material,function(e){function t(t){var o=e.call(this,t)||this;return a.ShaderLib.getShader(t)||cc.error("CustomSpineMaterial.consturctor shader not found!",t),o._texture=null,o}return n(t,e),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alphaTest",{get:function(){return this._effect.getDefine("alphaTest")},set:function(e){this._effect.define("alphaTest",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"use2DPos",{get:function(){return this._effect.getDefine("use2DPos")},set:function(e){this._effect.define("use2DPos",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTint",{get:function(){return this._effect.getDefine("useTint")},set:function(e){this._effect.define("useTint",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.name);return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useModel=this.useModel,e.alphaTest=this.alphaTest,e.use2DPos=this.use2DPos,e.useTint=this.useTint,e.updateHash(),e},t}(r.CustomMaterialBase));o.CustomSpineMaterial=s,cc._RF.pop()},{"./CustomMaterialBase":"CustomMaterialBase","./ShaderLib":"ShaderLib"}],CustomSpriteMaterial:[function(e,t,o){"use strict";cc._RF.push(t,"18fa3EAUvRLPKduGl2ga3PW","CustomSpriteMaterial");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/Tools"),r=e("./CustomMaterialBase"),i=cc.renderer.renderEngine,s=(i.renderer,i.gfx,i.Material,function(e){function t(t){var o=e.call(this,t)||this;return o._color={r:1,g:1,b:1,a:1},o._texture=null,o}return n(t,e),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alphaTest",{get:function(){return this._effect.getDefine("alphaTest")},set:function(e){this._effect.define("alphaTest",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"use2DPos",{get:function(){return this._effect.getDefine("use2DPos")},set:function(e){this._effect.define("use2DPos",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){var t=this._color;t.r=e.r/255,t.g=e.g/255,t.b=e.b/255,t.a=e.a/255,this._effect.setProperty("color",t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.name);return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.alphaTest=this.alphaTest,e.use2DPos=this.use2DPos,e.useColor=this.useColor,a.default.forEachMap(this.customParams,function(t,o){e.setCustomParamValue(t,o)}),a.default.forEachMap(this.customDefines,function(t,o){e.setCustomDefineValue(t,o)}),e.updateHash(),e},t}(r.CustomMaterialBase));o.CustomSpriteMaterial=s,cc._RF.pop()},{"../utils/Tools":"Tools","./CustomMaterialBase":"CustomMaterialBase"}],DebugMenu:[function(e,t,o){"use strict";cc._RF.push(t,"c2312XTyQZI+6yxGda96ndc","DebugMenu");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/view/node/LayerColorTwo"),r=e("../utils/Tools"),i=function(e){function t(t,o,n,i){void 0===i&&(i=4);var s=e.call(this)||this,l=o+2*i,c=n*t.length+i*(t.length+1),u=new a.default(cc.color(63,63,63,191));u.parent=s,u.setContentSize(l,c),u.setAnchorPoint(0,1);for(var d=-i,p=function(e){var s=t[e],l=s[0],c=s[1],p=new a.default(cc.color(0,0,0,63));p.parent=u,p.setContentSize(o,n),p.x=i+o/2,p.y=d-e*(i+n)-n/2;var f=new cc.Node;f.parent=p;var h=f.addComponent(cc.Label);h.fontSize=20,h.string=l,h.verticalAlign=cc.Label.VerticalAlign.CENTER,r.default.registerTouchHandler(p,function(e){"began"==e.name?f.color=cc.color(0,255,0):"ended"==e.name&&(f.color=cc.color(255,255,255),c())})},f=0;f<t.length;f++)p(f);return s}return n(t,e),t}(cc.Node);o.default=i,cc._RF.pop()},{"../../game/view/node/LayerColorTwo":"LayerColorTwo","../utils/Tools":"Tools"}],DebugMouseControlNode:[function(e,t,o){"use strict";cc._RF.push(t,"bfaedijI1JElr+wGeM26gAa","DebugMouseControlNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,cc.Event.EventMouse.BUTTON_RIGHT),l=cc.Event.EventMouse.BUTTON_MIDDLE,c=function(e){function t(){var t=e.call(this)||this;return t.registerEvents(),t}return n(t,e),t.prototype.cleanup=function(){this._listener&&cc.eventManager.removeListener(this._listener)},t.prototype.registerEvents=function(){this.mousePressd={},this.registerMouseListener()},t.prototype.registerMouseListener=function(){var e=this,t=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseUp:function(t){t.name="up",e.onMouseHandler(t)},onMouseMove:function(t){t.name="move",e.onMouseHandler(t)},onMouseDown:function(t){t.name="down",e.onMouseHandler(t)},onMouseScroll:function(t){t.name="scroll",e.onMouseHandler(t)}});cc.eventManager.addListener(t,this)},t.prototype.onCameraTranslation=function(e,t){this.bPressedCtrl&&(e*=.1,t*=.1);var o=this.x,n=this.y;this.setPosition(o+e,n+t)},t.prototype.onCameraZoom=function(e,t,o){e=cc.misc.clampf(e,-1,1),cc.sys.isBrowser&&(e*=-1),this.bPressedCtrl&&(e*=.1);var n=this.convertToNodeSpace(cc.v2(t,o)),a=this.scale;this.scale=Math.max(.5,a+.5*-e);var r=this.convertToWorldSpace(n),i=this.x,s=this.y;this.setPosition(i+(t-r.x),s+(o-r.y))},t.prototype.onMouseHandler=function(e){var t=e.getButton(),o=e.getLocation(),n=(e.getScrollX(),e.getScrollY());switch(e.name){case"down":this.mousePressd[t]=!0;break;case"move":this.mousePressd[s]&&this.onCameraTranslation(e.getDeltaX(),e.getDeltaY());break;case"up":this.mousePressd[t]=!1,t==l&&(this.setPosition(0,0),this.scale=1);break;case"scroll":this.onCameraZoom(n,o.x,o.y)}},t=a([i],t)}(cc.Node);o.default=c,cc._RF.pop()},{}],DialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"1142doFnitPdpYq8C742uzP","DialogBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../game/manager/mgrDirector"),i=e("../utils/Tools"),s=e("./ViewBase"),l=e("../../game/Const"),c=e("../../game/view/node/LayerColorTwo"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;n._viewName="",n.bClosing=!1,n.DEFAULT_SHADOW_OPACITY=200,n.bOpenCompleted=!1;var a=t.__viewName||"";return a&&(n._viewName=a,o.CUR_VIEWS[a]=!0),n}var o;return n(t,e),o=t,t.hasDialogExists=function(){return this.GLOBAL_DIALOG_COUNT>0},t.clearViews=function(){o.CUR_VIEWS={}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.GLOBAL_DIALOG_COUNT++},t.prototype.onResourceLoaded=function(){var t=this;if(e.prototype.onResourceLoaded.call(this),this.context.bImmediately)this.layerShadow&&(this.layerShadow.active=!0),this._onOpenDialogCompleted();else{if(this.layerShadow&&(this.layerShadow.active=!0,this.layerShadow.opacity=0,this.layerShadow.runAction(cc.fadeTo(.3,this.getShadowOpacity())).setTag(o.ACTION_TAG_OPEN)),this.bClosing)return;var n=this.getComponent(cc.Animation);if(cc.isValid(n)){var a=n.play("defaultDialogOpen");a.speed=a.duration/.3,n.on("finished",function(){t._onOpenDialogCompleted(),n.targetOff(t)},this),n.setCurrentTime(1/60)}else this.scale=.5,this.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this._onOpenDialogCompleted.bind(this)))).setTag(o.ACTION_TAG_OPEN)}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.GLOBAL_DIALOG_COUNT--,this.bClosing||(this.bClosing=!0,this.context.fOnDialogClose&&this.context.fOnDialogClose instanceof Function&&this.context.fOnDialogClose())},t.prototype._onOpenDialogCompleted=function(){this.onOpenDialogCompleted(),this.bOpenCompleted=!0},t.prototype.onOpenDialogCompleted=function(){},t.prototype._loadResource=function(){var t=this.getComponent(cc.Animation);if(!t){t=this.addComponent(cc.Animation);for(var o=[r.default.tryGetRes("2d/animation/defaultDialogOpen",cc.AnimationClip),r.default.tryGetRes("2d/animation/defaultDialogClose",cc.AnimationClip)],n=0;n<o.length;n++)t.addClip(o[n])}e.prototype._loadResource.call(this)},t.prototype.openDialog=function(e){void 0===e&&(e=!1);var t=cc.director.getScene().getChildByName("Canvas");if(this.nodeRoot=new cc.Node,this.nodeRoot.parent=t,this.nodeRoot.zIndex=l.default.GLOBAL_ORDER_DIALOG,this.isShadowEnabled()){var o=new c.default(cc.color(0,0,0,this.getShadowOpacity()));o.setContentSize(cc.size(cc.winSize.width,cc.winSize.height+600)),o.zIndex=-1,o.parent=this.nodeRoot,o.active=!1,i.default.registerTouchHandler(o,this.onTouchLayerShadow.bind(this),!0),this.layerShadow=o}e=e||this.context.bImmediately,this.context.bImmediately=e,this.parent=this.nodeRoot},t.prototype.closeDialog=function(e,t){var n=this;void 0===e&&(e=!1),this.bClosing||(o.CUR_VIEWS[this._viewName]=!1,this.bClosing=!0,t?r.default.playFadeOut(function(){n.closeDialogEx(e)}):this.closeDialogEx(e))},t.prototype.closeDialogEx=function(e){var t=this;if(this.context.fOnDialogClose&&this.context.fOnDialogClose instanceof Function&&this.context.fOnDialogClose(),cc.isValid(this.layerShadow)&&(i.default.unregisterTouchHandler(this.layerShadow),this.layerShadow.stopActionByTag(o.ACTION_TAG_OPEN)),this.stopActionByTag(o.ACTION_TAG_OPEN),cc.isValid(this.nodeRoot))if(e)this.nodeRoot.destroy();else{this.layerShadow&&this.layerShadow.runAction(cc.fadeOut(.2)),this.runAction(cc.spawn(cc.scaleTo(.2,1.2,0).easing(cc.easeBackIn()),cc.sequence(cc.delayTime(.2*.7),cc.fadeOut(.06).easing(cc.easeOut(2)),cc.callFunc(function(){t.nodeRoot.destroy()})))).setTag(o.ACTION_TAG_CLOSE)}},t.prototype.isShadowEnabled=function(){return!0},t.prototype.getShadowOpacity=function(){return this.DEFAULT_SHADOW_OPACITY},t.prototype.isClickShadowClose=function(){return!0},t.prototype.playOpenDialogSound=function(){},t.prototype.onTouchLayerShadow=function(e){e.isClick()&&(this.bOpenCompleted?this.isClickShadowClose()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.shadow.click"}),this.closeDialog()):cc.warn("DialogBase.onTouchLayerShadow dialog is opening"))},t.GLOBAL_DIALOG_COUNT=0,t.CUR_VIEWS={},t.ACTION_TAG_OPEN=1,t.ACTION_TAG_CLOSE=2,t=o=a([d],t)}(s.default));o.default=p,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColorTwo":"LayerColorTwo","../utils/Tools":"Tools","./ViewBase":"ViewBase"}],EventTouchEx:[function(e,t,o){"use strict";cc._RF.push(t,"c5c052Cml9LpJLJJGhORhUX","EventTouchEx");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLICK_RANGE_SQ=400,t.name="",t}return n(t,e),t.prototype.isClick=function(){return!1},t.prototype.isInClickRange=function(){return!1},t=a([i],t)}(cc.Event.EventTouch));o.default=s;cc.Event.EventTouch.prototype.isClick=function(){if("ended"!=this.name&&"cancelled"!=this.name)return!1;var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc.Event.EventTouch.prototype.isInClickRange=function(){var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc._RF.pop()},{}],FSMObject:[function(e,t,o){"use strict";cc._RF.push(t,"78340ZFwntCqJb7oj6CQ375","FSMObject");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,-1),s=function(){function e(){var e;this._currentStateID=i,this._nextStateID=i,this._states=((e={})[i]={leave:null,execute:null,enter:null},e)}return e.prototype.registerState=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),null!=this._states[e]&&cc.warn("\u8b66\u544a] FSMObject.registerState state override!",e),this._states[e]={enter:t,execute:o,leave:n}},e.prototype.removeState=function(e){this._states[e]=null},e.prototype.update=function(e){if(null!=this._nextStateID){var t=this._states[this._currentStateID].leave;t&&t(),this._currentStateID=this._nextStateID,this._nextStateID=null;var o=this._states[this._currentStateID].enter;if(o&&(o(),this._nextStateID))return this.update(e)}if(this._states){var n=this._states[this._currentStateID].execute;n&&n(e)}},e.prototype.setNextState=function(e){this._nextStateID=e},e.prototype.getState=function(){return this._currentStateID},e.prototype.destroy=function(){this._states=null},e=n([r],e)}();o.FSMObject=s,cc._RF.pop()},{}],FSMSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"a2b1eJc0CRLSqpq/jnoMOnx","FSMSceneBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/FSMObject"),i=e("./SceneBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fsmObject=new r.FSMObject},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,o,n){var a=null,r=null,i=null;t&&(a=this[t])&&(a=a.bind(this)),o&&(r=this[o])&&(r=r.bind(this)),n&&(i=this[n])&&(i=i.bind(this)),this._fsmObject.registerState(e,a,r,i)},t=a([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./SceneBase":"SceneBase"}],IMCPanel:[function(e,t,o){"use strict";cc._RF.push(t,"ad7f8tLcmpFt4BRlOOhAIDi","IMCPanel"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IPoolManagerCacheableObject:[function(e,t,o){"use strict";cc._RF.push(t,"f7e8cE+m5FBIKVP1uVaqX4s","IPoolManagerCacheableObject"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IReuseLayouter:[function(e,t,o){"use strict";cc._RF.push(t,"b30d6M0rXJDLLQUbIdDTyu1","IReuseLayouter"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LabelEx:[function(e,t,o){"use strict";cc._RF.push(t,"908bcnLiJxEiIOwoZ28IPI4","LabelEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrI18n");cc.sys.isNative,cc.Label.prototype.setLocalizedString=function(e){n.default.trySetLocalizedString(this,e)},cc._RF.pop()},{"../../game/manager/mgrI18n":"mgrI18n"}],LanguageData:[function(e,t,o){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),a=null;function r(e){return cc.log("i18n.loadLanguageData",e),window.i18n.languages[e]}function i(e){cc.log("initPolyglot",e),e&&(a?a.replace(e):a=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){cc.log("i18n.init",e);var t=r(e)||{};window.i18n.curLang=e,cc.log("window.i18n.curLang",window.i18n.curLang),i(t),this.inst=a}},t:function(e,t){if(a)return a.t(e,t)},getCurLang:function(){if(window.i18n.curLang)return window.i18n.curLang},inst:a,updateSceneRenderers:function(){var e=cc.director.getScene();if(cc.isValid(e)){var t=e.children;if(cc.isValid(t)){for(var o=[],n=0;n<t.length;++n){var a=t[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(o,a)}for(var r=0;r<o.length;++r){var i=o[r];i.node.active&&i.updateLabel()}for(var s=[],l=0;l<t.length;++l){var c=t[l].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,c)}for(var u=0;u<s.length;++u){var d=s[u];d.node.active&&d.updateSprite(window.i18n.curLang)}for(var p=[],f=0;f<t.length;++f){var h=t[f].getComponentsInChildren("LocalizedSpriteFixedUrl");Array.prototype.push.apply(p,h)}for(var g=0;g<p.length;++g){var _=p[g];_.node.active&&_.updateSprite(window.i18n.curLang)}}}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LayerColorTwo:[function(e,t,o){"use strict";cc._RF.push(t,"5a4ef30JZxCDpzBUNKVzhEP","LayerColorTwo");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t){var o=e.call(this)||this,n=new cc.Node;n.parent=o;var a=t.getA();t.setA(255),n.color=t,n.opacity=a,t.setA(a),o.nodeSprite=n;var r=n.addComponent(cc.Sprite);r.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.loadSpriteFrame("2d/default/white_dot");var i=n.getContentSize();return n.setContentSize(i),o}return n(t,e),t.prototype.setContentSize=function(t,o){e.prototype.setContentSize.call(this,t,o),this.nodeSprite.setContentSize(t,o)},t.prototype.setAnchorPoint=function(t,o){e.prototype.setAnchorPoint.call(this,t,o),this.nodeSprite.setAnchorPoint(t,o)},Object.defineProperty(t.prototype,"color",{set:function(e){this._color=e,this.nodeSprite.color=e},enumerable:!0,configurable:!0}),t}(cc.Node);o.default=a,cc._RF.pop()},{}],LayerColor:[function(e,t,o){"use strict";cc._RF.push(t,"a65ca9ajVRIGZIbrLcFxXCM","LayerColor");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(o){var n=e.call(this)||this;n.color=cc.color(o.getR(),o.getG(),o.getB()),n.opacity=o.getA();var a=n.addComponent(cc.Sprite);return a.sizeMode=cc.Sprite.SizeMode.CUSTOM,a.type=cc.Sprite.Type.SIMPLE,a.loadSpriteFrame(t.whiteDotTextureUrl),n}return n(t,e),t.setWhiteDotTextureUrl=function(e){this.whiteDotTextureUrl=e},t.whiteDotTextureUrl="",t}(cc.Node);o.default=a,cc._RF.pop()},{}],LifeCycleMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"20ed8Gu2q1A3quCZsuyhsNt","LifeCycleMonitor");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnLoad=null,t.fStart=null,t.fUpdate=null,t.fOnDestroy=null,t}return n(t,e),t.prototype.onLoad=function(){this.fOnLoad&&this.fOnLoad()},t.prototype.start=function(){this.fStart&&this.fStart()},t.prototype.update=function(e){this.fUpdate&&this.fUpdate(e)},t.prototype.onDestroy=function(){this.fOnDestroy&&this.fOnDestroy()},t.prototype.setOnLoadCallback=function(e){this.fOnLoad=e},t.prototype.setUpdateCallback=function(e){this.fUpdate=e},t.prototype.setStartCallback=function(e){this.fStart=e},t.prototype.setOnDestroyCallback=function(e){this.fOnDestroy=e},t=a([i],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],LocalizedLabel:[function(e,t,o){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSpriteFixedUrl:[function(e,t,o){"use strict";cc._RF.push(t,"0b17ckSUTFB5I1NkLthMfVL","LocalizedSpriteFixedUrl");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSpriteFixedUrl"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateSprite())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite()},updateSprite:function(){if(this.sprite){var e=n.getCurLang();if(e){var t=this._dataID,o="i18n/"+e+"/"+t.replace(".","/");if(t&&o)this.sprite.loadSpriteFrame(o);else this.sprite.spriteFrame=null}}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,o){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MCConsts:[function(e,t,o){"use strict";cc._RF.push(t,"59da1GvC6lFgqPwqbY2jOIK","MCConsts"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.COP_CITY_ID_2_NAME={"":"\u5173\u95ed\u57ce\u5e02\u6a21\u62df"},e}();o.default=n,cc._RF.pop()},{}],MCItem:[function(e,t,o){"use strict";cc._RF.push(t,"998dc5/R0BL07Pw9RBhJ5/M","MCItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.initByData=function(e){this.type=e.type,this.type=e.type||"newLine",this.name=e.name||"",this.text=e.text||"",this.width=e.width||0,this.height=e.height||0,this.fOnClick=e.onClick,this.fOnTextChanged=e.onTextChanged},e.prototype.setText=function(e){this.text=e,this.fOnTextChanged instanceof Function&&this.fOnTextChanged(e)},e.prototype.triggerOnClick=function(){this.fOnClick instanceof Function&&this.fOnClick()},e}();o.default=n,cc._RF.pop()},{}],MCPanelCreator:[function(e,t,o){"use strict";cc._RF.push(t,"88159Kkhn5MMqSIiluYIXc8","MCPanelCreator");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MCItem"),r=e("../utils/ULTools"),i=e("../utils/ULTimer"),s=window.cc,l=function(){function e(){this.nodeReferenceRects={}}return e.prototype.getNodeCanvas=function(){if(!s)return ULSDK.console.warn("MCPanelCreator.getNodeCanvas \u672a\u68c0\u6d4b\u5230creator\u73af\u5883\uff01"),null;var e=s.director.getScene();if(!e)return ULSDK.console.warn("MCPanelCreator.getNodeCanvas scene not found!"),null;var t=e.getChildByName("Canvas");return t||(ULSDK.console.warn("MCPanelCreator.getNodeCanvas nodeCanvas not found!"),null)},e.prototype.addFillerSprite=function(e,t){var o=e.getContentSize(),n=e.addComponent(s.Sprite);n.sizeMode=s.Sprite.SizeMode.CUSTOM,n.type=s.Sprite.Type.SIMPLE,s.loader.loadRes("_ulsdk_ui/white_dot",s.SpriteFrame,function(t,a){t?ULSDK.console.warn("MCPanelCreator.addFillerSprite err!",t):(n.spriteFrame=a,e.setContentSize(o))}),e.color=t,e.opacity=t.getA()},e.prototype.registerTouchHandler=function(e,t,o,n,a){void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===a&&(a=!1);var r=e;if(r&&t){r.on(s.Node.EventType.TOUCH_START,function(e){var a=e.getID()||0;return!(!o&&null!=r.__touch_id||(e.name="began",n&&e.stopPropagation(),r.__touch_id=a,t(e),0))},null,a),r.on(s.Node.EventType.TOUCH_MOVE,function(e){var n=e.getID()||0;(o||n==r.__touch_id)&&(e.name="moved",t(e))},null,a),r.on(s.Node.EventType.TOUCH_END,function(e){var n=e.getID()||0;(o||n==r.__touch_id)&&(e.name="ended",r.__touch_id=null,t(e))},null,a),r.on(s.Node.EventType.TOUCH_CANCEL,function(e){var n=e.getID()||0;(o||n==r.__touch_id)&&(e.name="cancelled",r.__touch_id=null,t(e))},null,a)}},e.prototype.isTouchEventClick=function(e){if("ended"!=e.name&&"cancelled"!=e.name)return!1;var t=e.getStartLocation(),o=e.getLocation(),n=t.x-o.x,a=t.y-o.y;return n*n+a*a<=400},e.prototype.createItemByData=function(e){var t=this,o=new a.default;o.initByData(e);var n=this.nodeContainer;switch(e.type){case"label":var r=new s.Node;r.parent=n,r.setAnchorPoint(.5,.5),r.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=r.width,o.height=r.height,t.onItemNodeResize()}),r.addComponent(s.Label).string=o.text,r.getComponent(s.Label).fontSize=20,r.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,r.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,o.renderNode=r;break;case"labelArea":var i=new s.Node;i.parent=n,i.setAnchorPoint(.5,.5),i.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=i.width,o.height=i.height,t.onItemNodeResize()}),i.addComponent(s.Label).string=o.text,i.getComponent(s.Label).fontSize=20,i.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,i.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,i.getComponent(s.Label).overflow=s.Label.Overflow.RESIZE_HEIGHT,i.width=n.width-20,i.height=20,o.renderNode=i;break;case"button":var l=new s.Node;l.parent=n,l.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=l.width,o.height=l.height,t.onItemNodeResize()}),l.width=o.width||150,l.height=o.height||40,(u=new s.Node).parent=l,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(200,200,200,255));var c=new s.Node;c.parent=l,c.setAnchorPoint(.5,.5),c.addComponent(s.Label).string=o.text,c.getComponent(s.Label).fontSize=20,c.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,c.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,c.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,c.width=l.width,c.height=l.height,c.color=s.Color.BLACK,this.registerTouchHandler(l,function(e){switch(e.name){case"began":c.color=s.Color.GREEN;break;case"moved":break;default:c.color=s.Color.BLACK}t.isTouchEventClick(e)&&o.triggerOnClick()}),o.renderNode=l;break;case"inputBox":var u,d=new s.Node;d.parent=n,d.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=d.width,o.height=d.height,t.onItemNodeResize()}),d.width=o.width||150,d.height=o.height||40,(u=new s.Node).parent=d,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(200,200,200,255));var p=d.addComponent(s.EditBox);p.fontSize=20,p.fontColor=s.Color.BLACK,p.lineHeight=d.height,p.inputMode=s.EditBox.InputMode.SINGLE_LINE,p.maxLength=1024,p.placeholder="<<\u8f93\u5165\u6846>>",p.placeholderFontSize=20,p.placeholderFontColor=s.Color.GRAY;for(var f=d.getComponentsInChildren(s.Label),h=0;h<f.length;h++){f[h].verticalAlign=s.Label.VerticalAlign.CENTER}p.node.on("text-changed",function(){var e=p.string;o.setText(e)}),o.renderNode=d;break;case"newLine":o.width=n.width-20,o.height=20}return o},e.prototype.doLayout=function(){if(this.items){for(var e=this.nodePanel.width-20,t=[],o=10,n=-10,a=0,r=0;r<this.items.length;r++){var i=this.items[r],s=i.renderNode||{x:0,y:0};if(o+i.width>e){o=0;for(var l=0;l<t.length;l++){(t[l].renderNode||{x:0,y:0}).y=n-a/2}o=10,n-=a+4,t=[],a=0}a=Math.max(a,i.height),t.push(i),s.x=o+i.width/2,o+=i.width+4}for(r=0;r<t.length;r++){(s=t[r].renderNode||{x:0,y:0}).y=n-a/2}n-=a-10,this.nodeContainer.height=Math.max(this.nodePanel.height,-n)}},e.prototype.onItemNodeResize=function(){this.doLayout()},e.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++){var o=this.items[t];if(o.name==e)return o}return null},e.prototype.show=function(e){var t=this,o=this.getNodeCanvas();if(o){var n=new s.Node;n.parent=o,n.setContentSize(o.getContentSize()),n.zIndex=s.macro.MAX_ZINDEX,this.nodePanel=n;var a=new s.Node;a.parent=n,a.setContentSize(a.parent.getContentSize()),this.addFillerSprite(a,s.color(0,0,0,191)),this.registerTouchHandler(this.nodePanel,function(e){t.isTouchEventClick(e)});var r=new s.Node;r.setAnchorPoint(0,1),r.parent=this.nodePanel,r.setContentSize(o.getContentSize()),this.nodeContainer=r;var i=this.nodePanel.addComponent(s.ScrollView);i.horizontal=!1,i.vertical=!0,i.content=r,i.cancelInnerEvents=!1,i.elastic=!0;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=this.createItemByData(u);l.push(d)}this.items=l,this.doLayout()}},e.prototype.close=function(){s.isValid(this.nodePanel)&&this.nodePanel.destroy(),this.nodePanel=null,this.items=[]},e.prototype.getItemText=function(e){var t=this.getItemByName(e);return t?t.text:""},e.prototype.setItemText=function(e,t){var o=this.getItemByName(e);if(o){o.setText(t);var n=o.renderNode;if(n instanceof s.Node){var a=n.getComponent(s.Label)||n.getComponentInChildren(s.Label);a&&(a.string=t);var r=n.getComponent(s.EditBox)||n.getComponentInChildren(s.EditBox);r&&(r.string=t)}}},e.prototype.showMsgTip=function(e){var t=this.getNodeCanvas();if(t){var o=new s.Node;o.parent=t,o.width=t.width,o.height=20,o.zIndex=s.macro.MAX_ZINDEX;var n=o.addComponent(s.Label);n.string=e,n.fontSize=20,n.enableWrapText=!0,o.x=0,o.y=.25*t.height,o.runAction(s.sequence(s.moveBy(1.5,0,50),s.callFunc(function(){o.destroy()})))}},e.prototype.showPickerDialog=function(e,t,o,n){var a=this,i=this.getNodeCanvas();if(i){var l=r.default.scaleInRange(t.length,8.5,17.5,430,826),c=new s.Node;c.parent=i,c.setContentSize(i.getContentSize()),c.zIndex=s.macro.MAX_ZINDEX,this.registerTouchHandler(c,function(e){a.isTouchEventClick(e)&&c.destroy()});var u=new s.Node;u.parent=c,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(0,0,0,127));var d=new s.Node;d.parent=c,d.width=i.width-100,d.height=l,this.registerTouchHandler(d,function(e){}),(u=new s.Node).parent=d,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(167,167,167,255));var p=new s.Node;p.parent=d,p.y=d.height/2-25,p.x=0,p.addComponent(s.Label).string=e,p.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,p.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,p.getComponent(s.Label).fontSize=40,p.width=d.width-10,p.height=40;var f=new s.Node;f.parent=d,f.width=d.width-10,f.height=d.height-50,f.x=0,f.y=-d.height/2+f.height/2+5,this.addFillerSprite(f,s.color(97,97,97,255));var h=new s.Node;h.parent=d,h.width=d.width-10,h.height=d.height-50,h.x=0,h.y=-d.height/2+h.height/2+5,h.addComponent(s.Mask);var g=new s.Node;g.setAnchorPoint(0,1),g.parent=h,g.setContentSize(h.getContentSize());var _=h.addComponent(s.ScrollView);_.horizontal=!1,_.vertical=!0,_.content=g,_.cancelInnerEvents=!1,_.elastic=!0;for(var m=0,v=function(e){var r=t[e],i=new s.Node;i.parent=g,i.width=h.width,i.height=40,i.x=g.width/2,i.y=m-i.height/2;var l=new s.Node;l.parent=i,l.setContentSize(l.parent.getContentSize()),y.addFillerSprite(l,s.color(0,0,0,63));var u=new s.Node;u.parent=i,u.setAnchorPoint(0,.5),u.x=-i.width/2+5,u.y=0;var d=u.addComponent(s.Label);d.fontSize=20,d.lineHeight=20,d.verticalAlign=s.Label.VerticalAlign.CENTER,d.horizontalAlign=s.Label.HorizontalAlign.LEFT,d.string=r.text,y.registerTouchHandler(i,function(e){a.isTouchEventClick(e)&&(o(r.value),n||c.destroy())}),m-=i.height+4},y=this,C=0;C<t.length;C++)v(C);g.height=Math.max(h.height,-m)}},e.prototype.showPromptDialog=function(e,t,o,n){var a=this,r=this.getNodeCanvas();if(!r)return ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeCanvas not found!"),void i.default.callLater(.1,function(){a.showPromptDialog(e,t,o,n)});var l=new s.Node;l.parent=r,l.setContentSize(r.getContentSize()),l.zIndex=s.macro.MAX_ZINDEX,this.registerTouchHandler(l,function(e){a.isTouchEventClick(e)&&ULSDK.console.log("click bg")});var c=new s.Node;c.parent=l,c.setContentSize(c.parent.getContentSize()),this.addFillerSprite(c,s.color(0,0,0,127));var u=!1,d=new s.Node;d.parent=l,d.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showPromptDialog triggerNode onDestroy",u),u||(ULSDK.console.log("MCPanelCreator.showPromptDialog nodeShadow\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(.1,function(){a.showPromptDialog(e,t,o,n)}))};var p=new s.Node;p.parent=l,p.width=460,p.height=320,this.registerTouchHandler(p,function(e){});var f=new s.Node;f.parent=p,f.setContentSize(f.parent.getContentSize()),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeDialogBg load sprite error",e);else{var o=f.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var a=f.addComponent(s.Sprite);a.spriteFrame=t,a.type=s.Sprite.Type.SLICED,a.sizeMode=s.Sprite.SizeMode.CUSTOM,f.setContentSize(o)}});var h=new s.Node;h.parent=p,h.y=p.height/2-45,h.x=0,h.color=s.color(38,38,38,255),h.addComponent(s.Label).string=e||"\u6807\u9898",h.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,h.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,h.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,h.getComponent(s.Label).fontSize=32,h.width=p.width-10,h.height=40;var g=new s.Node;g.parent=p,g.y=p.height/2-155,g.x=0,g.color=s.color(96,96,96,255),g.addComponent(s.Label).string=t||"\u5185\u5bb9",g.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,g.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,g.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,g.getComponent(s.Label).fontSize=24,g.width=p.width-50,g.height=160;for(var _=-(160*o.length+30*(o.length-1))/2,m=[],v=function(e){var t=o[e],r=new s.Node;r.parent=p,r.x=_+160*(e+.5)+30*e,r.y=-p.height/2+50,r.setContentSize(160,56),m.push(r);var i=new s.Node;i.parent=r,i.setContentSize(r.getContentSize()),s.loader.loadRes("_ulsdk_ui/btn_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeButtonBg load sprite error",e);else{var o=i.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var a=i.addComponent(s.Sprite);a.spriteFrame=t,a.type=s.Sprite.Type.SLICED,a.sizeMode=s.Sprite.SizeMode.CUSTOM,i.setContentSize(o)}});var c=new s.Node;c.parent=r,c.y=0,c.x=0,c.color=s.color(255,255,255,255),c.addComponent(s.Label).string=t||"\u6309\u94ae"+(e+1),c.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,c.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,c.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,c.getComponent(s.Label).fontSize=30,c.width=i.width-10,c.height=i.height-10,y.registerTouchHandler(r,function(t){if("began"==t.name?r.scale=1.1:"moved"==t.name||(r.scale=1),a.isTouchEventClick(t)){var o=n[e];if(o instanceof Function)o()||(u=!0,l.destroy());else u=!0,l.destroy()}})},y=this,C=0;C<o.length;C++)v(C)},e.prototype.showWebView=function(e,t){var o=this;this.closeWebView();var n=this.getNodeCanvas();if(n){var a=new s.Node;a.parent=n,a.setContentSize(2048,2048),a.zIndex=s.macro.MAX_ZINDEX,this.showWebViewNode=a;var i=new s.Node;i.parent=a,i.setContentSize(a.getContentSize()),this.addFillerSprite(i,s.color(0,0,0,127)),this.registerTouchHandler(i,function(e){o.isTouchEventClick(e)&&o.closeWebView()});var l=new s.Node;l.parent=a;var c=Math.min(.8*n.width,500),u=Math.min(.8*n.height,800);n.width>n.height&&(c=Math.min(.8*n.width,800),u=Math.min(.8*n.height,500)),l.setContentSize(c,u),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeDialogBg load sprite error",e);else{var o=l.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var a=l.addComponent(s.Sprite);a.spriteFrame=t,a.type=s.Sprite.Type.SLICED,a.sizeMode=s.Sprite.SizeMode.CUSTOM,l.setContentSize(o)}});var d=new s.Node;d.parent=l,d.color=s.color(38,38,38,255),d.addComponent(s.Label).string=e,d.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,d.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,d.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,d.getComponent(s.Label).fontSize=32,d.width=c-10,d.height=40,d.y=u/2-40,d.x=0;var p=new s.Node;p.parent=l,p.setContentSize(c-50,u-80),p.x=0,p.y=-20;var f=p.addComponent(s.ScrollView);f.horizontal=!1,f.vertical=!0,f.cancelInnerEvents=!1,f.elastic=!0;var h=new s.Node;h.parent=p,h.setContentSize(p.getContentSize()),h.addComponent(s.Mask).type=s.Mask.Type.RECT,h.getComponent(s.Mask).inverted=!1;var g=new s.Node;g.parent=h,g.setAnchorPoint(.5,1),g.setContentSize(p.getContentSize()),g.addComponent(s.Layout).resizeMode=s.Layout.ResizeMode.CONTAINER,f.content=g,r.default.httpGet({url:t,timeoutMillisecond:5e3,success:function(e){var t=JSON.parse(e).policyText;ULSDK.console.log("content:",t);var o=new s.Node;o.color=s.color(0,0,0,255),o.parent=g,o.setAnchorPoint(.5,1),o.addComponent(s.Label).string=t,o.getComponent(s.Label).overflow=s.Label.Overflow.RESIZE_HEIGHT,o.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.TOP,o.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,o.getComponent(s.Label).fontSize=18,o.getComponent(s.Label).lineHeight=26,o.setContentSize(g.getContentSize())},fail:function(){}})}},e.prototype.closeWebView=function(){s.isValid(this.showWebViewNode)&&(this.showWebViewNode.__b_manual_destroy=!0,this.showWebViewNode.destroy()),this.showWebViewNode=null},e.prototype.showPrivacyDialog=function(e,t,o,a){var r=this;if(ULSDK.console.log("MCPanelCreator.showPrivacyDialog"),!this.showPrivacyNode){var l=this.getNodeCanvas();if(!l)return ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeCanvas not found!"),void i.default.callLater(.1,function(){r.showPrivacyDialog(e,t,o,a)});var c=new s.Node;c.parent=l,c.setContentSize(2048,2048),c.zIndex=s.macro.MAX_ZINDEX,this.showPrivacyNode=c;var u=new s.Node;u.parent=c,u.setContentSize(c.getContentSize()),this.addFillerSprite(u,s.color(0,0,0,127)),this.registerTouchHandler(u,function(e){r.isTouchEventClick(e)&&ULSDK.console.log("click bg")});var d=!1,p=new s.Node;p.parent=u,p.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showPrivacyDialog triggerNode onDestroy",d),r.showPrivacyNode=null,d||(ULSDK.console.log("MCPanelCreator.showPrivacyDialog nodeShadow\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(1/60,function(){ULSDK.console.log("ontimer"),r.showPrivacyDialog(e,t,o,a)}))};var f=new s.Node;f.parent=c;f.setContentSize(400,400),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeDialogBg load sprite error",e);else{var o=f.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var a=f.addComponent(s.Sprite);a.spriteFrame=t,a.type=s.Sprite.Type.SLICED,a.sizeMode=s.Sprite.SizeMode.CUSTOM,f.setContentSize(o)}});var h=new s.Node;h.parent=f,h.color=s.color(0,0,0,255),h.addComponent(s.Label).string="\u9690\u79c1\u653f\u7b56",h.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,h.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,h.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,h.getComponent(s.Label).fontSize=32,h.width=390,h.height=40,h.y=160,h.x=0;var g=new s.Node;g.parent=f,g.setContentSize(350,260),g.x=0,g.y=3;var _=g.addComponent(s.ScrollView);_.horizontal=!1,_.vertical=!0,_.cancelInnerEvents=!1,_.elastic=!0;var m=new s.Node;m.parent=g,m.setContentSize(g.getContentSize()),m.addComponent(s.Mask).type=s.Mask.Type.RECT,m.getComponent(s.Mask).inverted=!1;var v=new s.Node;v.parent=m,v.setAnchorPoint(.5,1),v.setContentSize(g.getContentSize()),v.addComponent(s.Layout).resizeMode=s.Layout.ResizeMode.CONTAINER,_.content=v;for(var y=this,C="\u611f\u8c22\u60a8\u5bf9\u672c\u516c\u53f8\u6e38\u620f\u7684\u652f\u6301\uff0c\u5728\u4f53\u9a8c\u6211\u4eec\u7684\u6e38\u620f\u524d\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u5f00\u53d1\u5546\u7684",b={},S=0;S<t.length;S++){var R=t[S],T=R.name||"",L=R.url||"";b[T]=L,S>0&&(C+="\u3001"),C+='<color=#6495ED><outline color=#ffffff width=2><on click="onUserProtocolClicked" param="'+T+'">\u300a'+T+"\u300b</on></outline></color>"}C+="\u4e2d\u7684\u6240\u6709\u6761\u6b3e\uff0c\u5305\u62ec\n        1.\u4e3a\u4e86\u60a8\u6709\u826f\u597d\u7684\u6e38\u620f\u4f53\u9a8c\uff0c\u6211\u4eec\u4f1a\u57fa\u4e8e\u5177\u4f53\u7684\u573a\u666f\u6536\u96c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        2.\u6211\u4eec\u4f1a\u57fa\u4e8e\u5148\u8fdb\u7684\u6280\u672f\u548c\u7ba1\u7406\u63aa\u65bd\u4fdd\u8bc1\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\n        3.\u57fa\u4e8e\u60a8\u7684\u6388\u6743\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u4ee5\u4e0b\u6743\u9650\n\u8bbe\u5907\u4fe1\u606f\uff1a\u5305\u62ec\u8bbe\u5907\u6807\u8bc6\u7b26\u3001MAC\u3001\u673a\u578b\u3001\u54c1\u724c\u3001App\u5305\u540d\u3001App\u7248\u672c\u53f7\u3001IP\u5730\u5740\u3001\u8bbe\u5907\u5206\u8fa8\u7387\u53ca\u50cf\u7d20\u5bc6\u5ea6\u3002\n\u7f51\u7edc\u4fe1\u606f\uff1a\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3001\u63a5\u5165\u7f51\u7edc\u7684\u65b9\u5f0f\u548c\u7c7b\u578b\u3001IP\u5730\u5740\u3002\n\u4f7f\u7528\u4fe1\u606f\uff1a\u5305\u62ec\u5e7f\u544a\u5185\u5bb9\u7684\u5c55\u73b0\u3001\u70b9\u51fb\u3001\u4e0b\u8f7d\u3002\n        \u5982\u679c\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee,\u8bf7\u901a\u8fc7kefu@ultralisk.cn\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        ";var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onUserProtocolClicked=function(e,t){y.showWebView(t,b[t]||"")},t}(s.RichText),A=new s.Node;A.color=s.color(0,0,0,255),A.parent=v,A.setAnchorPoint(.5,1),A.addComponent(w).string=C,A.getComponent(w).maxWidth=344,A.getComponent(w).fontSize=18,A.getComponent(w).lineHeight=26,A.setContentSize(v.getContentSize());var D=(f.width-20)/o.length,I=function(e){var t=o[e],n=new s.Node;n.parent=f,n.width=Math.min(.8*D,120),n.height=40,n.x=-(o.length/2-e)*D+D/2,n.y=(n.height-f.height)/2+20;var i=new s.Node;i.parent=n,i.addComponent(s.Label).string=t,i.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,i.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,i.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,i.getComponent(s.Label).fontSize=22,i.width=n.width,i.height=n.height,1==o.length||e%2==1?(k.addFillerSprite(n,s.color(100,149,237,255)),i.color=s.color(255,255,255,255)):(k.addFillerSprite(n,s.color(230,230,230,255)),i.color=s.color(156,176,222,255),i.addComponent(s.LabelOutline),i.getComponent(s.LabelOutline),i.getComponent(s.LabelOutline).width=1,i.getComponent(s.LabelOutline).color=s.color(230,230,230,255)),k.registerTouchHandler(i,function(t){if(r.isTouchEventClick(t)){var o=a[e];if(o instanceof Function)o()||(d=!0,r.showPrivacyNode.destroy(),r.showPrivacyNode=null);else d=!0,r.showPrivacyNode.destroy(),r.showPrivacyNode=null}})},k=this;for(S=0;S<o.length;S++)I(S)}},e.prototype.getCanvasSize=function(){var e=this.getNodeCanvas();return{width:e.width,height:e.height}},e.prototype.getCanvasOriginSize=function(){var e=0,t=0,o=this.getNodeCanvas(),n=(o.getComponent(s.Canvas),s.view.getFrameSize()),a=n.width/n.height,r=o.width/o.height;return e=o.width,t=o.height,a<r?t=Math.floor(t*r/a):e=Math.floor(e*a/r),{width:e,height:t}},e.prototype.showReferenceRect=function(e,t,o,n,a,r,l){var c=this;ULSDK.console.log("MCPanelCreator.showReferenceRect",e,t,o,n,a);var u=s.view.getFrameSize(),d=t*u.width,p=u.height-o*u.height;ULSDK.console.log("  center",d,p);var f=this.getNodeCanvas(),h=this.getCanvasSize(),g=this.getCanvasOriginSize(),_=d/u.width*g.width-(g.width-h.width)/2,m=g.height-p/u.height*g.height-(g.height-h.height)/2,v=f.convertToNodeSpaceAR(s.v2(_,m));ULSDK.console.log("  pInWorld",v),this.hideReferenceRect(e),s.loader.loadRes("_ulsdk_ui/white_dot",s.SpriteFrame,function(u,d){var p=new s.Node;p.parent=f,p.addComponent(s.Sprite).spriteFrame=d,p.setAnchorPoint(null==r?.5:r,null==l?.5:l),p.color=s.color(0,0,0,127),p.opacity=127,p.position=v,p.width=n,p.height=a,p.zIndex=s.macro.MAX_ZINDEX;var h=new s.Node;h.parent=p;var g=h.addComponent(s.Label);g.string=e,g.fontSize=18,g.verticalAlign=s.Label.VerticalAlign.CENTER,g.horizontalAlign=s.Label.HorizontalAlign.CENTER;var _=h.addComponent(s.Widget);_.isAlignVerticalCenter=!0,_.isAlignHorizontalCenter=!0,c.nodeReferenceRects[e]=p,p.__b_manual_destroy=!1;var m=new s.Node;m.parent=p,m.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showReferenceRect triggerNode onDestroy",p.__b_manual_destroy),p.__b_manual_destroy||(ULSDK.console.log("MCPanelCreator.showReferenceRect nodeRect\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(.1,function(){c.showReferenceRect(e,t,o,n,a)}))}})},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,a,r,i){ULSDK.console.log("MCPanelCreator.showReferenceRectFromViewPoint",e,t,o,n,a);var l=s.view.getFrameSize(),c=t/l.width,u=1-o/l.height;this.showReferenceRect(e,c,u,n,a,r,i)},e.prototype.hideReferenceRect=function(e){ULSDK.console.log("MCPanelCreator.hideReferenceRect",e);var t=this.nodeReferenceRects[e];s.isValid(t)&&(t.__b_manual_destroy=!0,t.destroy(),t=null,delete this.nodeReferenceRects[e])},e.prototype.hideAllReferenceRects=function(){var e=this;ULSDK.console.log("MCPanelCreator.hideAllReferenceRects"),r.default.forEachMap(this.nodeReferenceRects,function(t,o){e.hideReferenceRect(t)})},e}();o.default=l,cc._RF.pop()},{"../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./MCItem":"MCItem"}],MCPanelLaya:[function(e,t,o){"use strict";cc._RF.push(t,"57c4ftc4DhObpYUHGQ3z+3A","MCPanelLaya");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MCItem"),r=e("../utils/ULTools"),i=e("../utils/ULTimer"),s=e("../ULConsts"),l=20,c=function(){function e(){this.nodeReferenceRects={}}return e.prototype.getRootNode=function(){return Laya.stage.getChildByName("__ulsdk_ui_node_root__")},e.prototype.registerTouchHander=function(e,t){var o,n;e.on(Laya.Event.MOUSE_DOWN,e,function(a){e.__b_touch=!0,o=a.stageX,n=a.stageY,t({name:"began",pos:{x:a.stageX,y:a.stageY}})}),e.on(Laya.Event.MOUSE_UP,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"ended",pos:{x:o.stageX,y:o.stageY}}))}),e.on(Laya.Event.MOUSE_MOVE,e,function(o){1==e.__b_touch&&t({name:"moved",pos:{x:o.stageX,y:o.stageY}})}),e.on(Laya.Event.MOUSE_OUT,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"cancelled",pos:{x:o.stageX,y:o.stageY}}))}),e.on(Laya.Event.CLICK,e,function(e){if(e.stopPropagation(),null!=o&&null!=n){var a=e.stageX-o,r=e.stageY-n;if(a*a+r*r>=400)return}t({name:"click",pos:{x:e.stageX,y:e.stageY}})})},e.prototype.createItemByData=function(e){var t=new a.default;t.initByData(e);var o=this.nodeContainer;switch(s.default.B_INNER_DEBUG&&ULSDK.console.log("createItemByData",e),e.type){case"label":(n=o.addChild(new Laya.Label)).fontSize=l,n.align="left",n.color="#ffffff",n.text=t.text,s.default.B_INNER_DEBUG&&ULSDK.console.log("createLabel",n.width,n.height),t.width=n.width,t.height=n.height,t.renderNode=n;break;case"labelArea":var n;(n=o.addChild(new Laya.Label)).width=o.width-20,n.wordWrap=!0,n.fontSize=l,n.align="left",n.color="#ffffff",n.text=t.text,s.default.B_INNER_DEBUG&&ULSDK.console.log("createLabel",n.width,n.height),t.width=n.width,t.height=n.height,t.renderNode=n;break;case"button":(i=o.addChild(new Laya.Sprite)).size(150,40),i.graphics.drawRect(0,0,150,40,"#c8c8c8ff");var r=i.addChild(new Laya.Label);r.fontSize=l,r.color="#000000",r.align="center",r.text=t.text,r.pos(75-r.width/2,20-r.height/2),this.registerTouchHander(i,function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("onTouch button",t.text,e.name),"began"==e.name?(r.color="#00ff00",r._tf.isChanged=!0):"moved"==e.name||(r.color="#000000",r._tf.isChanged=!0),s.default.B_INNER_DEBUG&&ULSDK.console.log("  label.color",r.color),"click"==e.name&&t.triggerOnClick()}),t.width=i.width,t.height=i.height,t.renderNode=i;break;case"inputBox":var i;(i=o.addChild(new Laya.Sprite)).size(t.width||150,t.height||40),i.graphics.drawRect(0,0,150,40,"#c8c8c8ff");var c=i.addChild(new Laya.TextInput);c.size(i.width-4,i.height),c.pos(2,0),c.fontSize=l,c.color="#000000",c.align="left",c.on("keyup",this,function(e){t.setText(c.text)}),i.textInput=c,t.width=i.width,t.height=i.height,t.renderNode=i;break;case"newLine":t.width=o.width-20,t.height=20}return t},e.prototype.doLayout=function(){if(this.items){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelCreator.doLayout"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  items",this.items);for(var e=this.nodePanel.width-20,t=[],o=10,n=10,a=0,r=0;r<this.items.length;r++){var i=this.items[r],l=i.renderNode||{x:0,y:0};if(o+i.width>e){o=0,s.default.B_INNER_DEBUG&&ULSDK.console.log("\u6e05\u7a7a\u4e00\u884c"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  rowHeight",a);for(var c=0;c<t.length;c++){var u=t[c].renderNode||{x:0,y:0};u.y=n+a/2-u.height/2,s.default.B_INNER_DEBUG&&ULSDK.console.log("  set y",c,u.y)}o=10,n+=a+4,t=[],a=0}a=Math.max(a,i.height),t.push(i),l.x=o,o+=i.width+4}for(r=0;r<t.length;r++){(l=t[r].renderNode||{x:0,y:0}).y=n}n+=a+10,s.default.B_INNER_DEBUG&&ULSDK.console.log("finish"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  rowTop",n),this.nodeContainer.height=Math.max(this.nodePanel.height,n)}},e.prototype.onItemNodeResize=function(){this.doLayout()},e.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++){var o=this.items[t];if(o.name==e)return o}return null},e.prototype.show=function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.show",e);var t=this.getRootNode();if(t){var o=Laya.stage.width,n=Laya.stage.height,a=t.addChild(new Laya.Sprite);a.size(o,n),a.pos(-o/2,-n/2),this.nodePanel=a;var r=a.addChild(new Laya.Sprite);r.size(o,n),r.graphics.drawRect(0,0,o,n,"#000000BF",null,null),this.registerTouchHander(r,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click spriteBg")});var i=a.addChild(new Laya.Panel);i.size(o,n),this.registerTouchHander(i,function(e){if("began"==e.name)i._downX=i.x,i._downY=i.y,i._downTouchX=e.pos.x,i._downTouchY=e.pos.y;else if("moved"==e.name){var t=e.pos.x-i._downTouchX,o=e.pos.y-i._downTouchY,n=i._downY+o;n=Math.min(0,n),s.default.B_INNER_DEBUG&&ULSDK.console.log("move",t,o,n),i.y=n}}),this.nodeContainer=i;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=this.createItemByData(u);l.push(d)}this.items=l,this.doLayout()}},e.prototype.close=function(){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.close"),this.nodePanel&&this.nodePanel.destroy(),this.nodePanel=null,this.items=[]},e.prototype.showPickerDialog=function(e,t,o,a){var i=this.getRootNode();if(i){var c=Laya.stage.width,u=Laya.stage.height,d=r.default.scaleInRange(t.length,8.5,17.5,430,826),p=i.addChild(new Laya.Sprite);p.size(c,u),p.pos(-c/2,-u/2),p.graphics.drawRect(0,0,c,u,"#00000080"),this.registerTouchHander(p,function(e){"click"==e.name&&(s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow"),p.destroy())});var f=p.addChild(new Laya.Sprite);f.size(c-100,d),f.pos(c/2-f.width/2,u/2-f.height/2),f.graphics.drawRect(0,0,f.width,f.height,"#a7a7a7ff"),this.registerTouchHander(f,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeDialog")});var h=f.addChild(new Laya.Label);h.fontSize=36,h.align="left",h.pos(5,10),h.text=e||"\u6807\u9898";var g=f.addChild(new Laya.Sprite);g.size(f.width-10,f.height-55),g.pos(5,50),g.graphics.drawRect(0,0,g.width,g.height,"#616161ff");var _=g.width,m=40,v=this,y=function(e){function t(){var t=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",t),t.size(_,m),t.graphics.drawRect(0,0,_,m,"#0000003f");var n=t.addChild(new Laya.Label);return n.fontSize=l,n.align="left",n.color="#ffffff",n.text="\u6587\u5b57",n.pos(5,m/2-n.height/2),v.registerTouchHander(t,function(e){"click"==e.name&&(o(t.data.value),a||p.destroy())}),t.label=n,t}return n(t,e),t.prototype.fillData=function(e){this.label.text=e.text,this.label.y=m/2-this.label.height/2,this.data=e},t}(Laya.Box),C=g.addChild(new Laya.List);C.itemRender=y,C.vScrollBarSkin="",C.spaceY=4,C.array=t,C.pos(0,0),C.size(g.width,g.height),C.selectEnable=!0,C.selectHandler=new Laya.Handler(this,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)}),C.renderHandler=new Laya.Handler(this,function(e,t){s.default.B_INNER_DEBUG&&ULSDK.console.log("renderHandler",e,t),e.fillData(e._dataSource)})}},e.prototype.getItemText=function(e){var t=this.getItemByName(e);return t?t.renderNode.textInput.text?t.renderNode.textInput.text:t.text:""},e.prototype.setItemText=function(e,t){var o=this.getItemByName(e);if(s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelCreator.setItemText",e,t,o),o){o.setText(t);var n=o.renderNode;n instanceof Laya.Label?(n.text=t,o.width=n.width,o.height=n.height,this.onItemNodeResize()):n.textInput instanceof Laya.TextInput&&(n.textInput.text=t)}},e.prototype.showMsgTip=function(e){var t=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showMsgTip");var o=this.getRootNode();if(o){var n=Laya.stage.width,a=Laya.stage.height,r=o.addChild(new Laya.Label);r.width=n-10,r.wordWrap=!0,r.fontSize=20,r.align="center",r.color="#ffffff",r.text=e,r.pos(-n/2,.25*-a),Laya.Tween.to(r,{y:.25*-a-100},1e3,null,new Laya.Handler(this,function(){Laya.Tween.to(r,{alpha:0,y:.25*-a-150},500,null,new Laya.Handler(t,function(){r.destroy()}))}))}},e.prototype.showPromptDialog=function(e,t,o,n){var a=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showPromptDialog");var r=this.getRootNode();if(!r)return ULSDK.console.warn("MCPanelLaya.showPromptDialog nodeRoot not found!"),void i.default.callLater(.1,function(){a.showPromptDialog(e,t,o,n)});var l=Laya.stage.width,c=Laya.stage.height,u=r.addChild(new Laya.Sprite);u.size(l,c),u.pos(-l/2,-c/2),u.graphics.drawRect(0,0,l,c,"#00000080"),this.registerTouchHander(u,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow")});var d=u.addChild(new Laya.Image);d.skin="res/_ulsdk_ui/bg_01.png",d.sizeGrid="40,40,40,40,0",d.size(460,320),d.pos(l/2-d.width/2,c/2-d.height/2);var p=d.addChild(new Laya.Label);p.fontSize=32,p.align="center",p.color="#262626",p.text=e||"\u6807\u9898",p._tf.isChanged=!0,p.pos(d.width/2-p.width/2,20);var f=d.addChild(new Laya.Label);f.fontSize=24,f.align="center",f.color="#606060",f.wordWrap=!0,f.width=d.width-50,f.text=t||"\u6b63\u6587",f._tf.isChanged=!0,f.pos(d.width/2-f.width/2,145-f.height/2);for(var h=-(160*o.length+30*(o.length-1))/2,g=function(e){var t=o[e],a=d.addChild(new Laya.Image);a.pos(d.width/2+h+160*(e+.5)+30*e,d.height-50),a.skin="res/_ulsdk_ui/btn_01.png",a.sizeGrid="27,27,27,27,1",a.size(160,56),a.anchorX=.5,a.anchorY=.5;var r=a.addChild(new Laya.Label);r.fontSize=30,r.align="center",r.text=t||"\u6309\u94ae"+(e+1),r.color="#ffffff",r.pos(a.width/2-r.width/2,a.height/2-r.height/2),_.registerTouchHander(a,function(t){if("began"==t.name?a.scale(1.1,1.1):"moved"==t.name||a.scale(1,1),"click"==t.name){var o=n[e];if(o instanceof Function)o()||u.destroy();else u.destroy()}})},_=this,m=0;m<o.length;m++)g(m)},e.prototype.showWebView=function(e,t){var o=this;this.closeWebView();var a=this.getRootNode();if(a){var i=Laya.stage.width,l=Laya.stage.height,c=a.addChild(new Laya.Sprite);c.size(i,l),c.pos(-i/2,-l/2),c.graphics.drawRect(0,0,i,l,"#0000007F"),this.showWebViewNode=c,this.registerTouchHander(c,function(e){"click"==e.name&&(s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow"),c.destroy())});var u=Math.min(.8*i,500),d=Math.min(.8*l,800);i>l&&(u=Math.min(.8*i,800),d=Math.min(.8*l,500));var p=c.addChild(new Laya.Image);p.skin="res/_ulsdk_ui/bg_01.png",p.sizeGrid="40,40,40,40,0",p.size(u,d),p.pos(i/2-p.width/2,l/2-p.height/2);var f=p.addChild(new Laya.Label);f.fontSize=32,f.align="center",f.color="#262626",f.text=e||"\u6807\u9898",f._tf.isChanged=!0,f.pos(p.width/2-f.width/2,20),r.default.httpGet({url:t,timeoutMillisecond:5e3,success:function(e){var t=JSON.parse(e).policyText,a=function(e){function o(){var o=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",o);var n=o.addChild(new Laya.Label);return n.fontSize=18,n.leading=8,n.align="left",n.color="#606060",n.wordWrap=!0,n.width=u-50,n.text=t,n.pos(0,2),n._tf.isChanged=!0,o}return n(o,e),o}(Laya.Box),r=p.addChild(new Laya.List);r.repeatY=1,r.itemRender=a,r.vScrollBarSkin="",r.spaceY=4,r.array=["\u6b63\u6587"],r.pos(25,65),r.size(u-50,d-70),r.selectEnable=!0,r.selectHandler=new Laya.Handler(o,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)})},fail:function(){}})}},e.prototype.closeWebView=function(){this.showWebViewNode&&(this.showWebViewNode.destroy(),this.showWebViewNode=null)},e.prototype.showPrivacyDialog=function(e,t,o,a){var r=this;if(s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showPrivacyDialog"),!this.showPrivacyNode){var l=this.getRootNode();if(!l)return ULSDK.console.warn("MCPanelLaya.showPrivacyDialog nodeRoot not found!"),void i.default.callLater(.1,function(){return r.showPrivacyDialog(e,t,o,a)});var c=Laya.stage.width,u=Laya.stage.height,d=l.addChild(new Laya.Sprite);d.size(c,u),d.pos(-c/2,-u/2),d.graphics.drawRect(0,0,c,u,"#0000007F"),this.showPrivacyNode=d;var p=400,f=d.addChild(new Laya.Image);f.skin="res/_ulsdk_ui/bg_01.png",f.sizeGrid="40,40,40,40,0",f.size(p,400),f.pos(c/2-f.width/2,u/2-f.height/2);var h=f.addChild(new Laya.Label);h.fontSize=32,h.align="center",h.color="#606060",h.text=e||"\u6807\u9898",h._tf.isChanged=!0,h.pos(f.width/2-h.width/2,20);for(var g="\u611f\u8c22\u60a8\u5bf9\u672c\u516c\u53f8\u6e38\u620f\u7684\u652f\u6301\uff0c\u5728\u4f53\u9a8c\u6211\u4eec\u7684\u6e38\u620f\u524d\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u5f00\u53d1\u5546\u7684",_=[],m={},v=0;v<t.length;v++){var y=t[v],C=y.name||"",b=y.url||"";_.push(C),m[C]=b}var S="\u4e2d\u7684\u6240\u6709\u6761\u6b3e\uff0c\u5305\u62ec\n        1.\u4e3a\u4e86\u60a8\u6709\u826f\u597d\u7684\u6e38\u620f\u4f53\u9a8c\uff0c\u6211\u4eec\u4f1a\u57fa\u4e8e\u5177\u4f53\u7684\u573a\u666f\u6536\u96c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        2.\u6211\u4eec\u4f1a\u57fa\u4e8e\u5148\u8fdb\u7684\u6280\u672f\u548c\u7ba1\u7406\u63aa\u65bd\u4fdd\u8bc1\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\n        3.\u57fa\u4e8e\u60a8\u7684\u6388\u6743\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u4ee5\u4e0b\u6743\u9650\n\u8bbe\u5907\u4fe1\u606f\uff1a\u5305\u62ec\u8bbe\u5907\u6807\u8bc6\u7b26\u3001MAC\u3001\u673a\u578b\u3001\u54c1\u724c\u3001App\u5305\u540d\u3001App\u7248\u672c\u53f7\u3001IP\u5730\u5740\u3001\u8bbe\u5907\u5206\u8fa8\u7387\u53ca\u50cf\u7d20\u5bc6\u5ea6\u3002\n\u7f51\u7edc\u4fe1\u606f\uff1a\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3001\u63a5\u5165\u7f51\u7edc\u7684\u65b9\u5f0f\u548c\u7c7b\u578b\u3001IP\u5730\u5740\u3002\n\u4f7f\u7528\u4fe1\u606f\uff1a\u5305\u62ec\u5e7f\u544a\u5185\u5bb9\u7684\u5c55\u73b0\u3001\u70b9\u51fb\u3001\u4e0b\u8f7d\u3002\n        \u5982\u679c\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee,\u8bf7\u901a\u8fc7kefu@ultralisk.cn\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        ",R=this,T=function(e){function t(){var t=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",t);var o=t.addChild(new Laya.Label);o.fontSize=18,o.leading=8,o.align="left",o.color="#606060",o.wordWrap=!0,o.width=p-50,o.text=g,o.pos(0,2),o._tf.isChanged=!0;for(var n=o.height,a=function(e){var t=_[e],o=r.addChild(new Laya.Label);o.fontSize=18,o.leading=8,o.align="left",o.color="#6495ED",o.wordWrap=!0,o.width=p-50,o.text="\u300a"+t+"\u300b",o.pos(0,n),o._tf.isChanged=!0,n+=o.height,R.registerTouchHander(o,function(e){"click"==e.name&&R.showWebView(t,m[t])})},r=this,i=0;i<_.length;i++)a(i);var l=t.addChild(new Laya.Label);return l.fontSize=18,l.leading=8,l.align="left",l.color="#606060",l.wordWrap=!0,l.width=p-50,l.text=S,l.pos(0,n),l._tf.isChanged=!0,t}return n(t,e),t}(Laya.Box),L=f.addChild(new Laya.List);L.repeatY=1,L.itemRender=T,L.vScrollBarSkin="",L.spaceY=4,L.array=["\u6b63\u6587"],L.pos(25,65),L.size(p-50,260),L.selectEnable=!0,L.selectHandler=new Laya.Handler(this,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)});for(var w=(p-20)/o.length,A=function(e){var t=o[e],n=f.addChild(new Laya.Label);n.fontSize=22,n.align="center",n.valign="middle",n.text=t,1==o.length||e%2==1?(n.color="#ffffff",n.bgColor="#6495ED"):(n.color="#9CB0DE",n.bgColor="#E6E6E6"),n.width=Math.min(.8*w,120),n.height=40,n.x=w*e+(w-n.width)/2+10,n.y=f.height-60,D.registerTouchHander(n,function(t){if("click"==t.name){var o=a[e];if(o instanceof Function)o()||(r.showPrivacyNode.destroy(),r.showPrivacyNode=null);else r.showPrivacyNode.destroy(),r.showPrivacyNode=null}})},D=this,I=0;I<o.length;I++)A(I)}},e.prototype.showReferenceRect=function(e,t,o,n,a,r,l){var c=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showReferenceRect",e,t,o,n,a,r,l);var u=this.getRootNode();if(!u)return ULSDK.console.warn("MCPanelLaya.showReferenceRect nodeRoot not found!"),void i.default.callLater(.1,function(){c.showReferenceRect(e,t,o,n,a,r,l)});null==r&&(r=.5),null==l&&(l=.5),this.hideReferenceRect(e);var d=Laya.stage.width,p=Laya.stage.height,f=t*d,h=p-o*p,g=u.addChild(new Laya.Sprite);g.size(n,a),g.pivot(n*r,a*(1-l));var _=u.globalToLocal(new Laya.Point(f,h));g.pos(_.x,_.y),g.graphics.drawRect(0,0,n,a,"#00000080");var m=g.addChild(new Laya.Label);m.fontSize=30,m.align="center",m.text=e,m.color="#ffffff",m.pos(g.width/2-m.width/2,g.height/2-m.height/2),this.nodeReferenceRects[e]=g},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,a,r,i){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showReferenceRectFromViewPoint",e,t,o,n,a,r,i),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.clientWidth",Laya.Browser.clientWidth),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.clientHeight",Laya.Browser.clientHeight),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.pixelRatio",Laya.Browser.pixelRatio),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.width",Laya.Browser.width),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.height",Laya.Browser.height),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.stage.width",Laya.stage.width),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.stage.height",Laya.stage.height);var l=Laya.Browser.clientWidth/Laya.stage.width,c=Laya.Browser.clientHeight/Laya.stage.height,u=Math.min(l,c);s.default.B_INNER_DEBUG&&ULSDK.console.log("widthRatio",l),s.default.B_INNER_DEBUG&&ULSDK.console.log("heightRatio",c),s.default.B_INNER_DEBUG&&ULSDK.console.log("ratio",u);var d=Laya.stage.width*u,p=Laya.stage.height*u;s.default.B_INNER_DEBUG&&ULSDK.console.log("viewWidth",d),s.default.B_INNER_DEBUG&&ULSDK.console.log("viewHeight",p);var f=t/d,h=1-o/p;this.showReferenceRect(e,f,h,n,a,r,i)},e.prototype.hideReferenceRect=function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.hideReferenceRect",e);var t=this.nodeReferenceRects[e];t&&!t.destroyed&&t.destroy(),delete this.nodeReferenceRects[e]},e.prototype.hideAllReferenceRects=function(){var e=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.hideAllReferenceRects"),r.default.forEachMap(this.nodeReferenceRects,function(t,o){e.hideReferenceRect(t)})},e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./MCItem":"MCItem"}],ManagerDirectorBase:[function(e,t,o){"use strict";cc._RF.push(t,"db49fOZClpGZrTN39UytMyj","ManagerDirectorBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("../../ulframework/view/DialogBase"),i=e("../../ulframework/view/ViewBase"),s=e("../../ulframework/utils/Tools"),l=e("../../ulframework/view/SceneBase"),c=e("../ConstBase"),u=e("../view/LayerColor"),d=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return n(o,t),o.onLoad=function(){t.onLoad.call(this),cc.view.setResizeCallback(this.onViewResize.bind(this))},o.loadNode=function(e,t,o){void 0===t&&(t={});var n="view/"+e;this.loadRes(n,cc.Prefab,function(e,n){if(e)return cc.warn("\u8b66\u544a] ManagerDirectorBase.loadNode load prefab:",e),void o(null);var a=cc.instantiate(n);a.__origin_prefab=n,a.context=t,o(a)})},o.tryReleaseNode=function(e){if(e){var t=e.__origin_prefab;if(cc.isValid(t)){cc.loader.getDependsRecursively(t);this.releaseReferenceCount(t)}}},o.releaseAllUnusedRes=function(){var e=this,t=0;return s.default.forEachMap(this.referenceCounts,function(o,n){n<=0&&(delete e.referenceCounts[o],cc.loader.release(o),t++)}),t},o.createView=function(t,o){var n=e(t);if(n){var a=new(0,n.default)(o);return a.name=t,a}cc.warn("ManagerDirectorBase.createView module not found!",t)},o.runScene=function(e){var t=new cc.Scene,o=new cc.Node;o.setAnchorPoint(.5,.5),o.name="Canvas",o.parent=t;var n=new cc.Node;n.parent=o,n.name="Main Camera";var a=n.addComponent(cc.Camera);a.zoomRatio=1,a.backgroundColor=cc.color(0,0,0,255),a.depth=-1,a.cullingMask=s.default.booleanArrayToFlagsNumber([!0]),a.clearFlags=cc.Camera.ClearFlags.COLOR|cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL,cc.director.runSceneImmediate(t,null,e)},o.refreshSceneSize=function(e){if(e=e||cc.director.getScene()){var t=e._resolution_range||c.default.RESOLUTION_RANGE,o=e.getChildByName("Canvas"),n=cc.view.getFrameSize(),a=n.width/n.height,r=t.maxWidth,i=t.minWidth,s=t.maxHeight,l=t.minHeight,d=o.getComponent(cc.Canvas);d||(d=o.addComponent(cc.Canvas));var p=!1,f=!1,h=!1,g=!1;a<=i/l?a<i/s?(d.designResolution=cc.size(i,s),d.fitHeight=!0,d.fitWidth=!0,p=!0,f=!0):(d.designResolution=cc.size(i,l),d.fitHeight=!1,d.fitWidth=!0):a>r/l?(d.designResolution=cc.size(r,l),d.fitHeight=!0,d.fitWidth=!0,h=!0,g=!0):(d.designResolution=cc.size(i,l),d.fitHeight=!0,d.fitWidth=!1);var _=o.getContentSize(),m=null;m=o.getChildByName("node_canvas_mask_top"),p?(cc.isValid(m)||((m=new u.default(cc.color(0,0,0,255))).parent=o,m.name="node_canvas_mask_top",m.zIndex=cc.macro.MAX_ZINDEX,m.setAnchorPoint(.5,0)),m.active=!0,m.setContentSize(_.width,1e3),m.x=0,m.y=s/2):cc.isValid(m)&&(m.active=!1),m=o.getChildByName("node_canvas_mask_bottom"),f?(cc.isValid(m)||((m=new u.default(cc.color(0,0,0,255))).parent=o,m.name="node_canvas_mask_bottom",m.zIndex=cc.macro.MAX_ZINDEX,m.setAnchorPoint(.5,1)),m.active=!0,m.setContentSize(_.width,1e3),m.x=0,m.y=-s/2):cc.isValid(m)&&(m.active=!1),m=o.getChildByName("node_canvas_mask_left"),h?(cc.isValid(m)||((m=new u.default(cc.color(0,0,0,255))).parent=o,m.name="node_canvas_mask_left",m.zIndex=cc.macro.MAX_ZINDEX,m.setAnchorPoint(1,.5)),m.active=!0,m.setContentSize(1e3,_.height),m.x=-r/2,m.y=0):cc.isValid(m)&&(m.active=!1),m=o.getChildByName("node_canvas_mask_right"),g?(cc.isValid(m)||((m=new u.default(cc.color(0,0,0,255))).parent=o,m.name="node_canvas_mask_right",m.zIndex=cc.macro.MAX_ZINDEX,m.setAnchorPoint(0,.5)),m.active=!0,m.setContentSize(1e3,_.height),m.x=r/2,m.y=0):cc.isValid(m)&&(m.active=!1)}},o.onViewResize=function(){this.refreshSceneSize(),this.sendMsg("MSG_VIEW_RESIZE")},o.closeDialogByViewName=function(e,t){var o=this.getRunningSceneCanvas();if(o)for(var n=o.children,a=n.length-1;a>=0;a--){var i=n[a];i instanceof r.default&&(i.name==e&&i.closeDialog(t))}},o.isSpecificDialogOpened=function(e){var t=this.getRunningSceneCanvas();if(!t)return!1;for(var o=t.children,n=o.length-1;n>=0;n--){var a=o[n];if(!cc.isValid(a))return!1;if(a instanceof r.default&&a.name==e)return!0}return!1},o.refreshFullscreenViewState=function(){var e=this.getRunningSceneCanvas();if(e){for(var t=[],o=e.children,n=0;n<o.length;n++){var a=o[n];a instanceof i.default&&a.isFullscreenView()&&t.push({node:a,order:a.zIndex})}t=s.default.sortArrayByField(t,"order");for(n=0;n<t.length;n++){t[n].node.active=n>=t.length-1}}},Object.defineProperty(o,"size",{get:function(){var e=this.getRunningSceneCanvas();return e?e.getContentSize():cc.size(0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(o,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(o,"center",{get:function(){var e=this.size;return cc.v2(e.width/2,e.height/2)},enumerable:!0,configurable:!0}),o.getRunningSceneCanvas=function(){var e=cc.director.getScene();return e?e.getChildByName("Canvas"):null},o.getRunningSceneView=function(){var e=this.getRunningSceneCanvas();if(!e)return null;for(var t=null,o=0;o<e.children.length;o++){var n=e.children[o];if(n instanceof l.default){t=n;break}}return t},o.createSpriteNode=function(e){var t=new cc.Node;return t.addComponent(cc.Sprite).loadSpriteFrame(e),t},o.loadRes=function(e,t,o){var n=this,a=cc.loader.getRes(e,t);if(null!=a)return this.retainReferenceCount(a),void o(null,a);var r=t;cc.loader.loadRes(e,r,function(e,t){n.retainReferenceCount(t),o(e,t)})},o.retainReferenceCount=function(e){for(var t=cc.loader.getDependsRecursively(e),o=0;o<t.length;o++){var n=t[o];this.referenceCounts[n]=(this.referenceCounts[n]||0)+1}},o.releaseReferenceCount=function(e){for(var t=cc.loader.getDependsRecursively(e),o=0;o<t.length;o++){var n=t[o],a=this.referenceCounts[n];null!=a&&(--a<=0&&(a=0),this.referenceCounts[n]=a)}},o.loadJson=function(e,t,o){var n=this;this.loadRes(e,cc.JsonAsset,function(a,r){a?(cc.warn("\u8b66\u544a] json\u52a0\u8f7d\u5931\u8d25\uff01",a),t(null)):(t(r.json),o&&n.tryReleaseJson(e))})},o.tryReleaseJson=function(e){var t=cc.loader._getReferenceKey(e);this.releaseReferenceCount(t)},o.softRelease=function(){this.releaseAllUnusedRes(),cc.sys.garbageCollect()},o.referenceCounts={},o._loadResLog={},o}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../../ulframework/view/DialogBase":"DialogBase","../../ulframework/view/SceneBase":"SceneBase","../../ulframework/view/ViewBase":"ViewBase","../ConstBase":"ConstBase","../view/LayerColor":"LayerColor"}],Manager:[function(e,t,o){"use strict";cc._RF.push(t,"bb517iTiWxAha7AbPfnKLLw","Manager");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/MsgHandler"),r=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=(i.property,function(){function e(){}var t;return t=e,e.loadAllManagers=function(){for(var e=0;e<this._managerInstances.length;e++){var t=this._managerInstances[e];try{t.onLoad()}catch(e){cc.error("Manager.loadAllManager has error",e)}}},e.init=function(){t._managerInstances.push(this),this._msgHander=new a.default,this._msgHander.startProcMsg()},e.onLoad=function(){var e=this;this.registerListeners({MSG_RECORD_RESET:this.loadRecord,MSG_LOGIN_UID_CHANGED:function(){e.resetUserCache(),e.loadUserRecord()}}),this._bNetworkResponseRegistered||(this._bNetworkResponseRegistered=!0,this.onRegisterNetworkResponseListeners())},e.loadRecord=function(){},e.saveRecord=function(){},e.resetUserCache=function(){},e.loadUserRecord=function(){},e.saveUserRecord=function(){},e.onRegisterNetworkResponseListeners=function(){},e.registerListeners=function(e){var t=this;r.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},e.startProcMsg=function(){this._msgHander.startProcMsg()},e.stopProcMsg=function(){this._msgHander.stopProcMsg()},e.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},e._managerInstances=[],e._bNetworkResponseRegistered=!1,e=t=n([s],e)}());o.default=l,cc._RF.pop()},{"../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],MsgHandler:[function(e,t,o){"use strict";cc._RF.push(t,"0852c+vjjFK2r/FdcXtbrUO","MsgHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),a=function(){function e(e){this.eventTarget=e||cc.game,this.registeredListeners={},this.startedListeners={},this.bStarted=!1}return e.prototype.registerListeners=function(e){var t=this;n.default.forEachMap(e,function(e,o){null!=t.registeredListeners[e]&&cc.log("[\u8b66\u544a] MsgHandler.registerListeners msg\u91cd\u590d\u6ce8\u518c\uff01 msgName="+e);t.registeredListeners[e]=function(e){try{o(e)}catch(e){cc.error("MsgHandler.listener has error!",e)}}}),this.bStarted&&this.startProcMsg()},e.prototype.startProcMsg=function(){var e=this;this.bStarted=!0,n.default.forEachMap(this.registeredListeners,function(t,o){if(!e.startedListeners[t]){var n=e.registeredListeners[t];e.eventTarget.on(t,n,e),e.startedListeners[t]=n}})},e.prototype.stopProcMsg=function(){var e=this;n.default.forEachMap(this.startedListeners,function(t,o){e.eventTarget.off(t,o,e)}),this.bStarted=!1,this.startedListeners={}},e.prototype.sendMsg=function(e,t){try{this.eventTarget.emit(e,t)}catch(e){cc.error("MsgHandler.sendMsg has exception",e)}},e}();o.default=a,cc._RF.pop()},{"./Tools":"Tools"}],NetworkAdapterBase:[function(e,t,o){"use strict";cc._RF.push(t,"19f10Ph5gxPjZVUGeVhqU2/","NetworkAdapterBase");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/Tools"),r=e("../utils/Timer"),i=cc._decorator,s=i.ccclass,l=(i.property,function(){function e(){}return e.prototype.setReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerReceiveCallback=function(e){this.fOnReceive&&this.fOnReceive(e)},e.prototype.triggerFaildCallback=function(e){this.fOnFaild&&this.fOnFaild(e)},e.prototype.send=function(e){var t=this;r.default.callLater(.1,function(o){if("CMD_1"==e.cmd){var n={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(n)}else if("CMD_2"==e.cmd)if(a.default.random(100)<50){n={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(n)}else t.triggerFaildCallback("random faild")})},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.prototype.update=function(e){},e=n([s],e)}());o.NetworkAdapterBase=l,cc._RF.pop()},{"../utils/Timer":"Timer","../utils/Tools":"Tools"}],NetworkAdapterHttpUlServer:[function(e,t,o){"use strict";cc._RF.push(t,"ba6a3sqZGhIbanIFIQ9RJtc","NetworkAdapterHttpUlServer");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./NetworkAdapterBase"),i=e("../utils/Timer"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return n(t,e),t.prototype.setHost=function(e){this.host=e},t.prototype.setUrlFormat=function(e){this.urlFormat=e},t.prototype.setUlServerArg=function(e,t,o,n){this.signkey=e,this.platform=t,this.appid=o,this.channel=n},t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=JSON.stringify(e);t=encodeURIComponent(t);var o=ul.format("signkey=%s&platform=%s&appid=%s&channel=%s&data=%s",this.signkey,this.platform,this.appid,this.channel,t),n=ul.format(this.urlFormat,this.host);cc.log("send",n,o);var a=cc.loader.getXMLHttpRequest();a.onreadystatechange=this.onReadyStateChange.bind(this),a.open("POST",n),a.timeout=1e3*this.timeout,this.xhr=a,this.startTimeoutTimer(),a.send(o)},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t=e.response||"",o={str:null},n=void 0;try{n=JSON.parse(t)}catch(e){}n?o=n:o.str=t,this.triggerReceiveCallback(o)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=a([l],t)}(r.NetworkAdapterBase));o.NetworkAdapterHttpUlServer=c,cc._RF.pop()},{"../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkAdapterHttp:[function(e,t,o){"use strict";cc._RF.push(t,"fd376cjprVCg6tz28Mt+EGm","NetworkAdapterHttp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./NetworkAdapterBase"),i=e("../utils/Timer"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return n(t,e),t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=e.url;if(t){var o=e.requestType||"GET",n=e.postData||"",a=cc.loader.getXMLHttpRequest();a.onreadystatechange=this.onReadyStateChange.bind(this),a.open(o,t),a.timeout=this.timeout,this.xhr=a,this.startTimeoutTimer(),a.send(n)}else cc.warn("\u8b66\u544a] NetworkAdapterHttp.send url not found!")},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t={response:e.response||""};this.triggerReceiveCallback(t)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error1"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=a([l],t)}(r.NetworkAdapterBase));o.NetworkAdapterHttp=c,cc._RF.pop()},{"../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkManager:[function(e,t,o){"use strict";cc._RF.push(t,"33b8bnH9ttOA7UWhgWmkZ7E","NetworkManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/FSMObject"),r=e("./NetworkTask"),i=1,s=2,l=3,c=4,u=function(e){function t(t){var o=e.call(this)||this;return o.bAutoDoNextTask=!0,o.currTask=null,o.tasks=[],o.adapter=null,o.adapter=t,t.setReceiveCallback(o.onReceive.bind(o)),t.setFaildCallback(o.onFaild.bind(o)),o.registerState(i,o.onEnterStandby.bind(o),o.onExecuteStandby.bind(o),null),o.registerState(s,o.onEnterRequest.bind(o),o.onExecuteRequest.bind(o),null),o.registerState(l,o.onEnterResponse.bind(o),o.onExecuteResponse.bind(o),null),o.registerState(c,o.onEnterFaild.bind(o),null,null),o.setNextState(i),o}return n(t,e),t.prototype.setAutoDoNextTaskEnabled=function(e){this.bAutoDoNextTask=e},t.prototype.update=function(t){e.prototype.update.call(this,t),this.adapter.update(t)},t.prototype.onEnterStandby=function(){0},t.prototype.onExecuteStandby=function(){var e=this.tasks;if(e.length>0){var t=e[0];this.currTask=t,this.setNextState(s)}},t.prototype.onEnterRequest=function(){var e=this.currTask;e.triggerRequestCallback(),this.adapter.send(e.getRequestData())},t.prototype.onExecuteRequest=function(){},t.prototype.onEnterResponse=function(){var e=this.currTask;e?e.triggerResponseCallback():this.setNextState(i)},t.prototype.onExecuteResponse=function(){this.bAutoDoNextTask&&this.doNextTask()},t.prototype.onEnterFaild=function(){var e=this.currTask;e?e.triggerFaildCallback():this.setNextState(i)},t.prototype.onReceive=function(e){if(this.getState()==s){var t=this.currTask;t?(t.setResponseData(e),this.setNextState(l)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.onFaild=function(e){if(this.getState()==s){var t=this.currTask;t?(t.setFaildMsg(e),this.setNextState(c)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.addTask=function(e,t,o,n,a){if(e){var i=new r.NetworkTask;i.setRequestData(e),i.setOnReceiveCallback(t),i.setOnFaildCallback(o),i.setOnRequestCallback(n),i.setBackgroundEnabled(a),this.tasks.push(i)}else cc.log("[warn] NetworkManager.addTask, requestData is null!")},t.prototype.getCurrentTask=function(){return this.tasks[0]},t.prototype.getTasks=function(){return this.tasks},t.prototype.retryCurrentTask=function(){this.getState()==c?this.setNextState(i):cc.log("[warn] NetworkManager.retryCurrentTask, state is !ST_FAILD, no need to retry!")},t.prototype.stopAllTasks=function(){this.tasks=[],this.currTask=null,this.adapter.disconnect(),this.setNextState(i)},t.prototype.doNextTask=function(){this.currTask&&(this.currTask=null,this.tasks.shift(),this.setNextState(i))},t}(a.FSMObject);o.NetworkManager=u,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./NetworkTask":"NetworkTask"}],NetworkTask:[function(e,t,o){"use strict";cc._RF.push(t,"fef47QyITxJGal2U1lUImfJ","NetworkTask");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.fOnRequest=null,this.fOnFaild=null,this.fOnReceive=null,this.faildMsg="",this.responseData=null,this.requestData={}}return e.prototype.setBackgroundEnabled=function(e){return this.bBackgroundEnabled=e,this},e.prototype.isBackgroundEnabled=function(){return this.bBackgroundEnabled},e.prototype.setRequestData=function(e){return this.requestData=e,this},e.prototype.getRequestData=function(){return this.requestData},e.prototype.setResponseData=function(e){return this.responseData=e,this},e.prototype.getResponseData=function(){return this.responseData},e.prototype.setFaildMsg=function(e){return this.faildMsg=e,this},e.prototype.getFaildMsg=function(){return this.faildMsg},e.prototype.setOnRequestCallback=function(e){return this.fOnRequest=e,this},e.prototype.setOnReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setOnFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerRequestCallback=function(){this.fOnRequest&&this.fOnRequest(this)},e.prototype.triggerResponseCallback=function(){this.fOnReceive&&this.fOnReceive(this)},e.prototype.triggerFaildCallback=function(){this.fOnFaild&&this.fOnFaild(this)},e=n([r],e)}());o.NetworkTask=i,cc._RF.pop()},{}],NodeEx:[function(e,t,o){"use strict";cc._RF.push(t,"3d945kkEi1EUr1cfDLANeqq","NodeEx"),cc.Node.prototype.calcRecursiveScale=function(){var e=1,t=this;do{e*=t.scale,t=t.parent}while(null!=t);return e},cc.sys.isNative,cc._RF.pop()},{}],Particle:[function(e,t,o){"use strict";cc._RF.push(t,"a10b8ZLs3ZDqYswx11SLC3c","Particle");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/manager/mgrCfg"),r=e("../../game/manager/mgrDirector"),i=function(e){function t(t){var o=e.call(this)||this;o.bLoaded=!1;var n=a.default.get_from_particle_db(t),i=o.addComponent(cc.ParticleSystem);return""!=n.positionType&&(i.positionType=parseInt(n.positionType)),o.particleData=n,o.bAutoRemoveOnFinish=n.bPlayOnce,r.default.loadRes(n.filename,cc.ParticleAsset,function(e,t){e?cc.warn("Particle loadRes error:",e.message):cc.isValid(o)&&(i.file=t,o.bLoaded=!0)}),o}return n(t,e),t.prototype.reset=function(){var e=this.getComponent(cc.ParticleSystem);e.autoRemoveOnFinish=this.bAutoRemoveOnFinish,e.resetSystem()},t.prototype.setAutoRemoveOnFinish=function(e){this.bAutoRemoveOnFinish=e,this.getComponent(cc.ParticleSystem).autoRemoveOnFinish=this.bAutoRemoveOnFinish},t.prototype.isLoaded=function(){return this.bLoaded},t}(cc.Node);o.default=i,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"a121cUYpppN0Zm8VXjSKZa4","PoolManager");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Tools"),r=cc._decorator,i=r.ccclass,s=(r.property,function(){function e(){this.pools={},this.poolConfigs={}}return e.prototype._getPool=function(e,t){var o=this.pools[e];o||(o={},this.pools[e]=o);var n=o[t];return n||(n=[],o[t]=n),n},e.prototype._safeRelease=function(e){},e.prototype.register=function(e,t,o,n,a,r){this.poolConfigs[e]={creator:t,resetter:o,cleanuper:n,destroyer:a,maxCount:r}},e.prototype.get=function(e,t){if(e){var o=this.poolConfigs[e];if(o){null==t&&(t="__default__");for(var n=this._getPool(e,t),a=0;a<n.length;a++)n[a];var r=n.shift();for(a=0;a<n.length;a++)n[a];return r&&r.parent&&(cc.warn("[warn] PoolManager.get, node already has a parent!"),r=null),r||(r=o.creator(t))&&(r.__pool_id=e,r.__pool_key=t),r&&(o.resetter&&o.resetter(r),r.__pool_flag_inpool=null),r}cc.warn(ul.format("PoolManager.get config not found! poolId = %s",e))}else cc.warn("PoolManager.get need a poolId")},e.prototype.put=function(e){if(e){var t=e.__pool_id,o=e.__pool_key;if(t)if(o)if(cc.isValid(e)){var n=this.poolConfigs[t];if(n)if(e.__pool_flag_inpool)cc.warn("PoolManager.put obj is already in pool!");else{var a=this._getPool(t,o);a.length<n.maxCount?(n.cleanuper&&n.cleanuper(e),e.__pool_flag_inpool=!0,a.push(e)):(n.destroyer&&n.destroyer(e),this._safeRelease(e))}else cc.warn(ul.format("PoolManager.put config not found! poolId = %s",t))}else cc.warn("PoolManager.put obj not valid.");else cc.warn("PoolManager.put obj.__pool_key not found!")}else cc.warn("PoolManager.put node is nil!")},e.prototype.clean=function(e,t){var o=this;a.default.forEachMap(this.pools,function(n,r){if(!e||e==n){var i=o.poolConfigs[n].destroyer;a.default.forEachMap(r,function(e,n){if(!t||t==e){for(var a=0;a<n.length;a++){var s=n[a];i&&i(s),o._safeRelease(s)}r[e]=null}})}})},e=n([i],e)}());o.default=s,cc._RF.pop()},{"./Tools":"Tools"}],Randomizer:[function(e,t,o){"use strict";cc._RF.push(t,"92d72KdO7hG8YoOt/riTl26","Randomizer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),a=function(){function e(e){null==e&&(e=(new Date).getTime()),this.originSeed=e,this.seed=e}return e.prototype.getSeed=function(){return this.seed},e.prototype.getOriginSeed=function(){return this.originSeed},e.prototype.setSeed=function(e){this.originSeed=e,this.seed=e},e.prototype.random=function(e,t){this.seed=(9301*this.seed+49297)%233280;var o=this.seed/233280;return null==e&&null==t?o:null==t?Math.floor(o*e+1):Math.floor(o*(t-e+1)+e)},e.prototype._pureRandomWithoutReturn=function(){this.seed=(9301*this.seed+49297)%233280},e._getStaticRandomizer=function(){return this.staticFixedRandomizer||(this.staticFixedRandomizer=new e),this.staticFixedRandomizer},e.calcFixedRandom=function(e,t,o,n){t<0&&(cc.warn("FixedRandomizer.calcFixedRandom index must >= 0"),t=0);var a=this._getStaticRandomizer();a.setSeed(e);for(var r=0;r<t;r++)a._pureRandomWithoutReturn();return a.random(o,n)},e.calcFixedRandoms=function(e,t,o,n){var a=[],r=this._getStaticRandomizer();r.setSeed(e);for(var i=0;i<t;i++)a.push(r.random(o,n));return a},e._test=function(){cc.log("randomizer(1)");for(var t=new e(1),o=0;o<10;o++)cc.log(o,t.random(100),t.getSeed());cc.log("calcFixedRandoms(1)");var a=e.calcFixedRandoms(1,10,100);for(o=0;o<a.length;o++)cc.log(o,a[o]);cc.log("calcFixedRandom(1)");for(o=0;o<10;o++)cc.log(o,e.calcFixedRandom(1,o,100));cc.log("randomizer(2)"),t=new e(2);for(o=0;o<10;o++)cc.log(o,t.random(100),t.getSeed());cc.log("\u968f\u673a\u5206\u5e03\u6d4b\u8bd5");var r={};t=new e(1);for(o=0;o<1e3;o++){r[i=t.random(100)]=(r[i]||0)+1}cc.log(r),cc.log("\u7cfb\u7edfrandom\u5206\u5e03\u6d4b\u8bd5"),r={};for(o=0;o<1e3;o++){var i;r[i=n.default.random(100)]=(r[i]||0)+1}cc.log(r)},e.staticFixedRandomizer=null,e}();o.default=a,cc._RF.pop()},{"./Tools":"Tools"}],ReuseLayouterHBox:[function(e,t,o){"use strict";cc._RF.push(t,"80ad6lBxMFIz5G/a2oiNaax","ReuseLayouterHBox");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildHeight(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildHeight(),this},e.prototype.tryBuildHeight=function(){var e=this.cellSize.height,t=this.containerHeight;0!=e&&0!=t&&(this.cellTop=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.pending+e*(this.cellSize.width+this.gap),o=-this.cellTop;return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.width*e+this.gap*(e-1);return cc.size(t,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=n([r],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterHGrid:[function(e,t,o){"use strict";cc._RF.push(t,"35f5czwDvtMA6NDCYUSl2jj","ReuseLayouterHGrid");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.cellSize=cc.size(0,0),this.rows=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildTop(),this},e.prototype.setRows=function(e){return this.rows=e,this.tryBuildTop(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildTop(),this},e.prototype.tryBuildTop=function(){var e=this.rows,t=this.cellSize.height,o=this.containerHeight,n=this.vgap;if(0!=e&&0!=t&&0!=o){var a=e*t+(e-1)*n;this.cellTop=Math.floor((o-a)/2)}},e.prototype.getPos=function(e){var t=Math.floor(e/this.rows),o=e%this.rows,n=this.pending+t*(this.cellSize.width+this.hgap),a=-this.cellTop-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,a-=this.cellSize.height/2,cc.v2(n,a)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.rows),o=2*this.pending+this.cellSize.width*t+this.hgap*(t-1);return cc.size(o,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=n([r],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterVBox:[function(e,t,o){"use strict";cc._RF.push(t,"b1de5hw1QtHOp9XvYtOMMAS","ReuseLayouterVBox");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cellSize.width,t=this.containerWidth;0!=e&&0!=t&&(this.cellLeft=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.cellLeft,o=-this.pending-e*(this.cellSize.height+this.gap);return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.height*e+this.gap*(e-1);return cc.size(this.containerWidth,t)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=n([r],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterVGrid:[function(e,t,o){"use strict";cc._RF.push(t,"103774IVeNDcKnA1XUhN5I/","ReuseLayouterVGrid");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.cellSize=cc.size(0,0),this.cols=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setCols=function(e){return this.cols=e,this.tryBuildLeft(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cols,t=this.cellSize.width,o=this.containerWidth,n=this.hgap;if(0!=e&&0!=t&&0!=o){var a=e*t+(e-1)*n;this.cellLeft=Math.floor((o-a)/2)}},e.prototype.getPos=function(e){var t=e%this.cols,o=Math.floor(e/this.cols),n=this.cellLeft+t*(this.cellSize.width+this.hgap),a=-this.pending-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,a-=this.cellSize.height/2,cc.v2(n,a)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.cols),o=2*this.pending+this.cellSize.height*t+this.vgap*(t-1);return cc.size(this.containerWidth,o)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=n([r],e)}());o.default=i,cc._RF.pop()},{}],ReuseList:[function(e,t,o){"use strict";cc._RF.push(t,"4aa41F5bWpCm4a0dSfgUa1x","ReuseList");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../game/view/node/LayerColorTwo"),i=e("../utils/Timer"),s=e("./ViewBase"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=e.call(this)||this;return t._CELL_ID=0,t.datas=[],t.cells=[],t.cellPool=[],t.bInit=!1,t.bDebugLineEnabled=!1,t.bClippingEnabled=!0,t.bReuseEnabled=!0,t.bElasticEnabled=!0,t.bTouchScrollEnabled=!0,t.bAsyncSetterEnabled=!1,t.fOnContainerMoved=null,t}return n(t,e),t.prototype.onAsyncTimerSpan=function(e){var t=this.asyncSetterTasks;if(null!=t&&t.length>0){var o=t[0];t.splice(0,1);var n=o[0],a=o[1];this.setter(n,a),n.active=!0}},t.prototype.init=function(){var e=this,t=this.layouter,o=this.getContentSize();if(t.setListSize(o),this.bDebugLineEnabled){var n=new r.default(cc.color(255,255,0,63));n.parent=this,n.setContentSize(this.getContentSize()),n.setAnchorPoint(this.getAnchorPoint())}var a=new cc.Node;a.setAnchorPoint(0,1),a.parent=this,this.nodeContainer=a;var i=this.addComponent(cc.ScrollView);i.horizontal=t.isHorizontalScroll(),i.vertical=t.isVerticalScroll(),i.content=a,i.cancelInnerEvents=!1,i.elastic=this.bElasticEnabled;var s=i.onEnable;if(i.onEnabled=function(){s(),e._tryApplayTouchScrollEnabled()},this._tryApplayTouchScrollEnabled(),this.bClippingEnabled)this.addComponent(cc.Mask);this.on("scrolling",this.onScrolling,this)},t.prototype.reloadList=function(){if(null!=this.layouter)if(null!=this.creator)if(null!=this.setter){this.bInit||(this.bInit=!0,this.init());var e=this.layouter,t=this.datas,o=(this.cells,this.getContentSize()),n=e.getContainerSize(t.length),a=Math.max(o.width,n.width),r=Math.max(o.height,n.height),i=this.getComponent(cc.ScrollView),s=i.getScrollOffset();this.nodeContainer.setContentSize(a,r),i.scrollToOffset(s);for(var l=0;l<this.cells.length;l++){var c=this.cells[l];this.putCellToPool(c)}this.cells=[],this.onContainerMoved()}else cc.log("[\u9519\u8bef] ReuseList.reloadList setter not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList creator not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList layouter not found!")},t.prototype.updateCellState=function(){for(var e=this,t=this.layouter,o=this.nodeContainer,n=this.datas,a=this.cells,r=this.width*this.anchorX,i=this.height*this.anchorY,s=o.x+r,l=o.y+i,c=this.getContentSize(),u=-(l-c.height),d=-l,p=-s,f=-s+c.width,h=t.getCellSize(),g=h.width,_=h.height,m=function(o){if(!e.bReuseEnabled)return!0;var n=t.getPos(o);return d<n.y+_/2&&n.y-_/2<u&&p<n.x+g/2&&n.x-g/2<f},v=[],y=0;y<a.length;y++){if(m(R=(b=a[y]).__data_index))break;v.push(y)}for(var C=v.length-1;C>=0;C--){var b=a[y=v[C]];a.splice(y,1),this.putCellToPool(b)}var S=a[0];if(S)for(var R=S.__data_index-1;R>=0&&m(R);R--){b=this.getCellFromPool();a.splice(0,0,b);var T=n[R];this._callCellSetter(b,T),b.__data_index=R,b.zIndex=R,b.data=T,b.setPosition(t.getPos(R))}else for(R=0;R<n.length;R++)if(m(R)){b=this.getCellFromPool();a.push(b);T=n[R];this._callCellSetter(b,T),b.__data_index=R,b.zIndex=R,b.data=T,b.setPosition(t.getPos(R))}for(y=a.length-1;y>=0;y--){if(m(R=(b=a[y]).__data_index))break;this.putCellToPool(b),a.splice(y,1)}var L=a[a.length-1];if(L)for(R=L.__data_index+1;R<n.length;R++)if(m(R)){b=this.getCellFromPool();a.push(b);T=n[R];this._callCellSetter(b,T),b.__data_index=R,b.zIndex=R,b.data=T,b.setPosition(t.getPos(R))}},t.prototype.getCellFromPool=function(){var e=this.cellPool,t=null;if(e.length>0&&(t=e.splice(0,1)[0]),!t){var o=this.layouter.getCellSize();if(this._CELL_ID++,(t=new s.default).parent=this.nodeContainer,t.setContentSize(o),t.__cell_id=this._CELL_ID,this.creator(t),this.bDebugLineEnabled){var n=new cc.Node;n.setContentSize(o),n.parent=t;var a=n.addComponent(cc.Graphics);a.clear(),a.lineWidth=2,a.strokeColor=cc.color(255,255,0,255),a.rect(0,0,o.width,o.height),a.stroke();var r=new cc.Node;r.parent=t;var i=r.addComponent(cc.Label);i.string=t.__cell_id.toString(),i.fontSize=14,r.setAnchorPoint(0,1),r.setPosition(-o.width/2+2,o.height/2-2),r.color=cc.color(255,255,0,255)}}return t.active=!0,t},t.prototype.putCellToPool=function(e){e.active=!1,this.cellPool.push(e)},t.prototype._calcPercentPos=function(e,t){var o=this.getContentSize(),n=this.nodeContainer.getContentSize(),a=e/(n.width-o.width),r=t/(n.height-o.height);return r=1-r,a=cc.misc.clampf(a,0,1),r=cc.misc.clampf(r,0,1),cc.v2(a,r)},t.prototype._callCellSetter=function(e,t){if(this.bAsyncSetterEnabled){var o=this.asyncSetterTasks;null==o&&(o=[],this.asyncSetterTasks=o),e.active=!1;for(var n=o.length-1;n>=0;n--){o[n][0]==e&&o.splice(n,1)}o.push([e,t])}else this.setter(e,t)},t.prototype.setLayouter=function(e){return this.layouter=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setSetter=function(e){return this.setter=e,this},t.prototype.setDatas=function(e){return this.datas=e,this.reloadList(),this},t.prototype.getDatas=function(){return this.datas},t.prototype.getActiveCellsByFilter=function(e){for(var t=[],o=0;o<this.cells.length;o++){var n=this.cells[o];e(n)&&t.push(n)}return t},t.prototype.setDebugLineEnabled=function(e){return this.bDebugLineEnabled=e,this},t.prototype.setReuseEnabled=function(e){return this.bReuseEnabled=e,this},t.prototype.setClippingEnabled=function(e){return this.bClippingEnabled=e,this},t.prototype.setElasticEnabled=function(e){return this.bElasticEnabled=e,this},t.prototype.setTouchScrollEnabled=function(e){return this.bTouchScrollEnabled=e,this._tryApplayTouchScrollEnabled(),this},t.prototype._tryApplayTouchScrollEnabled=function(){var e=this.getComponent(cc.ScrollView);cc.isValid(e)&&(this.bTouchScrollEnabled?e._registerEvent():e._unregisterEvent())},t.prototype.setAsyncSetterEnabled=function(e){return this.bAsyncSetterEnabled=e,e?null==this.asyncTimer&&(cc.log("start Timer"),this.asyncTimer=new i.default(1/60,-1,this.onAsyncTimerSpan.bind(this)),this.asyncTimer.startAndBindToNode(this)):null!=this.asyncTimer&&this.asyncTimer.stop(),this},t.prototype.setOnContainerMoved=function(e){return this.fOnContainerMoved=e,this},t.prototype.refreshActiveCells=function(){for(var e=this.cells,t=this.datas,o=0;o<e.length;o++){var n=e[o],a=t[n.__data_index];this._callCellSetter(n,a)}},t.prototype.jumpToHead=function(){this.scrollToHead(0,!1)},t.prototype.jumpToTail=function(){this.scrollToTail(0,!1)},t.prototype.jumpToIndex=function(e,t){this.scrollToIndex(e,t,0,!1)},t.prototype.jumpToData=function(e,t){this.scrollToData(e,t,0,!1)},t.prototype.scrollToHead=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToTopLeft(e,t):o.vertical?o.scrollToTop(e,t):o.horizontal&&o.scrollToLeft(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToTail=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToBottomRight(e,t):o.vertical?o.scrollToBottom(e,t):o.horizontal&&o.scrollToRight(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToIndex=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var a=this.getComponent(cc.ScrollView);cc.log("jumpToIndex",e);var r=this.layouter.getPos(e),i=this.layouter.getCellSize(),s=r.x,l=-r.y,c=this.layouter.getJumpOffset();s+=-i.width/2+c.x,l+=-i.height/2+c.y;var u=this._calcPercentPos(s,l);a.stopAutoScroll(),a.scrollTo(u,o,n),this.onContainerMoved()},t.prototype.scrollToData=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var a=this.datas.indexOf(e);a<0||this.scrollToIndex(a,t,o,n)},t.prototype.onContainerMoved=function(e){this.updateCellState(),this.fOnContainerMoved&&this.fOnContainerMoved(this,this.cells)},t.prototype.onScrolling=function(e){this.onContainerMoved(e)},t=a([c],t)}(cc.Node));o.default=u,cc._RF.pop()},{"../../game/view/node/LayerColorTwo":"LayerColorTwo","../utils/Timer":"Timer","./ViewBase":"ViewBase"}],ReusePageView:[function(e,t,o){"use strict";cc._RF.push(t,"65fdazMNa9BV6Lsa+An3z73","ReusePageView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ReuseList"),i=e("../utils/Tools"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=e.call(this)||this;return t.fOnCellMoved=null,t.indexWhenBegan=0,t.touchBeganTime=0,i.default.registerTouchHandler(t,t.onTouchHandler.bind(t)),t}return n(t,e),t.prototype.onTouchHandler=function(e){if("began"==e.name){var t=this.calcNearestIndex();this.indexWhenBegan=t,this.touchBeganTime=(new Date).getTime()}else if("ended"==e.name||"cancelled"==e.name){t=this.calcNearestIndex();var o=e.getStartLocation(),n=e.getLocation(),a=((new Date).getTime()-this.touchBeganTime)/100,r=(o.x-n.x)/a,i=this.datas.length-1;t>=0&&(t==this.indexWhenBegan&&(r>=50&&t<i?t+=1:r<=-50&&t>0&&(t-=1)),0==t&&0==this.indexWhenBegan&&r<0||t==i&&this.indexWhenBegan==i&&r>0||this.scrollToIndex(t,null,.5,!0))}},t.prototype.calcNearestIndex=function(){for(var e=this.getListCenterInScrollX(),t=Number.POSITIVE_INFINITY,o=-1,n=0;n<this.cells.length;n++){var a=this.cells[n],r=(a.getContentSize(),a.getPosition().x),i=Math.abs(e-r);i<t&&(t=i,o=a.__data_index)}return o},t.prototype.getCellByDataIndex=function(e){for(var t=0;t<this.cells.length;t++){var o=this.cells[t];if(o.__data_index==e)return o}},t.prototype.getListCenterInScrollX=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset();return this.getContentSize().width/2-e.x},t.prototype.onContainerMoved=function(t){if(e.prototype.onContainerMoved.call(this),this.fOnCellMoved)for(var o=this.getListCenterInScrollX(),n=0;n<this.cells.length;n++){var a=this.cells[n],r=a.getContentSize(),s=a.getPosition().x,l=Math.abs(o-s),c=i.default.scaleInRange(l,5,r.width,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(c),0,1,1,0);this.fOnCellMoved(a,u,l)}},t.prototype.setOnCellMovedListener=function(e){this.fOnCellMoved=e},t=a([l],t)}(r.default));o.default=c,cc._RF.pop()},{"../utils/Tools":"Tools","./ReuseList":"ReuseList"}],RichTextEx:[function(e,t,o){"use strict";cc._RF.push(t,"9337bw6lmRPR5nRGkCeSb6x","RichTextEx"),cc.RichText.prototype.getPureTextLength=function(){for(var e=0,t=this.node.getChildren(),o=0;o<t.length;o++){var n=t[o];if(cc.isValid(n)){var a=n.getComponent(cc.Label);if(a){var r=a.string;null!=n.__origin_string?e+=n.__origin_string.length:e+=r.length}else e++}}return e};var n=cc.RichText.prototype._updateRichText;cc.RichText.prototype._updateRichText=function(){n.apply(this);for(var e=0,t=this.node.getChildren(),o=0;o<t.length;o++){var a=t[o];if(cc.isValid(a)){a.__char_index=e;var r=a.getComponent(cc.Label);if(r){var i=r.string;i==a.__limit_string&&(i=a.__origin_string,r.string=i,a.__limit_string=null),a.__origin_string=i,e+=i.length}else e++}}null!=this._textLimit&&this.setTextLengthLimit(this._textLimit,!0)},cc.RichText.prototype.setTextLengthLimit=function(e,t){if(e=Math.ceil(e),t||e!=this._textLimit){this._textLimit=e;for(var o=this.node.getChildren(),n=0;n<o.length;n++){var a=o[n];if(cc.isValid(a)){var r=a.__char_index;if(null!=r)if(r>=e)a.active=!1;else{a.active=!0;var i=a.getComponent(cc.Label);if(i&&a.__origin_string){var s=e-r;if(s>=a.__origin_string.length)i.string=a.__origin_string,a.__limit_string=a.__origin_string;else{var l=a.__origin_string.substring(0,s);i.string=l,a.__limit_string=l}}}}}}},cc._RF.pop()},{}],SceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"5b505L37y1I6Zz2EV3Ib1Z3","SceneBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshSize(),this.registerListeners({MSG_VIEW_RESIZE:this.onMsgViewResize}),this.sendMsg("MSG_SCENE_LOADED")},t.prototype.refreshSize=function(){var e=cc.director.getScene().getChildByName("Canvas"),t=this.nodeResource.getContentSize();t=e.getContentSize(),this.setContentSize(t),this.nodeResource.setContentSize(t);for(var o=this.nodeResource.getComponentsInChildren(cc.Widget),n=0;n<o.length;n++){o[n].updateAlignment()}},t.prototype.onMsgViewResize=function(){this.refreshSize()},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"./ViewBase":"ViewBase"}],ScleableButton:[function(e,t,o){"use strict";cc._RF.push(t,"d73bdn/VphF27UW9pqVYirD","ScleableButton");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnTouchCallback=null,t._bFocused=!1,t.isAction=!0,t}var o;return n(t,e),o=t,t.setSoundPlayHandler=function(e){this.soundPlayHandler=e},t.prototype.onLoad=function(){},t.prototype.onEnable=function(){r.default.registerTouchHandler(this.node,this.onTouchHandler.bind(this))},t.prototype.onDisable=function(){r.default.unregisterTouchHandler(this.node)},t.prototype.registerOnTouchCallback=function(e){this.fOnTouchCallback=e},t.prototype.triggerOnTouchCallback=function(e){this.fOnTouchCallback&&this.fOnTouchCallback(e)},t.prototype._doDownAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.scaleTo(.1,.85*e,.85*t).easing(cc.easeIn(2)))}},t.prototype._doUpAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.1,1.1*e,1.1*t).easing(cc.easeIn(2)),cc.scaleTo(.075,.95*e,.95*t),cc.scaleTo(.03,1*e,1*t)))}},t.prototype._doCancellAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.15,1.05*e,1.05*t).easing(cc.easeQuadraticActionInOut()),cc.scaleTo(.1,1*e,1*t).easing(cc.easeOut(2))))}},t.prototype.setActionEnable=function(e){this.isAction=e},t.prototype.onTouchHandler=function(e){if("began"==e.name)this.touchDownRect=r.default.calcNodeBoundingBoxToWorld(this.node),this._doDownAction(1,1),this._bFocused=!0,o.soundPlayHandler instanceof Function&&o.soundPlayHandler();else if("moved"==e.name){var t=this.touchDownRect.contains(e.getLocation());this._bFocused?t||(this._bFocused=!1,this._doCancellAction(1,1)):t&&(this._bFocused=!0,this._doDownAction(1,1))}else this._bFocused&&(this._bFocused=!1,this._doUpAction(1,1));this.triggerOnTouchCallback(e)},t.soundPlayHandler=null,t=o=a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../utils/Tools":"Tools"}],ShaderLib:[function(e,t,o){"use strict";cc._RF.push(t,"d5243j00rZHdavXB3VT361K","ShaderLib"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.addShader=function(e){this._shaders[e.name]?cc.error("ShaderLib.addShader shader already exists.",e.name):(cc.renderer._forward._programLib.define(e.name,e.vert,e.frag,e.defines),this._shaders[e.name]=e)},e.getShader=function(e){return this._shaders[e]},e._shaders={},e}();o.ShaderLib=n,cc._RF.pop()},{}],Spine:[function(e,t,o){"use strict";cc._RF.push(t,"70a27a8rPxBe6fHsejteGfY","Spine");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/manager/mgrCfg"),r=e("../../game/manager/mgrDirector"),i=e("../utils/Tools"),s=function(e){function t(t){var o=e.call(this)||this;o.bLoaded=!1,o.asyncData=null,o.spineData=a.default.get("spine_db",t);o.addComponent(sp.Skeleton);return o._loadSkeletonData(),o}return n(t,e),t.prototype._loadSkeletonData=function(){var e=this,t=this.spineData;r.default.loadRes(t.jsonFileName,sp.SkeletonData,function(o,n){if(o)cc.warn("Spine._loadSkeletonData error:",o);else if(cc.isValid(e)){var a=e.getComponent(sp.Skeleton);a.skeletonData=n,a.defaultSkin="normal",a.premultipliedAlpha=1==t.bPremultipliedAlpha,a._updateSkeletonData(),e.bLoaded=!0,e.asyncData&&e.play(e.asyncData.movNames,e.asyncData.bLoop)}})},t.prototype.reset=function(){this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.spineData.scaleX,this.scaleY=this.spineData.scaleY,this.color=cc.color(255,255,255),this.opacity=255;var e=this.getComponent(sp.Skeleton);e.timeScale=1,e.setToSetupPose()},t.prototype.play=function(e,t){if(e instanceof Array||(e=[e]),null==t&&(t=!0),e.length<=0)cc.warn("Spine.play movName of found!");else if(this.asyncData={movNames:e,bLoop:t},this.bLoaded&&cc.isValid(this)){this.asyncData=null;for(var o=this.spineData,n=this.getComponent(sp.Skeleton),a=0;a<e.length;a++){var r=e[a];o[r]&&(r=o[r]);var i=!!t&&a==e.length-1;0==a?(n.defaultAnimation=r,n.setAnimation(0,r,i)):n.addAnimation(0,r,i)}}},t.prototype.setPause=function(e){this.getComponent(sp.Skeleton).timeScale=e?0:1},t.prototype.setTimeScale=function(e){this.getComponent(sp.Skeleton).timeScale=e},t.prototype.registerEventCallback=function(e){var t=this;if(this.unregisterEventCallback(),e){var o=function(o,n){var a=o.animation,r=a?a.name:"unknown",s="unknown";i.default.forEachMap(t.spineData,function(e,t){if(t==r)return s=e,!0});var l={name:n,movName:r,movKey:s,bLoop:o.loop};e(l)},n=this.getComponent(sp.Skeleton);n.setStartListener(function(e){o(e,"start")}),n.setEndListener(function(e){o(e,"end")}),n.setCompleteListener(function(e){o(e,"cpmplete")}),n.setEventListener(function(e){o(e,"event")})}},t.prototype.unregisterEventCallback=function(){var e=this.getComponent(sp.Skeleton);e.setStartListener(function(){}),e.setEndListener(function(){}),e.setCompleteListener(function(){}),e.setEventListener(function(){})},t.prototype.isLoaded=function(){return this.bLoaded},t}(cc.Node);o.default=s,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../utils/Tools":"Tools"}],SpriteBasedClippingNode:[function(e,t,o){"use strict";cc._RF.push(t,"3b2ceHkR4BDN5w0zFQ6Kgvv","SpriteBasedClippingNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=1048576,r=function(e){function t(t,o){var n=e.call(this)||this;n.bInverted=!1,n.renderWidth=t,n.renderHeight=o,n.setContentSize(t,o);var r=new cc.RenderTexture(t,o);n._sgNode.addChild(r),n.renderTexture=r;var i=new cc.Node;i.parent=n,i.x=a,i.y=o/2,n.nodeRender=i;var s=new cc.Node;return s.parent=n,s.x=a,s.y=o/2,n.nodeStencil=s,n}return n(t,e),t.prototype.setInverted=function(e){},t.prototype.getRenderNode=function(){return this.nodeRender},t.prototype.getStencilNode=function(){return this.nodeStencil},t.prototype.flush=function(){var e=this.nodeRender,t=this.nodeStencil,o=this.renderTexture;o.clear(0,0,0,0),o.begin(),e.x=this.renderWidth/2,e._sgNode.visit(),e.x=a;for(var n=this.bInverted?770:771,r=t.getComponentsInChildren(cc.Sprite),i=0;i<r.length;i++){var s=r[i];s.srcBlendFactor=0,s.dstBlendFactor=n}t.x=this.renderWidth/2,t._sgNode.visit(),t.x=a,o.end()},t}(cc.Node);o.default=r,cc._RF.pop()},{}],SpriteEx:[function(e,t,o){"use strict";cc._RF.push(t,"69e6fYC/x1JII4uTPS2bwh0","SpriteEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../manager/ManagerDirectorBase"),a=e("../material/CustomSpriteMaterial"),r=e("../material/ShaderLib"),i=e("../../game/manager/mgrI18n"),s=cc.Sprite.prototype.onDestroy;cc.Sprite.prototype.onDestroy=function(){s.call(this),this._tryReleaseSpriteFrame()},cc.Sprite.prototype._tryReleaseSpriteFrame=function(){this._need_release_refreence_res&&(n.default.releaseReferenceCount(this._need_release_refreence_res),delete this._need_release_refreence_res),this.spriteFrame=null},cc.Sprite.prototype.loadSpriteFrame=function(e){var t=this;this._sprite_frame_url!=e&&(this._tryReleaseSpriteFrame(),this._sprite_frame_url=e,n.default.loadRes(e,cc.SpriteFrame,function(o,a){o?cc.error(o.message):cc.isValid(t)&&e==t._sprite_frame_url?(t.spriteFrame=a,t._need_release_refreence_res=t.spriteFrame):n.default.releaseReferenceCount(a)}))},cc.Sprite.prototype.loadSpriteFrameAndKeepSize=function(e){var t=this;if(this._sprite_frame_url!=e){var o=this.node;o?(this.__origin_width||(this.__origin_width=o.width*o.scaleX,this.__origin_height=o.height*o.scaleY),this._tryReleaseSpriteFrame(),this._sprite_frame_url=e,n.default.loadRes(e,cc.SpriteFrame,function(a,r){if(a)cc.error(a.message);else if(cc.isValid(t)&&e==t._sprite_frame_url){var i=t.__origin_width,s=t.__origin_height;t.type=cc.Sprite.Type.SIMPLE,t.sizeMode=cc.Sprite.SizeMode.TRIMMED,t.spriteFrame=r,t._need_release_refreence_res=t.spriteFrame,o.scale=Math.min(i/o.width,s/o.height)}else n.default.releaseReferenceCount(r)})):cc.warn("SpriteEx.loadSpriteFrameAndKeepSize node not found!")}},cc.Sprite.prototype.setSpriteFrameAndKeepSize=function(e){if(this.spriteFrame!=e){var t=this.node;if(t){if(cc.isValid(e)){this._tryReleaseSpriteFrame(),this.__origin_width||(this.__origin_width=t.width*t.scaleX,this.__origin_height=t.height*t.scaleY);var o=this.__origin_width,n=this.__origin_height;this.type=cc.Sprite.Type.SIMPLE,this.sizeMode=cc.Sprite.SizeMode.TRIMMED,this.spriteFrame=e,t.scale=Math.min(o/t.width,n/t.height)}}else cc.warn("SpriteEx.setSpriteFrameAndKeepSize node not found!")}},cc.Sprite.prototype.loadSpriteFrameFromAtlas=function(e,t){var o=this;this._sprite_frame_url!=e&&(this._tryReleaseSpriteFrame(),this._sprite_frame_url=e,n.default.loadRes(e,cc.SpriteAtlas,function(a,r){if(a)cc.error(a.message);else if(cc.isValid(o)&&e==o._sprite_frame_url){var i=r.getSpriteFrame(t);if(!i)return cc.error(ul.format("SpriteEx.loadSpriteFrameFromAtlas spriteFrame not found! key=%d",t)),void n.default.releaseReferenceCount(r);o.spriteFrame=i,o._need_release_refreence_res=r}else n.default.releaseReferenceCount(r)}))},cc.Sprite.prototype.loadSpriteFrameFromAtlasAndKeepSize=function(e,t){var o=this;if(this._sprite_frame_url!=e){var a=this.node;a?(this.__origin_width||(this.__origin_width=a.width*a.scaleX,this.__origin_height=a.height*a.scaleY),this.spriteFrame=null,n.default.loadRes(e,cc.SpriteAtlas,function(r,i){if(r)cc.error(r.message);else if(cc.isValid(o)&&e==o._sprite_frame_url){var s=i.getSpriteFrame(t);if(!s)return cc.error(ul.format("SpriteEx.loadSpriteFrameFromAtlasAndKeepSize spriteFrame not found! key=%d",t)),void n.default.releaseReferenceCount(i);var l=o.__origin_width,c=o.__origin_height;o.type=cc.Sprite.Type.SIMPLE,o.sizeMode=cc.Sprite.SizeMode.TRIMMED,o.spriteFrame=s,o._need_release_refreence_res=i,a.scale=Math.min(l/a.width,c/a.height)}else n.default.releaseReferenceCount(i)})):cc.warn("SpriteEx.loadSpriteFrameAndKeepSize node not found!")}};var l=cc.renderer.renderEngine,c=l.SpriteMaterial,u=l.GraySpriteMaterial;cc.Sprite.prototype.getMaterial=function(e){return this._materials?this._materials[e]:void 0},cc.Sprite.prototype.setMaterial=function(e,t){this._materials||(this._materials={}),t||r.ShaderLib.getShader(e)&&(t=new a.CustomSpriteMaterial(e)),this._materials[e]=t},cc.Sprite.prototype.activateMaterial=function(e){var t=this.getMaterial(e);if(t||(this.setMaterial(e),t=this.getMaterial(e)),!t)return cc.warn("SpriteEx.activateMaterial material not found!",e),void this.setState(cc.Sprite.State.NORMAL);t!==this._currMaterial&&(this.node&&(t.color=this.node.color),this.spriteFrame&&(t.texture=this.spriteFrame.getTexture()),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR,this._currMaterial=t,this._currMaterial.name=e,this._state=101,this._activateMaterial())},cc.Sprite.prototype.getCurrMaterial=function(){if(101===this._state)return this._currMaterial},cc.Sprite.prototype._activateMaterial=function(){var e=this._spriteFrame;if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){var t=void 0;if(this._state===cc.Sprite.State.GRAY)this._graySpriteMaterial||(this._graySpriteMaterial=new u),t=this._graySpriteMaterial,this._currMaterial=null;else if(101===this._state){if(!this._currMaterial)return void console.error("_activateMaterial: _currMaterial undefined!");t=this._currMaterial}else this._spriteMaterial||(this._spriteMaterial=new c),t=this._spriteMaterial,this._currMaterial=null;if(t.useColor=!1,cc.isValid(e)&&e.textureLoaded()){var o=e.getTexture();t.texture!==o?(t.texture=o,this._updateMaterial(t)):t!==this._material&&this._updateMaterial(t),this._renderData&&(this._renderData.material=t),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR,this.markForUpdateRenderData(!0),this.markForRender(!0)}else this.disableRender()}else this.markForUpdateRenderData(!0),this.markForRender(!0)},cc.Sprite.prototype.loadLocalziedSpriteFrame=function(e){i.default.tryLocdLocalizedSpriteFrame(this,e)},cc._RF.pop()},{"../../game/manager/mgrI18n":"mgrI18n","../manager/ManagerDirectorBase":"ManagerDirectorBase","../material/CustomSpriteMaterial":"CustomSpriteMaterial","../material/ShaderLib":"ShaderLib"}],SpriteFrameSet:[function(e,t,o){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],TaskManager:[function(e,t,o){"use strict";cc._RF.push(t,"9219f/hY2pCjaDoPqtZM2Jb","TaskManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.taskList=[],this.curProgress=0,this.totalProgress=0}return e.prototype.setProgressCb=function(e){this.progressUpdateCallback=e},e.prototype.setFinishCb=function(e){this.executeFinishCallback=e},e.prototype.pushTasks=function(e){!e||e.length<=0||(this.totalProgress+=e.length,this.taskList.push(e))},e.prototype.start=function(){this.__goNext()},e.prototype.__goNext=function(){var e=this;if(this.taskList.length>0)for(var t=this.taskList.shift(),o=0,n=0;n<t.length;n++){(0,t[n])(function(){o++,e.curProgress++,e.progressUpdateCallback&&e.progressUpdateCallback(e.curProgress,e.totalProgress),o==t.length&&e.__goNext()})}else this.executeFinishCallback&&this.executeFinishCallback()},e}();o.default=n,cc._RF.pop()},{}],TestAnimNode:[function(e,t,o){"use strict";cc._RF.push(t,"f627cotooNCU61V4ITZRD/h","TestAnimNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/SceneBase"),i=e("../../../ulframework/view/DebugMenu"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/view/DebugMouseControlNode"),c=e("../node/LayerColorTwo"),u=e("../../manager/mgrPool"),d=e("../../../ulframework/view/ReuseList"),p=e("../../../ulframework/utils/Tools"),f=e("../../../ulframework/view/ReuseLayouterVBox"),h=e("../../manager/mgrCfg"),g=e("../../manager/mgrTip"),_=cc._decorator,m=_.ccclass,v=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.selectedAnimId=null,t}return n(t,e),t.prototype._getResourceName=function(){return"_devtest/TestAnimNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_layoutList:{varname:"layoutList",vartype:cc.Layout}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new i.default([["dispose",function(){e.animNode&&(e.animNode.removeFromParent(),u.default.put(e.animNode),e.animNode=null)}],["playOnce",function(){e.selectedAnimId&&g.default.playAnimNodeOnce56(e.selectedAnimId,p.default.random(s.default.width),p.default.random(s.default.height))}]],250,50,4);t.parent=this,t.x=this.width/2+10-310,t.y=this.height/2-60;var o=new d.default;o.parent=this.layoutList.node,o.setLayouter((new f.default).setCellSize(292,50).setGap(4).setPending(4)),o.setCreator(function(t){var o=new c.default(cc.color(0,0,0,63));o.parent=t,o.setContentSize(t.getContentSize()),t.layerBg=o;var n=new cc.Node;n.parent=t;var a=n.addComponent(cc.Label);a.fontSize=18,a.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=a,p.default.registerTouchHandler(t,function(t){var o=t.target;"ended"==t.name&&e.onSelectAnimId(o.data.id)})}),o.setSetter(function(t,o){cc.color(255,255,255);t.label.node.color=o.id==e.selectedAnimId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",o.id,o.name)}),o.setContentSize(this.layoutList.node.getContentSize());var n=[];h.default.forDb("anim_node_db",function(e,t){n.push(t)}),o.setDatas(n),this.reuseList=o;var a=new l.default;a.parent=this,a.setPosition(0,-s.default.height/4),this.nodeRoot=a;var r=new c.default(cc.color(255,0,0,255));r.parent=a,r.zIndex=2,r.setContentSize(4,4)},t.prototype.onSelectAnimId=function(e){this.selectedAnimId=e,this.reuseList.refreshActiveCells();var t=h.default.get("anim_node_db",e);this.labelTitle.string=ul.format("%s-%s",t.id,t.name),this.animNode&&(this.animNode.removeFromParent(),u.default.put(this.animNode),this.animNode=null);var o=u.default.get("animNode",e);o.parent=this.nodeRoot,o.play(),this.animNode=o,o.registerEventCallback(function(e){cc.log("onAnimEvent",e)})},t=a([m],t)}(r.default));o.default=v,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/DebugMouseControlNode":"DebugMouseControlNode","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPool":"mgrPool","../../manager/mgrTip":"mgrTip","../node/LayerColorTwo":"LayerColorTwo"}],TestParticle:[function(e,t,o){"use strict";cc._RF.push(t,"17c9drHzM1GMq/2dDe3oY9Y","TestParticle");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/SceneBase"),i=e("../../../ulframework/view/DebugMenu"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVBox"),c=e("../node/LayerColorTwo"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrCfg"),p=e("../../../ulframework/view/DebugMouseControlNode"),f=e("../../manager/mgrDirector"),h=e("../../manager/mgrPool"),g=e("../../manager/mgrTip"),_=cc._decorator,m=_.ccclass,v=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.selectedParticleId=null,t}return n(t,e),t.prototype._getResourceName=function(){return"_devtest/TestParticle"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_layoutList:{varname:"layoutList",vartype:cc.Layout}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new i.default([["dispose",function(){e.particle&&(e.particle.removeFromParent(),h.default.put(e.particle),e.particle=null)}],["playOnce",function(){e.selectedParticleId&&g.default.playParticleOnce(e.selectedParticleId,u.default.random(f.default.width),u.default.random(f.default.height))}],["\u8bfb\u53d6\u6570\u636e",function(){if(e.selectedParticleId){ul.dump(jsb);var t=d.default.get("particle_db",e.selectedParticleId),o=cc.url.raw(ul.format("resources/%s.plist",t.filename));cc.loader.load(o,function(e,t){cc.log("particle:"),cc.log(o),cc.log(t)})}}]],250,50,4);t.parent=this,t.x=this.width/2-260,t.y=this.height/2-60;var o=new s.default;o.parent=this.layoutList.node,o.setLayouter((new l.default).setCellSize(292,50).setGap(4).setPending(4)),o.setCreator(function(t){var o=new c.default(cc.color(0,0,0,63));o.parent=t,o.setContentSize(t.getContentSize()),t.layerBg=o;var n=new cc.Node;n.parent=t;var a=n.addComponent(cc.Label);a.fontSize=18,a.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=a,u.default.registerTouchHandler(t,function(t){var o=t.target;"ended"==t.name&&e.onSelectParticleId(o.data.id)})}),o.setSetter(function(t,o){cc.color(255,255,255);t.label.node.color=o.id==e.selectedParticleId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",o.id,o.name)}),o.setContentSize(this.layoutList.node.getContentSize());var n=[];d.default.forDb("particle_db",function(e,t){n.push(t)}),o.setDatas(n),this.reuseList=o;var a=new p.default;a.parent=this,a.setPosition(0,-f.default.height/4),this.nodeRoot=a;var r=new c.default(cc.color(255,0,0,255));r.parent=a,r.zIndex=2,r.setContentSize(4,4)},t.prototype.onSelectParticleId=function(e){this.selectedParticleId=e,this.reuseList.refreshActiveCells();var t=d.default.get("particle_db",e);this.labelTitle.string=ul.format("%s-%s",t.id,t.name),this.particle&&(this.particle.removeFromParent(),h.default.put(this.particle),this.particle=null);var o=h.default.get("particle",e);o.parent=this.nodeRoot;o.getComponent(cc.ParticleSystem);t.bPlayOnce||(this.particle=o)},t=a([m],t)}(r.default));o.default=v,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/DebugMouseControlNode":"DebugMouseControlNode","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPool":"mgrPool","../../manager/mgrTip":"mgrTip","../node/LayerColorTwo":"LayerColorTwo"}],TestSound:[function(e,t,o){"use strict";cc._RF.push(t,"d733a3pO81OjIfHWXw8G5wW","TestSound");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/SceneBase"),i=e("../../../ulframework/view/ReuseList"),s=e("../../../ulframework/view/ReuseLayouterVBox"),l=e("../node/LayerColorTwo"),c=e("../../manager/mgrCfg"),u=e("../../../ulframework/utils/Tools"),d=e("../../../ulframework/view/DebugMenu"),p=e("../../manager/mgrTip"),f=e("../../manager/mgrSound"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutBg=null,t.layoutList=null,t.sliderEffect=null,t.sliderMusic=null,t}return n(t,e),t.prototype._getResourceName=function(){return"_devtest/TestSound"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_layoutList:{varname:"layoutList",vartype:cc.Layout},CC_sliderEffect:{varname:"sliderEffect",vartype:cc.Slider},CC_sliderMusic:{varname:"sliderMusic",vartype:cc.Slider}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new i.default;t.parent=this.layoutList.node,t.setLayouter((new s.default).setCellSize(292,50).setGap(4).setPending(4)),t.setCreator(function(t){var o=new l.default(cc.color(0,0,0,255));o.parent=t,o.setContentSize(t.getContentSize()),t.layerBg=o;var n=new cc.Node;n.parent=t;var a=n.addComponent(cc.Label);a.fontSize=18,a.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=a,u.default.registerTouchHandler(t,function(o){o.isClick()&&e.onSelectSound(t.data.id)})}),t.setSetter(function(t,o){t.label.string=ul.format("%d[%d]-%s",o.id,o.type,o.name),t.label.node.color=e.selectedSoundId==o.id?cc.color(0,255,0):cc.color(255,255,255)}),t.setContentSize(this.layoutList.node.getContentSize());var o=[];c.default.forDb("sound_db",function(e,t){o.push(t)}),t.setDatas(o);var n=new d.default([["\u64ad\u653e",function(){var t=e.selectedSoundId;t?f.default.play(t):p.default.showMsgTip("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u58f0\u97f3")}],["\u505c\u6b62",function(){f.default.stopAll()}]],250,50,4);n.parent=this,n.x=-this.width/2+10+310,n.y=this.height/2-60,this.sliderMusic.node.on("slide",this.onSlideSliderMusic.bind(this)),this.sliderEffect.node.on("slide",this.onSlideSliderEffect.bind(this)),this.sliderMusic.progress=f.default.getMusicVolmue(),this.sliderEffect.progress=f.default.getEffectVolume(),this.reuseList=t},t.prototype.onSelectSound=function(e){this.selectedSoundId=e,this.reuseList.refreshActiveCells()},t.prototype.onSlideSliderMusic=function(e){var t=e.target.getComponent(cc.Slider);cc.log("onSlideSliderMusic",t.progress),f.default.setMusicVomue(t.progress)},t.prototype.onSlideSliderEffect=function(e){var t=e.target.getComponent(cc.Slider);cc.log("onSlideSliderEffect",t.progress),f.default.setEffectVolume(t.progress)},t=a([g],t)}(r.default));o.default=_,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/LayerColorTwo":"LayerColorTwo"}],TestSpine:[function(e,t,o){"use strict";cc._RF.push(t,"2ad0fJwPe9DaqKZhsBEvEkX","TestSpine");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/SceneBase"),i=e("../../../ulframework/view/DebugMenu"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVBox"),c=e("../node/LayerColorTwo"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrCfg"),p=e("../../../ulframework/view/DebugMouseControlNode"),f=e("../../manager/mgrDirector"),h=e("../../manager/mgrPool"),g=e("../../manager/mgrTip"),_=cc._decorator,m=_.ccclass,v=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.selectedSpineId=null,t}return n(t,e),t.prototype._getResourceName=function(){return"_devtest/TestSpine"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_layoutList:{varname:"layoutList",vartype:cc.Layout}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine&&(this.spine.removeFromParent(),h.default.put(this.spine),this.spine=null)},t.prototype.buildUi=function(){var e=this,t=new i.default([["dispose",function(){e.spine&&(e.spine.removeFromParent(),h.default.put(e.spine),e.spine=null)}],["mov_1",function(){e.spine&&e.spine.play("mov_1",e.spine.spineData._bDebugLoop)}],["mov_2",function(){e.spine&&e.spine.play("mov_2",e.spine.spineData._bDebugLoop)}],["mov_3",function(){e.spine&&e.spine.play("mov_3",e.spine.spineData._bDebugLoop)}],["mov_4",function(){e.spine&&e.spine.play("mov_4",e.spine.spineData._bDebugLoop)}],["mov_5",function(){e.spine&&e.spine.play("mov_5",e.spine.spineData._bDebugLoop)}],["mov_6",function(){e.spine&&e.spine.play("mov_6",e.spine.spineData._bDebugLoop)}],["mov_7",function(){e.spine&&e.spine.play("mov_7",e.spine.spineData._bDebugLoop)}],["mov_8",function(){e.spine&&e.spine.play("mov_8",e.spine.spineData._bDebugLoop)}],["mov_9",function(){e.spine&&e.spine.play("mov_9",e.spine.spineData._bDebugLoop)}],["mov_10",function(){e.spine&&e.spine.play("mov_10",e.spine.spineData._bDebugLoop)}],["playOnce",function(){e.selectedSpineId&&g.default.playSpineOnce(e.selectedSpineId,u.default.random(f.default.width),u.default.random(f.default.height))}]],250,50,4);t.parent=this,t.x=this.width/2-260,t.y=this.height/2-60;var o=new s.default;o.parent=this.layoutList.node,o.setLayouter((new l.default).setCellSize(292,50).setGap(4).setPending(4)),o.setCreator(function(t){var o=new c.default(cc.color(0,0,0,63));o.parent=t,o.setContentSize(t.getContentSize()),t.layerBg=o;var n=new cc.Node;n.parent=t;var a=n.addComponent(cc.Label);a.fontSize=18,a.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=a,u.default.registerTouchHandler(t,function(t){var o=t.target;"ended"==t.name&&e.onSelectSpineId(o.data.id)})}),o.setSetter(function(t,o){cc.color(255,255,255);t.label.node.color=o.id==e.selectedSpineId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",o.id,o.name)}),o.setContentSize(this.layoutList.node.getContentSize());var n=[];d.default.forDb("spine_db",function(e,t){n.push(t)}),o.setDatas(n),this.reuseList=o;var a=new p.default;a.parent=this,a.setPosition(0,-f.default.height/4),this.nodeRoot=a;var r=new c.default(cc.color(255,0,0,255));r.parent=a,r.zIndex=2,r.setContentSize(4,4)},t.prototype.onSelectSpineId=function(e){this.selectedSpineId=e,this.reuseList.refreshActiveCells();var t=d.default.get("spine_db",e);this.labelTitle.string=ul.format("%s-%s",t.id,t.name),this.spine&&(this.spine.removeFromParent(),h.default.put(this.spine),this.spine=null);var o=h.default.get("spine",e);o.parent=this.nodeRoot,o.play("mov_2",!0),this.spine=o,o.registerEventCallback(function(e){cc.log("onSpineEvent",e)})},t=a([m],t)}(r.default));o.default=v,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/DebugMouseControlNode":"DebugMouseControlNode","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPool":"mgrPool","../../manager/mgrTip":"mgrTip","../node/LayerColorTwo":"LayerColorTwo"}],Timer:[function(e,t,o){"use strict";cc._RF.push(t,"f3111ePoeBAwIQ8CGVyY16w","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._span=e,this._repeatCount=t,this._callback=o}return e.callLater=function(t,o,n){var a=new e(t,1,o);n?a.startAndBindToNode(n):a.start()},e.callLoop=function(t,o,n){var a=new e(t,-1,o);if(1==n){var r=n;a.start(r)}else if(n instanceof cc.Node){a.startAndBindToNode(n)}else a.start()},e.prototype._onSpan=function(){if(this._count++,this._callback)try{this._callback(this)}catch(e){cc.warn("\u8b66\u544a] Timer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),e.prototype.startAndBindToNode=function(e){var t=this,o=new cc.Node,n=o.addComponent(cc.Component);return 0==n._isOnLoadCalled?n.onLoad=function(){t.start(!0)}:this.start(!0),n.onDestroy=function(){t.stop()},o.parent=e,this._bindingNode=o,this},e.prototype.start=function(e){return void 0===e&&(e=!1),this.stop(),this._callback?(!e&&this._repeatCount<0&&(cc.warn("\u8b66\u544a] Timer.start, this timer will never stop!"),cc.warn("\u8b66\u544a]     please use startAndBindToNode"),cc.warn("\u8b66\u544a]     or your can stop timer in callback. use e:stop()")),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(cc.warn("\u8b66\u544a] Timer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();o.default=n,cc._RF.pop()},{}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"ddcc2p3lQhKBYTlLASMxtxW","Tools");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){}var t;return t=e,e.time=function(){return null!=this._debugTime?this._debugTime:(new Date).getTime()/1e3},e._setDebugTime=function(e){this._debugTime=e},e.isOneDay=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.registerTouchHandler=function(e,t,o){void 0===o&&(o=!1);var n=e;if(n&&t){n.on(cc.Node.EventType.TOUCH_START,function(e){var a=e.getID()||0;return!(!o&&null!=n.__touch_id||(e.name="began",e.stopPropagation(),n.__touch_id=a,t(e),0))}),n.on(cc.Node.EventType.TOUCH_MOVE,function(e){var a=e.getID()||0;(o||a==n.__touch_id)&&(e.name="moved",t(e))}),n.on(cc.Node.EventType.TOUCH_END,function(e){var a=e.getID()||0;(o||a==n.__touch_id)&&(e.name="ended",n.__touch_id=null,t(e))}),n.on(cc.Node.EventType.TOUCH_CANCEL,function(e){var a=e.getID()||0;(o||a==n.__touch_id)&&(e.name="cancelled",n.__touch_id=null,t(e))})}},e.unregisterTouchHandler=function(e){e.off(cc.Node.EventType.TOUCH_START,null),e.off(cc.Node.EventType.TOUCH_MOVE,null),e.off(cc.Node.EventType.TOUCH_END,null),e.off(cc.Node.EventType.TOUCH_CANCEL,null)},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var o=0;return t.forEachMap(e,function(e,t){o++}),o},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,o,n,a){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(a-n)+n},e.isWorldLocaInNode=function(e,o,n){var a=t.calcNodeBoundingBoxToWorld(e);return null!=n&&(a.x-=n,a.y-=n,a.width+=2*n,a.height+=2*n),a.contains(o)},e.calcRecursiveScale=function(e){var t=1;do{t*=e.getScale(),e=e.parent}while(null!=e);return t},e.calcWheelTarget=function(e,t){for(var o=0,n=0;n<e.length;n++){var a=e[n],r=parseInt(a[t]);if(isNaN(r))return cc.warn(ul.format("Tools.calcWheelTarget weight field not found! key=[%s]",t)),null;o+=r}var i=this.random(o);for(n=0;n<e.length;n++){a=e[n];if(i<=(r=parseInt(a[t])))return a;i-=r}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var o=[];for(var n in t){if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var a=s.substring(1,s.length);a&&""!=a&&o.push([a,!0])}else o.push([s,!1])}for(var r=[],i=0;i<e.length;i++){var s=e[i];r.push(s)}return r.sort(function(e,t){var n=0;for(var a in o){var r=o[a],i=r[0],s=r[1],l=e[i],c=t[i];if(null!=l&&0!=(n=s?c-l:l-c))return n}return n}),r},e.bubbleSort=function(e,t){for(var o=e.length,n=0;n<o;n++)for(var a=0;a<o-1-n;a++){if(t(e[a],e[a+1])>0){var r=e[a+1];e[a+1]=e[a],e[a]=r}}return e},e.forEachMap=function(e,t){if(e)for(var o=Object.keys(e),n=0;n<o.length;n++){var a=o[n],r=e[a];if(null!=r&&t(a,r))break}},e._origin_sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=[],n=e.length,a=0;a<n;a++)for(var r=e[a],i=o.indexOf(r),s=0,l=e.length;s<l;s++)if(a!=s){var c=e[s];if(t(r,c)){var u=o.indexOf(c);i<0&&(o.push(r),i=o.length-1),u<0&&(o.push(c),u=o.length-1),u<i&&(o.splice(i,1),o.splice(u,0,r),i=u)}}for(a=0;a<e.length;a++){r=e[a];o.indexOf(r)<0&&o.push(r)}return o},e.sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=0;o<e.length;o++){e[o]._id=o}var n=[],a={},r=e.length;for(o=0;o<r;o++)for(var i=a[(d=e[o])._id],s=0;s<r;s++)if(o!=s){var l=e[s];if(t(d,l)){var c=a[l._id];if(null==i&&(n.push(d),i=n.length-1,a[d._id]=i),null==c&&(n.push(l),c=n.length-1,a[l._id]=c),c<i){for(var u=c;u<i;u++){a[n[u]._id]++}n.splice(i,1),n.splice(c,0,d),i=c,a[d._id]=i}}}for(o=0;o<e.length;o++){var d;null==a[(d=e[o])._id]&&n.push(d)}return n},e.convertRectToNodeSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToNodeSpaceAR(o),n=e.convertToNodeSpaceAR(n);var a=Math.min(o.x,n.x),r=Math.min(o.y,n.y),i=Math.max(o.x,n.x)-a,s=Math.max(o.y,n.y)-r;return new cc.Rect(a,r,i,s)},e.convertRectToWorldSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToWorldSpaceAR(o),n=e.convertToWorldSpaceAR(n);var a=Math.min(o.x,n.x),r=Math.min(o.y,n.y),i=Math.max(o.x,n.x)-a,s=Math.max(o.y,n.y)-r;return new cc.Rect(a,r,i,s)},e.calcNodeBoundingBoxToWorld=function(e,o){var n=e.getBoundingBox();return o&&(n.x-=o,n.y-=o,n.width+=2*o,n.height+=2*o),t.convertRectToWorldSpace(e.parent,n)},e.formatTime=function(e,t){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,a=Math.floor(e)%60;return t.match("%h")&&(t=t.replace("%h",o.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",o))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",a.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",a))),t},e.formatFullTime=function(e,t){var o=new Date(e),n=o.getFullYear(),a=o.getMonth()+1,r=o.getDate(),i=o.getHours(),s=o.getMinutes(),l=o.getSeconds();return t.match("%y")&&(t=t.replace("%y",n.toString())),t.match("%m")&&(t=t.replace("%m",a.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",a))),t.match("%d")&&(t=t.replace("%d",r.toString())),t.match("%D")&&(t=t.replace("%D",ul.format("%02d",r))),t.match("%h")&&(t=t.replace("%h",i.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",i))),t.match("%tm")&&(t=t.replace("%tm",s.toString())),t.match("%TM")&&(t=t.replace("%TM",ul.format("%02d",s))),t.match("%s")&&(t=t.replace("%s",l.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",l))),t},e.setCascadeColor=function(e,t){e.color=t;for(var o=0;o<e.children.length;o++){var n=e.children[o];this.setCascadeColor(n,t)}},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},e.parseLogicExpressionArray=function(e){for(var t=!0,o=!1,n=null,a=0;a<e.length;a++){var r=e[a];switch(Array.isArray(r)&&(r=this.parseLogicExpressionArray(r)),typeof r){case"string":switch(r){case"not":o=!o;break;case"and":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),a,n,r)),n="and";break;case"or":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),a,n,r)),n="or";break;default:cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' unknown symbol index=[%d], symbol=[%s]",JSON.stringify(e),a,r))}break;case"boolean":o&&(r=!r,o=!1),t=n&&"and"!=n?t||r:t&&r}}return t},e.recursionChildren=function(e,t){if(cc.isValid(e)&&t)for(var o=0;o<e.children.length;o++){var n=e.children[o];cc.isValid(n)&&(t(n),this.recursionChildren(n,t))}},e.booleanArrayToFlagsNumber=function(e){for(var t=0,o=Math.max(e.length,32),n=0;n<o;n++){t|=(e[n]?1:0)<<n}return t},e.formatNumToStr=function(e){if(0!==e&&!e)return"0";var t=e.toString();return e>=1e12?t=Math.floor(e/10/1e3/1e3/1e3)/100+"mm":e>=1e9?t=Math.floor(e/10/1e3/1e3)/100+"km":e>=1e6?t=Math.floor(e/10/1e3)/100+"m":e>=1e3&&(t=Math.floor(e/10)/100+"k"),t},e.getRotateByVector=function(e){var t=0,o=e.x,n=e.y;0!=o?t=-1*Math.atan(n/o)*(180/Math.PI):n>0?t=-90:n<0&&(t=90);return t},e.vectorToDegress=function(e){var t=cc.v2(1,0),o=e.signAngle(t);return cc.misc.radiansToDegrees(o)},e.clampf=function(e,t,o){return e<t?t:e>o?o:e},e._debugTime=null,e=t=n([r],e)}());o.default=i,cc._RF.pop()},{}],ULAdViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"a8341Y8+mxHNK8zzMyKsz3s","ULAdViewBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=window.cc,a=window.Laya,r=function(){function e(){this.ENGINE_COCOS="cocos",this.ENGINE_LAYA="laya",this.engine=null}return e.prototype.init=function(){},e.prototype.onAdvShow=function(){ULSDK.console.log("ULAdViewBase.show")},e.prototype.onAdvClose=function(){ULSDK.console.log("ULAdViewBase.hide")},e.prototype.onAdvDestroy=function(){ULSDK.console.log("ULAdViewBase.destroy")},e.prototype.onAdvClicked=function(){ULSDK.console.log("ULAdViewBase.click")},e.prototype.getCanvasSize=function(){if(n){var e=this.getNodeCanvas();return e?{width:e.width,height:e.height}:(ULSDK.console.warn("ULAdViewBase.getCanvasSize nodeCanvas not found!"),{width:0,height:0})}return a?{width:a.stage.width,height:a.stage.height}:{width:0,height:0}},e.prototype.getNodeCanvas=function(){if(!n)return ULSDK.console.warn("ULAdViewBase.getNodeCanvas \u672a\u68c0\u6d4b\u5230creator\u73af\u5883\uff01"),null;var e=n.director.getScene();if(!e)return ULSDK.console.warn("ULAdViewBase.getNodeCanvas scene not found!"),null;var t=e.getChildByName("Canvas");return t||(ULSDK.console.warn("ULAdViewBase.getNodeCanvas nodeCanvas not found!"),null)},e.prototype.registerCocosTouchHandler=function(e,t,o,a,r){void 0===o&&(o=!1),void 0===a&&(a=!0),void 0===r&&(r=!1);var i=e;if(i&&t){i.on(n.Node.EventType.TOUCH_START,function(e){var n=e.getID()||0;return!(!o&&null!=i.__touch_id||(e.name="began",a&&e.stopPropagation(),i.__touch_id=n,t(e),0))},null,r),i.on(n.Node.EventType.TOUCH_MOVE,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="moved",t(e))},null,r),i.on(n.Node.EventType.TOUCH_END,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="ended",i.__touch_id=null,t(e))},null,r),i.on(n.Node.EventType.TOUCH_CANCEL,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="cancelled",i.__touch_id=null,t(e))},null,r)}},e.prototype.isTouchEventClick=function(e){if("ended"!=e.name&&"cancelled"!=e.name)return!1;var t=e.getStartLocation(),o=e.getLocation(),n=t.x-o.x,a=t.y-o.y;return n*n+a*a<=400},e.prototype.getRootNode=function(){return a.stage.getChildByName("__ulsdk_ui_node_root__")},e.prototype.registerLayaTouchHander=function(e,t){var o,n;e.on(a.Event.MOUSE_DOWN,e,function(a){e.__b_touch=!0,o=a.stageX,n=a.stageY,t({name:"began",pos:{x:a.stageX,y:a.stageY}})}),e.on(a.Event.MOUSE_UP,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"ended",pos:{x:o.stageX,y:o.stageY}}))}),e.on(a.Event.MOUSE_MOVE,e,function(o){1==e.__b_touch&&t({name:"moved",pos:{x:o.stageX,y:o.stageY}})}),e.on(a.Event.MOUSE_OUT,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"cancelled",pos:{x:o.stageX,y:o.stageY}}))}),e.on(a.Event.CLICK,e,function(e){if(null!=o&&null!=n){var a=e.stageX-o,r=e.stageY-n;if(a*a+r*r>=400)return}t({name:"click",pos:{x:e.stageX,y:e.stageY}})})},e}();o.default=r,cc._RF.pop()},{}],ULAdvBase:[function(e,t,o){"use strict";cc._RF.push(t,"b7c57e0OtZKKoavhYeVXged","ULAdvBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../events/ULEventDispatcher"),r=e("../ULConsts"),i=e("./ULConfig"),s=e("./ULModuleBase"),l=e("../utils/ULTools"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoPriority=-1,t.interPriority=-1,t.bannerPriority=-1,t.embeddedPriority=-1,t.urlPriority=-1,t.pasterPriority=-1,t}return n(t,e),t.prototype.init=function(){"ULAdvBase"==this.name&&ULSDK.console.warn("ULAdvBase.init \u8bf7\u5728\u5b50\u7c7b\u4e2d\u4fee\u6539this.name!"),a.default.getInstance().addListener(r.default.CMD_SDK_ON_COP_CHANGED,1,this.onCopChanged.bind(this)),this.refreshPriority(),this.registerListeners()},t.prototype.refreshPriority=function(){var e=i.default.getConfig();this.videoPriority=this.calcPriority(e.s_sdk_adv_show_video_list,this.name),this.interPriority=this.calcPriority(e.s_sdk_adv_show_inter_list,this.name),this.bannerPriority=this.calcPriority(e.s_sdk_adv_show_banner_list,this.name),this.embeddedPriority=this.calcPriority(e.s_sdk_adv_show_embedded_list,this.name),this.urlPriority=this.calcPriority(e.s_sdk_adv_show_url_list,this.name),this.pasterPriority=this.calcPriority(e.s_sdk_adv_show_paster_list,this.name),this.fShowVideoCallback=this.processShowAdvCallback("video",this.showVideoAdv.bind(this)),this.fShowInterCallback=this.processShowAdvCallback("interstitial",this.showInterAdv.bind(this)),this.fShowBannerCallback=this.processShowAdvCallback("banner",this.showBannerAdv.bind(this)),this.fShowEmbeddedCallback=this.processShowAdvCallback("embedded",this.showEmbeddedAdv.bind(this)),this.fShowUrlCallback=this.processShowAdvCallback("url",this.showUrlAdv.bind(this)),this.fShowPasterCallback=this.processShowAdvCallback("paster",this.showPasterAdv.bind(this)),ULSDK.console.log("ULAdvBase.refreshPriority",this.name),this.videoPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u89c6\u9891\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_video_list]=[%s]",this.name,e.s_sdk_adv_show_video_list)):ULSDK.console.log("  videoPriority",this.videoPriority),this.interPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u63d2\u5c4f\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_inter_list]=[%s]",this.name,e.s_sdk_adv_show_inter_list)):ULSDK.console.log("  interPriority",this.interPriority),this.bannerPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u6a2a\u5e45\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_banner_list]=[%s]",this.name,e.s_sdk_adv_show_banner_list)):ULSDK.console.log("  bannerPriority",this.bannerPriority),this.embeddedPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u5d4c\u5165\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_embedded_list]=[%s]",this.name,e.s_sdk_adv_show_embedded_list)):ULSDK.console.log("  embeddedPriority",this.embeddedPriority),this.urlPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u4e92\u52a8\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_url_list]=[%s]",this.name,e.s_sdk_adv_show_url_list)):ULSDK.console.log("  urlPriority",this.urlPriority),this.pasterPriority<=r.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u4e92\u52a8\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_paster_list]=[%s]",this.name,e.s_sdk_adv_show_paster_list)):ULSDK.console.log("  urlPriority",this.pasterPriority)},t.prototype.processShowAdvCallback=function(e,t){var o=this;return function(n){var a=n.data;a?(a.showAdvType=e,a.showChannelName=o.name||"",t(n)):ULSDK.console.warn("ULAdvBase.on showAdvCallback advItem not found!",e)}},t.prototype.registerListeners=function(){var e=this;a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_VIDEO_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare video",e.name,e.videoPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_VIDEO_ADV,e.videoPriority,e.fShowVideoCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_INTER_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare inter",e.name,e.interPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_INTER_ADV,e.interPriority,e.fShowInterCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_BANNER_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare banner",e.name,e.bannerPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_BANNER_ADV,e.bannerPriority,e.fShowBannerCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare embedded",e.name,e.embeddedPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_EMBEDDED_ADV,e.embeddedPriority,e.fShowEmbeddedCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_URL_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare url",e.name,e.urlPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_URL_ADV,e.urlPriority,e.fShowUrlCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_PREPARE_SHOW_PASTER_ADV,r.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare paster",e.name,e.pasterPriority),a.default.getInstance().once(r.default.CMD_SDK_SHOW_PASTER_ADV,e.pasterPriority,e.fShowPasterCallback)}),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_VIDEO_ADV,r.default.PRIORITY_NONE,this.closeVideoAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_INTER_ADV,r.default.PRIORITY_NONE,this.closeInterAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_BANNER_ADV,r.default.PRIORITY_NONE,this.closeBannerAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_EMBEDDED_ADV,r.default.PRIORITY_NONE,this.closeEmbeddedAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_URL_ADV,r.default.PRIORITY_NONE,this.closeUrlAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_Paster_ADV,r.default.PRIORITY_NONE,this.closePasterAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLICK_NATIVE_ADV,r.default.PRIORITY_NONE,this.onClickNativeAdv.bind(this)),a.default.getInstance().addListener(r.default.CMD_SDK_CLOSE_NATIVE_ADV,r.default.PRIORITY_NONE,this.onCloseNativeAdv.bind(this))},t.prototype.calcPriority=function(e,t){if(!e)return r.default.PRIORITY_DISABLE;for(var o=e.split("_"),n=0;n<o.length;n++){if(o[n]==t)return o.length-n}return r.default.PRIORITY_DISABLE},t.prototype.onCopChanged=function(e){this.refreshPriority()},t.prototype.showVideoAdv=function(e){ULSDK.console.log("ULAdvBase.showVideoAdv",this.name)},t.prototype.showInterAdv=function(e){ULSDK.console.log("ULAdvBase.showInterAdv",this.name)},t.prototype.showBannerAdv=function(e){ULSDK.console.log("ULAdvBase.showBannerAdv",this.name)},t.prototype.showEmbeddedAdv=function(e){ULSDK.console.log("ULAdvBase.showEmbeddedAdv",this.name)},t.prototype.showUrlAdv=function(e){ULSDK.console.log("ULAdvBase.showUrlAdv",this.name)},t.prototype.showPasterAdv=function(e){ULSDK.console.log("ULAdvBase.showPasterAdv",this.name)},t.prototype.closeVideoAdv=function(e){ULSDK.console.log("ULAdvBase.closeVideoAdv",this.name)},t.prototype.closeInterAdv=function(e){ULSDK.console.log("ULAdvBase.closeInterAdv",this.name)},t.prototype.closeBannerAdv=function(e){ULSDK.console.log("ULAdvBase.closeBannerAdv",this.name)},t.prototype.closeEmbeddedAdv=function(e){ULSDK.console.log("ULAdvBase.closeEmbeddedAdv",this.name)},t.prototype.closeUrlAdv=function(e){ULSDK.console.log("ULAdvBase.closeUrlAdv",this.name)},t.prototype.closePasterAdv=function(e){ULSDK.console.log("ULAdvBase.closePasterAdv",this.name)},t.prototype.onClickNativeAdv=function(e){ULSDK.console.log("ULAdvBase.onClickNativeAdv",this.name)},t.prototype.onCloseNativeAdv=function(e){ULSDK.console.log("ULAdvBase.onCloseNativeAdv",this.name)},t}(s.default);o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULModuleBase":"ULModuleBase"}],ULAdvFacebook:[function(e,t,o){"use strict";cc._RF.push(t,"395829nk7ZMwK7jLBxDqfcE","ULAdvFacebook");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULAdvBase"),r=e("../../core/ULSdkManager"),i=e("../../core/ULConfig"),s=e("../../ULConsts"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="ULAdvFaceBook",t.interAdPreloadArray=[],t.videoAdPreloadArray=[],t.interAdArray=[],t.videoAdArray=[],t.bannerIsShowing=!1,t}return n(t,e),t.prototype.init=function(){var t=this;e.prototype.init.call(this),this.startTime=c.default.time(),ULSDK.console.log("ULAdvFaceBook.init....\u5373\u5c06\u5f00\u59cb\u5e7f\u544a\u9884\u52a0\u8f7d"),setTimeout(function(){t.preLoadAd()},1e4)},t.prototype.preLoadAd=function(){var e=this;this.videoAdArray.length+this.videoAdPreloadArray.length<3&&this.getVideoAd(),this.interAdArray.length+this.interAdPreloadArray.length<3&&this.getInterAd(),setTimeout(function(){e.preLoadAd()},3e4)},t.prototype.getVideoAd=function(){var e=this,t=i.default.getConfig();0!=(t.s_sdk_facebook_videoId||"").replace(/(^\s*)|(\s*$)/g,"").length?window.FBInstant&&window.FBInstant.getRewardedVideoAsync(t.s_sdk_facebook_videoId).then(function(t){ULSDK.console.log("ULAdvFaceBook.getVideoAd....\u5b9e\u4f8b\u52a0\u8f7d\u6210\u529f: "),e.videoAdPreloadArray.push(t),e.videoADLoadData(t,0)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.getVideoAd....\u52a0\u8f7d\u5931\u8d25: ",e,e.message)}):ULSDK.console.log("ULAdvFaceBook s_sdk_facebook_videoId \u4e3a\u7a7a")},t.prototype.getInterAd=function(){var e=this,t=i.default.getConfig();0!=(t.s_sdk_facebook_interId||"").replace(/(^\s*)|(\s*$)/g,"").length?window.FBInstant&&window.FBInstant.getInterstitialAdAsync(t.s_sdk_facebook_interId).then(function(t){ULSDK.console.log("ULAdvFaceBook.getInterAd....\u5b9e\u4f8b\u52a0\u8f7d\u6210\u529f "),e.interAdPreloadArray.push(t),e.interADLoadData(t,0)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.getInterAd....\u52a0\u8f7d\u5931\u8d25: "+e.message)}):ULSDK.console.log("ULAdvFaceBook s_sdk_facebook_interId \u4e3a\u7a7a")},t.prototype.videoADLoadData=function(e,t){var o=this;e.loadAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.videoADLoadData.videoAd.loadAsync.then \u52a0\u8f7d\u6210\u529f "),o.videoAdArray.push(e);var t=o.videoAdPreloadArray.indexOf(e);t>=0&&o.videoAdPreloadArray.splice(t,1)}).catch(function(n){if(ULSDK.console.error("ULAdvFaceBook.videoADLoadData....\u52a0\u8f7d\u5931\u8d25: "+n.message),t>3){var a=o.videoAdPreloadArray.indexOf(e);a>=0&&o.videoAdPreloadArray.splice(a,1)}else setTimeout(function(){o.videoADLoadData(e,t+1)},2e4)})},t.prototype.interADLoadData=function(e,t){var o=this;e.loadAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.interADLoadData.videoAd.loadAsync.then \u52a0\u8f7d\u6210\u529f "),o.interAdArray.push(e);var t=o.interAdPreloadArray.indexOf(e);t>=0&&o.interAdPreloadArray.splice(t,1)}).catch(function(n){if(ULSDK.console.error("ULAdvFaceBook.interADLoadData....\u52a0\u8f7d\u5931\u8d25: "+n.message),t>3){var a=o.interAdPreloadArray.indexOf(e);a>=0&&o.interAdPreloadArray.splice(a,1)}else setTimeout(function(){o.interADLoadData(e,t+1)},2e4)})},t.prototype.showVideoAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),a=n.s_sdk_facebook_videoId||"";ULSDK.console.log("ULAdvFaceBook.showVideoAdv",o.advId,o.advType,o.serialId),r.default.getInstance().statisManager.reportAdvBranchRequest(o,this.name,a);var c=this.videoAdArray.shift();if(!c)return ULSDK.console.log("ULAdvFaceBook.showVideoAdv......\u672a\u9884\u52a0\u8f7d\u597d"),void r.default.getInstance().advManager.showNextAdv(o,s.default.ADV_FAIL_TIP_NOAD);r.default.getInstance().advManager.onAdvShow(o),c.showAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.showVideoAdv....show.then....\u6fc0\u52b1\u89c6\u9891\u5c55\u793a\u6210\u529f"),t.getVideoAd(),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_user_open_video_event_id,"1"]),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_video_success_show_event_id]),r.default.getInstance().advManager.onAdvClose(o)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.showVideoAdv....show.catch....\u89c6\u9891\u5c55\u793a\u5931\u8d25....err: ",e.message),t.getVideoAd(),r.default.getInstance().advManager.showNextAdv(o,null,e),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_user_open_video_event_id,"2"])})},t.prototype.showInterAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),a=n.s_sdk_facebook_interId||"";if(r.default.getInstance().channelInfo.isNewUser)return ULSDK.console.log("ULAdvFaceBook.showInterAdv:\u65b0\u7528\u6237 \u4e0d\u542f\u52a8\u63d2\u5c4f\u5e7f\u544a"),void r.default.getInstance().advManager.showNextAdv(o,"\u65b0\u7528\u6237\u9650\u5236\u4e2d");var l=c.default.time(),u=n.i_sdk_adv_inter_launch_cd||0,d=Math.max(30,u/1e3);if(l-this.startTime<d)return ULSDK.console.log("ULAdvFaceBook.showInterAdv:\u672a\u8fbe\u5230\u8bf7\u6c42\u542f\u52a8cd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void r.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");var p=n.i_sdk_adv_inter_cd||0,f=Math.max(30,p/1e3);if(l-this.lastShowInterTime<f)return ULSDK.console.log("ULAdvFaceBook.showInterAdv:\u672a\u8fbe\u5230\u5c55\u793acd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void r.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");ULSDK.console.log("ULAdvFaceBook.showInterAdv",o.advId,o.advType,o.serialId),r.default.getInstance().statisManager.reportAdvBranchRequest(o,this.name,a);var h=this.interAdArray.shift();if(!h)return ULSDK.console.log("ULAdvFaceBook.showInterAdv......\u672a\u9884\u52a0\u8f7d\u597d"),void r.default.getInstance().advManager.showNextAdv(o,s.default.ADV_FAIL_TIP_NOAD);h.showAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.showInterAdv....show.then....\u63d2\u5c4f\u5c55\u793a\u6210\u529f"),t.getInterAd(),r.default.getInstance().advManager.onAdvShow(o),t.lastShowInterTime=c.default.time()}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.showInterAdv....show.catch....\u63d2\u5c4f\u5c55\u793a\u5931\u8d25....err: ",e.message),t.getInterAd(),r.default.getInstance().advManager.showNextAdv(o,null,e)})},t.prototype.showBannerAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),a=n.s_sdk_facebook_bannerId||"";if(this.bannerIsShowing)r.default.getInstance().advManager.onAdvFailed(o,"\u5df2\u7ecf\u5728\u5c55\u793a\u4e2d");else{var s=c.default.time(),l=n.i_sdk_adv_banner_cd||0,u=Math.max(30,l/1e3);if(s-this.lastShowBannerTime<u)return ULSDK.console.log("ULAdvFaceBook.showBannerAdv:\u672a\u8fbe\u5230\u5c55\u793acd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void r.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");var d=window.FBInstant;d&&void 0!=d&&d.loadBannerAdAsync?(this.bannerIsShowing=!0,d.loadBannerAdAsync(a).then(function(){ULSDK.console.error("ULAdvFaceBook.loadBannerAdAsync then"),r.default.getInstance().advManager.onAdvShow(o),t.lastShowBannerTime=c.default.time(),t.bannerIsShowing||d.hideBannerAdAsync()}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.loadBannerAdAsync cath err: ",e),r.default.getInstance().advManager.showNextAdv(o,null,e)})):r.default.getInstance().advManager.showNextAdv(o,"FBInstant \u4e3a\u7a7a\u6216\u8005\u4e0d\u652f\u6301 loadBannerAdAsync")}},t.prototype.closeBannerAdv=function(e){e.data;this.bannerIsShowing=!1;var t=window.FBInstant;t&&void 0!=t&&t.hideBannerAdAsync&&t.hideBannerAdAsync()},t}(a.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULAdvBase":"ULAdvBase","../../core/ULConfig":"ULConfig","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULAdvItem:[function(e,t,o){"use strict";cc._RF.push(t,"aca08WqLx9PRYyJmCg4x0TA","ULAdvItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULSdkManager"),a=e("../utils/ULTimer"),r=function(){function e(t,o,a){this.advId=t,this.advType=n.default.getInstance().advManager.searchAdvTypeByAdvId(t),this.advGroupId=n.default.getInstance().advManager.searchAdvGroupIdByAdvId(t),this.userData=o,this.tag=a,this.serialId=e.SERIAL_ID++,this.bOpenAdvResultResponsed=!1,this.bClickAdvResultResponsed=!1,this.lifeCycleLog={},this.bRequesting=!0,this.statisChannelName="",this.statisSdkAdvId="",this.statisNativeAdTitle=""}return e.prototype.startimeoutTimer=function(e){var t=this;this.timeoutTimer||(this.timeoutTimer=new a.default(e,1,function(){n.default.getInstance().advManager.onAdvTimeout(t)}),this.timeoutTimer.start())},e.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},e.prototype.setLifeCycleLogAllCycle=function(){this.lifeCycleLog={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0}},Object.defineProperty(e.prototype,"advData",{get:function(){return this._advData},set:function(e){this._advData=e},enumerable:!0,configurable:!0}),e.SERIAL_ID=0,e}();o.default=r,cc._RF.pop()},{"../utils/ULTimer":"ULTimer","./ULSdkManager":"ULSdkManager"}],ULAdvManager:[function(e,t,o){"use strict";var n;cc._RF.push(t,"c3911CtuMpBgqykaN0uXfBs","ULAdvManager"),Object.defineProperty(o,"__esModule",{value:!0});var a,r=e("../events/ULEventDispatcher"),i=e("../ULConsts"),s=e("./ULConfig"),l=e("../utils/ULTools"),c=e("./ULSdkManager"),u=e("./ULAdvItem"),d=e("./ULStorageManager"),p=e("./ULAdvTrimErrorManager");(function(e){e[e.loading=0]="loading",e[e.ready=1]="ready",e[e.show=2]="show",e[e.clicked=3]="clicked",e[e.close=4]="close",e[e.failed=5]="failed",e[e.timeout=6]="timeout"})(a||(a={}));var f=((n={})[a.loading]="loading",n[a.ready]="ready",n[a.show]="show",n[a.clicked]="clicked",n[a.close]="close",n[a.failed]="failed",n[a.timeout]="timeout",n),h=function(){function e(){this.serialId=0,this.advTypeLastTriggerTimeLog={}}return e.prototype.init=function(){this.loadRecord(),r.default.getInstance().addListener(i.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,i.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this)),r.default.getInstance().addListener(i.default.CMD_OPEN_ADV,i.default.PRIORITY_NONE,this.onCmdOpenAdv.bind(this)),r.default.getInstance().addListener(i.default.CMD_CLOSE_ADV,i.default.PRIORITY_NONE,this.onCmdCloseAdv.bind(this)),r.default.getInstance().addListener(i.default.CMD_CLOSE_NATIVE_ADV,i.default.PRIORITY_NONE,this.onCmdCloseNativeAdv.bind(this)),r.default.getInstance().addListener(i.default.CMD_CLICK_NATIVE_ADV,i.default.PRIORITY_NONE,this.onCmdClickNativeAdv.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_RESUME,i.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_PAUSE,i.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),this.sdkInitTime=l.default.time(),this.isFirstPlayVideo=!0,this.playingAdvItems={}},e.prototype.loadRecord=function(){var e,t=d.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.advTypeDailyCountLog=e.advTypeDailyCountLog||{},this.advTypeDailyRefreshTime=e.advTypeDailyRefreshTime||0,this.tryDailyRefresh()},e.prototype.saveRecord=function(){var e={advTypeDailyCountLog:this.advTypeDailyCountLog||{},advTypeDailyRefreshTime:this.advTypeDailyRefreshTime||0},t=JSON.stringify(e);d.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=s.default.getConfig();return l.default.format("ULAdvManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.searchAdvGroupIdByAdvId=function(e){var t=s.default.getConfig().s_sdk_adv_info,o=null;return l.default.forEachMap(t,function(t,n){if(n.group.indexOf(e)>=0)return o=t,!0}),o||(ULSDK.console.warn("ULAdvBase.calcAdvGroupIdByAdvId adbGroupId not found! advId: ",e),o=e),o},e.prototype.searchAdvTypeByAdvId=function(e){var t=s.default.getConfig().s_sdk_adv_info,o=null;return l.default.forEachMap(t,function(t,n){if(n.group.indexOf(e)>=0)return o=n.type,!0}),o||ULSDK.console.warn("ULAdvBase.searchAdvTypeByAdvId advType not found! advId: ",e),o},e.prototype.tryDailyRefresh=function(){l.default.isOneDay(this.advTypeDailyRefreshTime,l.default.time())||(ULSDK.console.log("ULAdvManager.tryDailyRefresh \u8fdb\u884c\u65e5\u5e38\u5237\u65b0"),this.advTypeDailyCountLog={},this.advTypeDailyRefreshTime=l.default.time(),this.saveRecord())},e.prototype.getAdvTypeDailyLimit=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_type_interstitial_daily_limit;break;case"banner":o=t.i_sdk_adv_type_banner_daily_limit;break;case"embedded":o=t.i_sdk_adv_type_embedded_daily_limit;break;case"video":o=t.i_sdk_adv_type_video_daily_limit;break;case"url":o=t.i_sdk_adv_type_url_daily_limit;break;case"paster":o=t.i_sdk_adv_type_paster_daily_limit}return null==o?0:isNaN(o)?0:o},e.prototype.getAdvTypeCd=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_type_interstitial_cd;break;case"banner":o=t.i_sdk_adv_type_banner_cd;break;case"embedded":o=t.i_sdk_adv_type_embedded_cd;break;case"video":o=t.i_sdk_adv_type_video_cd;break;case"url":o=t.i_sdk_adv_type_url_cd;break;case"paster":o=t.i_sdk_adv_type_paster_cd}return null==o?0:isNaN(o)?0:o},e.prototype.getLaunchCdByType=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_inter_launch_cd;break;case"banner":o=t.i_sdk_adv_banner_launch_cd;break;case"embedded":o=t.i_sdk_adv_embed_launch_cd;break;case"video":o=t.i_sdk_adv_video_launch_cd;break;case"url":o=t.i_sdk_adv_url_launch_cd;break;case"paster":o=t.i_sdk_adv_paster_launch_cd}return null==o?0:isNaN(o)?0:o},e.prototype.responseOpenAdvResult=function(e,t,o){var n=this.playingAdvItems[o.advId];n?n.serialId==o.serialId?(n.stopTimeoutTimer(),n.bRequesting=!1,n.bOpenAdvResultResponsed?ULSDK.console.log("ULAdvManager.responseOpenAdvResult /c/openAdvResult alredy responsed",o.advId,o.serialId):(n.bOpenAdvResultResponsed=!0,1==e&&(ULSDK.console.log("advTypeLastTriggerTimeLog",n.advType,l.default.time()),this.advTypeLastTriggerTimeLog[n.advType]=l.default.time(),this.advTypeDailyCountLog[n.advType]=(this.advTypeDailyCountLog[n.advType]||0)+1,this.saveRecord()),c.default.getInstance().response(i.default.CMD_OPEN_ADV_RESULT,{code:e,msg:t||i.default.ADV_FAIL_TIP_NOAD,advId:o.advId,userData:o.userData}))):ULSDK.console.warn(l.default.format("ULAdvManager.responseOpenAdvResult playing advItem serialId not match! advId=[%s], arg serialId=[%d], playing serialId=[%d]",o.advId,o.serialId,n.serialId)):ULSDK.console.warn(l.default.format("ULAdvManager.responseOpenAdvResult playing advItem not found! advId=[%s]",o.advId))},e.prototype.responseClickAdvResult=function(e,t,o){var n=this.playingAdvItems[o.advId];n?n.serialId==o.serialId?n.bClickAdvResultResponsed?ULSDK.console.log("ULAdvManager.responseClickAdvResult /c/clickAdvResult alredy responsed",o.advId,o.serialId):(n.bClickAdvResultResponsed=!0,c.default.getInstance().response(i.default.CMD_CLICK_ADV_RESULT,{code:e,msg:t,advId:o.advId,userData:o.userData})):ULSDK.console.warn(l.default.format("ULAdvManager.responseClickAdvResult playing advItem serialId not match! advId=[%s], arg serialId=[%d], playing serialId=[%d]",o.advId,o.serialId,n.serialId)):ULSDK.console.warn(l.default.format("ULAdvManager.responseClickAdvResult playing advItem not found! advId=[%s]",o.advId))},e.prototype.showNextAdv=function(e,t,o){var n=e.advType;if(e.bOpenAdvResultResponsed)ULSDK.console.log("ULAdvManager.showNextAdv /c/openAdvResult alredy responsed",e.advId,e.serialId);else switch(e.lifeCycleLog={},n){case"video":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_VIDEO_ADV,e)||this.onAdvFailed(e,t,o);break;case"banner":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_BANNER_ADV,e)||this.onAdvFailed(e,t,o);break;case"interstitial":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_INTER_ADV,e)||this.onAdvFailed(e,t,o);break;case"embedded":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_EMBEDDED_ADV,e)||this.onAdvFailed(e,t,o);break;case"url":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_URL_ADV,e)||this.onAdvFailed(e,t,o);break;case"paster":r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_PASTER_ADV,e)||this.onAdvFailed(e,t,o);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.showNextAdv unknown advType! advId=[%s]",e.advId)),this.onAdvFailed(e,t,o)}},e.prototype.onAdvLoad=function(e,t){this.onAdvLifeCycle(e,a.loading,t)},e.prototype.onAdvReady=function(e,t){this.onAdvLifeCycle(e,a.ready,t)},e.prototype.onAdvShow=function(e,t,o){e.statisNativeAdTitle=o,this.onAdvLifeCycle(e,a.show,t)},e.prototype.onAdvClicked=function(e,t){this.onAdvLifeCycle(e,a.clicked,t)},e.prototype.onAdvClose=function(e,t){this.onAdvLifeCycle(e,a.close,t)},e.prototype.onAdvFailed=function(e,t,o){this.onAdvLifeCycle(e,a.failed,t,o)},e.prototype.onAdvTimeout=function(e,t){this.onAdvLifeCycle(e,a.timeout,t)},e.prototype.onAdvLifeCycle=function(e,t,o,n){if(e.lifeCycleLog[t])ULSDK.console.log("ULAdvManager.onAdvLifeCycle lifeCycle\u5df2\u89e6\u53d1\uff0c\u8df3\u8fc7",e.advId,e.serialId,t,f[t]);else switch(ULSDK.console.log("ULAdvManager.onAdvLifeCycle",e.advId,e.serialId,t,f[t]),ULSDK.console.log("ULAdvManager.onAdvLifeCycle advItem",e,t),e.lifeCycleLog[t]=!0,e.showAdvType){case"video":switch(t){case a.loading:c.default.getInstance().statisManager.reportAdvLoadAdvRequest(e);break;case a.ready:e.lifeCycleLog[a.loading]&&c.default.getInstance().statisManager.reportAdvLoadAdvSuccess(e);break;case a.show:e.stopTimeoutTimer(),c.default.getInstance().statisManager.reportAdvPlayStart(e);break;case a.clicked:e.bFinished=!0,this.responseClickAdvResult(1,o||"\u70b9\u51fb\u6210\u529f",e),this.responseOpenAdvResult(1,o||"\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvSuccess(e);break;case a.close:e.bFinished=!0,e.lifeCycleLog[a.show]?(this.responseOpenAdvResult(1,o||"\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvSuccess(e),c.default.getInstance().statisManager.reportAdvPlayCompletion(e)):(this.responseOpenAdvResult(0,o||"\u672a\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvFail(e,o||"\u672a\u64ad\u653e\u5b8c\u6210"));break;case a.timeout:case a.failed:e.bFinished=!0;var r=p.default.trimErrMessage(o,n);this.responseOpenAdvResult(0,r,e);var s=n&&JSON.stringify(n)||o||l.default.format(i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_UNKNOWN);c.default.getInstance().statisManager.reportAdvFail(e,s),e.lifeCycleLog[a.loading]&&!e.lifeCycleLog[a.ready]&&c.default.getInstance().statisManager.reportAdvLoadAdvFailed(e,s);break;default:ULSDK.console.log("ULAdvManager.onAdvLifeCycle \u5176\u4ed6\u751f\u547d\u5468\u671f\u5ffd\u7565",e,t)}break;default:switch(t){case a.loading:c.default.getInstance().statisManager.reportAdvLoadAdvRequest(e);break;case a.ready:e.lifeCycleLog[a.loading]&&c.default.getInstance().statisManager.reportAdvLoadAdvSuccess(e);break;case a.show:this.responseOpenAdvResult(1,o||"\u64ad\u653e\u6210\u529f",e),c.default.getInstance().statisManager.reportAdvSuccess(e),"banner"==e.showAdvType&&(this.bannerStartShowTime=l.default.time(),this.bannerIsShowing=!0,this.currentShowBannerAdvItem=e);break;case a.clicked:this.responseClickAdvResult(1,o||"\u70b9\u51fb\u6210\u529f",e),c.default.getInstance().statisManager.reportAdvClicked(e);break;case a.timeout:case a.failed:r=p.default.trimErrMessage(o,n);this.responseOpenAdvResult(0,r,e);s=n&&JSON.stringify(n)||o||l.default.format(i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_UNKNOWN);c.default.getInstance().statisManager.reportAdvFail(e,s),e.lifeCycleLog[a.loading]&&!e.lifeCycleLog[a.ready]&&c.default.getInstance().statisManager.reportAdvLoadAdvFailed(e,s)}}},e.prototype.onCmdOpenAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=s.default.getConfig();this.tryDailyRefresh(),t.serialId=this.serialId++;var n=t.advId,a=t.userData,d=t.tag,p=this.searchAdvTypeByAdvId(n);this.searchAdvGroupIdByAdvId(n);if(ULSDK.console.log(l.default.format("ULAdvManager.onCmdOpenAdv advId:[%s] advType:[%s] serialId:[%s]",n,p,this.serialId)),p){var f=new u.default(n,a,d);if(f.advData=t,this.playingAdvItems[n]&&this.playingAdvItems[n].bRequesting)return ULSDK.console.log("\u5e7f\u544a\u8bf7\u6c42\u4e2d\uff0c\u8bf7\u52ff\u91cd\u590d\u8bf7\u6c42"),void this.responseOpenAdvResult(0,"\u5e7f\u544a\u8bf7\u6c42\u4e2d\uff0c\u8bf7\u52ff\u91cd\u590d\u8bf7\u6c42",f);this.playingAdvItems[f.advId]=f,c.default.getInstance().statisManager.reportAdvTotalRequest(f);var h=o.i_sdk_adv_all_launch_cd;if(l.default.time()-this.sdkInitTime<h/1e3)return ULSDK.console.log("\u5e7f\u544a\u5904\u4e8e\u542f\u52a8\u8bf7\u6c42cd\u4e2d"),void this.responseOpenAdvResult(0,"in all adv launch cd",t);var g=this.getLaunchCdByType(p);if(l.default.time()-this.sdkInitTime<g/1e3)return ULSDK.console.log("\u5e7f\u544a\u5904\u4e8e\u542f\u52a8\u8bf7\u6c42cd\u4e2d"),void this.responseOpenAdvResult(0,"in "+p+" adv launch cd",t);var _=this.getAdvTypeCd(p);if(_>0){var m=this.advTypeLastTriggerTimeLog[p]||0,v=l.default.time()-m;if(ULSDK.console.log(l.default.format("\u68c0\u67e5\u5e7f\u544a\u7c7b\u578bcd\u3002\u4e0a\u6b21\u64ad\u653e\u95f4\u9694%d\u79d2\uff0ccd%d\u79d2",v,_/1e3)),v<=_/1e3)return ULSDK.console.log(l.default.format("\u5e7f\u544a\u7c7b\u578b[%s]cd\u4e2d\uff0c\u8bf7%d\u540e\u518d\u8bd5",p,_/1e3-v)),void this.responseOpenAdvResult(0,l.default.format("%s %d",i.default.ADV_FAIL_TIP_BUSY,i.default.ADV_ERR_CODE_ADV_TYPE_CD),f)}var y=this.getAdvTypeDailyLimit(p);if(y>0){var C=this.advTypeDailyCountLog[p]||0;if(ULSDK.console.log(l.default.format("\u68c0\u67e5\u5e7f\u544a\u65e5\u9650\u3002\u4eca\u65e5\u5df2\u64ad\u653e%d\u6b21\uff0c\u65e5\u9650\u5236%d\u6b21",C,y)),C>=y)return ULSDK.console.log(l.default.format("\u5e7f\u544a\u7c7b\u578b[%s]\u4eca\u65e5\u5df2\u64ad\u653e%d\u6b21\uff0c\u9650\u5236%d\u6b21\u3002\u65e0\u6cd5\u64ad\u653e\u3002",p,C,y)),void this.responseOpenAdvResult(0,l.default.format("%s %d",i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_ADV_TYPE_DAILY_LIMIT),f)}switch(p){case"video":if(f.startimeoutTimer(o.i_sdk_adv_video_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_VIDEO_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_VIDEO_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f),this.isFirstPlayVideo){this.isFirstPlayVideo=!1;var b=l.default.time()-this.sdkInitTime;b=Math.floor(b),isNaN(b)&&(b=0),b<o.t_sdk_miniplay_game_adv_point_first_click_event_report_time_limit&&r.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_game_adv_point_first_click_event_id,d,b.toString()])}r.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_game_click_video_event_id,d]);break;case"banner":f.startimeoutTimer(o.i_sdk_adv_banner_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_BANNER_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_BANNER_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f);break;case"interstitial":f.startimeoutTimer(o.i_sdk_adv_inter_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_INTER_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_INTER_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f);break;case"embedded":f.startimeoutTimer(o.i_sdk_adv_embedded_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_EMBEDDED_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f);break;case"url":f.startimeoutTimer(o.i_sdk_adv_url_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_URL_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_URL_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f);break;case"paster":f.startimeoutTimer(o.i_sdk_adv_paster_timeout/1e3),r.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_PASTER_ADV,f),r.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_PASTER_ADV,f)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",f);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.onCmdOpenAdv unknown advType! advId=[%s]",n)),this.responseOpenAdvResult(0,"unknown advType",f)}}else this.responseOpenAdvResult(0,"advType not found",t)},e.prototype.onCmdCloseAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,a=this.searchAdvTypeByAdvId(o);ULSDK.console.log(l.default.format("ULAdvManager.onCmdCloseAdv advId:[%s] advType:[%s]",o,a));var s=this.playingAdvItems[o];if(s){switch(a){case"video":r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_VIDEO_ADV,s);break;case"banner":if(r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_BANNER_ADV,s),this.bannerIsShowing){this.bannerIsShowing=!1;var u=l.default.time()-this.bannerStartShowTime;isNaN(u)&&(u=0),c.default.getInstance().statisManager.reportAdvClose(s,Math.round(u).toString())}break;case"interstitial":r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_INTER_ADV,s);break;case"embedded":r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_EMBEDDED_ADV,s);break;case"url":r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_URL_ADV,s);break;case"paster":r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_Paster_ADV,s);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.onCmdCloseAdv unknown advType! advId=[%s]",o))}c.default.getInstance().response(i.default.CMD_CLOSE_ADV_RESULT,{code:1,msg:"\u5173\u95ed\u6210\u529f",advId:o,userData:n})}else c.default.getInstance().response(i.default.CMD_CLOSE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdCloseNativeAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,a=this.playingAdvItems[o];a?(r.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_NATIVE_ADV,{advItem:a,closeType:t.closeType}),c.default.getInstance().response(i.default.CMD_CLOSE_NATIVE_ADV_RESULT,{code:1,msg:"\u5173\u95ed\u6210\u529f",advId:o,userData:n})):c.default.getInstance().response(i.default.CMD_CLOSE_NATIVE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdClickNativeAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,a=this.playingAdvItems[o];ULSDK.console.log("ULAdvManager.onCmdClickNativeAdv",o,a),a?(r.default.getInstance().dispatch(i.default.CMD_SDK_CLICK_NATIVE_ADV,a),c.default.getInstance().response(i.default.CMD_CLICK_NATIVE_ADV_RESULT,{code:1,msg:"\u6c47\u62a5\u6210\u529f",advId:o,userData:n})):c.default.getInstance().response(i.default.CMD_CLICK_NATIVE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdSdkOnGameResume=function(e){s.default.getConfig();ULSDK.console.log("ULAdvManager.onCmdSdkOnGameResume bannerIsShowing:",this.bannerIsShowing," this.bannerStartShowTime:",this.bannerStartShowTime),this.bannerIsShowing&&(this.bannerStartShowTime=l.default.time())},e.prototype.onCmdSdkOnGamePause=function(e){s.default.getConfig();if(ULSDK.console.log("ULAdvManager.onCmdSdkOnGamePause bannerIsShowing:",this.bannerIsShowing," this.bannerStartShowTime:",this.bannerStartShowTime),this.bannerIsShowing){var t=l.default.time()-this.bannerStartShowTime;isNaN(t)&&(t=0),c.default.getInstance().statisManager.reportAdvClose(this.currentShowBannerAdvItem,Math.round(t).toString())}},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=e.getReturnValue()||[],o=["interstitial","banner","embedded","video","url","paster"];t.push({type:"newLine"}),t.push({type:"label",text:"\u5e7f\u544acd\u9650\u5236:"}),t.push({type:"newLine"});for(var n=0;n<o.length;n++){var a=o[n],r="\u672a\u914d\u7f6eCD",i="\u672a\u89e6\u53d1",s=this.getAdvTypeCd(a);s>0&&(r=l.default.format("CD%d\u79d2",s/1e3));var c=this.advTypeLastTriggerTimeLog[a]||0;c>0&&(i=l.default.formatDate(new Date(1e3*c),"\u89e6\u53d1\u65f6\u95f4\uff1aHH:mm:ss")),t.push({type:"label",text:l.default.format("%s: %s %s",a,r,i)}),t.push({type:"newLine"})}t.push({type:"label",text:"\u5e7f\u544a\u6b21\u6570\u9650\u5236:"}),t.push({type:"newLine"});for(n=0;n<o.length;n++){a=o[n];var u="\u672a\u914d\u7f6e\u6b21\u6570\u9650\u5236",d="\u672a\u89e6\u53d1",p=this.getAdvTypeDailyLimit(a);p>0&&(u=l.default.format("\u65e5\u9650\u5236%d\u6b21",p));var f=this.advTypeDailyCountLog[a]||0;f>0&&(d=l.default.format("\u4eca\u65e5\u5df2\u89e6\u53d1%d\u6b21",f)),t.push({type:"label",text:l.default.format("%s: %s %s",a,u,d)}),t.push({type:"newLine"})}e.setReturnValue(t,!0)},e}();o.default=h,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULAdvItem":"ULAdvItem","./ULAdvTrimErrorManager":"ULAdvTrimErrorManager","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULAdvTrimErrorManager:[function(require,module,exports){"use strict";cc._RF.push(module,"b8410D6YsxINJ1/QNTGaxIF","ULAdvTrimErrorManager"),Object.defineProperty(exports,"__esModule",{value:!0});var ULConsts_1=require("../ULConsts"),ULTools_1=require("../utils/ULTools"),ULConfig_1=require("./ULConfig"),ULSdkManager_1=require("./ULSdkManager"),ULErrorRuleLogic;(function(e){e[e.ordinary=0]="ordinary",e[e.or=1]="or",e[e.with=2]="with",e[e.error=3]="error"})(ULErrorRuleLogic||(ULErrorRuleLogic={}));var ULErrorRuleItem=function(){function ULErrorRuleItem(e){void 0===e&&(e=null),this.ruleString=null,this.logic=ULErrorRuleLogic.ordinary,this.rule=null,this.rules=[],this.ruleString=e,e&&0!=e.length?this.initWithRule(this.ruleString):this.logic=ULErrorRuleLogic.error}return Object.defineProperty(ULErrorRuleItem.prototype,"isWildcard",{get:function(){return"*"==this.rule},enumerable:!0,configurable:!0}),ULErrorRuleItem.prototype.initWithErrRule=function(){this.logic=ULErrorRuleLogic.error,this.rule=null,this.rules=[]},ULErrorRuleItem.prototype.initWithRule=function(e){e=e.replace(/\s/g,"");for(var t=0,o=0,n="";e.length;){var a=e.charAt(0),r=e.length>0?e.charAt(1):"";switch(e=e.slice(1),a){case"(":t++,""==n.replace(/\(/g,"")&&o++;break;case")":if(""==e.replace(/\)/g,"")&&0!=o)return n=n.substring(o),this.initWithRule(n);o=--t>o?o:t;break;case"|":if(0==t){if(a+r=="||"){if(this.logic!=ULErrorRuleLogic.or&&this.logic!=ULErrorRuleLogic.ordinary)return this.initWithErrRule();this.logic=ULErrorRuleLogic.or,this.rules.push(new ULErrorRuleItem(n)),n=""}continue}break;case"&":if(0==t){if(a+r=="&&"){if(this.logic!=ULErrorRuleLogic.with&&this.logic!=ULErrorRuleLogic.ordinary)return this.initWithErrRule();this.logic=ULErrorRuleLogic.with,this.rules.push(new ULErrorRuleItem(n)),n=""}continue}}n+=a}n.length>0&&(this.logic==ULErrorRuleLogic.ordinary?this.rule=n:this.rules.push(new ULErrorRuleItem(n)))},ULErrorRuleItem.prototype.complianceTheRules=function(e,t){switch(void 0===t&&(t=null),this.logic){case ULErrorRuleLogic.ordinary:return this.judgmentStandard(e,t);case ULErrorRuleLogic.or:for(var o=0,n=this.rules;o<n.length;o++){if(n[o].complianceTheRules(e,t))return!0}return!1;case ULErrorRuleLogic.with:for(var a=0,r=this.rules;a<r.length;a++){if(!r[a].complianceTheRules(e,t))return!1}return!0}return!1},ULErrorRuleItem.prototype.judgmentStandard=function(key,customData){if(void 0===customData&&(customData=null),null==this.rule)return!1;if("*"==this.rule)return!0;if(this.rule==key)return!0;if(this.rule.length>2){var rule=this.rule,firstChar=rule.charAt(0),lastChar=rule.charAt(this.rule.length-1);if(firstChar+lastChar=="//"){rule=rule.substring(1,rule.length-1);var reg=RegExp(rule);if(reg.exec(key))return!0}}var patrn=/(?==|!=|>=|>|<|<=)/;if(customData&&patrn.exec(this.rule)){var trimRule=this.rule.replace("this.","customData."),string="if ("+trimRule+") { judge = true } else { judge = false }";try{var judge=!1;return eval(string),judge}catch(e){return ULSDK.console.log(e),!1}}return!1},ULErrorRuleItem}(),ULAdvTrimErrorManager=function(){function e(){}return e.trimErrMessage=function(e,t){var o=ULConfig_1.default.getConfig();if(!o.i_sdk_trim_adv_err_switch)return t&&ULTools_1.default.format("%s %d",ULConsts_1.default.ADV_FAIL_TIP_NOAD,t.code||t.errCode)||e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN);var n=o.t_sdk_trim_adv_err_object||{};if(!t)return e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN);var a={};a[ULSdkManager_1.default.getInstance().channelInfo.channelName||""]=t;var r=null;try{r=this.getCustomMsgFromRules(n,a)}catch(t){ULSDK.console.error("ULAdvTrimErrorManager:\u9519\u8bef\u6574\u7406\u62a5\u9519-------------\u8bf7\u68c0\u67e5\u914d\u7f6e"),ULSDK.console.error("ULAdvTrimErrorManager:errJson\uff1a",n),ULSDK.console.error("ULAdvTrimErrorManager:channelNameErrJson\uff1a",a)}return r&&(r=ULTools_1.default.format("%s %d",r,t.code||t.errCode)),r||e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN)},e.getCustomMsgFromRules=function(e,t){var o=[],n=[];if("object"!=typeof e)return"string"==typeof e?e:"";if(o=Object.keys(e),!t)return"";"object"==typeof t?n=Object.keys(t):n.push(t);for(var a=o.length;o.length;){var r=o.shift();a--;var i=this.trimRules[r];if(i||(i=new ULErrorRuleItem(r),this.trimRules[r]=i),i.isWildcard&&a>0)o.join(r);else for(var s=e[r],l=0,c=n;l<c.length;l++){var u=c[l];if(i.complianceTheRules(u,t)){var d=t[u]||null,p=this.getCustomMsgFromRules(s,d);if(p)return p}}}return""},e.trimRules={},e}();exports.default=ULAdvTrimErrorManager,cc._RF.pop()},{"../ULConsts":"ULConsts","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager"}],ULBannerView:[function(e,t,o){"use strict";cc._RF.push(t,"0601dC045VD7aO5tgmp3+U5","ULBannerView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ULAdViewBase"),r=window.cc,i=window.Laya,s=function(e){function t(){var t=e.call(this)||this;return t.name="BannerView",t.bannerView=null,r?(ULSDK.console.log("ULBannerView.constructor"),t.engine=t.ENGINE_COCOS):i&&(ULSDK.console.log("ULBannerView.constructor"),t.engine=t.ENGINE_LAYA),t}return n(t,e),t.prototype.createView=function(e,t){e&&t&&(r?(ULSDK.console.log("ULBannerView.createView.createViewByCocos"),this.createViewByCocos(e,t)):i&&(ULSDK.console.log("ULBannerView.createView.createViewByLaya"),this.createViewByLaya(e,t)))},t.prototype.createViewByLaya=function(e,t){var o=this,n=this.getRootNode();if(n){ULSDK.console.log("ULBannerView.createViewByLaya style:",e);var a=i.stage.width,r=i.stage.height;this.bannerView=n.addChild(new Laya.Sprite),this.bannerView.size(e.width,e.height),this.bannerView.pos(e.left,-e.top),this.bannerView.graphics.drawRect(0,0,a,r,"#00000080");var s=this.bannerView.addChild(new Laya.Image);s.size(e.width,e.height),s.anchorX=.5,s.anchorY=.5;var l=s.addChild(new Laya.Label);l.fontSize=25,l.align="center",l.text="X \u5173\u95ed",l.color="#ffffff",l.pos(s.width/2-l.width/2,s.height/2-l.height/2),this.registerLayaTouchHander(s,function(e){("began"==e.name?s.scale(1.1,1.1):"moved"==e.name||s.scale(1,1),"click"==e.name)&&(t instanceof Function&&t()||o.bannerView.destroy())})}else ULSDK.console.warn(this.name+"createViewByLaya nodeRoot not found!")},t.prototype.createViewByCocos=function(e,t){var o=this,n=this.getNodeCanvas();if(n){this.bannerView&&this.bannerView.destroy(),this.bannerView=new r.Node,this.bannerView.parent=n,this.bannerView.zIndex=r.macro.MAX_ZINDEX;var a=new r.Node;a.parent=this.bannerView,ULSDK.console.log(this.name+".createViewByCocos BannerView.style:",e),this.bannerView.x=e.left,this.bannerView.y=e.top,this.bannerView.setContentSize(e.width,e.height),a.setContentSize(this.bannerView.getContentSize());var i=new r.Node;i.parent=a,i.color=r.color(255,255,0),i.setContentSize(a.getContentSize());var s=new r.Node;s.parent=a,s.y=0,s.x=0,s.color=r.color(255,255,255,255),s.addComponent(r.Label).string="X \u5173\u95ed",s.getComponent(r.Label).overflow=r.Label.Overflow.SHRINK,s.getComponent(r.Label).verticalAlign=r.Label.VerticalAlign.CENTER,s.getComponent(r.Label).horizontalAlign=r.Label.HorizontalAlign.CENTER,s.getComponent(r.Label).fontSize=25,s.width=a.width,s.height=a.height,ULSDK.console.log(this.name+".createViewByCocos closeBtnText:",s.width,s.height),this.registerCocosTouchHandler(a,function(e){("began"==e.name?a.scale=1.1:"moved"==e.name||(a.scale=1),o.isTouchEventClick(e))&&(t instanceof Function&&t()||o.bannerView.destroy())})}else ULSDK.console.warn(this.name+".createViewByCocos nodeCanvas not found!")},t.prototype.onAdvShow=function(){ULSDK.console.log(this.name+".show")},t.prototype.onAdvClose=function(){ULSDK.console.log(this.name+".hide"),this.bannerView&&this.bannerView.destroy()},t.prototype.onAdvDestroy=function(){ULSDK.console.log(this.name+".destroy"),this.bannerView&&this.bannerView.destroy()},t.prototype.onAdvClicked=function(){ULSDK.console.log(this.name+".click")},t}(a.default);o.default=s,cc._RF.pop()},{"./ULAdViewBase":"ULAdViewBase"}],ULBase64:[function(e,t,o){"use strict";cc._RF.push(t,"b174bCJ83VKurmV9mhfO4z4","ULBase64"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.encodeForUrl=function(e,t){var o=this.encode(e,t);return o?o=(o=o.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e,t){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e,t)):null},e.encode=function(e,t){var o,n,a,r,i,s,l,c=t||this._defaultKeyStr,u="",d=0;for(e=this._utf8_encode(e);d<e.length;)r=(o=e.charCodeAt(d++))>>2,i=(3&o)<<4|(n=e.charCodeAt(d++))>>4,s=(15&n)<<2|(a=e.charCodeAt(d++))>>6,l=63&a,isNaN(n)?s=l=64:isNaN(a)&&(l=64),u=u+c.charAt(r)+c.charAt(i)+c.charAt(s)+c.charAt(l);return u},e.decode=function(e,t){var o,n,a,r,i,s,l=t||this._defaultKeyStr,c="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)o=l.indexOf(e.charAt(u++))<<2|(r=l.indexOf(e.charAt(u++)))>>4,n=(15&r)<<4|(i=l.indexOf(e.charAt(u++)))>>2,a=(3&i)<<6|(s=l.indexOf(e.charAt(u++))),c+=String.fromCharCode(o),64!=i&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(a));return c=this._utf8_decode(c)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",o=0,n=0,a=0,r=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(a=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),r=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&r),o+=3);return t},e._defaultKeyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();o.default=n,cc._RF.pop()},{}],ULChannelInfo:[function(e,t,o){"use strict";cc._RF.push(t,"f442cCK3D5Gu75sKNsfG1u8","ULChannelInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/ULTools"),a=e("../events/ULEventDispatcher"),r=e("../ULConsts"),i=e("./ULConfig"),s=function(){function e(){this.preparationFlags={},this.copInfo="{}",this.payInfo={},this.jumpInfo=[],this.isSupportRecordShare=!1,this.channelName="default",this.isPayEnabled=!1,this.isShareEnabled=!1,this.isUseSdkRank=!1,this.isShowUrlAdIcon=!1,this.appName="",this.equipmentModel="",this.platformVersionMessage="",this.osVersionMessage="",this.cardType=0,this.isThirdExit=!1,this.isAbout=!1,this.isMoreGame=!1,this.isULMoreGame=!1,this.isSupportClipboardData=!1,this.isSupportInstallShortcut=!1,this.isSupportFindMinigames=!1,this.findMinigamesImageUrl="",this.isSupportRecommendationBtn=!1,this.isSupportJumpList=!1,this.is4399Watermark=!1,this.uuid="",this.sdcardPath="",this.packageVersion="",this.copChannelId="",this.ulsdkVersion="",this.cdkChannelId="",this.channelUserId="",this.referenceBannerHeight=r.default.DEFAULT_REFERANCE_BANNER_HEIGHT,this.isNewUser=!0,this.loginDays=0,this._sdkUserId="",this.isSupportPasterAdv=!1,this.gameLanguage="",this.isSupportChannelMoreGameBox=!1,this.isSupportChannelBlockAd=!1,this.isSupportSubscribe=!1,this.isSupportColorSign=!1,this.isSupportGridAd=!1,this.isSupportVideoRank=!1,this.isSupportFavoriteGuide=!1,this.isSupportFollowOfficialAccount=!1,this.appIdOrPkgName="",this.isSupportContentSecurityCheck=!1,this.isJumpLeisureEnabled=!1,this.isSupportVibrate=!0,this.isSupportOpenUrl=!1,this.isSupportJumpInfoVideoType=!1,a.default.getInstance().addListener(r.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,r.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))}return e.prototype.toBaseChannelInfoData=function(){var e=i.default.getConfig();ULSDK.console.log("config",e);var t=void 0==e.s_sdk_licence_info?"":e.s_sdk_licence_info;t=t.replace(/\/n/g,"\\n");var o=!!e.i_sdk_age_level_info_mode,n=e.s_sdk_age_level_info||"",a={gameName:e.s_game_name,gameLanguage:this.gameLanguage,channelName:this.channelName,appName:this.appName,isShowLicenceInfo:1==e.i_sdk_licence_info_mode,licenceInfo:t,isShowAgeLevelInfo:o};return n&&(a.ageLevelInfo=n),a},e.prototype.toResponseData=function(){for(var e=[],t=0;t<this.jumpInfo.length;t++){var o=this.jumpInfo[t];o.index&&o.url?e.push({index:o.index,url:o.url,rewards:o.rewards||[],bReceived:o.bReceived||!1,appName:o.appName||""}):ULSDK.console.warn("ULChannelInfo.toResponseData jump data error!",o)}var n=i.default.getConfig();return null!=n.i_sdk_adv_reference_banner_height&&(this.referenceBannerHeight=n.i_sdk_adv_reference_banner_height),this.isJumpLeisureEnabled=this.isJumpLeisureEnabled&&!!n.i_sdk_moreWonderful_mode,this.isSupportInstallShortcut=this.isSupportInstallShortcut&&!!n.i_sdk_installShortcut_mode,this.isSupportRecommendationBtn=this.isSupportRecommendationBtn&&!!n.i_sdk_moregame_mode,this.isSupportJumpList=this.isSupportJumpList&&!!n.i_sdk_jumplist_mode,this.isSupportVibrate=this.isSupportVibrate&&!!n.i_sdk_phone_vibrate,this.isSupportOpenUrl=this.isSupportOpenUrl&&!!n.i_sdk_support_open_url,this.isSupportRecordShare=this.isSupportRecordShare&&!!n.i_sdk_support_record_share,{copInfo:this.copInfo,cardType:this.cardType,isThirdExit:this.isThirdExit,isAbout:this.isAbout,payInfo:this.payInfo,isMoreGame:this.isMoreGame,isULMoreGame:this.isULMoreGame,uuid:this.uuid,sdcardPath:this.sdcardPath,packageVersion:this.packageVersion,copChannelId:this.copChannelId,ulsdkVersion:this.ulsdkVersion,isShowUrlAdIcon:this.isShowUrlAdIcon,cdkChannelId:this.cdkChannelId,isPayEnabled:this.isPayEnabled,isShareEnabled:this.isShareEnabled,isUseSdkRank:this.isUseSdkRank,isSupportRecordShare:this.isSupportRecordShare,isSupportInstallShortcut:this.isSupportInstallShortcut,isSupportClipboardData:this.isSupportClipboardData,isSupportFindMinigames:this.isSupportFindMinigames,findMinigamesImageUrl:this.findMinigamesImageUrl,isSupportRecommendationBtn:this.isSupportRecommendationBtn,isSupportJumpList:this.isSupportJumpList,is4399Watermark:this.is4399Watermark,appName:this.appName.toLocaleLowerCase(),jumpInfo:e,channelUserId:this.channelUserId,referenceBannerHeight:this.referenceBannerHeight,isNewUser:this.isNewUser,loginDays:this.loginDays,isSupportPasterAdv:this.isSupportPasterAdv,gameLanguage:this.gameLanguage,isSupportChannelMoreGameBox:this.isSupportChannelMoreGameBox,isSupportChannelBlockAd:this.isSupportChannelBlockAd,isSupportSubscribe:this.isSupportSubscribe,isSupportGridAd:this.isSupportGridAd,isSupportVideoRank:this.isSupportVideoRank,isSupportFavoriteGuide:this.isSupportFavoriteGuide,isSupportFollowOfficialAccount:this.isSupportFollowOfficialAccount,customerServiceInfo:n.t_customer_service_info,appIdOrPkgName:this.appIdOrPkgName,isSupportContentSecurityCheck:this.isSupportContentSecurityCheck,isJumpLeisureEnabled:this.isJumpLeisureEnabled,isSupportVibrate:this.isSupportVibrate,isSupportOpenUrl:this.isSupportOpenUrl,isSupportJumpInfoVideoType:this.isSupportJumpInfoVideoType}},e.prototype.isReady=function(){return n.default.getObjSize(this.preparationFlags)<=0},e.prototype.getPreparationFlags=function(){var e=[];return n.default.forEachMap(this.preparationFlags,function(t,o){e.push(t)}),e},e.prototype.addPreparationFlag=function(e){this.preparationFlags[e]=!0},e.prototype.removePreparationFlag=function(e){delete this.preparationFlags[e]},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=e.getReturnValue()||[];t.push({type:"newLine"}),t.push({type:"label",text:"\u6e20\u9053\u4fe1\u606f:"}),t.push({type:"newLine"});var o="",a=this.toResponseData(),r=Object.keys(a);r.sort();for(var i=0;i<r.length;i++){var s=r[i],l=a[s];o+=n.default.format("[%s] = [%s]\n",s,JSON.stringify(l))}t.push({type:"labelArea",text:o}),t.push({type:"newLine"}),e.setReturnValue(t,!0)},e}();o.default=s,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig"}],ULChannelModuleBase:[function(e,t,o){"use strict";cc._RF.push(t,"aed5080O6NFML+RwAQyaFde","ULChannelModuleBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ULModuleBase"),r=e("../events/ULEventDispatcher"),i=e("../ULConsts"),s=e("./ULConfig"),l=e("../utils/ULTools"),c=e("./ULStorageManager"),u=e("./ULSdkManager"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),r.default.getInstance().addListener(i.default.CMD_SDK_GET_STORAGE,i.default.PRIORITY_NONE,this.onCmdSdkGetStorage.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_SET_STORAGE,i.default.PRIORITY_NONE,this.onCmdSdkSetStorage.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_GET_CLIPBOARD_DATA,i.default.PRIORITY_NONE,this.onCmdSdkGetClipboardData.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_SET_CLIPBOARD_DATA,i.default.PRIORITY_NONE,this.onCmdSdkSetClipboardData.bind(this)),r.default.getInstance().addListener(i.default.CMD_SDK_IS_SUPPORT_CLIPBOARD,i.default.PRIORITY_NONE,this.onCmdSdkIsSupportClipboard.bind(this)),this.genSdkUserId(),u.default.getInstance().channelInfo._sdkUserId=this.sdkUserId,u.default.getInstance().channelInfo.isNewUser=this.isNewUser,ULSDK.console.log("ULChannelModuleBase.init isNewUser:",this.isNewUser)},t.prototype.genSdkUserId=function(){var e=s.default.getConfig(),t=l.default.format("mUserId_%s",e.s_sdk_megadata_game_id);this.isNewUser=!1,this.sdkUserId=c.default.getInstance().getStorage(t),this.sdkUserId||(this.sdkUserId=l.default.format("%s_%s_%s",e.s_sdk_cop_game_id,l.default.createRandomUserId(),e.s_sdk_cop_channel_id),c.default.getInstance().setStorage(t,this.sdkUserId),this.isNewUser=!0)},t.prototype.onCmdSdkGetStorage=function(e){var t=e.data.key;e.setReturnValue(this._hook_getStorage(t))},t.prototype.onCmdSdkSetStorage=function(e){var t=e.data.key,o=e.data.data;this._hook_setStorage(t,o),e.stopImmediatePropagation()},t.prototype.onCmdSdkGetClipboardData=function(e){var t=e.data.finishCallback;this._hook_getClipboardData(t),e.stopImmediatePropagation()},t.prototype.onCmdSdkSetClipboardData=function(e){var t=e.data.data,o=e.data.finishCallback;this._hook_setClipboardData(t,o),e.stopImmediatePropagation()},t.prototype.onCmdSdkIsSupportClipboard=function(e){e.data;e.setReturnValue(this._hook_isSupportClipboard()),e.stopImmediatePropagation()},t}(a.default);o.default=d,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULModuleBase":"ULModuleBase","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULChannelModuleWebmobileBase:[function(e,t,o){"use strict";cc._RF.push(t,"48fa70W9qRA1JcqOejx8sMG","ULChannelModuleWebmobileBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._hook_getStorage=function(e){return localStorage?localStorage.getItem(e):null},t.prototype._hook_setStorage=function(e,t){localStorage&&localStorage.setItem(e,t)},t.prototype._hook_isSupportClipboard=function(){return!1},t.prototype._hook_getClipboardData=function(e){e(null)},t.prototype._hook_setClipboardData=function(e,t){if(document){ULSDK.console.log("webmobile --- copy 2");var o=document.createElement("input");document.body.appendChild(o),o.value=e,o.focus(),o.select();var n=!1;try{n=document.execCommand("copy")}catch(e){n=!1}document.body.removeChild(o),t(n)}else t(!1)},t}(e("./ULChannelModuleBase").default);o.default=a,cc._RF.pop()},{"./ULChannelModuleBase":"ULChannelModuleBase"}],ULClipboardManager:[function(e,t,o){"use strict";cc._RF.push(t,"e4e21Ds4iZO4YjWXyTi5be3","ULClipboardManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),a=e("../ULConsts"),r=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getClipboardData=function(e){e instanceof Function?n.default.getInstance().dispatch(a.default.CMD_SDK_GET_CLIPBOARD_DATA,{finishCallback:e})||e(null):ULSDK.console.warn("ULClipboardManager.getClipboardData finishCallback not a function")},e.prototype.setClipboardData=function(e,t){t instanceof Function?n.default.getInstance().dispatch(a.default.CMD_SDK_SET_CLIPBOARD_DATA,{data:e,finishCallback:t})||t(!1):ULSDK.console.warn("ULClipboardManager.setClipboardData finishCallback not a function")},e.prototype.isSupport=function(){return!!n.default.getInstance().dispatchWithReturn(a.default.CMD_SDK_IS_SUPPORT_CLIPBOARD,{})},e._instance=null,e}();o.default=r,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher"}],ULConfig:[function(e,t,o){"use strict";cc._RF.push(t,"f083dtvu/FIjbKYe1MWaW1D","ULConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../assets/cConfig"),a=e("../utils/ULTools"),r=e("../ULConsts"),i=e("../events/ULEventDispatcher"),s=e("./ULSdkManager"),l=e("./ULStorageManager"),c=function(){function e(){}return e.init=function(){this.bInit=!0,i.default.getInstance().addListener(r.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,r.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.getConfig=function(){return this.bInit||this.init(),this.currConfig||(this.currConfig=a.default.clone(n.cConfig)),this.currConfig},e.get=function(e){return this.getConfig()[e]},e.updateValueByCop=function(e){var t=a.default.clone(n.cConfig);a.default.forEachMap(e,function(e,o){"nil"==o&&(o=""),t[e]=o}),this.currConfig=t,r.default.B_INNER_DEBUG=this.getConfig().i_sdk_debug_mode>=r.default.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG},e.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[];o.push({type:"newLine"}),o.push({type:"label",text:"cConfig:"}),o.push({type:"button",text:"\u663e\u793acConfig",onClick:function(){var e=t.currConfig,o=Object.keys(e);o.sort();for(var n=[],r=0;r<o.length;r++){var i=o[r],l=JSON.stringify(e[i]),c=a.default.format("[%s] = [%s]\n",i,l);c.length>=64&&(c=c.substr(0,62)+".."),n.push({text:c,value:{k:i,v:l}})}s.default.getInstance().moduleCheckerManager.showPickerDialog("cConfig",n,function(e){s.default.getInstance().moduleCheckerManager.alertPrompt(e.k,e.v,"\u5173\u95ed",null)},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:a.default.format("i_sdk_debug_mode=[%s]",this.getConfig().i_sdk_debug_mode),name:"labelDebugMode"}),o.push({type:"button",text:"\u5207\u6362\u8c03\u8bd5\u6a21\u5f0f",onClick:function(){s.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u8c03\u8bd5\u6a21\u5f0f",[{text:"0: \u5168\u5173",value:0},{text:"1: warn + error",value:1},{text:"2: log + warn + error",value:2},{text:"3: \u5f00\u542f\u5404\u6a21\u5757\u7684DEBUG + log + warn + error",value:3}],function(e){n.cConfig.i_sdk_debug_mode=e,t.currConfig.i_sdk_debug_mode=e,a.default._hack_console_print_method(),r.default.B_INNER_DEBUG=t.getConfig().i_sdk_debug_mode>=r.default.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG,s.default.getInstance().moduleCheckerManager.setItemText("labelDebugMode",a.default.format("i_sdk_debug_mode=[%s]",t.getConfig().i_sdk_debug_mode))})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5c40\u57df\u7f51\u8c03\u8bd5\uff1a",name:"labelSocketDebugMode"}),o.push({type:"inputBox",text:l.default.getInstance().getStorage("console_lan_id"),name:"console_lan_id"}),o.push({type:"button",text:"\u5207\u6362\u5c40\u57df\u7f51\u8c03\u8bd5\u6a21\u5f0f",onClick:function(){var e=s.default.getInstance().moduleCheckerManager.getItemText("console_lan_id"),t=[{text:"\u5173\u95ed\u8c03\u8bd5",value:0},{text:"\u5f00\u542f\u8c03\u8bd5: "+e,value:1}];s.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u8c03\u8bd5\u6a21\u5f0f",t,function(t){0==t?(l.default.getInstance().setStorage("console_lan_id",null),a.default._close_console_print_LAN()):(l.default.getInstance().setStorage("console_lan_id",e),a.default._start_console_print_LAN())})}}),o.push({type:"newLine"}),o.push({type:"label",text:"SDK log \u5f00\u5173\uff1a("+(this.sdkLogSwitch?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")+")",name:"SDK_LOG_MODE"}),o.push({type:"button",text:"\u5207\u6362\u72b6\u6001",onClick:function(){t.sdkLogSwitch?(t.sdkLogSwitch=!1,ULSDK.console.allowConsole=!1):(t.sdkLogSwitch=!0,ULSDK.console.allowConsole=!0),s.default.getInstance().moduleCheckerManager.setItemText("SDK_LOG_MODE","SDK log \u5f00\u5173\uff1a("+(t.sdkLogSwitch?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")+")")}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u663e\u793asdk\u901a\u4fe1\u8bb0\u5f55:"}),o.push({type:"button",text:"\u67e5\u770b...",onClick:function(){for(var e=s.default.getInstance().getSdkCommunicationLog(),t=[],o=0;o<e.length;o++){var n=e[o];try{var r=JSON.parse(n);ULSDK.console.log(o,n,r),t.push({text:a.default.format("%d: %s",o,r.cmd),value:n})}catch(e){}}ULSDK.console.log("conf",t),s.default.getInstance().moduleCheckerManager.showPickerDialog("sdk\u901a\u4fe1\u8bb0\u5f55\uff08\u6700\u8fd1100\u6761\uff09",t,function(e){s.default.getInstance().moduleCheckerManager.showBigTextWithPickerDialog("\u8be6\u60c5",e,40)},!0)}}),o.push({type:"newLine"}),e.setReturnValue(o,!0)},e.bInit=!1,e.sdkLogSwitch=!0,e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../assets/cConfig":"cConfig","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULConsts:[function(e,t,o){"use strict";cc._RF.push(t,"36a50GyW6pFpausLQFWBrrz","ULConsts"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.CMD_GET_BASE_CHANNEL_INFO="/c/getBaseChannelInfo",e.CMD_SET_VERSION="/c/setVersion",e.CMD_OPEN_MORE_GAME="/c/openMoreGame",e.CMD_OPEN_UL_MORE_GAME="/c/openUlMoreGame",e.CMD_OPEN_PAY="/c/openPay",e.CMD_OPEN_JF="/c/openJf",e.CMD_OPEN_SHARE="/c/openShare",e.CMD_CALL_PHONE="/c/callPhone",e.CMD_UL_WEB_VIEW="/c/ulWebView",e.CMD_EXIT_GAME="/c/exitGame",e.CMD_MEGADATA_SERVER="/c/megadataServer",e.CMD_POST_MEGADATA="/c/postMegadata",e.CMD_USE_CDKEY="/c/useCdkey",e.CMD_OPEN_ADV="/c/openAdv",e.CMD_CLICK_NATIVE_ADV="/c/clickNativeAdv",e.CMD_CLOSE_ADV="/c/closeAdv",e.CMD_CLOSE_NATIVE_ADV="/c/closeNativeAdv",e.CMD_USER_LOGIN="/c/userLogin",e.CMD_USER_LOGIN_REPORT="/c/userLoginReport",e.CMD_USER_IS_LOGIN="/c/userIsLogin",e.CMD_LOGIN_OUT="/c/loginOut",e.CMD_SAVE_RANK_DATA="/c/saveRankData",e.CMD_GET_RANK_DATA="/c/getRankData",e.CMD_RECORDER_GAME_VIDEO="/c/recorderGameVideo",e.CMD_SHARE_GAME_VIDEO="/c/shareGameVideo",e.CMD_OPEN_JUMP="/c/openJump",e.CMD_JUMP_OTHER_GAME="/c/jumpOtherGame",e.CMD_OPEN_RECOMMENDATION="/c/openRecommendation",e.CMD_CLOSE_RECOMMENDATION="/c/closeRecommendation",e.CMD_SAVE_USER_DATA="/c/saveUserData",e.CMD_GET_USER_DATA="/c/getUserData",e.CMD_ADD_GAME_TO_MY_FAVORITE="/c/addGameToMyFavorite",e.CMD_GET_USER_INFO_MSG="/c/getUserInfoMsg",e.CMD_OPEN_USERINFO_ACCREDIT_BUTTON="/c/openUserInfoAccreditButton",e.CMD_CLOSE_USERINFO_ACCREDIT_BUTTON="/c/closeUserInfoAccreditButton",e.CMD_INSTALL_SHORTCUT="/c/installShortcut",e.CMD_SET_CLIPBOARD_DATA="/c/setClipboardData",e.CMD_GET_CLIPBOARD_DATA="/c/getClipboardData",e.CMD_SET_ULSDKDEMO_DEBUG_MODE="/c/setUlsdkdemoDebugMode",e.CMD_MPSDK_AD_HANDLER="/c/mpsdkAdHandler",e.CMD_CREATE_GAME_ICON="/c/createGameIcon",e.CMD_GAME_ICON_HANDLER="/c/gameIconHandler",e.CMD_OPEN_CHANNEL_MORE_GAME_BOX="/c/openChannelMoreGameBox",e.CMD_OPEN_BLOCK_AD="/c/openBlockAd",e.CMD_CLOSE_BLOCK_AD="/c/closeBlockAd",e.CMD_GET_SHORTCUT_STATE="/c/getShortcutState",e.CMD_ADD_SUBSCRIBE="/c/addSubscribe",e.CMD_ADD_COLOR_SIGN="/c/addColorSign",e.CMD_OPEN_GRID_AD="/c/openGridAd",e.CMD_CLOSE_GRID_AD="/c/closeGridAd",e.CMD_JUMP_TO_VIDEO_VIEW="/c/jumpToVideoView",e.CMD_FOLLOW_OFFICIAL_ACCOUNT="/c/followOfficialAccount",e.CMD_GET_FOLLOW_OFFICIAL_ACCOUNT_STATE="/c/getFollowOfficialAccountState",e.CMD_CONTENT_SECURITY_CHECK="/c/contentSecurityCheck",e.CMD_JUMP_LEISURE_SUBJECT="/c/jumpLeisureSubject",e.CMD_PHONE_VIBRATE="/c/phoneVibrate",e.CMD_OPEN_URL="/c/openUrl",e.CMD_SHOW_CHANNEL_MASK="/c/showChannelMask",e.CMD_CLOSE_CHANNEL_MASK="/c/closeChannelMask",e.CMD_OPEN_ADVANCED_SETTING="/c/openAdvancedSetting",e.CMD_RANKLIST_GET_USER_NUM="/c/getUserNumInRank",e.CMD_RANKLIST_GET_USER_INFO_BY_ID="/c/getUserInfoByIdInRank",e.CMD_RANKLIST_GET_USER_INFO_BY_LIST="/c/getUserInfoListByRankId",e.CMD_RANKLIST_REPORT_USER_INFO="/c/reportUserInfoInRank",e.CMD_RANKLIST_MODIFY_SCORE_BY_ARRAY="/c/modifyScoreByArray",e.CMD_CHANNEL_INFO_RESULT="/c/channelInfoResult",e.CMD_GET_BASE_CHANNEL_INFO_RESULT="/c/getBaseChannelInfoResult",e.CMD_PAY_RESULT="/c/payResult",e.CMD_PRE_PAY_RESULT="/c/prePayResult",e.CMD_SHARE_RESULT="/c/shareResult",e.CMD_LIFE_CYCLE_RESULT="/c/lifeCycle",e.CMD_PAUSE_SOUND_RESULT="/c/pauseSound",e.CMD_RESUME_SOUND_RESULT="/c/resumeSound",e.CMD_COP_INFO_RESULT="/c/copInfoResult",e.CMD_MEGADATA_SERVER_RESULT="/c/megadataServer",e.CMD_POST_MEGADATA_RESULT="/c/postMegadataResult",e.CMD_USE_CDKEY_RESULT="/c/useCdkey",e.CMD_OPEN_ADV_RESULT="/c/openAdvResult",e.CMD_OPEN_NATIVE_ADV_RESULT="/c/openNativeAdvResult",e.CMD_CLICK_NATIVE_ADV_RESULT="/c/clickNativeAdvResult",e.CMD_CLICK_ADV_RESULT="/c/clickAdvResult",e.CMD_CLOSE_ADV_RESULT="/c/closeAdvResult",e.CMD_CLOSE_NATIVE_ADV_RESULT="/c/closeNativeAdvResult",e.CMD_USER_LOGIN_RESULT="/c/userLoginResult",e.CMD_USER_IS_LOGIN_RESULT="/c/userIsLoginResult",e.CMD_USER_LOGIN_REPORT_RESULT="/c/userLoginReportResult",e.CMD_LOGIN_OUT_RESULT="/c/loginOutResult",e.CMD_ADV_VALID_COUNT_RESULT="/c/advValidCountResult",e.CMD_SAVE_RANK_DATA_RESULT="/c/saveRankDataResult",e.CMD_GET_RANK_DATA_RESULT="/c/getRankDataResult",e.CMD_RECORDER_GAME_VIDEO_RESULT="/c/recorderGameVideoResult",e.CMD_SHARE_GAME_VIDEO_RESULT="/c/shareGameVideoResult",e.CMD_OPEN_JUMP_RESULT="/c/openJumpResult",e.CMD_JUMP_OTHER_GAME_RESULT="/c/jumpOtherGameResult",e.CMD_JUMP_OTHER_GAME_REWARD_RESULT="/c/jumpOtherGameRewardResult",e.CMD_EXTRA_BONUS_RESULT="/c/extraBonus",e.CMD_OPEN_RECOMMENDATION_RESULT="/c/openRecommendationResult",e.CMD_CLOSE_RECOMMENDATION_RESULT="/c/closeRecommendationResult",e.CMD_SAVE_USER_DATA_RESULT="/c/saveUserDataResult",e.CMD_GET_USER_DATA_RESULT="/c/getUserDataResult",e.CMD_ADD_GAME_TO_MY_FAVORITE_RESULT="/c/addGameToMyFavoriteResult",e.CMD_GET_USER_INFO_MSG_RESULT="/c/getUserInfoMsgResult",e.CMD_OPEN_USERINFO_ACCREDIT_BUTTON_RESULT="/c/openUserInfoAccreditButtonResult",e.CMD_CLOSE_USERINFO_ACCREDIT_BUTTON_RESULT="/c/closeUserInfoAccreditButtonResult",e.CMD_APP_SHARE_RESULT="/c/appShareResult",e.CMD_INSTALL_SHORTCUT_RESULT="/c/installShortcutResult",e.CMD_SET_CLIPBOARD_DATA_RESULT="/c/setClipboardDataResult",e.CMD_GET_CLIPBOARD_DATA_RESULT="/c/getClipboardDataResult",e.CMD_MPSDK_AD_HANDLER_RESULT="/c/mpsdkAdHandlerResult",e.CMD_CREATE_GAME_ICON_RESULT="/c/createGameIconResult",e.CMD_GAME_ICON_HANDLER_RESULT="/c/gameIconHandlerResult",e.CMD_OPEN_CHANNEL_MORE_GAME_BOX_RESULT="/c/openChannelMoreGameBoxResult",e.CMD_OPEN_BLOCK_AD_RESULT="/c/openBlockAdResult",e.CMD_CLOSE_BLOCK_AD_RESULT="/c/closeBlockAdResult",e.CMD_GET_SHORTCUT_STATE_RESULT="/c/getShortcutStateResult",e.CMD_ADD_SUBSCRIBE_RESULT="/c/addSubscribeResult",e.CMD_ADD_COLOR_SIGN_RESULT="/c/addColorSignResult",e.CMD_OPEN_GRID_AD_RESULT="/c/openGridAdResult",e.CMD_CLOSE_GRID_AD_RESULT="/c/closeGridAdResult",e.CMD_JUMP_TO_VIDEO_VIEW_RESULT="/c/jumpToVideoViewResult",e.CMD_FOLLOW_OFFICIAL_ACCOUNT_RESULT="/c/followOfficialAccountResult",e.CMD_GET_FOLLOW_OFFICIAL_ACCOUNT_STATE_RESULT="/c/getFollowOfficialAccountStateResult",e.CMD_CONTENT_SECURITY_CHECK_RESULT="/c/contentSecurityCheckResult",e.CMD_JUMP_LEISURE_SUBJECT_RESULT="/c/jumpLeisureSubjectResult",e.CMD_PHONE_VIBRATE_RESULT="/c/phoneVibrateResult",e.CMD_JUMP_NEW_USER_GUIDE="/c/jumpNewGuide",e.CMD_OPEN_URL_RESULT="/c/openUrlResult",e.CMD_CLEAN_UP_GAME_ARCHIVE="/c/cleanUpGameArchive",e.CMD_SHOW_POINT_DEBUG_INFO="/c/showPointDebugInfo",e.CMD_MOYANG_QQ_NET_EARNED_QUERY="/c/qqNetEarnedQuery",e.CMD_MOYANG_QQ_NET_EARNED_RECHARGE="/c/qqNetEarnedRecharge",e.CMD_MOYANG_QQ_NET_EARNED_CASH="/c/qqNetEarnedCash",e.CMD_MOYANG_QQ_NET_EARNED_QUERY_RESULT="/c/qqNetEarnedQueryResult",e.CMD_MOYANG_QQ_NET_EARNED_RECHARGE_RESULT="/c/qqNetEarnedRechargeResult",e.CMD_MOYANG_QQ_NET_EARNED_CASH_RESULT="/c/qqNetEarnedCashResult",e.CMD_RANKLIST_GET_USER_NUM_RESULT="/c/getUserNumInRankResult",e.CMD_RANKLIST_GET_USER_INFO_BY_ID_RESULT="/c/getUserInfoByIdInRankResult",e.CMD_RANKLIST_GET_USER_INFO_BY_LIST_RESULT="/c/getUserInfoListByRankIdResult",e.CMD_RANKLIST_REPORT_USER_INFO_RESULT="/c/reportUserInfoInRankResult",e.CMD_RANKLIST_MODIFY_SCORE_BY_ARRAY_RESULT="/c/modifyScoreByArrayResult",e.CMD_SDK_ON_COP_CHANGED="/sdk/onCopChanged",e.CMD_SDK_PREPARE_SHOW_VIDEO_ADV="/sdk/prepareShowVideoAdv",e.CMD_SDK_PREPARE_SHOW_INTER_ADV="/sdk/prepareShowInterAdv",e.CMD_SDK_PREPARE_SHOW_BANNER_ADV="/sdk/prepareShowBannerAdv",e.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV="/sdk/prepareShowEmbeddedAdv",e.CMD_SDK_PREPARE_SHOW_URL_ADV="/sdk/prepareShowUrlAdv",e.CMD_SDK_PREPARE_SHOW_PASTER_ADV="/sdk/prepareShowPasterAdv",e.CMD_SDK_SHOW_VIDEO_ADV="/sdk/showVideoAdv",e.CMD_SDK_SHOW_INTER_ADV="/sdk/showInterAdv",e.CMD_SDK_SHOW_BANNER_ADV="/sdk/showBannerAdv",e.CMD_SDK_SHOW_EMBEDDED_ADV="/sdk/showEmbeddedAdv",e.CMD_SDK_SHOW_URL_ADV="/sdk/showUrlAdv",e.CMD_SDK_SHOW_PASTER_ADV="/sdk/showPasterAdv",e.CMD_SDK_CLOSE_VIDEO_ADV="/sdk/closeVideoAdv",e.CMD_SDK_CLOSE_INTER_ADV="/sdk/closeInterAdv",e.CMD_SDK_CLOSE_BANNER_ADV="/sdk/closeBannerAdv",e.CMD_SDK_CLOSE_EMBEDDED_ADV="/sdk/closeEmbeddedAdv",e.CMD_SDK_CLOSE_URL_ADV="/sdk/closeUrlAdv",e.CMD_SDK_CLOSE_Paster_ADV="/sdk/closePasterAdv",e.CMD_SDK_CLOSE_NATIVE_ADV="/sdk/closeNativeAdv",e.CMD_SDK_CLICK_NATIVE_ADV="/sdk/clickNativeAdv",e.CMD_SDK_GET_STORAGE="/sdk/getStorge",e.CMD_SDK_SET_STORAGE="/sdk/setStorge",e.CMD_SDK_GET_CLIPBOARD_DATA="/sdk/getClipboardData",e.CMD_SDK_SET_CLIPBOARD_DATA="/sdk/setClipboardData",e.CMD_SDK_IS_SUPPORT_CLIPBOARD="/sdk/isSupportClipboard",e.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG="/sdk/collectionModuleCheckerConfig",e.CMD_SDK_COLLECTION_MODULE_CHECKER_MORE_GAME_AB_TEST_CONFIG="/sdk/collectionModuleCheckerMoreGameAbTestConfig",e.CMD_SDK_TOUCH_SCREEN_END="/sdk/touchScreenEnd",e.CMD_SDK_ON_GAME_START="/sdk/onGameStart",e.CMD_SDK_ON_GAME_PAUSE="/sdk/onGamePause",e.CMD_SDK_ON_GAME_RESUME="/sdk/onGameResume",e.CMD_SDK_ON_SHARE_SHOW="/sdk/onShareShow",e.CMD_SDK_ON_SAHRE_APP_MESSAGE="/sdk/onShareAppMessage",e.CMD_SDK_ON_REPORT_ULSDK_EVENT="/sdk/ulsdkMegadataUpload",e.CMD_SDK_OPEN_SHARE_DURING_ADV="/sdk/openShareDuringAdv",e.CMD_SDK_CHANNEL_MEGADATA_POST="/sdk/channelMegadataPost",e.CMD_SDK_SET_UP_WEBVIEW_JAVASCRIPT_BRIDGE="/sdk/setUpWebViewJavascriptBridge",e.CMD_SDK_EXPRESS_NATIVE_ADV_STATUS_CHANGE="/sdk/expressNativeAdvStatusChange",e.CMD_MOYANG_QQ_REWARD_VIDEO_PLAY="/sdk/moyangQQRewardVideoPlay",e.CMD_MOYANG_QQ_REWARD_VIDEO_CLOSE="/sdk/moyangQQRewardVideoClose",e.CMD_FACEBOOK_INIT_COMPLETE="/sdk/facebookInitComplete",e.CMD_SDK_INIT_USER_LOGIN="/sdk/initUserLogin",e.CMD_SDK_QM_LOGIN_REPORT="/qmsdk/loginReport",e.CMD_SDK_QM_REPORT_EVENT="/qmsdk/reportEvent",e.CMD_SDK_QM_REPORT_GOLD="/qmsdk/reportGold",e.CMD_SDK_QM_SET_ACCOUNT_INFO="/qmsdk/setAccountInfo",e.CMD_SDK_QM_GET_OPEN_LEVEL="/qmsdk/getOpenLevel",e.CMD_SDK_QM_GET_RECOMMEND_INFO="/qmsdk/getRecommendInfo",e.CMD_SDK_QM_GET_SUGGEST_LIST="/qmsdk/getSuggestList",e.CMD_SDK_QM_GET_EXCITATION_LIST="/qmsdk/getExcitationList",e.CMD_SDK_QM_MPSDK_AD_CLICK="/qmsdk/mpsdkAdClick",e.CMD_SDK_QM_MPSDK_CLICK_SYNC="/qmsdk/mpsdkClickSync",e.CMD_SDK_QM_GET_USER_DATA_VERSION="/qmsdk/getUserDataVersion",e.CMD_SDK_QM_IS_STRONG_FISSION="/qmsdk/isStrongFission",e.CMD_SDK_QM_REPORT_VIDEO_TIME_EVENT="/qmsdk/reportVideoTimeEvent",e.CMD_SDK_OPPOQG_MARK_MANUAL_CLOSE_BANNER_COUNT="/sdk/oppoqg/markManualCloseBannerCount",e.CMD_SDK_OPPOQG_GET_MANUAL_CLOSE_BANNER_COUNT="/sdk/oppoqg/getManualCloseBannerCount",e.CMD_SDK_OPPOQG_HAS_BANNER_SHOWING="/sdk/oppoqg/hasBannerShowing",e.PRIORITY_DISABLE=-2,e.PRIORITY_NONE=-1,e.CONSOLE_OUTPUT_LEVEL_WARN=1,e.CONSOLE_OUTPUT_LEVEL_ERROR=1,e.CONSOLE_OUTPUT_LEVEL_LOG=2,e.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG=3,e.B_INNER_DEBUG=!1,e.COP_RETRY_TIME_SEC=30,e.STATIS_TYPE_BASE_INFO="1",e.STATIS_TYPE_PAY_INFO="2",e.STATIS_TYPE_ADV_INFO="3",e.STATIS_TYPE_COP_REQUEST="4",e.STATIS_TYPE_USER_EVENT="5",e.STATIS_TYPE_ONLINE_TIME="6",e.STATIS_TYPE_POINT_EVENT="7",e.STATIS_TYPE_COIN_CHANGE_EVENT="5",e.STATIS_TYPE_COMMON_EVENT="7",e.STATIS_TYPE_LEVEL_START_EVENT="8",e.STATIS_TYPE_LEVEL_COMPLETE_EVENT="9",e.STATIS_TYPE_ITEM_BUY="10",e.STATIS_TYPE_BUY_ACTION="11",e.STATIS_TYPE_VIDEO_POINT_EVENT="12",e.DEFAULT_REFERANCE_BANNER_HEIGHT=200,e.STATIS_USER_EVENT_GAME_LEVEL_START="gameLevelStart",e.STATIS_USER_EVENT_GAME_LEVEL_COMPLETE="gameLevelComplete",e.STATIS_USER_EVENT_GAME_COIN_ADD="gameCoinAdd",e.STATIS_USER_EVENT_GAME_COIN_LOST="gameCoinLost",e.STATIS_USER_EVENT_BUY_ACTION="buyAction",e.STATIS_USER_EVENT_ITEM_BUY="itemBuy",e.STATIS_USER_EVENT_COMMON_EVENT="commonEvent",e.STATIS_USER_EVENT_COMMON_EVENT_MULTI_FIELD="commonEventMultiField",e.STATIS_USER_EVENT_POINT_EVENT="pointEvent",e.STATIS_USER_ACTION_EVENT_LEVEL_START="levelStart",e.STATIS_USER_ACTION_EVENT_LEVEL_COMPLETE="levelComplete",e.STATIS_USER_ACTION_EVENT_COIN_CHANGE="coinChange",e.STATIS_USER_ACTION_EVENT_ITEM_BUY="itemBuy",e.STATIS_USER_ACTION_EVENT_BUY_ACTION="buyAction",e.STATIS_USER_ACTION_EVENT_COMMON_EVENT="commonEvent",e.STATIS_USER_ACTION_EVENT_VIDEO_POINT_EVENT="videoPointEvent",e.STATIS_UPLOAD_SPAN=60,e.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT=100,e.ADV_FAIL_TIP_NOAD="\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",e.ADV_FAIL_TIP_BUSY="\u5e7f\u544a\u51c6\u5907\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",e.ADV_ERR_CODE_CONSECUTIVE_FAIL=-100,e.ADV_ERR_CODE_CDING=-101,e.ADV_ERR_CODE_NATIVE_ID_ERROR=-102,e.ADV_ERR_CODE_NATIVE_DATA_ERROR=-102,e.ADV_ERR_CODE_CAN_NOT_PLAY=-103,e.ADV_ERR_CODE_NOT_INITED=-104,e.ADV_ERR_CODE_UNKNOWN=-105,e.ADV_ERR_CODE_SHARE_NO_CALLBACK=-106,e.ADV_ERR_CODE_SHARE_FAIL=-107,e.ADV_ERR_CODE_ADOBJ_NULL=-108,e.ADV_ERR_CODE_ADV_TYPE_CD=-109,e.ADV_ERR_CODE_ADV_TYPE_DAILY_LIMIT=-110,e}();o.default=n,cc._RF.pop()},{}],ULCopManager:[function(e,t,o){"use strict";cc._RF.push(t,"52c69olappPbZdqbWwL/OU5","ULCopManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULConfig"),a=e("../utils/ULTools"),r=e("./ULSdkManager"),i=e("../utils/ULTimer"),s=e("../ULConsts"),l=e("../events/ULEventDispatcher"),c=e("../modulechecker/MCConsts"),u=e("./ULStorageManager"),d=function(){function e(){this.localCop={},this.serverCop={},this.cop={},this.simulateCityId="",this.simulateTemplateId=""}return e.prototype.init=function(){this.loadRecord();var e=n.default.getConfig();this.localCop=e.t_sdk_cop_default_cop,this.localCop=a.default.jsonValToStr(this.localCop),ULSDK.console.log("ULCopManager-init-localCop:"+JSON.stringify(this.localCop)),this.processCop(),this.requestServerCop(!1),l.default.getInstance().addListener(s.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,10,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadRecord=function(){var e,t=u.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.setSimulateCityId(e.simulateCityId||""),this.setSimulateTemplateId(e.simulateTemplateId||"")},e.prototype.saveRecord=function(){var e={simulateCityId:this.simulateCityId||"",simulateTemplateId:this.simulateTemplateId||""},t=JSON.stringify(e);u.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=n.default.getConfig();return a.default.format("ULCopManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.requestServerCop=function(e){var t=this,o=n.default.getConfig();if(o.s_sdk_cop_game_id&&"0"!=o.s_sdk_cop_game_id){e||r.default.getInstance().channelInfo.addPreparationFlag("cop");var l=o.s_sdk_cop_addr,c=o.s_sdk_cop_game_id,u=o.s_sdk_cop_channel_id,d=o.s_sdk_cop_version,p=o.i_net_timeout,f=a.default.format("%s?gameid=%d&qudao=%d&version=%d",l,c,u,d);(this.simulateCityId||this.simulateTemplateId)&&(ULSDK.console.warn("\u4f7f\u7528debug\u6a21\u5f0fcop\u5730\u5740"),f=f.replace("getdata/","getdatadebug"),this.simulateCityId&&(f+="&carrierid=0&zoneid="+this.simulateCityId),this.simulateTemplateId&&(f+="&templateId="+this.simulateTemplateId)),ULSDK.console.log("ULCopManager.requestServerCop:",f),a.default.httpGet({url:f,timeoutMillisecond:p,success:function(o){var n=null;try{n=JSON.parse(o),r.default.getInstance().statisManager.reportCopSuccess(o)}catch(e){ULSDK.console.error(e),r.default.getInstance().statisManager.reportCopFail(e.message)}ULSDK.console.log("copJsonData",n),t.serverCop=n||{},t.processCop(),t.triggerCopInfoResult(),e||r.default.getInstance().channelInfo.removePreparationFlag("cop")},fail:function(o){ULSDK.console.warn("ULCopManager.requestServerCop http fail!",o),e||r.default.getInstance().channelInfo.removePreparationFlag("cop"),r.default.getInstance().statisManager.reportCopFail("timeout"),i.default.callLater(s.default.COP_RETRY_TIME_SEC,function(){ULSDK.console.log(a.default.format("ULCopManager.requestServerCop \u5931\u8d25\u540e\uff0c\u7b49\u5f85%d\u79d2\u91cd\u65b0\u8bf7\u6c42cop",s.default.COP_RETRY_TIME_SEC)),t.requestServerCop(!0)})}})}else ULSDK.console.log("\u7981\u7528cop")},e.prototype.processCop=function(){var e={};a.default.forEachMap(this.localCop,function(t,o){e[t]=o}),a.default.forEachMap(this.serverCop,function(t,o){if("i_"!=t.substr(0,2)||isNaN(parseFloat(o))||(o=parseFloat(o)),"t_"==t.substr(0,2))try{o=JSON.parse(o)}catch(e){ULSDK.console.log("processCop error --key:",t," val:",o),o=""}e[t]=o}),ULSDK.console.log("processCop.copresult cop:",e),this.cop=e;var t=n.default.getConfig(),o=a.default.clone(this.cop);o.cop_game_id=t.s_sdk_cop_game_id||"unknown",o.cop_channel_id=t.s_sdk_cop_channel_id||"unknown",o.cop_version=t.s_sdk_cop_version||"unknown",r.default.getInstance().channelInfo.copInfo=JSON.stringify(o),n.default.updateValueByCop(this.cop),l.default.getInstance().dispatch(s.default.CMD_SDK_ON_COP_CHANGED,{})},e.prototype.get=function(e,t){var o=this.cop[e];return null==o&&(o=t),o},e.prototype.getNumberValue=function(e,t){var o=this.get(e,t),n=parseFloat(o);return isNaN(n)?0:n},e.prototype.getNumberValueInRange=function(e,t,o,n){var r=this.getNumberValue(e,t);return r=a.default.clampf(r,o,n)},e.prototype.getBooleanValue=function(e,t){return 1==this.get(e,t)},e.prototype.setSimulateCityId=function(e){if(this.simulateCityId=e,this.saveRecord(),""!=e){var t=a.default.format("\u5df2\u5f00\u542fCOP\u8c03\u8bd5\u6a21\u5f0f\uff0c\u6a21\u62df\u57ce\u5e02\uff1a%s_%s",e,n.default.getConfig().t_sdk_cop_simulate_city_data[e]);r.default.getInstance().moduleCheckerManager.addDebugInfo("cop",t)}else r.default.getInstance().moduleCheckerManager.removeDebugInfo("cop")},e.prototype.setSimulateTemplateId=function(e){if(this.simulateTemplateId=e,this.saveRecord(),""!=e){var t=a.default.format("\u5df2\u5f00\u542fCOP\u8c03\u8bd5\u6a21\u5f0f\uff0c\u6a21\u677fid\uff1a%s",e);r.default.getInstance().moduleCheckerManager.addDebugInfo("cop_templateId",t)}else r.default.getInstance().moduleCheckerManager.removeDebugInfo("cop_templateId")},e.prototype.triggerCopInfoResult=function(){var e=s.default.DEFAULT_REFERANCE_BANNER_HEIGHT,t=n.default.getConfig();null!=t.i_sdk_adv_reference_banner_height&&(e=t.i_sdk_adv_reference_banner_height),r.default.getInstance().response(s.default.CMD_COP_INFO_RESULT,{copInfo:r.default.getInstance().channelInfo.copInfo,referenceBannerHeight:e})},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[],i=a.default.clone(c.default.COP_CITY_ID_2_NAME),s=n.default.getConfig();s.t_sdk_cop_simulate_city_data&&(ULSDK.console.log("t_sdk_cop_simulate_city_data",s.t_sdk_cop_simulate_city_data),a.default.forEachMap(s.t_sdk_cop_simulate_city_data,function(e,t){i[e]=t})),ULSDK.console.log("cityId_2_name",i),o.push({type:"newLine"}),o.push({type:"label",text:"Cop\u6a21\u5757\u4fe1\u606f:"}),o.push({type:"newLine"}),o.push({type:"label",text:"cop\u8c03\u8bd5\u6a21\u5f0f \u6a21\u677fid\uff1a"}),o.push({type:"label",text:this.simulateTemplateId?a.default.format("%s(\u5df2\u5f00\u542f) ",this.simulateTemplateId):"\u5df2\u5173\u95ed ",name:"labelCopTemplate"}),o.push({type:"inputBox",name:"inputCopTemplate"}),o.push({type:"button",text:"\u5207\u6362\u5f00\u5173",onClick:function(){var e="";if(t.simulateTemplateId)e="";else if(!(e=r.default.getInstance().moduleCheckerManager.getItemText("inputCopTemplate")))return void r.default.getInstance().moduleCheckerManager.showMsgTip("\u8bf7\u5148\u8bbe\u7f6e \u6a21\u677fid");t.setSimulateTemplateId(e),r.default.getInstance().moduleCheckerManager.setItemText("labelCopTemplate",e?a.default.format("%s(\u5df2\u5f00\u542f) ",e):"\u5df2\u5173\u95ed "),r.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542fcop\u8c03\u8bd5\u6a21\u5f0f\uff0c\u7b56\u7565\u5c06\u5728\u4e0b\u6b21\u542f\u52a8\u6e38\u620f\u65f6\u751f\u6548")}}),o.push({type:"newLine"}),o.push({type:"label",text:"cop\u8c03\u8bd5\u6a21\u5f0f \u57ce\u5e02id\uff1a"}),o.push({type:"label",text:a.default.format("%s_%s",this.simulateCityId,i[this.simulateCityId]),name:"labelCopCity"}),o.push({type:"button",text:"\u9009\u62e9\u57ce\u5e02..",onClick:function(){for(var e=Object.keys(i),o=[],n=0;n<e.length;n++){var s=e[n],l=parseInt(s);isNaN(l)||o.push(l)}o.sort(function(e,t){return e-t}),o.unshift("");var c=[];for(n=0;n<Math.min(15,o.length);n++){var u=o[n];c.push({text:a.default.format("%s_%s",u,i[u]),value:u})}c.push({text:"\u52a0\u8f7d\u5176\u4ed6\u57ce\u5e02...",value:"more"});var d=[];for(n=0;n<o.length;n++){u=o[n];d.push({text:a.default.format("%s_%s",u,i[u]),value:u})}var p=function(e){"more"!=e?(r.default.getInstance().moduleCheckerManager.setItemText("labelCopCity",a.default.format("%s_%s",e,i[e])),t.setSimulateCityId(e),""!=e?r.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542fcop\u8c03\u8bd5\u6a21\u5f0f\uff0c\u7b56\u7565\u5c06\u5728\u4e0b\u6b21\u542f\u52a8\u6e38\u620f\u65f6\u751f\u6548"):r.default.getInstance().moduleCheckerManager.showMsgTip("cop\u8c03\u8bd5\u6a21\u5f0f\u5df2\u5173\u95ed")):r.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u9700\u8981\u6a21\u62df\u7684\u57ce\u5e02\uff1a",d,p)};r.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u9700\u8981\u6a21\u62df\u7684\u57ce\u5e02\uff1a",c,p)}}),o.push({type:"button",text:"\u91cd\u65b0\u8bf7\u6c42cop",onClick:function(){r.default.getInstance().moduleCheckerManager.alertPrompt("\u6e29\u99a8\u63d0\u793a","\u91cd\u65b0\u8bf7\u6c42cop\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u529f\u80fd\u751f\u6548\uff0c\u4ec5\u4f9b\u67e5\u770bcop\u4f7f\u7528\u3002\u5207\u6362cop\u57ce\u5e02\u6a21\u62df\u540e\uff0c\u8bf7\u91cd\u65b0\u542f\u52a8\u6e38\u620f\u6d4b\u8bd5\u529f\u80fd","\u77e5\u9053\u4e86",function(){r.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u91cd\u65b0\u8bf7\u6c42cop\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u529f\u80fd\u751f\u6548"),t.requestServerCop(!1)})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u67e5\u770bcop\uff1a"}),o.push({type:"button",text:"\u9ed8\u8ba4cop",onClick:function(){var e=t.localCop,o=Object.keys(e);o.sort();for(var n="\u9ed8\u8ba4cop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=a.default.format("[%s] = [%s]\n",s,l)}r.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"button",text:"\u8fdc\u7a0bcop",onClick:function(){var e=t.serverCop,o=Object.keys(e);o.sort();for(var n="\u8fdc\u7a0bcop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=a.default.format("[%s] = [%s]\n",s,l)}r.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"button",text:"\u751f\u6548cop",onClick:function(){var e=t.cop,o=Object.keys(e);o.sort();for(var n="\u751f\u6548cop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=a.default.format("[%s] = [%s]\n",s,l)}r.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"newLine"}),o.push({type:"labelArea",text:"<<\u8fd9\u91cc\u663e\u793acop\u4fe1\u606f>>",name:"labelCop"}),o.push({type:"newLine"}),e.setReturnValue(o,!0)},e}();o.default=d,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../modulechecker/MCConsts":"MCConsts","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULEventDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"81922T0ZmJM+ZaEBsDeOiCq","ULEventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULEventListener"),a=e("./ULEvent"),r=e("../ULConsts"),i=function(){function e(){this.allListeners={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.addListener=function(e,t,o){return this._addListener(e,t,o,!1)},e.prototype.once=function(e,t,o){return this._addListener(e,t,o,!0)},e.prototype._addListener=function(e,t,o,a){if(!(t<r.default.PRIORITY_NONE)){var i=this.allListeners[e];i||(i=[],this.allListeners[e]=i);for(var s=-1,l=0;l<i.length;l++){var c=i[l];if(c.callback==o)return ULSDK.console.warn("ULEventDispatcher._addListener callback already exists:",e),!1;-1==s&&c.priority<t&&(s=l)}var u=new n.default(e,t,o,a);return-1!=s?i.splice(s,0,u):i.push(u),!0}this.removeListenerByCallback(e,o)},e.prototype.removeListenerByCallback=function(e,t){var o=this.allListeners[e];if(o)for(var n=o.length-1;n>=0;n--){o[n].callback==t&&o.splice(n,1)}},e.prototype.removeListenersByType=function(e){delete this.allListeners[e]},e.prototype.dispatch=function(e,t){var o=null;return o=e instanceof a.default?e:new a.default(e,t),r.default.B_INNER_DEBUG&&ULSDK.console.log("ULEventDispatcher.dispatch",o.type,o.data),this._inner_dispatch(o).bCalled},e.prototype.dispatchWithReturn=function(e,t){var o=null;return o=e instanceof a.default?e:new a.default(e,t),r.default.B_INNER_DEBUG&&ULSDK.console.log("ULEventDispatcher.dispatchWithReturn",o.type,o.data),this._inner_dispatch(o).returnValue},e.prototype._inner_dispatch=function(e){var t=!1,o=this.allListeners[e.type];if(!o)return r.default.B_INNER_DEBUG&&ULSDK.console.log("  listeners not found"),{bCalled:!1,returnValue:null};for(var n=0;n<o.length;n++){if(!(a=o[n]).isNeedRemove()&&(a.isDispatchOnce()&&a.markNeedRemove(),a.triggerCallback(e)&&(t=!0),e.isPropagationStoped()))break}for(n=o.length-1;n>=0;n--){var a;(a=o[n]).isNeedRemove()&&o.splice(n,1)}return{bCalled:t,returnValue:e.getReturnValue()}},e._instance=null,e}();o.default=i,cc._RF.pop()},{"../ULConsts":"ULConsts","./ULEvent":"ULEvent","./ULEventListener":"ULEventListener"}],ULEventListener:[function(e,t,o){"use strict";cc._RF.push(t,"af679jhrxVLrbbRFDhurL4/","ULEventListener"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o,n){this.type=e,this.priority=t,this.callback=o,this.bDispatchOnce=n,this.bNeedRemove=!1}return e.prototype.isDispatchOnce=function(){return!!this.bDispatchOnce},e.prototype.isNeedRemove=function(){return!!this.bNeedRemove},e.prototype.markNeedRemove=function(){this.bNeedRemove=!0},e.prototype.triggerCallback=function(e){if(this.callback instanceof Function){try{this.callback(e)}catch(e){return ULSDK.console.error("ULEventListener.triggerCallback has exception!",e),!1}return!0}return!1},e}();o.default=n,cc._RF.pop()},{}],ULEvent:[function(e,t,o){"use strict";cc._RF.push(t,"8d149haKgRN2r6a3tFiRLYK","ULEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){this.bPropagationStoped=!1,this.type=e,this.data=t,this.bPropagationStoped=!1,this.returnValue=null}return e.prototype.stopImmediatePropagation=function(){this.bPropagationStoped=!0},e.prototype.setReturnValue=function(e,t){null!=e&&(this.returnValue=e,t||this.stopImmediatePropagation())},e.prototype.getReturnValue=function(){return this.returnValue},e.prototype.isPropagationStoped=function(){return!!this.bPropagationStoped},e}();o.default=n,cc._RF.pop()},{}],ULInterView:[function(e,t,o){"use strict";cc._RF.push(t,"03ff06rc75B/5df05n+YX7C","ULInterView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ULAdViewBase"),r=window.cc,i=window.Laya,s=function(e){function t(){var t=e.call(this)||this;return t.name="ULInterView",t.interView=null,r?(ULSDK.console.log("ULInterView.constructor"),t.engine=t.ENGINE_COCOS):i&&(ULSDK.console.log("ULInterView.constructor"),t.engine=t.ENGINE_LAYA),t}return n(t,e),t.prototype.createView=function(e,t){e&&t&&(r?(ULSDK.console.log("ULInterView.createView.createViewByCocos"),this.createViewByCocos(e,t)):i&&(ULSDK.console.log("ULInterView.createView.createViewByLaya"),this.createViewByLaya(e,t)))},t.prototype.createViewByLaya=function(e,t){var o=this,n=this.getRootNode();if(n){ULSDK.console.log("ULInterView.createViewByLaya style:",e);var a=i.stage.width,r=i.stage.height;this.interView=n.addChild(new Laya.Sprite),this.interView.size(e.width,e.height),this.interView.pos(e.left,-e.top),this.interView.graphics.drawRect(0,0,a,r,"#00000080");var s=this.interView.addChild(new Laya.Image);s.size(e.width,e.height),s.anchorX=.5,s.anchorY=.5;var l=s.addChild(new Laya.Label);l.fontSize=25,l.align="center",l.text="X \u5173\u95ed",l.color="#ffffff",l.pos(s.width/2-l.width/2,s.height/2-l.height/2),this.registerLayaTouchHander(s,function(e){("began"==e.name?s.scale(1.1,1.1):"moved"==e.name||s.scale(1,1),"click"==e.name)&&(t instanceof Function&&t()||o.interView.destroy())})}else ULSDK.console.warn(this.name+"createViewByLaya nodeRoot not found!")},t.prototype.createViewByCocos=function(e,t){var o=this,n=this.getNodeCanvas();if(n){this.interView&&this.interView.destroy(),this.interView=new r.Node,this.interView.parent=n,this.interView.zIndex=r.macro.MAX_ZINDEX-1;var a=new r.Node;a.parent=this.interView,ULSDK.console.log("interView.style:",e),a.x=e.left,a.y=e.top,this.interView.setContentSize(e.width,e.height),a.setContentSize(this.interView.getContentSize());var i=new r.Node;i.parent=a,i.setContentSize(a.getContentSize());var s=new r.Node;s.parent=a,s.y=0,s.x=0,s.color=r.color(255,255,255,255),s.addComponent(r.Label).string="X \u5173\u95ed",s.getComponent(r.Label).overflow=r.Label.Overflow.SHRINK,s.getComponent(r.Label).verticalAlign=r.Label.VerticalAlign.CENTER,s.getComponent(r.Label).horizontalAlign=r.Label.HorizontalAlign.CENTER,s.getComponent(r.Label).fontSize=25,s.width=a.width,s.height=a.height,this.registerCocosTouchHandler(a,function(e){("began"==e.name?a.scale=1.1:"moved"==e.name||(a.scale=1),o.isTouchEventClick(e))&&(t instanceof Function&&t()||o.interView.destroy())})}else ULSDK.console.warn(this.name+".createView nodeCanvas not found!")},t.prototype.onAdvShow=function(){ULSDK.console.log(this.name+".show")},t.prototype.onAdvClose=function(){ULSDK.console.log(this.name+".hide"),this.interView&&this.interView.destroy()},t.prototype.onAdvDestroy=function(){ULSDK.console.log(this.name+".destroy"),this.interView&&this.interView.destroy()},t.prototype.onAdvClicked=function(){ULSDK.console.log(this.name+".click")},t}(a.default);o.default=s,cc._RF.pop()},{"./ULAdViewBase":"ULAdViewBase"}],ULMd5:[function(e,t,o){"use strict";function n(e,t){return e<<t|e>>>32-t}function a(e,t){var o,n,a,r,i;return a=2147483648&e,r=2147483648&t,i=(1073741823&e)+(1073741823&t),(o=1073741824&e)&(n=1073741824&t)?2147483648^i^a^r:o|n?1073741824&i?3221225472^i^a^r:1073741824^i^a^r:i^a^r}function r(e,t,o){return e&t|~e&o}function i(e,t,o){return e&o|t&~o}function s(e,t,o){return e^t^o}function l(e,t,o){return t^(e|~o)}function c(e,t,o,i,s,l,c){return a(n(e=a(e,a(a(r(t,o,i),s),c)),l),t)}function u(e,t,o,r,s,l,c){return a(n(e=a(e,a(a(i(t,o,r),s),c)),l),t)}function d(e,t,o,r,i,l,c){return a(n(e=a(e,a(a(s(t,o,r),i),c)),l),t)}function p(e,t,o,r,i,s,c){return a(n(e=a(e,a(a(l(t,o,r),i),c)),s),t)}function f(e){for(var t,o=e.length,n=o+8,a=16*((n-n%64)/64+1),r=Array(a-1),i=0,s=0;s<o;)i=s%4*8,r[t=(s-s%4)/4]=r[t]|e.charCodeAt(s)<<i,s++;return i=s%4*8,r[t=(s-s%4)/4]=r[t]|128<<i,r[a-2]=o<<3,r[a-1]=o>>>29,r}function h(e){var t,o="",n="";for(t=0;t<=3;t++)o+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return o}function g(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}cc._RF.push(t,"d3dd5QoRtdCGatwJKkUG4Ax","ULMd5"),Object.defineProperty(o,"__esModule",{value:!0}),o.rotateLeft=n,o.addUnsigned=a,o.F=r,o.G=i,o.H=s,o.I=l,o.FF=c,o.GG=u,o.HH=d,o.II=p,o.convertToWordArray=f,o.wordToHex=h,o.uTF8Encode=g,o.md5Sign=function(e){var t,o,n,r,i,s,l,_,m,v=Array();for(e=g(e),v=f(e),s=1732584193,l=4023233417,_=2562383102,m=271733878,t=0;t<v.length;t+=16)o=s,n=l,r=_,i=m,s=c(s,l,_,m,v[t+0],7,3614090360),m=c(m,s,l,_,v[t+1],12,3905402710),_=c(_,m,s,l,v[t+2],17,606105819),l=c(l,_,m,s,v[t+3],22,3250441966),s=c(s,l,_,m,v[t+4],7,4118548399),m=c(m,s,l,_,v[t+5],12,1200080426),_=c(_,m,s,l,v[t+6],17,2821735955),l=c(l,_,m,s,v[t+7],22,4249261313),s=c(s,l,_,m,v[t+8],7,1770035416),m=c(m,s,l,_,v[t+9],12,2336552879),_=c(_,m,s,l,v[t+10],17,4294925233),l=c(l,_,m,s,v[t+11],22,2304563134),s=c(s,l,_,m,v[t+12],7,1804603682),m=c(m,s,l,_,v[t+13],12,4254626195),_=c(_,m,s,l,v[t+14],17,2792965006),l=c(l,_,m,s,v[t+15],22,1236535329),s=u(s,l,_,m,v[t+1],5,4129170786),m=u(m,s,l,_,v[t+6],9,3225465664),_=u(_,m,s,l,v[t+11],14,643717713),l=u(l,_,m,s,v[t+0],20,3921069994),s=u(s,l,_,m,v[t+5],5,3593408605),m=u(m,s,l,_,v[t+10],9,38016083),_=u(_,m,s,l,v[t+15],14,3634488961),l=u(l,_,m,s,v[t+4],20,3889429448),s=u(s,l,_,m,v[t+9],5,568446438),m=u(m,s,l,_,v[t+14],9,3275163606),_=u(_,m,s,l,v[t+3],14,4107603335),l=u(l,_,m,s,v[t+8],20,1163531501),s=u(s,l,_,m,v[t+13],5,2850285829),m=u(m,s,l,_,v[t+2],9,4243563512),_=u(_,m,s,l,v[t+7],14,1735328473),l=u(l,_,m,s,v[t+12],20,2368359562),s=d(s,l,_,m,v[t+5],4,4294588738),m=d(m,s,l,_,v[t+8],11,2272392833),_=d(_,m,s,l,v[t+11],16,1839030562),l=d(l,_,m,s,v[t+14],23,4259657740),s=d(s,l,_,m,v[t+1],4,2763975236),m=d(m,s,l,_,v[t+4],11,1272893353),_=d(_,m,s,l,v[t+7],16,4139469664),l=d(l,_,m,s,v[t+10],23,3200236656),s=d(s,l,_,m,v[t+13],4,681279174),m=d(m,s,l,_,v[t+0],11,3936430074),_=d(_,m,s,l,v[t+3],16,3572445317),l=d(l,_,m,s,v[t+6],23,76029189),s=d(s,l,_,m,v[t+9],4,3654602809),m=d(m,s,l,_,v[t+12],11,3873151461),_=d(_,m,s,l,v[t+15],16,530742520),l=d(l,_,m,s,v[t+2],23,3299628645),s=p(s,l,_,m,v[t+0],6,4096336452),m=p(m,s,l,_,v[t+7],10,1126891415),_=p(_,m,s,l,v[t+14],15,2878612391),l=p(l,_,m,s,v[t+5],21,4237533241),s=p(s,l,_,m,v[t+12],6,1700485571),m=p(m,s,l,_,v[t+3],10,2399980690),_=p(_,m,s,l,v[t+10],15,4293915773),l=p(l,_,m,s,v[t+1],21,2240044497),s=p(s,l,_,m,v[t+8],6,1873313359),m=p(m,s,l,_,v[t+15],10,4264355552),_=p(_,m,s,l,v[t+6],15,2734768916),l=p(l,_,m,s,v[t+13],21,1309151649),s=p(s,l,_,m,v[t+4],6,4149444226),m=p(m,s,l,_,v[t+11],10,3174756917),_=p(_,m,s,l,v[t+2],15,718787259),l=p(l,_,m,s,v[t+9],21,3951481745),s=a(s,o),l=a(l,n),_=a(_,r),m=a(m,i);return(h(s)+h(l)+h(_)+h(m)).toLowerCase()},cc._RF.pop()},{}],ULModuleBase:[function(e,t,o){"use strict";cc._RF.push(t,"548f5tw4o9ODpgNIP90iogU","ULModuleBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),a=e("../ULConsts"),r=function(){function e(){}return e.prototype.init=function(){n.default.getInstance().addListener(a.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,this.getCollectionModuleCheckerPriority(),this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadSubModules=function(){return[]},e.prototype.loadModuleCheckerConfig=function(){return[]},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){for(var t=e.getReturnValue()||[],o=this.loadModuleCheckerConfig(),n=0;n<o.length;n++){var a=o[n];t.push(a)}e.setReturnValue(t,!0)},e.prototype.getCollectionModuleCheckerPriority=function(){return a.default.PRIORITY_NONE},e}();o.default=r,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher"}],ULModuleCdk:[function(e,t,o){"use strict";cc._RF.push(t,"34c10us8y5LOqe3p9gwN2iR","ULModuleCdk");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULConfig"),r=e("../../utils/ULTools"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("../../core/ULModuleBase"),c=e("../../events/ULEventDispatcher"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),c.default.getInstance().addListener(s.default.CMD_USE_CDKEY,1,this.onCmdUseCdkey.bind(this))},t.prototype.requestUseCdk=function(e,t,o){var n=a.default.getConfig(),l=n.s_sdk_cdk_app_id,c=n.i_net_timeout,u=r.default.format("%s?userId=%s&cdkStr=%s&appId=%s&channelId=%s",n.s_sdk_cdk_url,e,t,l,o);ULSDK.console.log("ULModuleCdk.requestUseCdk",u),r.default.httpGet({url:u,timeoutMillisecond:c,success:function(e){e=(e=(e=(e=e.replace('"[',"[")).replace(']"',"]")).replace('"0"','"1"')).replace("message","data");var t=JSON.parse(e);i.default.getInstance().statisManager.reportOpenCdk(t.code),1==t.code?i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:1,data:t.data,message:"\u5151\u6362\u6210\u529f"}):i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:0,data:[],message:t.data})},fail:function(){i.default.getInstance().statisManager.reportOpenCdk(0),i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:0,message:"\u8bf7\u6c42\u8d85\u65f6"})}})},t.prototype.onCmdUseCdkey=function(e){e.stopImmediatePropagation();a.default.getConfig();var t=e.data,o=t.userId,n=t.cdkStr,r=t.channelId;this.requestUseCdk(o,n,r)},t}(l.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleCheckerManager:[function(e,t,o){"use strict";cc._RF.push(t,"c10f7OuUrtFCZblYQpi2huO","ULModuleCheckerManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../modulechecker/MCPanelCreator"),r=e("../modulechecker/MCPanelLaya"),i=e("../utils/ULTools"),s=e("../events/ULEventDispatcher"),l=e("../ULConsts"),c=e("../utils/ULTimer"),u=function(){function e(){this.inputCode="",this.lastInputTime=0,this.debugInfos={},this.debugInfoRenderNode=null}return e.prototype.init=function(){var e=this;l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.init"),this.registerTouchListener(),this.refreshDebugInfo(),window.cc&&window.cc.director.on(window.cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(t){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager on EVENT_AFTER_SCENE_LAUNCH"),e.registerTouchListener(),e.debugInfoRenderNode=null,e.refreshDebugInfo()})},e.prototype.showPanel=function(e){var t=this;l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showPanel"),(e=e||[]).splice(0,0,{type:"newLine"}),e.splice(0,0,{type:"button",text:"\u5173\u95ed",onClick:function(){t.closePanel()}}),e.splice(0,0,{type:"label",text:"\u5c0f\u6e38\u620f\u6a21\u5757\u8c03\u8bd5\u5668"}),e.splice(0,0,{type:"newLine"}),e.splice(0,0,{type:"newLine"}),e.push({type:"newLine"}),e.push({type:"newLine"}),e.push({type:"newLine"}),e.push({type:"label",text:i.default.format("\xa9%d Ultralisk Chengdu",(new Date).getFullYear())}),this.closePanel();var o=this.getOrCreatePanel();o&&o.show(e)},e.prototype.closePanel=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.closePanel"),this.panel&&this.panel.close()},e.prototype.showReferenceRect=function(e,t,o,n,a,r,i){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showReferenceRect",e,t,o,n,a,r,i),this.getOrCreatePanel(),this.panel&&this.panel.showReferenceRect(e,t,o,n,a,r,i)},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,a,r,i){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showReferenceRectFromViewPoint",e,t,o,n,a),this.getOrCreatePanel(),this.panel&&this.panel.showReferenceRectFromViewPoint(e,t,o,n,a,r,i)},e.prototype.hideReferenceRect=function(e){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.hideReferenceRect",e),this.getOrCreatePanel(),this.panel&&this.panel.hideReferenceRect(e)},e.prototype.hideAllReferenceRects=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.hideAllReferenceRects"),this.getOrCreatePanel(),this.panel&&this.panel.hideAllReferenceRects()},e.prototype.getItemText=function(e){if(this.panel)return this.panel.getItemText(e)},e.prototype.setItemText=function(e,t){this.panel&&this.panel.setItemText(e,t)},e.prototype.showMsgTip=function(e){this.getOrCreatePanel(),this.panel&&this.panel.showMsgTip(e)},e.prototype.alertPrompt=function(e,t,o,n){return this._alertPrompt(e,t,[o],[n])},e.prototype.alertPrompt2=function(e,t,o,n,a,r){return this._alertPrompt(e,t,[o,n],[a,r])},e.prototype._alertPrompt=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPromptDialog(e,t,o,n)},e.prototype.alertPrivacy=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPrivacyDialog(e,t,o,n)},e.prototype.showPickerDialog=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPickerDialog(e,t,o,n)},e.prototype.addDebugInfo=function(e,t){this.debugInfos[e]=t,this.refreshDebugInfo()},e.prototype.removeDebugInfo=function(e){delete this.debugInfos[e],this.refreshDebugInfo()},e.prototype.showBigTextWithPickerDialog=function(e,t,o){for(var n=this,a=[],r=0;r<t.length;r+=o){var i=t.substr(r,o);a.push({text:i,value:i})}this.showPickerDialog(e,a,function(e){n.alertPrompt("\u5b8c\u6574\u5185\u5bb9",e,"\u597d\u7684",null)},!0)},e.prototype.getOrCreatePanel=function(){return this.panel||(window.cc?this.panel=new a.default:window.Laya?this.panel=new r.default:ULSDK.console.warn("ULModuleCheckerManager.getOrCreatePanel unknown platform!")),this.panel},e.prototype.registerTouchListener=function(){var e=this;if(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.registerTouchListener"),l.default.B_INNER_DEBUG&&ULSDK.console.log("  cc",window.cc),l.default.B_INNER_DEBUG&&ULSDK.console.log("  laya",window.laya),l.default.B_INNER_DEBUG&&ULSDK.console.log("  Laya",window.Laya),window.cc&&window.cc.systemEvent){window.cc;var t=window.cc.director.getScene();if(!t)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  scene not found!"),null;var o=t.getChildByName("Canvas");if(!o)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeCanvas not found!"),null;l.default.B_INNER_DEBUG&&ULSDK.console.log("nodeCanvas",o),o.on(window.cc.Node.EventType.TOUCH_START,function(t){var n=t.getLocation(),a=o.getContentSize(),r=window.cc.rect(0,a.height-200,100,200),i=window.cc.rect(a.width-100,a.height-200,100,200);r.contains(n)?e.onTouchSpecialArea("l"):i.contains(n)?e.onTouchSpecialArea("r"):e.onTouchSpecialArea(null)},null,!0),o.on(window.cc.Node.EventType.TOUCH_END,function(e){s.default.getInstance().dispatch(l.default.CMD_SDK_TOUCH_SCREEN_END,{lastTouchScreenEnd:i.default.time()})},null,!0)}else if(window.Laya&&window.Laya.stage){var a=window.Laya,r=a.stage.getChildByName("__ulsdk_ui_node_root__");if(!r){l.default.B_INNER_DEBUG&&ULSDK.console.log("create laya nodeRoot"),(r=a.stage.addChild(new a.Sprite)).size(0,0),r.pos(a.stage.width/2,a.stage.height/2),r.name="__ulsdk_ui_node_root__",r.zOrder=4e4;var u=this,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onStageClick=function(e){l.default.B_INNER_DEBUG&&ULSDK.console.log("LayaStageToucher.onStageClick",e),s.default.getInstance().dispatch(l.default.CMD_SDK_TOUCH_SCREEN_END,{lastTouchScreenEnd:i.default.time()});var t=e.stageX,o=e.stageY;l.default.B_INNER_DEBUG&&ULSDK.console.log(t,o,a.stage.width,a.stage.height),o>200?u.onTouchSpecialArea(null):t<=100?u.onTouchSpecialArea("l"):t>=a.stage.width-100?u.onTouchSpecialArea("r"):u.onTouchSpecialArea(null)},t}(a.Script);r.addComponent(d),c.default.callLoop(1,function(){var e=a.stage.getChildByName("__ulsdk_ui_node_root__");e&&e.pos(a.stage.width/2,a.stage.height/2)})}l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeRoot",r)}},e.prototype.refreshDebugInfo=function(){if(i.default.getObjSize(this.debugInfos)<=0)this.debugInfoRenderNode&&(window.cc?window.cc.isValid(this.debugInfoRenderNode)&&this.debugInfoRenderNode.destroy():window.Laya&&this.debugInfoRenderNode.destroy(),this.debugInfoRenderNode=null);else{var e=[];i.default.forEachMap(this.debugInfos,function(t,o){e.push(o)});var t=e.join("\n");if(!this.debugInfoRenderNode)if(window.cc){window.cc;var o=window.cc.director.getScene();if(!o)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  scene not found!"),null;var n=o.getChildByName("Canvas");if(!n)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeCanvas not found!"),null;(s=new window.cc.Node).parent=n,s.zIndex=window.cc.macro.MAX_ZINDEX,s.y=0,s.x=0,s.width=n.width-10,s.setAnchorPoint(.5,1),s.color=window.cc.Color.RED,s.addComponent(window.cc.Label).fontSize=24,s.getComponent(window.cc.Label).enableWrapText=!0,s.getComponent(window.cc.Label).horizontalAlign=window.cc.Label.HorizontalAlign.CENTER,s.getComponent(window.cc.Label).verticalAlign=window.cc.Label.VerticalAlign.CENTER,s.runAction(window.cc.repeatForever(window.cc.sequence(window.cc.fadeTo(1,63),window.cc.fadeTo(1,255)))),this.debugInfoRenderNode=s}else if(window.Laya){var a=window.Laya,r=a.stage.getChildByName("__ulsdk_ui_node_root__");if(!r)return void(l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeRoot not found!"));(c=r.addChild(new a.Label)).fontSize=24,c.color="#ff0000ff",c.align="center",c.width=a.stage.width-10,c.pos(-c.width/2,0),c.wordWrap=!0,this.debugInfoRenderNode=c}if(this.debugInfoRenderNode)if(window.cc){var s;window.cc;(s=this.debugInfoRenderNode).getComponent(window.cc.Label).string=t}else if(window.Laya){var c;(c=this.debugInfoRenderNode).text=t}}},e.prototype.onTouchSpecialArea=function(e){if(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.onTouchSpecialArea",e),i.default.time()-this.lastInputTime>=2&&this.inputCode&&(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode: touch gap is too long time, cancel."),this.inputCode=""),e){if(this.inputCode+=e,this.lastInputTime=i.default.time(),l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode:",this.inputCode),"lrlrllrr"==this.inputCode){l.default.B_INNER_DEBUG&&ULSDK.console.log("  right!"),this.inputCode="";var t=this.moreGameAbTestConfig()||[];t=t.concat(this.collectionConfig()),this.showPanel(t)}}else this.inputCode&&(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode: touch invalid area, cancel."),this.inputCode="")},e.prototype.collectionConfig=function(){return s.default.getInstance().dispatchWithReturn(l.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,{})},e.prototype.moreGameAbTestConfig=function(){return s.default.getInstance().dispatchWithReturn(l.default.CMD_SDK_COLLECTION_MODULE_CHECKER_MORE_GAME_AB_TEST_CONFIG,{})},e}();o.default=u,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../modulechecker/MCPanelCreator":"MCPanelCreator","../modulechecker/MCPanelLaya":"MCPanelLaya","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools"}],ULModuleClipboard:[function(e,t,o){"use strict";cc._RF.push(t,"8803cACze5LBoGdq0xNqXdB","ULModuleClipboard");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULConfig"),r=e("../../utils/ULTools"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("../../core/ULModuleBase"),c=e("../../events/ULEventDispatcher"),u=e("../../core/ULClipboardManager"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),c.default.getInstance().addListener(s.default.CMD_SET_CLIPBOARD_DATA,1,this.onCmdSetClipboardData.bind(this)),c.default.getInstance().addListener(s.default.CMD_GET_CLIPBOARD_DATA,1,this.onCmdGetClipboardData.bind(this)),c.default.getInstance().addListener(s.default.CMD_SET_VERSION,1,this.onCmdSetVersion.bind(this))},t.prototype.onCmdSetClipboardData=function(e){e.stopImmediatePropagation();a.default.getConfig();var t=e.data,o=t.clipboardData,n=t.userData;u.default.getInstance().setClipboardData(o,function(e){e?i.default.getInstance().response(s.default.CMD_SET_CLIPBOARD_DATA_RESULT,{code:1,msg:"\u4fdd\u5b58\u6210\u529f",clipboardData:o,userData:n}):i.default.getInstance().response(s.default.CMD_SET_CLIPBOARD_DATA_RESULT,{code:0,msg:"\u4fdd\u5b58\u5931\u8d25",clipboardData:o,userData:n})})},t.prototype.onCmdGetClipboardData=function(e){e.stopImmediatePropagation();a.default.getConfig();var t=e.data.userData;u.default.getInstance().getClipboardData(function(e){e?i.default.getInstance().response(s.default.CMD_GET_CLIPBOARD_DATA_RESULT,{code:1,msg:"\u83b7\u53d6\u6210\u529f",clipboardData:e,userData:t}):i.default.getInstance().response(s.default.CMD_GET_CLIPBOARD_DATA_RESULT,{code:0,msg:"\u83b7\u53d6\u5931\u8d25",clipboardData:null,userData:t})})},t.prototype.onCmdSetVersion=function(e){var t=i.default.getInstance().channelInfo;t.isSupportClipboardData=u.default.getInstance().isSupport(),ULSDK.console.log(r.default.format("ULModuleClipboard.onCmdSetVersion mark isSupportClipboardData = %s",t.isSupportClipboardData))},t}(l.default);o.default=d,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULClipboardManager":"ULClipboardManager","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleFaceBook:[function(e,t,o){"use strict";cc._RF.push(t,"970a2loaYZLl4WXZKcnzLgc","ULModuleFaceBook");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULChannelModuleWebmobileBase"),r=e("../../core/ULConfig"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("../../utils/ULTools"),c=e("./ULAdvFacebook"),u=e("../../events/ULEventDispatcher"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInitialize=!1,t}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),ULSDK.console.log("ULModuleFaceBook.init()"),this.initSdk()},t.prototype.initSdk=function(){var e=this,t=r.default.getConfig();l.default.loadJs("https://sdk.minigame.vip/js/1.0/minigame-sdk.js",function(){ULSDK.console.log("ULModuleFaceBook.initSdk \u52a0\u8f7dfacebook\u5e7f\u544aSDK\u7684js\u6210\u529f\uff01");var t=window.FBInstant;t.initializeAsync().then(function(){e.isInitialize=!0,t.setLoadingProgress(100),t.startGameAsync(),t.getSupportedAPIs(),u.default.getInstance().dispatch(s.default.CMD_FACEBOOK_INIT_COMPLETE,{})})},!1);var o=i.default.getInstance().channelInfo;o.channelName="facebook",o.uuid=this.sdkUserId,o.isSupportRecordShare=!1,o.isShareEnabled=!!t.i_sdk_share_mode,o.copChannelId=t.s_sdk_cop_channel_id,o.isPayEnabled=!!t.i_sdk_pay_mode,o.isUseSdkRank=!!t.i_sdk_sdk_rank_mode,o.appName="facebook",o.payInfo={}},t.prototype.loadSubModules=function(){return[new c.default]},t}(a.default);o.default=d,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULChannelModuleWebmobileBase":"ULChannelModuleWebmobileBase","../../core/ULConfig":"ULConfig","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools","./ULAdvFacebook":"ULAdvFacebook"}],ULModuleGoogleAnalytics:[function(e,t,o){"use strict";cc._RF.push(t,"75c56iJYzZDUrMOkyk+jgB4","ULModuleGoogleAnalytics");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULConfig"),r=e("../../core/ULModuleBase"),i=e("../../events/ULEventDispatcher"),s=e("../../ULConsts"),l=e("../../utils/ULTools"),c=(window.dyb,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initStyle=!1,t.reportCacheArray=[],t}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),i.default.getInstance().addListener(s.default.CMD_FACEBOOK_INIT_COMPLETE,1,this.initSdk.bind(this)),i.default.getInstance().addListener(s.default.CMD_SET_VERSION,1,this.onCmdSetVersion.bind(this)),i.default.getInstance().addListener(s.default.CMD_SDK_ON_REPORT_ULSDK_EVENT,1,this.reportEvent.bind(this))},t.prototype.initSdk=function(e){ULSDK.console.log("ULModuleGoogleAnalytics.initSdk");var t=a.default.getConfig().s_sdk_googleAnalytics_appid||"",o="https://www.googletagmanager.com/gtag/js?id="+t,n=this;l.default.loadJs(o,function(){ULSDK.console.log("ULModuleGoogleAnalytics.initSdk \u52a0\u8f7djs\u6210\u529f\uff01"),n.initStyle=!0,n.googleReport("js",new Date);var e=window.FBInstant,o=e.player.getID();ULSDK.console.info("ULModuleGoogleAnalytics.initSdk\uff1auser_id: ",o),n.googleReport("config",t,{cookie_flags:"max-age=7200;secure;samesite=none",user_id:o}),n.googleReport("event","fb_inited"),e.getEntryPointAsync().then(function(e){ULSDK.console.info("ULModuleGoogleAnalytics.initSdk\uff1aEntry Point: ",e),n.googleReport("event","fb_entrypoint",{entrypoint:e})});var a=e.context.getType();ULSDK.console.info("ULModuleGoogleAnalytics.initSdk\uff1acontextType: ",a),n.googleReport("event","fb_context",{type:a}),n.googleReport("event","fb_started"),n.cleanUpReportCache()},!1)},t.prototype.onCmdSetVersion=function(e){ULSDK.console.log("ULModuleGoogleAnalytics.onCmdSetVersion........."),this.googleReport("event","enter_first_scene")},t.prototype.googleReport=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.initStyle?(window.dataLayer||[]).push(arguments):this.reportCacheArray.push(arguments)},t.prototype.cleanUpReportCache=function(){for(;this.reportCacheArray.length;){var e=this.reportCacheArray.shift();(window.dataLayer||[]).push(e)}},t.prototype.reportEvent=function(e){var t=a.default.getConfig(),o=e.data.parameter,n=o.typeid,r=o.updata;ULSDK.console.log("ULModuleGoogleAnalytics type:",n),ULSDK.console.log("ULModuleGoogleAnalytics updata:",r);var i=t.s_sdk_megadata_server_type_id;switch(n=n.replace(i+"-","")){case s.default.STATIS_TYPE_LEVEL_START_EVENT:var l=r[3]||"",c=r[4]||"";this.googleReport("event","level_start",{levelName:l,reason:c});break;case s.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT:l=r[3]||"";var u=r[4]||"",d=(c=r[5]||"",r[11]||"");this.googleReport("event","level_complete",{levelName:l,state:u,reason:c,time:d});break;case s.default.STATIS_TYPE_COIN_CHANGE_EVENT:var p=r[3]||"",f=r[4]||"",h=r[5]||"";c=r[6]||"";this.googleReport("event","coin_change",{coinType:p,changeType:f,num:h,reason:c});break;case s.default.STATIS_TYPE_ITEM_BUY:var g=r[4]||"";u=r[5]||"",c=r[3]||"";this.googleReport("event","goods_buy",{goods:g,state:u,reason:c});break;case s.default.STATIS_TYPE_PAY_INFO:var _=r[4]||"",m=r[5]||"",v=r[6]||"";this.googleReport("event","pay_info",{payType:_,price:m,result:v});break;case s.default.STATIS_TYPE_ONLINE_TIME:var y=r[4]||"";this.googleReport("event","online_time",{time:y});break;case s.default.STATIS_TYPE_VIDEO_POINT_EVENT:var C=r[3]||"";u=r[4]||"";this.googleReport("event","video_point_event",{advName:C,state:u});break;case s.default.STATIS_TYPE_COMMON_EVENT:var b=r[3]||"",S=r[4]||"",R=r[5]||"",T=r[9]||"";this.googleReport("event","user_common_event",{eventId:b,parm1:S,parm2:R,parm3:T});break;case s.default.STATIS_TYPE_ADV_INFO:var L=r[4]||"",w=(u=r[5]||"",c=r[6]||"",r[7]||"");this.googleReport("event","adv_event",{advType:L,state:u,reason:c,cop:w})}},t}(r.default));o.default=c,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleMegadata:[function(e,t,o){"use strict";cc._RF.push(t,"9f734JMGNFMAKEn3MpYPE4l","ULModuleMegadata");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULConfig"),r=e("../../core/ULSdkManager"),i=e("../../ULConsts"),s=e("../../core/ULModuleBase"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),l.default.getInstance().addListener(i.default.CMD_MEGADATA_SERVER,1,this.onCmdMegadataServer.bind(this)),l.default.getInstance().addListener(i.default.CMD_POST_MEGADATA,1,this.onCmdPostMegadata.bind(this)),l.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_RESUME,i.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),l.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_PAUSE,i.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),this.gameLevelStartMsgList={}},t.prototype.onCmdMegadataServer=function(e){e.stopImmediatePropagation();var t=a.default.getConfig(),o=e.data;Array.isArray(o)&&o.length>0?r.default.getInstance().response(i.default.CMD_MEGADATA_SERVER_RESULT,{code:1,message:"\u4e0a\u62a5\u6210\u529f"}):r.default.getInstance().response(i.default.CMD_MEGADATA_SERVER_RESULT,{code:0,message:"\u6570\u636e\u5f02\u5e38"});var n=t.s_sdk_megadata_url;if(r.default.getInstance().statisManager.getPostMegadataMode()&&(n=t.s_sdk_megadata_test_url),-1==n.search(/megadatav7/gi)){var s=c.default.clone(o),l=s[0];if(l!=i.default.STATIS_USER_EVENT_POINT_EVENT){if(l==i.default.STATIS_USER_EVENT_GAME_LEVEL_START){var u=c.default.time(),d=s[1]+"";this.gameLevelStartMsgList[d]=u}if(l==i.default.STATIS_USER_EVENT_GAME_LEVEL_COMPLETE){d=s[1]+"";var p=c.default.time()-this.gameLevelStartMsgList[d];this.gameLevelStartMsgList[d]=void 0,delete this.gameLevelStartMsgList[d],isNaN(p)&&(p=0),(p<0||p>1e4)&&(p=0),s.push(Math.floor(p).toString())}r.default.getInstance().statisManager.reportUserEvent(s)}else r.default.getInstance().statisManager.reportPointEvent(s[1],s[2])}else ULSDK.console.warn("\u5e94\u7528\u786e\u5b9a\u4f7f\u7528v7\u7248\u672c\u7edf\u8ba1\uff0c/c/megadataServer\u63a5\u53e3\u6570\u636e\u4e0d\u518d\u8fdb\u884c\u4e0a\u62a5")},t.prototype.onCmdPostMegadata=function(e){e.stopImmediatePropagation();var t=a.default.getConfig(),o=e.data;Array.isArray(o)&&o.length>0?r.default.getInstance().response(i.default.CMD_POST_MEGADATA_RESULT,{code:1,message:"\u4e0a\u62a5\u6210\u529f"}):r.default.getInstance().response(i.default.CMD_POST_MEGADATA_RESULT,{code:0,message:"\u6570\u636e\u5f02\u5e38"});var n=c.default.clone(o),s=n[0],u="";if(s==i.default.STATIS_USER_ACTION_EVENT_LEVEL_START){var d=c.default.time(),p=n[1]+"";this.gameLevelStartMsgList[p]=d,u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_START_EVENT)}if(s==i.default.STATIS_USER_ACTION_EVENT_LEVEL_COMPLETE){p=n[1]+"";var f=c.default.time()-this.gameLevelStartMsgList[p];this.gameLevelStartMsgList[p]=void 0,delete this.gameLevelStartMsgList[p],isNaN(f)&&(f=0),(f<0||f>1e4)&&(f=0),n.push(Math.floor(f).toString()),u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,["levelComplete",p])}if(s==i.default.STATIS_USER_ACTION_EVENT_COIN_CHANGE&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_COIN_CHANGE_EVENT)),s==i.default.STATIS_USER_ACTION_EVENT_ITEM_BUY&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_ITEM_BUY)),s==i.default.STATIS_USER_ACTION_EVENT_BUY_ACTION&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_BUY_ACTION)),s==i.default.STATIS_USER_ACTION_EVENT_COMMON_EVENT){u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_COMMON_EVENT);var h=c.default.clone(n);h.shift(),ULSDK.console.log("ULModuleMegadta.onCmdPostMegadatapostData postData:",h),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,h)}s==i.default.STATIS_USER_ACTION_EVENT_VIDEO_POINT_EVENT&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_VIDEO_POINT_EVENT),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,["videoPointShow",n[1]])),""!=u&&(n.shift(),ULSDK.console.log("ULModuleMegadta.onCmdPostMegadatapostData typeId:",u," rawDatas:",n),r.default.getInstance().statisManager.reportUserActionEvent(n,u))},t.prototype.onCmdSdkOnGameResume=function(e){a.default.getConfig();for(var t in this.gameLevelStartMsgList)this.gameLevelStartMsgList[t]=c.default.time();ULSDK.console.log("ULModuleMegadta.onCmdSdkOnGameResume gameLevelStartTime:",this.gameLevelStartMsgList)},t.prototype.onCmdSdkOnGamePause=function(e){var t=a.default.getConfig();for(var o in this.gameLevelStartMsgList){ULSDK.console.log("ULModuleMegadta.onCmdSdkOnGamePause currentGameLevelName:",o);var n=c.default.time()-this.gameLevelStartMsgList[o];isNaN(n)&&(n=0),(n<0||n>1e4)&&(n=0);var s=new Array;s.push(o),s.push("2"),s.push("pause"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push(Math.floor(n).toString());var l=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT);r.default.getInstance().statisManager.reportUserActionEvent(s,l)}},t}(s.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleUserData:[function(e,t,o){"use strict";cc._RF.push(t,"0b9f64T1ZBFA6N0s+MKX/e0","ULModuleUserData");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/ULConfig"),r=e("../../core/ULSdkManager"),i=e("../../ULConsts"),s=e("../../core/ULModuleBase"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),l.default.getInstance().addListener(i.default.CMD_SAVE_USER_DATA,i.default.PRIORITY_DISABLE,this.onCmdSaveUserData.bind(this)),l.default.getInstance().addListener(i.default.CMD_GET_USER_DATA,i.default.PRIORITY_DISABLE,this.onCmdGetUserData.bind(this))},t.prototype.requestUploadUserData=function(e,t){var o=a.default.getConfig(),n=o.s_sdk_user_data_save_url,s={userId:e,data:t};c.default.httpPost({url:n,postData:s,timeoutMillisecond:o.i_net_timeout,success:function(e){var t=JSON.parse(e);t&&0==t.code?r.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:1,msg:"\u5b58\u6863\u6210\u529f"}):r.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:0,msg:"\u5b58\u6863\u5931\u8d25"})},fail:function(){r.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:0,msg:"\u5b58\u6863\u8d85\u65f6"})}})},t.prototype.requestDownloadUserData=function(e){var t=a.default.getConfig(),o=c.default.format("%s?userId=%s",t.s_sdk_user_data_get_url,e);ULSDK.console.log("ULModuleUserData.requestDownloadUserData",e),ULSDK.console.log("  url",o),c.default.httpGet({url:o,timeoutMillisecond:t.i_net_timeout,success:function(e){var t=JSON.parse(e);ULSDK.console.log("  ULModuleUserData.requestDownloadUserData success",e),t&&0==t.code?r.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:1,userData:t.data,msg:"\u6a21\u62df\u6210\u529f"}):r.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:0,userData:{},msg:"\u8bfb\u53d6\u5b58\u6863\u5931\u8d25"})},fail:function(e){ULSDK.console.log("  ULModuleUserData.requestDownloadUserData fail",e),r.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:0,userData:{},msg:"\u8bfb\u53d6\u5b58\u6863\u8d85\u65f6"})}})},t.prototype.onCmdSaveUserData=function(e){e.stopImmediatePropagation();a.default.getConfig();var t=r.default.getInstance().channelInfo,o=e.data,n=t.uuid,i=o.userData;n?this.requestUploadUserData(n,i):ULSDK.console.log("ULModuleUserData.onCmdSaveUserData userId not found!")},t.prototype.onCmdGetUserData=function(e){e.stopImmediatePropagation();a.default.getConfig();var t=r.default.getInstance().channelInfo,o=(e.data,t.uuid);this.requestDownloadUserData(o)},t}(s.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULNativeControllerHtml5:[function(e,t,o){"use strict";cc._RF.push(t,"c8a28gqOHVNu6dhu7kRrKr/","ULNativeControllerHtml5"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulsdk/middleware/ULSdkMiddleware"),a=function(){function e(){}return e.init=function(e){var t=this;this.isEnabled(!0)?(this.fOnGameCallback=e,n.default.registerOnResponseCallback(function(e){t.sendMsgToGame(e)})):console.warn("ULNativeControllerHtml5.init !isEnabled()")},e.isEnabled=function(e){if(e)try{console.log("ULNativeControllerHtml5.isEnabled"),console.log("  wx",window.wx),console.log("  qq",window.qq),console.log("  tt",window.tt),console.log("  swan",window.swan),console.log("  hbs",window.hbs),console.log("  qg",window.qg),console.log("  document",document),console.log("  weibo",window.loadRuntime),console.log("  cc.sys.isBrowser",window.cc&&window.cc.sys&&window.cc.sys.isBrowser),console.log("  laya conch",window.Laya&&window.conch)}catch(e){console.log(e)}return!(!window||!window.Laya||window.conch)||(!(!window||!window.wx)||(!(!window||!window.qq)||(!(!window||!window.tt)||(!(!window||!window.swan)||(!(!window||!window.hbs)||(!(!window||!window.qg)||(!(!window||!window.loadRuntime)||!!(window.cc&&window.cc.sys&&window.cc.sys.isBrowser))))))))},e.initUlsdk=function(){var e=n.default.initUlsdk();return JSON.stringify({ret:e})},e.sendMsgToSdk=function(e){var t=n.default.request(e);return JSON.stringify({ret:t})},e.sendMsgToGame=function(e){this.fOnGameCallback instanceof Function&&this.fOnGameCallback(e)},e.isAllowStartGame=function(){return n.default.isAllowStartGame()},e.fOnGameCallback=null,e}();o.default=a,cc._RF.pop()},{"../../ulsdk/middleware/ULSdkMiddleware":"ULSdkMiddleware"}],ULSDK:[function(e,t,o){"use strict";cc._RF.push(t,"9f270aMVxJCq7kBV7IJfELT","ULSDK");var n,a=console;(function(e){var t=function(){function t(){}return t.info=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&a.info.apply(a,t)},t.log=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&a.log.apply(a,t)},t.warn=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&a.warn.apply(a,t)},t.error=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&a.error.apply(a,t)},t.allowConsole=!0,t}();e.console=t})(n||(n={})),window.ULSDK=n,cc._RF.pop()},{}],ULSdkManager:[function(e,t,o){"use strict";cc._RF.push(t,"9ea04Wv6zpKJqktO/GWxHUt","ULSdkManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../middleware/ULSdkMiddleware"),a=e("../events/ULEventDispatcher"),r=e("./ULSdkModuleLoader"),i=e("./ULChannelInfo"),s=e("./ULCopManager"),l=e("../utils/ULTimer"),c=e("../utils/ULTools"),u=e("./ULConfig"),d=e("../ULConsts"),p=e("./ULAdvManager"),f=e("./ULStatisManager"),h=e("./ULModuleCheckerManager"),g=function(){function e(){this.bChannelInfoResultResponsed=!1,this.bAllowStartGame=!0,this.version="0.1",this.modules=[],this.channelInfo=new i.default,this.copManager=new s.default,this.advManager=new p.default,this.statisManager=new f.ULStatisManager,this.moduleCheckerManager=new h.default,this.bChannelInfoResultResponsed=!1,this.responsePending=[],this.sdkCommunicationLog=[],c.default._hack_console_print_method(),c.default._start_console_print_LAN()}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.initUlsdk=function(){ULSDK.console.log("ULSdkManger.init"),this.modules=r.default.initAllModules(),c.default._start_console_print_LAN(),this.advManager.init(),this.statisManager.init(),this.copManager.init(),this.moduleCheckerManager.init(),a.default.getInstance().addListener(d.default.CMD_GET_BASE_CHANNEL_INFO,d.default.PRIORITY_NONE,this.onCmdGetBaseChannelInfo.bind(this)),a.default.getInstance().addListener(d.default.CMD_SET_VERSION,d.default.PRIORITY_NONE,this.onCmdSetVersion.bind(this)),a.default.getInstance().dispatch(d.default.CMD_SDK_INIT_USER_LOGIN,{}),a.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_START,{}),window.cc&&window.cc.game&&window.cc.game.on instanceof Function?(ULSDK.console.log("register cocos EVENT_SHOW & EVENT_HIDE"),window.cc.game.on(window.cc.game.EVENT_SHOW,function(){ULSDK.console.log("ULSdkManager on EVENT_SHOW"),a.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_RESUME,{})}),window.cc.game.on(window.cc.game.EVENT_HIDE,function(){ULSDK.console.log("ULSdkManager on CC_EVENT_HIDE"),a.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_PAUSE,{})})):window.Laya&&this._register_laya_life_cycle_listener()},e.prototype._register_laya_life_cycle_listener=function(){var e,t=window;void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden");var o=!1;function n(){ULSDK.console.log("Laya.onHidden"),o||(o=!0,a.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_PAUSE,{}))}function r(){ULSDK.console.log("Laya.onShown"),o&&(o=!1,a.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_RESUME,{}))}if(e)for(var i=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],s=0;s<i.length;s++)document.addEventListener(i[s],function(t){var o=document[e];(o=o||t.hidden)?n():r()});else t.addEventListener("blur",n),t.addEventListener("focus",r);navigator.userAgent.indexOf("MicroMessenger")>-1&&(t.onfocus=r),window.wx&&(window.wx.onShow&&window.wx.onShow(r),window.wx.onHide&&window.wx.onHide(n)),window.qg&&(window.qg.onShow&&window.qg.onShow(r),window.qg.onHide&&window.qg.onHide(n));window.hbs&&(window.hbs.onShow&&window.hbs.onShow(r),window.hbs.onHide&&window.hbs.onHide(n)),window.ks&&(window.ks.onShow&&window.ks.onShow(r),window.ks.onHide&&window.ks.onHide(n)),"onpageshow"in window&&"onpagehide"in window&&(t.addEventListener("pagehide",n),t.addEventListener("pageshow",r),document.addEventListener("pagehide",n),document.addEventListener("pageshow",r))},e.prototype.onRequest=function(e){var t=null;this.recordSdkCommunicationLog(e);try{t=JSON.parse(e)}catch(e){ULSDK.console.error(e)}if(t){var o=t.cmd,n=t.data||{};if(o)ULSDK.console.log("ULSdkManager.onRequest",o,n),a.default.getInstance().dispatch(o,n)||ULSDK.console.warn(c.default.format("\u672a\u68c0\u6d4b\u5230[%s]\u76d1\u542c\u5668",o));else ULSDK.console.error("cmd\u4e3a\u7a7a,\u8bf7\u68c0\u67e5\u662f\u5426\u6309\u7167\u6587\u6863\u89c4\u8303\u914d\u7f6e\u6d88\u606f")}else ULSDK.console.error("\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u6587\u6863,\u6d88\u606f\u5fc5\u987b\u4e3ajson\u5b57\u7b26\u4e32\u7c7b\u578b")},e.prototype.response=function(e,t,o){if(ULSDK.console.log("ULSdkManager.response",e,t),!this.bChannelInfoResultResponsed&&!o)return ULSDK.console.log("  \u5c1a\u672a\u53d1\u9001/c/channelInfoResult\uff0c\u6682\u5b58\u6d88\u606f"),void this.responsePending.push({cmd:e,data:t});var a=JSON.stringify({cmd:e,data:t});n.default.onResponse(a),this.recordSdkCommunicationLog(a)},e.prototype.uploadMegadata=function(e){var t=e.join("_");this.statisManager.reportUserEvent(["commonEvent",t])},e.prototype.isAllowStartGame=function(){return ULSDK.console.log("ULSdkManagaer.isAllowStartGame",this.bAllowStartGame),this.bAllowStartGame},e.prototype.getModuleByName=function(e){for(var t=0;t<this.modules.length;t++){var o=this.modules[t];if(o.name==e)return o}return null},e.prototype.getSdkCommunicationLog=function(){return this.sdkCommunicationLog},e.prototype.recordSdkCommunicationLog=function(e){this.sdkCommunicationLog&&(this.sdkCommunicationLog.length>=100&&this.sdkCommunicationLog.splice(0,1),this.sdkCommunicationLog.push(e))},e.prototype._doResponseChannelInfoResult=function(){this.bChannelInfoResultResponsed=!0,this.response(d.default.CMD_CHANNEL_INFO_RESULT,this.channelInfo.toResponseData());for(var e=0;e<this.responsePending.length;e++){var t=this.responsePending[e];this.response(t.cmd,t.data)}this.responsePending=[]},e.prototype.onCmdGetBaseChannelInfo=function(e){this.response(d.default.CMD_GET_BASE_CHANNEL_INFO_RESULT,this.channelInfo.toBaseChannelInfoData(),!0)},e.prototype.onCmdSetVersion=function(e){var t=this;e.data;if(e.stopImmediatePropagation(),this.channelInfo.isReady())this._doResponseChannelInfoResult();else{ULSDK.console.log("ULSdkManager.onEventSetVersion channelInfo\u51c6\u5907\u4e2d\uff0c\u5f00\u542ftimer\u8fdb\u884c\u76d1\u542c");var o=u.default.getConfig().i_channel_info_timeout/1e3;l.default.callLoop(1/60,function(e){if(e.usedTime>=o){e.stop();var n=t.channelInfo.getPreparationFlags();return ULSDK.console.log("\u7b49\u5f85channelInfo\u8d85\u65f6\uff01\u76f4\u63a5\u89e6\u53d1channelInfoResult\u3002flags:",n.join(",")),void t._doResponseChannelInfoResult()}if(t.channelInfo.isReady())return e.stop(),ULSDK.console.log("channelInfo\u51c6\u5907\u5b8c\u6bd5\uff01\u89e6\u53d1channelInfoResult"),void t._doResponseChannelInfoResult()})}},e._instance=null,e}();o.default=g,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../middleware/ULSdkMiddleware":"ULSdkMiddleware","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULAdvManager":"ULAdvManager","./ULChannelInfo":"ULChannelInfo","./ULConfig":"ULConfig","./ULCopManager":"ULCopManager","./ULModuleCheckerManager":"ULModuleCheckerManager","./ULSdkModuleLoader":"ULSdkModuleLoader","./ULStatisManager":"ULStatisManager"}],ULSdkMiddleware:[function(e,t,o){"use strict";cc._RF.push(t,"3ba94aRgChOiZbqmo3TqC0c","ULSdkMiddleware"),Object.defineProperty(o,"__esModule",{value:!0}),e("../utils/ULSDK");var n=e("../core/ULSdkManager"),a=function(){function e(){}return e.initUlsdk=function(){if(n.default)try{return n.default.getInstance().initUlsdk(),!0}catch(e){return ULSDK.console.error(e),!1}else ULSDK.console.log("ULSdkMiddleware.initUlsdk ULSdkManager not found!")},e.request=function(e){if(!n.default)return ULSDK.console.log("ULSdkMiddleware.request ULSdkManager not found!"),!1;try{return n.default.getInstance().onRequest(e),!0}catch(e){return ULSDK.console.error(e),!1}},e.isAllowStartGame=function(){return n.default?n.default.getInstance().isAllowStartGame():(ULSDK.console.log("ULSdkMiddleware.isAllowStartGame ULSdkManager not found!"),!0)},e.registerOnResponseCallback=function(e){this.fOnResponseCallback=e},e.onResponse=function(e){this.fOnResponseCallback instanceof Function&&this.fOnResponseCallback(e)},e.fOnResponseCallback=null,e}();o.default=a,cc._RF.pop()},{"../core/ULSdkManager":"ULSdkManager","../utils/ULSDK":"ULSDK"}],ULSdkModuleLoader:[function(e,t,o){"use strict";cc._RF.push(t,"0386fiRF79HZIa91dK0h40C","ULSdkModuleLoader"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../modules/common/ULModuleCdk"),a=e("../modules/common/ULModuleMegadata"),r=e("../modules/common/ULModuleUserData"),i=e("../modules/common/ULModuleClipboard"),s=e("../modules/googleAnalytics/ULModuleGoogleAnalytics"),l=e("../modules/facebook/ULModuleFaceBook"),c=function(){function e(){}return e.initAllModules=function(){var e=[];e.push(new n.default),e.push(new a.default),e.push(new r.default),e.push(new i.default),e.push(new s.default),e.push(new l.default);for(var t=0;t<e.length;t++)for(var o=(d=e[t]).loadSubModules(),c=0;c<o.length;c++){var u=o[c];e.splice(t+1,0,u),t++}ULSDK.console.log("ULSdkModuleLoader--modules:",e);for(t=0;t<e.length;t++){var d=e[t];try{d.init()}catch(e){ULSDK.console.error(e)}}return e},e}();o.default=c,cc._RF.pop()},{"../modules/common/ULModuleCdk":"ULModuleCdk","../modules/common/ULModuleClipboard":"ULModuleClipboard","../modules/common/ULModuleMegadata":"ULModuleMegadata","../modules/common/ULModuleUserData":"ULModuleUserData","../modules/facebook/ULModuleFaceBook":"ULModuleFaceBook","../modules/googleAnalytics/ULModuleGoogleAnalytics":"ULModuleGoogleAnalytics"}],ULStatisManager:[function(e,t,o){"use strict";cc._RF.push(t,"eb9e6h4M3ZCx7P51L940MfR","ULStatisManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULStorageManager"),a=e("../utils/ULTools"),r=e("./ULSdkManager"),i=e("./ULConfig"),s=e("../ULConsts"),l=e("../utils/ULTimer"),c=e("../events/ULEventDispatcher"),u=function(){function e(){this.bUploading=!1,this.lastTimerLoopTime=null,this.pointEventLog={},this.pointEventCategoryId_2_enabled=null,this.gameStartDataPreparationFlags={},this.commonEventLog={},this.levelStartLog={},this.levelCompletetLog={},this.videoPointLog={},this.buyActionLog={},this.coinChangeLog={}}return e.prototype.init=function(){this.channelInfoUuid=r.default.getInstance().channelInfo.uuid,this.megadataId=i.default.getConfig().s_sdk_megadata_server_type_id,this.loadRecord(),l.default.callLoop(i.default.getConfig().i_sdk_megadata_upload_span/1e3,this.onTimerLoop.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_START,s.default.PRIORITY_NONE,this.onCmdSdkOnGameStart.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_PAUSE,s.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_RESUME,s.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_COP_CHANGED,s.default.PRIORITY_NONE,this.onCmdSdkOnCopChanged.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,9,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadRecord=function(){var e,t=n.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.cacheItems=e.cacheItems||[];var o=e.postMegadataTestMode||0;this.postMegadataTestUserId=e.postMegadataTestUserId,this.setPostMegadataMode(o)},e.prototype.saveRecord=function(){var e={cacheItems:this.cacheItems||[],postMegadataTestUserId:this.postMegadataTestUserId,postMegadataTestMode:this.postMegadataTestMode},t=JSON.stringify(e);n.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=i.default.getConfig();return a.default.format("ULStatisManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.onTimerLoop=function(e){this.cacheItems.length<=0?s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.onTimerLoop no cacheItems"):this.tryUploadToServer()},e.prototype.setPostMegadataMode=function(e){if(this.postMegadataTestMode=e,this.saveRecord(),this.postMegadataTestMode){this.channelInfoUuid=this.postMegadataTestUserId;var t="\u6570\u636e\u4e0a\u4f20\u5df2\u5f00\u542f\u6d4b\u8bd5\u6a21\u5f0f\n\u6d4b\u8bd5\u7528\u6237id:"+this.postMegadataTestUserId;r.default.getInstance().moduleCheckerManager.addDebugInfo("postMegadataTestModeInfo",t)}else this.channelInfoUuid=r.default.getInstance().channelInfo.uuid,r.default.getInstance().moduleCheckerManager.removeDebugInfo("postMegadataTestModeInfo")},e.prototype.getPostMegadataMode=function(){return this.postMegadataTestMode},e.prototype._report=function(e,t){for(var o=i.default.getConfig(),n=(o.s_sdk_megadata_close_table_type_ids||"").split(";"),r=0;r<n.length;r++){var l=a.default.format("%s-%s",this.megadataId,n[r]);if(l==e)return void ULSDK.console.log("ULStatisManager._report \u5927\u6570\u636e\u5206\u8868\u63a7\u5236\u8868\u6570\u636e\u4e0a\u4f20closeId:",l)}ULSDK.console.log("ULStatisManager._report i_sdk_megadata_mode 1 ",o.i_sdk_megadata_mode);try{var u={typeid:e,updata:t};c.default.getInstance().dispatch(s.default.CMD_SDK_ON_REPORT_ULSDK_EVENT,{parameter:u})}catch(e){ULSDK.console.log("ULStatisManager.CMD_SDK_ON_REPORT_ULSDK_EVENT error:",e)}if(o.i_sdk_megadata_mode){if(this.postMegadataTestMode){var d=this.megadataId+"-";e=e.replace(d,"1-"),ULSDK.console.log("ULStatisManager._report postMegadataTestMode \u5df2\u6253\u5f00 typeid:",e)}if(0!=t.length){for(var p=0;p<t.length;p++){var f=t[p];"string"!=typeof f&&(f=null==f?"":""+f),t[p]=f}var h={typeid:e,updata:t};this.cacheItems.push(h),this.saveRecord(),this.cacheItems.length>=s.default.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT&&this.tryUploadToServer()}else ULSDK.console.log("ULStatisManager._report !updata \u65e0\u6709\u6548\u6570\u636e\uff0c\u65e0\u6cd5\u4e0a\u62a5:",t)}else ULSDK.console.log("ULStatisManager._report !i_sdk_megadata_mode \u5173\u95ed\u7edf\u8ba1\u529f\u80fd")},e.prototype.tryUploadToServer=function(){var e=this;if(this.bUploading)s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer \u6570\u636e\u4e0a\u4f20\u4e2d");else{var t=Math.min(this.cacheItems.length,s.default.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT);if(t<=0)s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer \u6ca1\u6709\u6570\u636e\u9700\u8981\u4e0a\u4f20");else{this.bUploading=!0;for(var o=[],n=0;n<t;n++){var r=this.cacheItems[n];o.push(r)}var l=i.default.getConfig(),c=l.s_sdk_megadata_url;if(this.postMegadataTestMode&&(c=l.s_sdk_megadata_test_url),l.i_sdk_megadata_encrypt)a.default.httpPostEncryption({url:c,postString:JSON.stringify(o),timeoutMillisecond:l.i_net_timeout,success:function(o){s.default.B_INNER_DEBUG&&console.log("  \u52a0\u5bc6\u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!"),e.cacheItems.splice(0,t),e.saveRecord(),e.bUploading=!1},fail:function(t){s.default.B_INNER_DEBUG&&console.log("  \u52a0\u5bc6\u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",t),e.bUploading=!1}});else{var u="updata="+JSON.stringify(o);s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  url:",c),s.default.B_INNER_DEBUG&&ULSDK.console.log("  postData:",u),a.default.httpPost({url:c,postData:u,timeoutMillisecond:l.i_net_timeout,success:function(o){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!"),e.cacheItems.splice(0,t),e.saveRecord(),e.bUploading=!1},fail:function(t){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",t),e.bUploading=!1}})}}}},e.prototype.uploadToServerRightNow=function(e,t){var o=i.default.getConfig(),n=o.s_sdk_megadata_url;if(o.i_sdk_megadata_mode){if(this.postMegadataTestMode){n=o.s_sdk_megadata_test_url;var r=this.megadataId+"-";e=e.replace(r,"1-"),ULSDK.console.log("ULStatisManager.uploadToServerRightNow postMegadataTestMode \u5df2\u6253\u5f00 typeid:",e)}var l={typeid:e,updata:t},c=[];if(c.push(l),o.i_sdk_megadata_encrypt)a.default.httpPostEncryption({url:n,postString:JSON.stringify(c),timeoutMillisecond:o.i_net_timeout,success:function(e){s.default.B_INNER_DEBUG&&console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!")},fail:function(e){s.default.B_INNER_DEBUG&&console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",e)}});else{var u="updata="+JSON.stringify(c);s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.uploadToServerRightNow"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  url:",n),s.default.B_INNER_DEBUG&&ULSDK.console.log("  postData:",u),a.default.httpPost({url:n,postData:u,timeoutMillisecond:o.i_net_timeout,success:function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!")},fail:function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",e)}})}}else ULSDK.console.log("ULStatisManager.uploadToServerRightNow !i_sdk_megadata_mode \u5173\u95ed\u7edf\u8ba1\u529f\u80fd")},e.prototype.genPointEventLog=function(){var e=this.pointEventLog,t=[],o=[];a.default.forEachMap(e,function(e,t){var n=parseInt(e);o.push({eventId:n,v:t})}),o=a.default.sortArrayByField(o,"eventId");for(var n=function(e){var n=o[e],r=[];a.default.forEachMap(n.v,function(e,t){var o=parseInt(e);r.push({paramId:o,count:t})}),r=a.default.sortArrayByField(r,"paramId");for(var i=0;i<r.length;i++){var s=r[i];t.push(a.default.format("%d-%d: %d",n.eventId,s.paramId,s.count))}},r=0;r<o.length;r++)n(r);return t},e.prototype.getCommonEventLog=function(){var e=[],t=[],o=this.commonEventLog;ULSDK.console.log("ULStatisManager.getCommonEventLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s: %d",r,o[r]))}return e},e.prototype.getLevelStartLog=function(){var e=[],t=[],o=this.levelStartLog;ULSDK.console.log("ULStatisManager.getLevelStartLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s: %d",r,o[r]))}return e},e.prototype.getLevelCompletetLog=function(){var e=[],t=[],o=this.levelCompletetLog;ULSDK.console.log("ULStatisManager.getLevelCompletetLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s: %d   \u65f6\u957f\uff1a%d",r,o[r].count,o[r].playTime))}return e},e.prototype.getVideoPointLog=function(){var e=[],t=[],o=this.videoPointLog;ULSDK.console.log("ULStatisManager.getVideoPointLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s: %d",r,o[r]))}return e},e.prototype.getBuyActionLog=function(){var e=[],t=[],o=this.buyActionLog;ULSDK.console.log("ULStatisManager.getBuyActionLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s: %d",r,o[r]))}return e},e.prototype.getCoinChangeLog=function(){var e=[],t=[],o=this.coinChangeLog;ULSDK.console.log("ULStatisManager.coinChangeLog rawLog:",o),a.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var r=t[n];e.push(a.default.format("%s  \u6b21\u6570\uff1a%d   \u8d27\u5e01\u6570\u91cf\uff1a%d",r,o[r].count,o[r].changeCount))}return e},e.prototype.isReady=function(){return a.default.getObjSize(this.gameStartDataPreparationFlags)<=0},e.prototype.getPreparationFlags=function(){var e=[];return a.default.forEachMap(this.gameStartDataPreparationFlags,function(t,o){e.push(t)}),e},e.prototype.addPreparationFlag=function(e){this.gameStartDataPreparationFlags[e]=!0},e.prototype.removePreparationFlag=function(e){delete this.gameStartDataPreparationFlags[e]},e.prototype.setGameStartSourceMsg=function(e){this.gameStartSourceMsg=e},e.prototype.reportGameStart=function(){var e=r.default.getInstance().channelInfo,t=i.default.getConfig(),o=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_BASE_INFO),n=[];n.push(this.gameStartTimeFormattedStr),n.push(this.channelInfoUuid),n.push(""),n.push(""),n.push(""),n.push(t.s_game_name),n.push(t.s_sdk_cop_game_id),n.push(e.appName),n.push(t.s_sdk_cop_channel_id),n.push(t.s_sdk_cop_version),n.push(e.osVersionMessage||""),n.push("gameStart"),n.push(""),n.push(t.s_sdk_version),n.push(e.equipmentModel||""),n.push(this.gameStartSourceMsg),n.push(e.platformVersionMessage||""),this._report(o,n)},e.prototype.reportPayRequest=function(){this.reportPayResult("","","requestPay")},e.prototype.reportPaySuccess=function(e,t){var o=t||0,n=a.default.format("%.2f",o/100);this.reportPayResult(e,n,"success")},e.prototype.reportPayCancel=function(e,t){var o=t||0,n=a.default.format("%.2f",o/100);this.reportPayResult(e,n,"cancel")},e.prototype.reportPayFail=function(e,t){var o=t||0,n=a.default.format("%.2f",o/100);this.reportPayResult(e,n,"failed")},e.prototype.reportPayResult=function(e,t,o){var n=r.default.getInstance().channelInfo,l=i.default.getConfig(),c=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_PAY_INFO),u=[];u.push(a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),u.push(this.channelInfoUuid),u.push(""),u.push(n.channelName),u.push(e||""),u.push(t||""),u.push(o||""),u.push(l.s_sdk_cop_version),u.push(l.s_sdk_version),this._report(c,u)},e.prototype.reportAdvBranchRequest=function(e,t,o){e.statisChannelName=t,e.statisSdkAdvId=o,this.reportAdvInfo(t,e.showAdvType,"branchAdvRequest","",e.advGroupId,e.advId,e.tag,"",o,"")},e.prototype.reportAdvTotalRequest=function(e){this.reportAdvInfo("",e.advType,"totalAdvRequest","",e.advGroupId,e.advId,e.tag,"","","")},e.prototype.reportAdvSuccess=function(e,t){e.statisNativeAdTitle=t,this.reportAdvInfo(e.statisChannelName,e.showAdvType,"success","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvClicked=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"clicked","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvPlayStart=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"playStart","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvPlayCompletion=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"playCompletion","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvRequest=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvRequest","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvSuccess=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvSuccess","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvFailed=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvFailed",t,e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvFail=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"failed",t,e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvClose=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"hide","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,t)},e.prototype.reportAdvInfo=function(e,t,o,n,l,c,u,d,p,f){r.default.getInstance().channelInfo;var h=i.default.getConfig(),g=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_ADV_INFO),_=[];d&&d.length>6&&(d=d.substr(0,6)),_.push(a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),_.push(this.channelInfoUuid),_.push(""),_.push(e||""),_.push(t||""),_.push(o||""),_.push(n||""),_.push(h.s_sdk_cop_version),_.push(h.s_sdk_version),_.push(l||""),_.push(c||""),_.push(u||""),_.push(d||""),_.push(p||""),_.push(f||""),ULSDK.console.log("reportAdvInfo result:",o),"hide"==o?this.uploadToServerRightNow(g,_):this._report(g,_)},e.prototype.reportCopSuccess=function(e){this.reportCopResult("success","",e)},e.prototype.reportCopFail=function(e){this.reportCopResult("filed",e,"")},e.prototype.reportCopResult=function(e,t,o){r.default.getInstance().channelInfo;var n=i.default.getConfig(),l=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_COP_REQUEST),c=[];c.push(a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),c.push(this.channelInfoUuid),c.push(""),c.push("coprequest"),c.push(e||""),c.push(n.s_sdk_cop_version),c.push(n.s_sdk_version),c.push(t||""),c.push(""),this._report(l,c)},e.prototype.reportUserEvent=function(e){var t=r.default.getInstance().channelInfo,o=i.default.getConfig(),n=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_USER_EVENT),l=[];l.push(a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),l.push(this.channelInfoUuid),l.push("");for(var c=0;c<e.length;c++){var u=e[c];l.push(u)}l.push(o.s_sdk_cop_version),l.push(o.s_sdk_version),l.push(t.channelName),this._report(n,l)},e.prototype.reportUserActionEvent=function(e,t){var o=r.default.getInstance().channelInfo,n=i.default.getConfig(),l=[0,1,2,5,6,7],c=[0,1,2,11,12,13,14],u=[0,1,2,7,8,9],d=[0,1,2,6,7,8],p=[0,1,2,6,7,8],f=[0,1,2,6,7,8],h=[0,1,2,5,6,7],g=[a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),this.channelInfoUuid,"",n.s_sdk_cop_version,n.s_sdk_version,o.copChannelId],_=[];if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_COMMON_EVENT)){_=this.rebuildData(f,g,e);var m=e[0]+"-"+e[1];this.commonEventLog[m]=this.commonEventLog[m]?this.commonEventLog[m]+1:1}else if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_LEVEL_START_EVENT)){_=this.rebuildData(l,g,e);m=e[0];this.levelStartLog[m]=this.levelStartLog[m]?this.levelStartLog[m]+1:1}else if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT)){m=e[0]+"-"+e[1];this.levelCompletetLog[m]||(this.levelCompletetLog[m]={count:0,playTime:0}),this.levelCompletetLog[m].count=this.levelCompletetLog[m].count?this.levelCompletetLog[m].count+1:1,this.levelCompletetLog[m].playTime=this.levelCompletetLog[m].playTime?this.levelCompletetLog[m].playTime+parseInt(e[e.length-1]):parseInt(e[e.length-1]);var v=e.pop();g.splice(3,0,v),_=this.rebuildData(c,g,e)}else if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_VIDEO_POINT_EVENT)){_=this.rebuildData(h,g,e);m=e[0]+"-"+e[1];this.videoPointLog[m]=this.videoPointLog[m]?this.videoPointLog[m]+1:1}else if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_BUY_ACTION)){_=this.rebuildData(p,g,e);m=e[0]+"-"+e[1]+"-"+e[2];this.buyActionLog[m]=this.buyActionLog[m]?this.buyActionLog[m]+1:1}else if(t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_COIN_CHANGE_EVENT)){_=this.rebuildData(u,g,e);m=e[0]+"-"+e[1]+"-"+e[3];this.coinChangeLog[m]||(this.coinChangeLog[m]={count:0,changeCount:0}),this.coinChangeLog[m].count=this.coinChangeLog[m].count?this.coinChangeLog[m].count+1:1,this.coinChangeLog[m].changeCount=this.coinChangeLog[m].changeCount?this.coinChangeLog[m].changeCount+parseInt(e[2]):parseInt(e[2])}else t==a.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_ITEM_BUY)&&(_=this.rebuildData(d,g,e));this._report(t,_)},e.prototype.rebuildData=function(e,t,o){for(var n=a.default.clone(e),r=a.default.clone(t),i=a.default.clone(o),s=[];r.length||i.length;){n[0]==s.length?(s.push(r.shift()),n.shift()):i.length?s.push(i.shift()):s.push("")}return s},e.prototype.reportOnlineTime=function(e){r.default.getInstance().channelInfo;var t=i.default.getConfig(),o=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_ONLINE_TIME),n=[];n.push(a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),n.push(this.channelInfoUuid),n.push(""),n.push(this.gameStartTimeFormattedStr||""),n.push(e.toString()||"0"),n.push(t.s_sdk_cop_version),n.push(t.s_sdk_version),this.uploadToServerRightNow(o,n)},e.prototype.reportShareSuccess=function(e){var t=["openShare","success",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",1,e||0])},e.prototype.reportShareFail=function(e){var t=["openShare","fail",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",0,e||0])},e.prototype.reportAppShare=function(e){var t=["openShare","appShare",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",2,e||0])},e.prototype.reportShareClick=function(e){var t=["clickShare",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.click_share||"101",e||"",""])},e.prototype.reportAddSubcrible=function(e){var t=["addSubscrible",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.add_subscrible||"102",e||"",""])},e.prototype.reportSubcribleClick=function(e){var t=["clickSubscrible",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.click_subscrible||"103",e||"",""])},e.prototype.reportClickMoreGameIcon=function(e,t){var o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{},a=n.click_more_game_icon_list||"106";"single"==e?a=n.click_more_game_icon_single||"104":"reward"==e&&(a=n.click_more_game_icon_reward||"105"),(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?this.reportPointEvent(a,parseInt(t)):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",a,t||"",""])},e.prototype.reportClickMoreGameButtonToChannelSystem=function(){var e=i.default.getConfig(),t=(e.t_sdk_common_event_ids||{}).click_more_game_channel_system_button||"108";(e.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?this.reportPointEvent(t,0):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",t,"",""])},e.prototype.reportOpenCdk=function(e){var t=["openCdk",e].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{},a=o.s_sdk_megadata_url||"";ULSDK.console.log("ULStatisManager.reportOpenCdk code:",e),a.indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_cdk||"107",e||0,""])},e.prototype.reportJumpGame=function(e,t,o,n,a){for(var r=i.default.getConfig(),s=(r.s_sdk_jump_game_statis_game_indexes||"").split(";"),l={},c=0;c<s.length;c++)l[s[c]]=!0;if(l[a.split("_")[0]]){var u=r.s_sdk_megadata_server_jump_game_type_id,d=[];d.push(e),d.push(t),d.push(o),d.push(n),d.push(a),this._report(u,d)}else ULSDK.console.log("ULStatisManager.reportJumpGame \u5f53\u524d\u8df3\u8f6c\u7684\u6e38\u620f\u6570\u636e\u4e0a\u62a5\u6ca1\u5f00,targetIconId:",a)},e.prototype._checkPointEventSwitch=function(e){if(!this.pointEventCategoryId_2_enabled){for(var t=i.default.getConfig().s_sdk_megadata_point_event_open_category_ids.split(";"),o={},n=0;n<t.length;n++){o[t[n]]=!0}this.pointEventCategoryId_2_enabled=o}var a=Math.floor(e/1e3);return!!this.pointEventCategoryId_2_enabled[a]},e.prototype.reportPointEvent=function(e,t){if(e=parseInt(e)||0,isNaN(e)&&(e=0),e=a.default.clampf(e,0,65535),t=parseInt(t)||0,isNaN(t)&&(t=0),t=a.default.clampf(t,0,65535),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.reportPointEvent",e,t),this._checkPointEventSwitch(e)){var o="",n=r.default.getInstance().channelInfo._sdkUserId;s.default.B_INNER_DEBUG&&ULSDK.console.log(a.default.format("  sdkUserId = [%s]",n));/(\d+)_(.*)_(\d+)/.test(n)?(o=RegExp.$2)&&22==o.length?o=o.substr(2,o.length-2):(s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u6838\u5fc3\u957f\u5ea6\u4e0d\u5339\u914d\uff0c\u76f4\u63a5\u4f7f\u7528sdkUserId"),o=n):(s.default.B_INNER_DEBUG&&ULSDK.console.log("  userId\u89c4\u5219\u4e0d\u5339\u914d\uff0c\u76f4\u63a5\u4f7f\u7528sdkUserId"),o=n),s.default.B_INNER_DEBUG&&ULSDK.console.log(a.default.format("  shortUserId = [%s]",o));r.default.getInstance().channelInfo;var l=i.default.getConfig(),c=a.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_POINT_EVENT),u=[];u.push(o),u.push(l.s_sdk_cop_channel_id),u.push(e.toString()),u.push(t.toString()),this._report(c,u);var d=this.pointEventLog,p=d[e];p||(p={},d[e]=p),p[t]=(p[t]||0)+1,s.default.B_INNER_DEBUG&&ULSDK.console.log("  log",d)}else s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u6253\u70b9\u7edf\u8ba1\u4e0a\u62a5\u672a\u5f00\u542f\uff1a",i.default.getConfig().s_sdk_megadata_point_event_open_category_ids)},e.prototype.onCmdSdkOnGameStart=function(e){var t=this;if(this.gameStartTimeFormattedStr=a.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),this.gameLastResumeTime=a.default.time(),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart",this.gameStartTimeFormattedStr,this.gameLastResumeTime),this.isReady())return this.reportGameStart(),void this.tryUploadToServer();var o=this.getPreparationFlags();ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u4e0a\u62a5\u6570\u636e\u6ca1\u6709\u51c6\u5907\u597d,flags:",o.join(","));var n=i.default.getConfig().i_game_start_ready_timeout/1e3;l.default.callLoop(1/60,function(e){if(e.usedTime>=n){e.stop();var o=t.getPreparationFlags();return ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u7b49\u5f85\u8d85\u65f6\uff01\u76f4\u63a5\u89e6\u53d1reportGameStart flags:",o.join(",")),t.reportGameStart(),void t.tryUploadToServer()}if(t.isReady())return e.stop(),ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u51c6\u5907\u5b8c\u6bd5\uff01\u89e6\u53d1reportGameStart"),t.reportGameStart(),void t.tryUploadToServer()})},e.prototype.onCmdSdkOnGamePause=function(e){if(this.gameLastResumeTime){var t=a.default.time()-this.gameLastResumeTime;if(s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGamePause",t),!(t<=5||t>86400)){this.gameLastResumeTime=a.default.time(),this.reportOnlineTime(Math.floor(t));var o=i.default.getConfig();c.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_user_play_game_time_event_id,Math.floor(t)])}}else ULSDK.console.warn("ULStatiManager.onCmdSdkOnGamePause gameLastResumeTime not found! \u65e0\u6cd5\u4e0a\u62a5\u5728\u7ebf\u65f6\u95f4")},e.prototype.onCmdSdkOnGameResume=function(e){this.gameLastResumeTime=a.default.time(),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGameResume",this.gameLastResumeTime)},e.prototype.onCmdSdkOnCopChanged=function(e){this.pointEventCategoryId_2_enabled=null},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[];o.push({type:"newLine"});var n=["\u6b63\u5f0f\u6a21\u5f0f","\u6d4b\u8bd5\u6a21\u5f0f"],a="\u5f53\u524d\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:"+n[this.postMegadataTestMode];o.push({type:"label",text:a,name:"labelPostDataMode"}),o.push({type:"button",text:"\u5207\u6362\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f..",onClick:function(){var e=r.default.getInstance().moduleCheckerManager.getItemText("labelPostTestModeUserId"),o=[];o.push({text:"\u6d4b\u8bd5\u6a21\u5f0f ( \u7528\u6237id:"+e+")",value:1}),o.push({text:"\u6b63\u5f0f\u6a21\u5f0f",value:0});r.default.getInstance().moduleCheckerManager.showPickerDialog("\u5207\u6362\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:",o,function(o){var a="\u5f53\u524d\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:"+n[t.postMegadataTestMode];if(o){if(e.length<1)return void r.default.getInstance().moduleCheckerManager.alertPrompt("\u63d0\u793a","\u8bf7\u8bbe\u7f6e\u6d4b\u8bd5\u7528\u6237id","\u597d\u7684");t.postMegadataTestUserId=e,r.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542f\u6d4b\u8bd5\u6a21\u5f0f")}else t.postMegadataTestUserId=null,r.default.getInstance().moduleCheckerManager.showMsgTip("\u6d4b\u8bd5\u6a21\u5f0f\u5df2\u5173\u95ed");t.setPostMegadataMode(o),r.default.getInstance().moduleCheckerManager.setItemText("labelPostDataMode",a)})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6d4b\u8bd5\u7528\u6237id"}),o.push({type:"inputBox",text:this.postMegadataTestUserId,name:"labelPostTestModeUserId"}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6e05\u7406\u6e38\u620f\u5b58\u6863:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u6e05\u7406\u6e38\u620f\u5b58\u6863",onClick:function(){r.default.getInstance().response(s.default.CMD_CLEAN_UP_GAME_ARCHIVE,{})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc",onClick:function(){r.default.getInstance().response(s.default.CMD_JUMP_NEW_USER_GUIDE,{})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u662f\u5426\u663e\u793a\u5ba2\u6237\u7aef\u6253\u70b9\u4fe1\u606f\u754c\u9762\u5f00\u5173:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u6253\u5f00",onClick:function(){r.default.getInstance().response(s.default.CMD_SHOW_POINT_DEBUG_INFO,{state:1})}}),o.push({type:"button",text:"\u5173\u95ed",onClick:function(){r.default.getInstance().response(s.default.CMD_SHOW_POINT_DEBUG_INFO,{state:0})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6253\u70b9\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.genPointEventLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u6253\u70b9\u7edf\u8ba1\u8bb0\u5f55(\u4e8b\u4ef6id-\u72b6\u6001\uff1a\u6b21\u6570)\uff1a",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u81ea\u5b9a\u4e49\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getCommonEventLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u81ea\u5b9a\u4e49\u7edf\u8ba1\u8bb0\u5f55(\u4e8b\u4ef6id-\u72b6\u6001\uff1a\u6b21\u6570)\uff1a",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5173\u5361\u5f00\u59cb\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getLevelStartLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u5173\u5361\u5f00\u59cb\u7edf\u8ba1\u8bb0\u5f55(\u5173\u5361\u540d\uff1a\u6b21\u6570):",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5173\u5361\u7ed3\u675f\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getLevelCompletetLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u5173\u5361\u7ed3\u675f\u7edf\u8ba1\u8bb0\u5f55(\u5173\u5361\u540d-\u7ed3\u679c-\u6b21\u6570):",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u89c6\u9891\u57cb\u70b9\u8f6c\u5316\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getVideoPointLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u89c6\u9891\u57cb\u70b9\u8f6c\u5316\u7edf\u8ba1\u8bb0\u5f55(\u89c6\u9891\u70b9-\u72b6\u6001\uff1a\u6b21\u6570)",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5185\u8d2d\u884c\u4e3a\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getBuyActionLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u5185\u8d2d\u884c\u4e3a\u7edf\u8ba1\u8bb0\u5f55(\u5f39\u51fa\u7406\u7531-\u5546\u54c1\u540d-\u7ed3\u679c)",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u8d27\u5e01\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getCoinChangeLog(),o=[],n=0;n<e.length;n++){var a=e[n];o.push({text:a,value:a})}r.default.getInstance().moduleCheckerManager.showPickerDialog("\u8d27\u5e01\u7edf\u8ba1\u8bb0\u5f55(\u8d27\u5e01\u540d\u79f0-\u53d8\u5316\u7c7b\u578b-\u53d8\u5316\u539f\u56e0)",o,function(){},!0)}}),e.setReturnValue(o,!0)},e}();o.ULStatisManager=u,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULStorageManager:[function(e,t,o){"use strict";cc._RF.push(t,"e69954DnkxPSZgKNKJ2xXNb","ULStorageManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),a=e("../ULConsts"),r=e("../utils/ULTools"),i=function(){function e(){this.cacheStorage={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getStorage=function(e){var t=n.default.getInstance().dispatchWithReturn(a.default.CMD_SDK_GET_STORAGE,{key:e});return ULSDK.console.log(r.default.format("ULStorageManager.getStorage(%s) => [%s]",e,t)),null==t?t=this.cacheStorage[e]:this.cacheStorage[e]=t,t},e.prototype.setStorage=function(e,t){this.cacheStorage[e]=t,n.default.getInstance().dispatch(a.default.CMD_SDK_SET_STORAGE,{key:e,data:t})||ULSDK.console.warn("ULStorageManager.setStorage \u672a\u627e\u5230\u5b9e\u73b0\uff01")},e._instance=null,e}();o.default=i,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools"}],ULTimer:[function(e,t,o){"use strict";cc._RF.push(t,"485f7FD24tPPayt4Fi+90pf","ULTimer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULTools"),a=function(){function e(e,t,o){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._beginTime=-1,this._usedTime=0,this._span=e,this._repeatCount=t,this._callback=o}return e.callLater=function(t,o){new e(t,1,o).start()},e.callLoop=function(t,o){new e(t,-1,o).start()},e.prototype._onSpan=function(){if(this._count++,this._usedTime=n.default.time()-this._beginTime,this._callback)try{this._callback(this)}catch(e){ULSDK.console.warn("\u8b66\u544a] ULTimer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usedTime",{get:function(){return this._usedTime},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.stop(),this._callback?(this._beginTime=n.default.time(),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(ULSDK.console.warn("\u8b66\u544a] ULTimer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();o.default=a,cc._RF.pop()},{"./ULTools":"ULTools"}],ULTools:[function(e,t,o){"use strict";cc._RF.push(t,"bba6fuZu5hD04nFaI/k7QjK","ULTools"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../core/ULConfig"),a=e("./ULTimer"),r=e("../ULConsts"),i=e("../core/ULSdkManager"),s=e("../core/ULStorageManager"),l=e("./ULWebSocket"),c=function(){function e(){}return e.time=function(){return(new Date).getTime()/1e3},e.timeInDay=function(){var e=this.time(),t=new Date(1e3*e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e-t.getTime()/1e3},e.isOneDay=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.isOneMonth=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var t=0;return this.forEachMap(e,function(e,o){t++}),t},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,o,n,a){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(a-n)+n},e.clampf=function(e,t,o){return e<t?t:e>o?o:e},e.calcWheelTarget=function(e,t){for(var o=0,n=0;n<e.length;n++){var a=e[n],r=parseInt(a[t]);if(isNaN(r))return ULSDK.console.warn(this.format("Tools.calcWheelTarget weight field not found! key=[%s]",t)),null;o+=r}var i=this.random(o);for(n=0;n<e.length;n++){a=e[n];if(i<=(r=parseInt(a[t])))return a;i-=r}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var o=[];for(var n in t){if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var a=s.substring(1,s.length);a&&""!=a&&o.push([a,!0])}else o.push([s,!1])}for(var r=[],i=0;i<e.length;i++){var s=e[i];r.push(s)}return r.sort(function(e,t){var n=0;for(var a in o){var r=o[a],i=r[0],s=r[1],l=e[i],c=t[i];if(null!=l&&0!=(n=s?c-l:l-c))return n}return n}),r},e.bubbleSort=function(e,t){for(var o=e.length,n=0;n<o;n++)for(var a=0;a<o-1-n;a++){if(t(e[a],e[a+1])>0){var r=e[a+1];e[a+1]=e[a],e[a]=r}}return e},e.forEachMap=function(e,t){if(e)for(var o=Object.keys(e),n=0;n<o.length;n++){var a=o[n],r=e[a];if(null!=r&&t(a,r))break}},e.formatTime=function(e,t){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,a=Math.ceil(e)%60;return t.match("%h")&&(t=t.replace("%h",o.toString())),t.match("%H")&&(t=t.replace("%H",this.format("%02d",o))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",this.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",a.toString())),t.match("%S")&&(t=t.replace("%S",this.format("%02d",a))),t},e.formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()},n=t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in o)new RegExp("("+a+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?o[a]:("00"+o[a]).substr((""+o[a]).length)));return n},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},e.compressUuid=function(e){for(var t="0123456789abcdef".split(""),o={},n=0;n<t.length;n++)o[t[n]]=n;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r={};for(n=0;n<a.length;n++)r[a[n]]=n;var i=(e=e.replace(/-/g,"")).split(""),s=[];s.push(i[0]),s.push(i[1]);for(n=2;n<i.length;n+=3){var l=o[i[n]],c=o[i[n+1]],u=o[i[n+2]];s.push(a[l<<2|c>>2]),s.push(a[(3&c)<<4|u])}return s.join("")},e.decompressUuid=function(e){var t=e.split("");if(t.length<22)return e;for(var o="0123456789abcdef".split(""),n={},a=0;a<o.length;a++)n[o[a]]=a;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i={};for(a=0;a<r.length;a++)i[r[a]]=a;var s=[];s.push(t[0]),s.push(t[1]);for(a=2;a<t.length;a+=2){var l=i[t[a]],c=i[t[a+1]];s.push(o[l>>2]),s.push(o[(3&l)<<2|c>>4]),s.push(o[15&c])}return s.splice(8,0,"-"),s.splice(13,0,"-"),s.splice(18,0,"-"),s.splice(23,0,"-"),s.join("")},e.getType=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},e.clone=function(e){var t,o=this.getType(e);if(window.cc&&e instanceof window.cc.Node)return e;if("object"===o)t={};else{if("array"!==o)return e;t=[]}if("array"===o)for(var n=0,a=e.length;n<a;n++)t.push(this.clone(e[n]));else if("object"===o)for(var r in e)t[r]=this.clone(e[r]);return t},e.toArray=function(e){return Array.isArray(e)?e:[]},e.sumNumberArray=function(e){if(!Array.isArray(e))return 0;for(var t=0,o=0;o<e.length;o++){var n=e[o];isNaN(n)||(t+=n)}return t},e.getRandomValueInArray=function(e){return Array.isArray(e)?e[this.random(e.length)-1]:null},e._convert=function(e,t){e.sign=t?"":e.negative?"-":e.sign;var o=e.min-e.argument.length+1-e.sign.length,n=new Array(o<0?0:o).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument},e.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var o=arguments[0],n=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),a=new Array,r=new Array,i=0,s=0,l=0,c=0,u="",d=null;d=n.exec(o);)d[9]&&(i+=1),s=c,l=n.lastIndex-d[0].length,r[r.length]=o.substring(s,l),c=n.lastIndex,a[a.length]={match:d[0],left:!!d[3],sign:d[4]||"",pad:d[5]||" ",min:d[6]||0,precision:d[8],code:d[9]||"%",negative:parseInt(arguments[i])<0,argument:String(arguments[i])};if(r[r.length]=o.substring(c),0==a.length)return o;if(arguments.length-1<i)return null;d=null;var p=null,f=null;for(f=0;f<a.length;f++)"%"==a[f].code?p="%":"b"==a[f].code?(a[f].argument=String(Math.abs(parseInt(a[f].argument)).toString(2)),p=this._convert(a[f],!0)):"c"==a[f].code?(a[f].argument=String(String.fromCharCode(Math.abs(parseInt(a[f].argument)))),p=this._convert(a[f],!0)):"d"==a[f].code?(a[f].argument=String(Math.abs(parseInt(a[f].argument))),p=this._convert(a[f])):"f"==a[f].code?(a[f].argument=String(Math.abs(parseFloat(a[f].argument)).toFixed(a[f].precision?a[f].precision:6)),p=this._convert(a[f])):"o"==a[f].code?(a[f].argument=String(Math.abs(parseInt(a[f].argument)).toString(8)),p=this._convert(a[f])):"s"==a[f].code?(a[f].argument=a[f].argument.substring(0,a[f].precision?a[f].precision:a[f].argument.length),p=this._convert(a[f],!0)):"x"==a[f].code?(a[f].argument=String(Math.abs(parseInt(a[f].argument)).toString(16)),p=this._convert(a[f])):"X"==a[f].code?(a[f].argument=String(Math.abs(parseInt(a[f].argument)).toString(16)),p=this._convert(a[f]).toUpperCase()):p=a[f].match,u+=r[f],u+=p;return u+=r[f]},e.httpGet=function(e){var t=new XMLHttpRequest,o=new a.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var a=t.responseText;e.success instanceof Function&&e.success(a)}else ULSDK.console.warn("ULTools.httpGet on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}},o.start(),t.open("get",e.url),t.send()},e.httpPost=function(e){e.contentType=e.contentType||"application/x-www-form-urlencoded;charset=utf-8";var t=new XMLHttpRequest,o=new a.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var a=t.responseText;e.success instanceof Function&&e.success(a)}else ULSDK.console.warn("ULTools.httpPost on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}},o.start(),t.open("post",e.url,!0),t.setRequestHeader("Content-Type",e.contentType),t.send(e.postData)},e.stringToByte=function(e){var t,o,n=new Array;t=e.length;for(var a=0;a<t;a++)(o=e.charCodeAt(a))>=65536&&o<=1114111?(n.push(o>>18&7|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)):o>=2048&&o<=65535?(n.push(o>>12&15|224),n.push(o>>6&63|128),n.push(63&o|128)):o>=128&&o<=2047?(n.push(o>>6&31|192),n.push(63&o|128)):n.push(255&o);return n},e.httpPostEncryption=function(e){var t=new XMLHttpRequest,o=new a.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var a=t.responseText;e.success instanceof Function&&e.success(a)}else console.warn("ULTools.httpPost on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}};for(var n=this.stringToByte(e.postString),r=n.length%127||127,i=new ArrayBuffer(n.length),s=new Uint8Array(i),l=0;l<n.length;l++)n[l]=n[l]^r,s[l]=n[l];o.start(),t.open("post",e.url,!0),t.setRequestHeader("isEncrypt","1"),t.send(i)},e.httpJsonp=function(t){if(!t||!t.url)throw new Error("\u53c2\u6570\u4e0d\u5408\u6cd5");var o=e.format("jsonp_%d",e.random(1e6));t.data.callback=o;var n=document.getElementsByTagName("head")[0],r=[];this.forEachMap(t.data,function(t,o){r.push(e.format("%s=%s",encodeURIComponent(t),encodeURIComponent(o)))});var i=r.join("&"),s=document.createElement("script");n.appendChild(s);var l=new a.default(t.timeoutMillisecond/1e3,1,function(e){window[o]&&(window[o]=null,n.removeChild(s),t.fail&&t.fail("timeout"))});window[o]=function(e){window[o]&&(n.removeChild(s),l.stop(),window[o]=null,t.success&&t.success(e))},s.src=t.url+"?"+i},e.loadJs=function(e,t,o){var n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",function(e){t instanceof Function&&t()}),n.src=e,n.defer="defer",o&&(n.crossOrigin="anonymous"),document.getElementsByTagName("head")[0].appendChild(n)},e.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?decodeURI(o[2]):null},e.createRandomString=function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",o=t.length,n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*o));return n},e.createRandomUserId=function(){var e=this.generateUUID();return this.compressUuid(e)},e.createRandomOrderId=function(){return(new Date).getTime()+this.createRandomString(7)},e.compareVersion=function(e,t){for(var o=e.split("."),n=t.split("."),a=Math.max(o.length,n.length);o.length<a;)o.push("0");for(;n.length<a;)n.push("0");for(var r=0;r<a;r++){var i=parseInt(o[r]),s=parseInt(n[r]);if(i>s)return 1;if(i<s)return-1}return 0},e._hack_console_print_method=function(){var t=function(t,o){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];o.apply(void 0,n),e.socketingWS&&e.socketingWS.send({type:t,data:n})}};this._console_log||(this._console_log=t(1,console.log)),this._console_warn||(this._console_warn=t(2,console.warn)),this._console_error||(this._console_error=t(3,console.error)),window.cc&&(this._cc_log||(this._cc_log=t(1,window.cc.log)),this._cc_warn||(this._cc_warn=t(2,window.cc.warn)),this._cc_error||(this._cc_error=t(3,window.cc.error)));var o=n.default.getConfig();console.log=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_LOG?function(){}:this._console_log,console.warn=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_WARN?function(){}:this._console_warn,console.error=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_ERROR?function(){}:this._console_error,window.cc&&(window.cc.log=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_LOG?function(){}:this._cc_log,window.cc.warn=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_WARN?function(){}:this._cc_warn,window.cc.error=o.i_sdk_debug_mode<r.default.CONSOLE_OUTPUT_LEVEL_ERROR?function(){}:this._cc_error)},e._start_console_print_LAN=function(){if(!e.socketingWS){var t=n.default.getConfig().s_sdk_lan_debug_address.length>10?n.default.getConfig().s_sdk_lan_debug_address:"",o=localStorage.getItem("console_lan_id")||s.default.getInstance().getStorage("console_lan_id")||t;if(ULSDK.console.log("console_lan_id:",o),o&&o.length&&"WebSocket"in window){ULSDK.console.log("\u652f\u6301WebSocket\u5c40\u57df\u7f51\u8c03\u8bd5");var a="ws://"+o+":3002/websocket/test",r=null;try{(r=new l.default(a)).onopen=function(){ULSDK.console.log("Connection open ..."),i.default.getInstance().moduleCheckerManager.addDebugInfo("console_lan_id","\u5df2\u5f00\u542f\u5c40\u57df\u7f51\u8c03\u8bd5")},r.onmessage=function(e){ULSDK.console.log("Received Message:"+e.data)},r.onclose=function(){ULSDK.console.log("Connection closed"),i.default.getInstance().moduleCheckerManager.removeDebugInfo("console_lan_id"),e.socketingWS=null},r.onerror=function(t){ULSDK.console.error("Connection onerror:",t),i.default.getInstance().moduleCheckerManager.removeDebugInfo("console_lan_id"),e.socketingWS=null}}catch(e){r=null,ULSDK.console.log("\u5c40\u57df\u7f51\u8c03\u8bd5\u9519\u8bef:",JSON.stringify(e))}finally{if(null==r)return;e.socketingWS=r}}else ULSDK.console.log("\u4e0d\u652f\u6301WebSocket\u5c40\u57df\u7f51\u8c03\u8bd5")}},e._close_console_print_LAN=function(){e.socketingWS&&(e.socketingWS.close(),e.socketingWS=null)},e.jsonValToStr=function(e){if(!e)return e;for(var t={},o=Object.keys(e),n=0;n<o.length;n++){var a=o[n],r=e[a];r="object"==typeof r?JSON.stringify(r):String(r),t[a]=r}return t},e.recordVideoTimeLimit=function(e,t){var o=n.default.getConfig().t_sdk_record_duration_limit_object||{},a=o["string"==typeof e?e:"number"==typeof e?e.toString():""]||o["*"]||{},r=a.min||0,i=a.max||1e4;return r>t?{isConform:!1,msg:"\u5f55\u5c4f\u65f6\u95f4\u5c11\u4e8e"+r+"\u79d2"}:i<t?{isConform:!1,msg:"\u5f55\u5c4f\u65f6\u95f4\u5927\u4e8e"+i+"\u79d2"}:{isConform:!0,msg:""}},e.socketingWS=null,e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../core/ULConfig":"ULConfig","../core/ULSdkManager":"ULSdkManager","../core/ULStorageManager":"ULStorageManager","./ULTimer":"ULTimer","./ULWebSocket":"ULWebSocket"}],ULWebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"1591089F3BLfKoi3WmXdql7","ULWebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){if(this.socketingWS=null,this.isOpening=!1,this.socketMsgCache=[],this._isAutoClearCache=!1,"WebSocket"in window){var t=new WebSocket(e);this.socketingWS=t;var o=this;t.onopen=function(e){o.isOpening=!0,o.onopen(e)},t.onmessage=function(e){o.onmessage(e)},t.onclose=function(e){o.isOpening=!1,o.socketingWS=null,o.socketMsgCache=[],o.onclose(e)},t.onerror=function(e){o.isOpening=!1,o.socketingWS=null,o.socketMsgCache=[],o.onerror(e)}}}return Object.defineProperty(e.prototype,"isAutoClearCache",{set:function(e){var t=this;e!=this._isAutoClearCache&&(this._isAutoClearCache=e,this._isAutoClearCache?this.intervalId=setInterval(function(){t.clearCache()},30):clearInterval(this.intervalId))},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){this.isOpening&&this.socketingWS&&(this.socketingWS.close(),this.isOpening=!1,this.socketingWS=null)},e.prototype.send=function(e){if(this.socketingWS){var t=null;try{t=JSON.stringify(e)}catch(e){t=JSON.stringify({type:3,data:e})}finally{!this.isOpening||this._isAutoClearCache?(this.socketMsgCache.push(t),this.isAutoClearCache=!0):this.socketingWS.send(t)}}},e.prototype.clearCache=function(){if(this.socketingWS&&this.socketMsgCache.length){if(this.isOpening){var e=this.socketMsgCache.shift();this.socketingWS.send(e)}}else this.isAutoClearCache=!1},e}();o.default=n,cc._RF.pop()},{}],UnitTestCase:[function(e,t,o){"use strict";cc._RF.push(t,"1575fu8zohGiKKS7rO7tRc3","UnitTestCase");var n=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,i=(a.property,function(){function e(){this.assertCount=0,this.assertFaildCount=0}return e.prototype.prepare=function(){},e.prototype.run=function(){},e.prototype.cleanup=function(){},e.prototype.assertEquals=function(e,t,o){this.assertCount++,o!=t?(cc.error(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b==[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,o,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.assertNotEquals=function(e,t,o){this.assertCount++,o==t?(cc.error(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b!=[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,o,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.isLogPassInfo=function(){return!1},e=n([r],e)}());o.default=i,cc._RF.pop()},{}],ViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"61455sbxEVAr5Ssh4NM0iMG","ViewBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/manager/mgrDirector"),r=e("../component/LifeCycleMonitor"),i=e("../utils/MsgHandler"),s=e("../utils/Tools"),l=function(e){function t(t){void 0===t&&(t={});var o=e.call(this)||this;return t||(t={}),o.context=t,o._msgHander=new i.default,o._bindLifeCycle(),o}return n(t,e),t.prototype._onPreDestroy=function(){this.onDestroy(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.isFullscreenView=function(){return!1},t.prototype.onLoad=function(){this.startProcMsg(),this._loadResource()},t.prototype.onResourceLoaded=function(){},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onDestroy=function(){this.stopProcMsg()},t.prototype.registerListeners=function(e){var t=this;s.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t.prototype._getResourceName=function(){return""},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype._loadResource=function(){var e=this,t=this._getResourceName();if(!t)return this.nodeResource=this,this.onResourceLoaded(),void(this.nodeResource=this);a.default.loadNode(t,this,function(t){var o=t;if(cc.isValid(e)){var n=new cc.Node;n.parent=e,o.parent=n,0==o.x&&0==o.y||o.setPosition(0,0);var a=e._buildNodeMapping(o);s.default.forEachMap(e._getResourceBindingConfig(),function(t,o){var n=a[t];if(n){var r=null;if(o.vartype==cc.Node)r=n;else if(r=n.getComponent(o.vartype)){var i=o.events;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=l.bindMethod,u=l.method;r[c]instanceof Function?e[u]instanceof Function?r[c](e[u].bind(e)):cc.warn(ul.format("ViewBase._loadResource method not found! varname=[%s] method=[%s]",l.varname,u)):cc.warn(ul.format("ViewBase._loadResource bindMethod not found! varname=[%s] bindMethodName=[%s]",l.varname,c))}}else cc.warn("ViewBase._loadResource obj not found!",t);e[o.varname]=r}else cc.warn("ViewBase._loadResource node not found!",t)}),e.nodeResource=o,e.onResourceLoaded()}else cc.warn("ViewBase._loadResource when nodeResource laod finished, this is unvaliad!")})},t.prototype._buildNodeMapping=function(e,t){t||(t={}),e.name&&(t[e.name]=e);for(var o=e.children,n=0;n<o.length;n++){var a=o[n];this._buildNodeMapping(a,t)}return t},t.prototype._bindLifeCycle=function(){var e=this.addComponent(r.default);e.setOnLoadCallback(this.onLoad.bind(this)),e.setStartCallback(this.start.bind(this)),e.setUpdateCallback(this.update.bind(this))},t.prototype.isResourceLoaded=function(){return cc.isValid(this.nodeResource)},t}(cc.Node);o.default=l,cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],_template:[function(e,t,o){"use strict";cc._RF.push(t,"e5169SDbJZKlYybKwRjZVGG","_template");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager"}],cConfig:[function(e,t,o){"use strict";cc._RF.push(t,"00000AAAAAAAAAAAAAAAAAA","cConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.cConfig=JSON.parse('{\n    "b_sdk_oppoqg_debug": false,\n    "b_sdk_vivo_debug": false,\n    "creatorVersion": "",\n    "i_channel_info_timeout": 3000,\n    "i_game_start_ready_timeout": 10000,\n    "i_net_timeout": 5000,\n    "i_sdk_adv_banner_cd": 0,\n    "i_sdk_adv_banner_timeout": 30000,\n    "i_sdk_adv_embedded_timeout": 30000,\n    "i_sdk_adv_inter_cd": 0,\n    "i_sdk_adv_inter_timeout": 30000,\n    "i_sdk_adv_native_clicked_report_mode": 0,\n    "i_sdk_adv_native_life_time": 15000,\n    "i_sdk_adv_native_request_cd": 10000,\n    "i_sdk_adv_oppoqg_native_exposure_cd": 0,\n    "i_sdk_adv_paster_timeout": 30000,\n    "i_sdk_adv_type_banner_cd": 0,\n    "i_sdk_adv_type_banner_daily_limit": 0,\n    "i_sdk_adv_type_embedded_cd": 0,\n    "i_sdk_adv_type_embedded_daily_limit": 0,\n    "i_sdk_adv_type_interstitial_cd": 40000,\n    "i_sdk_adv_type_interstitial_daily_limit": 0,\n    "i_sdk_adv_type_paster_cd": 0,\n    "i_sdk_adv_type_paster_daily_limit": 0,\n    "i_sdk_adv_type_url_cd": 0,\n    "i_sdk_adv_type_url_daily_limit": 0,\n    "i_sdk_adv_type_video_cd": 0,\n    "i_sdk_adv_type_video_daily_limit": 0,\n    "i_sdk_adv_url_timeout": 30000,\n    "i_sdk_adv_video_timeout": 30000,\n    "i_sdk_age_level_info_mode": 0,\n    "i_sdk_baidu_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_baidu_add_game_to_my_favorite_mode": 0,\n    "i_sdk_baidu_auto_upload": 0,\n    "i_sdk_baidu_banner_timeout": 30000,\n    "i_sdk_baidu_debug_mode": 0,\n    "i_sdk_baidu_jump_game_reward_time": 20000,\n    "i_sdk_baidu_qrcode_preview": 1,\n    "i_sdk_channel_user_id_mode": 0,\n    "i_sdk_compress_res_mode": 1,\n    "i_sdk_content_security_check_support": 1,\n    "i_sdk_debug_mode": 0,\n    "i_sdk_facebook_megadata_mode": 0,\n    "i_sdk_find_mini_game_mode": 1,\n    "i_sdk_hago_banner_id": null,\n    "i_sdk_hago_user": null,\n    "i_sdk_hago_video_id": null,\n    "i_sdk_headline_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_headline_auto_upload": 1,\n    "i_sdk_headline_cuttemplate_default_interval": 2000,\n    "i_sdk_headline_favorite_mode": 0,\n    "i_sdk_headline_follow_support": 0,\n    "i_sdk_headline_getUserInfo_force": 1,\n    "i_sdk_headline_installShortcut_support": 0,\n    "i_sdk_headline_qrcode_preview": 1,\n    "i_sdk_headline_record_delay_time": 500,\n    "i_sdk_headline_record_support": 1,\n    "i_sdk_headline_subscribe_use_temleteIds_mode": 0,\n    "i_sdk_installShortcut_mode": 0,\n    "i_sdk_iqiyi_appid": 9163,\n    "i_sdk_jkplay_gameid": 625399989,\n    "i_sdk_jkplay_sdkversion": 1,\n    "i_sdk_jump_game_resource_mode": 0,\n    "i_sdk_jump_single_random_length": 5,\n    "i_sdk_jumplist_mode": 1,\n    "i_sdk_kaixin_banner_id": 10000143,\n    "i_sdk_kuaishou_follow_support": 1,\n    "i_sdk_kuaishou_record_delay_time": 500,\n    "i_sdk_kuaishou_record_support": 1,\n    "i_sdk_megadata_encrypt": 1,\n    "i_sdk_megadata_mode": 0,\n    "i_sdk_megadata_upload_span": 5000,\n    "i_sdk_moreWonderful_mode": 0,\n    "i_sdk_moregame_mode": 1,\n    "i_sdk_oppoqg_ad_ecd": 0,\n    "i_sdk_oppoqg_banner_mode": 0,\n    "i_sdk_oppoqg_jump_game_reward_time": 20000,\n    "i_sdk_oppoqg_not_show_banner_after_user_close_count_limit": 5,\n    "i_sdk_pay_mode": 0,\n    "i_sdk_phone_vibrate": 0,\n    "i_sdk_qihoo_banner_timeout": 15000,\n    "i_sdk_qq_ad_failed_share_reward_confirm_success_cycle": 72000,\n    "i_sdk_qq_ad_failed_share_reward_fail_count": 2,\n    "i_sdk_qq_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_qq_ad_failed_share_reward_success_radios": 70,\n    "i_sdk_qq_ad_failed_share_reward_success_time_interval": 5000,\n    "i_sdk_qq_appbox_cd": 30000,\n    "i_sdk_qq_appbox_suc_ratios": 0,\n    "i_sdk_qq_auto_upload": 1,\n    "i_sdk_qq_block_cd": 30000,\n    "i_sdk_qq_qrcode_preview": 1,\n    "i_sdk_refresh_request_num": 18,\n    "i_sdk_sdk_rank_mode": 0,\n    "i_sdk_share_mode": 1,\n    "i_sdk_support_open_url": 0,\n    "i_sdk_support_record_share": 1,\n    "i_sdk_trim_adv_err_switch": 1,\n    "i_sdk_weixin_ad_failed_share_reward_confirm_success_cycle": 72000,\n    "i_sdk_weixin_ad_failed_share_reward_fail_count": 2,\n    "i_sdk_weixin_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_weixin_ad_failed_share_reward_success_radios": 70,\n    "i_sdk_weixin_ad_failed_share_reward_success_time_interval": 5000,\n    "i_sdk_weixin_auto_upload": 1,\n    "i_sdk_weixin_banner_autoRefresh_mode": 0,\n    "i_sdk_weixin_banner_intervals": 30,\n    "i_sdk_weixin_currency_ratio": 10,\n    "i_sdk_weixin_env": 0,\n    "i_sdk_weixin_jump_game_reward_time": 0,\n    "i_sdk_weixin_jump_game_reward_type": 0,\n    "i_sdk_weixin_qrcode_preview": 1,\n    "i_sdk_weixin_replace_grid_with_custom": 0,\n    "i_sdk_weixin_subscribe_use_temleteIds_mode": 0,\n    "layaVersion": "",\n    "s_game_name": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6",\n    "s_prj_name": "prj.game56",\n    "s_sdk_2345_game_code": "leishou_ylljlm",\n    "s_sdk_2345_gameres_url": "http://gamesres.ultralisk.cn/h5_games_res/game56/m2345/v0/",\n    "s_sdk_4399GameBox_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game56/4399GameBox/v1",\n    "s_sdk_4399gamebox_app_key": "0",\n    "s_sdk_4399gamebox_game_id": "0",\n    "s_sdk_4399minigame_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game56/4399minigame/v0",\n    "s_sdk_adv_info": {\n        "1": {\n            "group": [\n                "1"\n            ],\n            "type": "interstitial"\n        },\n        "2": {\n            "group": [\n                "2"\n            ],\n            "type": "banner"\n        },\n        "3": {\n            "group": [\n                "3"\n            ],\n            "type": "embedded"\n        },\n        "4": {\n            "group": [\n                "4",\n                "401",\n                "402",\n                "403"\n            ],\n            "type": "video"\n        },\n        "5": {\n            "group": [\n                "5"\n            ],\n            "type": "url"\n        },\n        "6": {\n            "group": [\n                "6"\n            ],\n            "type": "paster"\n        }\n    },\n    "s_sdk_adv_show_banner_list": "ULAdvFaceBook",\n    "s_sdk_adv_show_embedded_list": "0",\n    "s_sdk_adv_show_inter_list": "ULAdvFaceBook",\n    "s_sdk_adv_show_paster_list": "0",\n    "s_sdk_adv_show_url_list": "0",\n    "s_sdk_adv_show_video_list": "ULAdvFaceBook",\n    "s_sdk_age_level_info": "",\n    "s_sdk_baidu_adv_app_sid": "b898e4e0",\n    "s_sdk_baidu_app_id": "16255096",\n    "s_sdk_baidu_banner_id": "6215361",\n    "s_sdk_baidu_change_log": "",\n    "s_sdk_baidu_deal_id": "1762022491",\n    "s_sdk_baidu_min_swan_version": "1.0.8",\n    "s_sdk_baidu_pay_app_key": "MMMu2k",\n    "s_sdk_baidu_pay_private_key": "-----BEGIN RSA PRIVATE KEY-----MIICXgIBAAKBgQC46Giy1S4Zuys/c3QO6VZVWAOo1tussbIpqI0M7edU9OC732leFej2DmG3O9XRh9NlYjoAq4hyt7DxiZ6MyN8IdStZn4b0/e/CZKQA5WaCI5h71hUTwCJTzHZHvO+woDWaE2mOSsBfjAdwTsHUr32eCPzju/1zatys02W7ai4v+wIDAQABAoGAGjbAmRHF3ln9kJpCitajqae3pRkIvZvXgTZnAL09fXrV3WyX2IHMrA1v5vUxo+nYm1foly26Q2EtUaDL/HOBwshbwEtR5TR0g+kZBpA+S4wt/ujZPlALmZiGuQjjqwWFo9OfeskXer7vA5UWYemDMvy7XQ2TWoLNOzI+LaVvEPECQQDpEgY7XmrKeq8qkUFPsDjcEa7SZ2eEEOps0NKmewGvAaiavm7+8yCdS/ZPS7ZD6590TanFWy3gJtugw/vPa2tpAkEAyxlj8u+EYKchPBYehuRjm4W5SlJNAGrABqrJjM50jQ4aRVr1LbS6R0S77kTaZLTV/w8eYk1LS9cTCaY+JB+HwwJBAIXrlmscmG4ZynbCGe4JCtLg0jwRsHhBJAI8hx2jxlbhtBieXbbeypm3YSM1FNi4FdpFGczN1HFcwowAsLsBNSkCQQC9YgywQKYI1m+ILvwCPr+fCt/PrNS+mcw7q0/Lq8xEp6zZlUpgd1DoGfC/6pZXJ8UQVFG5ymd27bOD4O+7EWevAkEAzYHfclV/kP3V1aCR0KoXBHA4WIHKa+JaVuFMIDZqd/SsfsoKDn+Stsajl/e8LAwt9XXctYWNvGsVfCSfZ5Y3tw==-----END RSA PRIVATE KEY-----",\n    "s_sdk_baidu_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game56/baidu/v1",\n    "s_sdk_baidu_version_name": "1.0.0",\n    "s_sdk_baidu_video_id": "6215362",\n    "s_sdk_cdk_app_id": "67",\n    "s_sdk_cdk_url": "https://cdkey.ultralisk.cn/commoncdk/usecdk",\n    "s_sdk_cop_addr": "https://copv7.ultralisk.cn/h5/getdata/",\n    "s_sdk_cop_game_id": "0",\n    "s_sdk_daren_base_gameres_url": "https://gamesres.ultralisk.cn/h5_games_daren/",\n    "s_sdk_daren_git_addr": "ulsdk/h5_games_daren",\n    "s_sdk_daren_git_branch": "master",\n    "s_sdk_facebook_appId": "326792401986782",\n    "s_sdk_facebook_interId": "326792401986782_350561286276560",\n    "s_sdk_facebook_videoId": "326792401986782_329716641694358",\n    "s_sdk_funheadline_app_id": "a3DxtSGsmToq",\n    "s_sdk_funheadline_app_key": "oRAhkURJGxmHF4S495XugCQJj4CccC8xECFRSO1CA4SSHGfC5EMMSJHFJJtcpSgM",\n    "s_sdk_funheadline_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game56/funheadline/v0",\n    "s_sdk_googleAnalytics_appid": "G-VCEEERM0MD",\n    "s_sdk_hago_country_code": null,\n    "s_sdk_hago_env": null,\n    "s_sdk_hago_game_id": null,\n    "s_sdk_hago_language": null,\n    "s_sdk_headline_app_secret": "ca04ae6c089d48f0cce72c8b77c45df7d1c1ffaf",\n    "s_sdk_headline_appid": "tt9e56e8eb017c109e",\n    "s_sdk_headline_banner_adunit": "6l7deo1g63hac6366f",\n    "s_sdk_headline_change_log": "",\n    "s_sdk_headline_douyin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/douyin_icon/56.png",\n    "s_sdk_headline_get_token_url": "https://sdkserver.ultralisk.cn/ttgettoken",\n    "s_sdk_headline_get_video_info_url": "https://gate.snssdk.com/developer/api/get_video_info",\n    "s_sdk_headline_inter_adunit": "4fdhed479f0mrdummu",\n    "s_sdk_headline_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game56/headline/v1",\n    "s_sdk_headline_share_video_tag": "",\n    "s_sdk_headline_sub_context": "",\n    "s_sdk_headline_subscribe_url": "",\n    "s_sdk_headline_top_video_by_like_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_like",\n    "s_sdk_headline_top_video_by_time_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_time",\n    "s_sdk_headline_toutiao_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/toutiao_icon/56.png",\n    "s_sdk_headline_version_name": "2.4.23",\n    "s_sdk_headline_video_adunit": "1j6rtl6l195fupedyh",\n    "s_sdk_huawei_appid": "100874093",\n    "s_sdk_huawei_banner_adunit": null,\n    "s_sdk_huawei_inter_adunit": "0",\n    "s_sdk_huawei_login_tip": "",\n    "s_sdk_huawei_merchant_id": "890086200300024295",\n    "s_sdk_huawei_merchant_name": "\u6210\u90fd\u53cc\u6668\u79d1\u6280\u6709\u9650\u516c\u53f8",\n    "s_sdk_huawei_native_ids": null,\n    "s_sdk_huawei_package_name": "cn.ultralisk.game56.huawei",\n    "s_sdk_huawei_private_key": "-----BEGIN RSA PRIVATE KEY-----MIIEowIBAAKCAQEAhkWqHmAEgXaeNV/kSxT6JHMwAXLy9+NTtCyMKQwXgBH9Rv5eCR6Z1XmcO0yMj0r8takgGG0h7s4qh3TpIs0ajRteKFa66ywS1/1ASOVpI9rwkNgQvzduFAXUs1tSzc+GG+FR8LJR+i0MSHm+weHJJOUzLnWl9PFUVM1Mo2AOhZYrd6edy6KMy9TcQgaUfuBtv85/MentrtrrlK1z9VeHJSs3kSLOu985S5tfa2YEk/7r1ijVRVJDj3DxlKm3kh6XPV5ti5HDhhz7xbOkd1vvQyJ5XEc657jkN7spPirO5NELPcOjQjgMeUQOLhtWiF4Uo6lRKkwNB7Jq1kINnzZgrwIDAQABAoIBAASToPn6aDI+J/lbbzgh8GlypasUTx96QlL3W8BVwa1OBQCOULKQi592Tt10kqvwWznD7ddMolCgpVwgSjFd+q7e78WB40rQd0ShGg0CCM895LTt2xrxbuaZe50GGrCaMhDcNsNKCLegISA39MkTWEb81ahFPqa2h8XWM5ZerVAJ+DCzEB5SYic53H+B8pJjy06HRgufFene7xzkLWI5oDLE1T8zu7aCkcJn3oVlgYnGQvv/hAJh4I87Zo/hXm29JENa5KbK0Yx0lhLhm4MHqex359jmZaNGqVP64YCBmvjE2ZSnFI5BiMlYYRMWoLqzOzKDV6XzNQTbJWIahwq6FVUCgYEAujpisZfeN2aVI89hKyUfl8ruM4BUcZxiKACkohoQXRnrC5bR67KFR1v/W80s73VS9V5Tn1ODYX4Vf9An3YiyuVpMPCLoRQ3zh9sRGamYMTA8RQlZVwxHoVBhUmT9CkPRpS1ORvUY69MWzjq1kUbvrrkT6SRHZaiZOQyQAiMJc1UCgYEAuJQM9fnCaEXnYB/aXgYSUFUwc2Vb7oaKwhvD83vtvvEs4PegB1s4fSQeyFHWkjaNAodcfyEOUk6incLpJfxn83OVmgS7tvl+N1WdDbhLgxPHPre2TdzSUQ9So/p1SCEL9vorTeY80s99mC2mKLrk2aeYO9l0c2lkxAJu7d6kS/MCgYAJigYWLL5QPivziqLij+M/ZkCvWKp6q1UH0YidWRJvgm1cyZv1I87Z6ed5r1fW6D6YnP1RkviO3OODCYmROnhVMD/pcKxPJTjNQ7Zrhxlpo5viuWjfIZzlsXVawBuKFBFAEcMJtXJSWhy38Z/tUiHi5E4VyiryFSHMH02dHmhUhQKBgASuTH3YbaOzUiDP7fvAb6p13pqukVxFMTOm/JsqI2daOmciIH7PQ2l5BwbRfH2MwJq10BSxQ+m2cM1Laho6gnBcGAkl4ZTMUvUYSLlWWSPj1oOyqP7kgLjpiJD8AwlnPSRwR7TcB+LYvDilv7b8tl0GsQejhh5/J70IysNhiA0dAoGBAJ/stJyqfwjicapAhsWCQnKa8AiD8vxoBQNeKgcE33G7JGJu65beFUN0YyscNsvdGLU3ln+iQ760O6fpsB+nNQgudHVx30s8USQkU6RqtIEMPM8ziL67DfpJhJzNOIkB5P/k8Ng2BafnigPTczxSDk1hK85CSNEyoyrz7Xa1Q9g0-----END RSA PRIVATE KEY-----",\n    "s_sdk_huawei_public_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhkWqHmAEgXaeNV/kSxT6JHMwAXLy9+NTtCyMKQwXgBH9Rv5eCR6Z1XmcO0yMj0r8takgGG0h7s4qh3TpIs0ajRteKFa66ywS1/1ASOVpI9rwkNgQvzduFAXUs1tSzc+GG+FR8LJR+i0MSHm+weHJJOUzLnWl9PFUVM1Mo2AOhZYrd6edy6KMy9TcQgaUfuBtv85/MentrtrrlK1z9VeHJSs3kSLOu985S5tfa2YEk/7r1ijVRVJDj3DxlKm3kh6XPV5ti5HDhhz7xbOkd1vvQyJ5XEc657jkN7spPirO5NELPcOjQjgMeUQOLhtWiF4Uo6lRKkwNB7Jq1kINnzZgrwIDAQAB",\n    "s_sdk_huawei_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/huawei/v1",\n    "s_sdk_huawei_version_code": "3",\n    "s_sdk_huawei_version_name": "1.0.0",\n    "s_sdk_huawei_video_adunit": null,\n    "s_sdk_iqiyi_gameres_url": null,\n    "s_sdk_jkplay_banner_id": "638905214",\n    "s_sdk_jkplay_game_key": "",\n    "s_sdk_jkplay_interstitial_id": "983416250",\n    "s_sdk_jkplay_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/jkplay/v1",\n    "s_sdk_jkplay_video_id": "531084972",\n    "s_sdk_jump_game_statis_game_indexes": "",\n    "s_sdk_kaixin_gameres_url": null,\n    "s_sdk_kaixin_interstitial_id": "",\n    "s_sdk_kaixin_share_title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01",\n    "s_sdk_kaixin_video_id": "10000142",\n    "s_sdk_kuaishou_appid": "ks657525547402329448",\n    "s_sdk_kuaishou_inter_adunit": "0",\n    "s_sdk_kuaishou_version_name": "1.0.0",\n    "s_sdk_kuaishou_video_adunit": "2300000662_01",\n    "s_sdk_lan_debug_address": "",\n    "s_sdk_megadata_close_table_type_ids": "",\n    "s_sdk_megadata_game_id": "52",\n    "s_sdk_megadata_point_event_open_category_ids": "0;1;2;3;4;5;6;7;8;9;10",\n    "s_sdk_megadata_server_jump_game_type_id": "jumpabtest",\n    "s_sdk_megadata_server_type_id": "52",\n    "s_sdk_megadata_test_url": "https://megadatav7.ultralisk.cn/batchtestmodedataupload",\n    "s_sdk_megadata_url": "https://megadata.ultralisk.cn/batchuploaddata",\n    "s_sdk_meizu_gameres_url": "",\n    "s_sdk_meizuqg_banner_id": "ybcVfz9S",\n    "s_sdk_meizuqg_inter_id": "9tDtGWHu",\n    "s_sdk_meizuqg_package_name": "s_sdk_licence_info",\n    "s_sdk_meizuqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/meizuqg/v1",\n    "s_sdk_meizuqg_version_code": "9",\n    "s_sdk_meizuqg_version_name": "1.7.0",\n    "s_sdk_meizuqg_video_id": "sjtWf7Qs",\n    "s_sdk_mgc_bannerId": null,\n    "s_sdk_mgc_gameres_url": null,\n    "s_sdk_mgc_interId": null,\n    "s_sdk_mgc_videoId": null,\n    "s_sdk_moli_gameres_url": null,\n    "s_sdk_moli_scene_id": "yeluoli001",\n    "s_sdk_oppoqg_app_key": "7QT1l65ujPwc048c8ws4kkO80",\n    "s_sdk_oppoqg_appid": "30093475",\n    "s_sdk_oppoqg_appsecret": "B7Be6f05c96f7B76bA89696D955aDea0",\n    "s_sdk_oppoqg_banner_box_id": "218392",\n    "s_sdk_oppoqg_banner_id": "72063",\n    "s_sdk_oppoqg_inter_box_id": "218385",\n    "s_sdk_oppoqg_interstitial_id": "72064",\n    "s_sdk_oppoqg_native_ids": {\n        "1": "137660",\n        "2": "92170",\n        "3": "137660"\n    },\n    "s_sdk_oppoqg_package_name": "cn.ultralisk.game56.kyx.nearme.gamecenter",\n    "s_sdk_oppoqg_pre_order_url": "https://jits.open.oppomobile.com/jitsopen/api/pay/v1.0/preOrder",\n    "s_sdk_oppoqg_private_key": "-----BEGIN RSA PRIVATE KEY-----MIICXgIBAAKBgQC46Giy1S4Zuys/c3QO6VZVWAOo1tussbIpqI0M7edU9OC732leFej2DmG3O9XRh9NlYjoAq4hyt7DxiZ6MyN8IdStZn4b0/e/CZKQA5WaCI5h71hUTwCJTzHZHvO+woDWaE2mOSsBfjAdwTsHUr32eCPzju/1zatys02W7ai4v+wIDAQABAoGAGjbAmRHF3ln9kJpCitajqae3pRkIvZvXgTZnAL09fXrV3WyX2IHMrA1v5vUxo+nYm1foly26Q2EtUaDL/HOBwshbwEtR5TR0g+kZBpA+S4wt/ujZPlALmZiGuQjjqwWFo9OfeskXer7vA5UWYemDMvy7XQ2TWoLNOzI+LaVvEPECQQDpEgY7XmrKeq8qkUFPsDjcEa7SZ2eEEOps0NKmewGvAaiavm7+8yCdS/ZPS7ZD6590TanFWy3gJtugw/vPa2tpAkEAyxlj8u+EYKchPBYehuRjm4W5SlJNAGrABqrJjM50jQ4aRVr1LbS6R0S77kTaZLTV/w8eYk1LS9cTCaY+JB+HwwJBAIXrlmscmG4ZynbCGe4JCtLg0jwRsHhBJAI8hx2jxlbhtBieXbbeypm3YSM1FNi4FdpFGczN1HFcwowAsLsBNSkCQQC9YgywQKYI1m+ILvwCPr+fCt/PrNS+mcw7q0/Lq8xEp6zZlUpgd1DoGfC/6pZXJ8UQVFG5ymd27bOD4O+7EWevAkEAzYHfclV/kP3V1aCR0KoXBHA4WIHKa+JaVuFMIDZqd/SsfsoKDn+Stsajl/e8LAwt9XXctYWNvGsVfCSfZ5Y3tw==-----END RSA PRIVATE KEY-----",\n    "s_sdk_oppoqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/oppoqg/v1",\n    "s_sdk_oppoqg_version_code": "7",\n    "s_sdk_oppoqg_version_name": "7",\n    "s_sdk_oppoqg_video_id": "158520",\n    "s_sdk_qihoo_banner_id": "",\n    "s_sdk_qihoo_gameres_url": null,\n    "s_sdk_qihoo_video_id": "",\n    "s_sdk_qq_app_id": "1109629816",\n    "s_sdk_qq_appbox_id": "05d254a611f245316c8e0293024e1c48",\n    "s_sdk_qq_banner_id": "739e17c6ee9277fd2735fbcca9d6e759",\n    "s_sdk_qq_block_id": "4ee2e214977a340af770969b9dab10fd",\n    "s_sdk_qq_change_log": "",\n    "s_sdk_qq_inter_id": "3e60210a5adc4c435cf4c1bafe570336",\n    "s_sdk_qq_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game56/qq/v1",\n    "s_sdk_qq_sub_context": "",\n    "s_sdk_qq_version_name": "  1.6.1",\n    "s_sdk_qq_video_id": "d4f1045a8432ee8dd00eecf695bc84af",\n    "s_sdk_refresh_resource_type": "dir",\n    "s_sdk_sdkdemo_gameres_url": "",\n    "s_sdk_uc_banner_id": "150276442",\n    "s_sdk_uc_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game56/uc/v1",\n    "s_sdk_uc_video_id": "552015513",\n    "s_sdk_user_data_get_url": "https://h5gameserver.ultralisk.cn/getuserdata",\n    "s_sdk_user_data_save_url": "https://h5gameserver.ultralisk.cn/savealluserdata",\n    "s_sdk_version": "8acb1a290",\n    "s_sdk_vivo_app_id": "100000990",\n    "s_sdk_vivo_app_secret": "dd0776125d13f5abb9beaaa774207cf4",\n    "s_sdk_vivo_banner_box_id": "0",\n    "s_sdk_vivo_banner_id": "4c1170fc1cfd420aae751e6dc97fa50f",\n    "s_sdk_vivo_custom_adv_minSize": "720*630",\n    "s_sdk_vivo_custom_id": "0",\n    "s_sdk_vivo_inter_box_id": "0",\n    "s_sdk_vivo_interstitial_id": "5b8cc807d93541e4975cb68b89d53c5f",\n    "s_sdk_vivo_native_ids": {\n        "1": "363e2098cca2481d85d165a1260ebdb4",\n        "2": "80a294b29eab4959adc5f095106cd037",\n        "3": "363e2098cca2481d85d165a1260ebdb4"\n    },\n    "s_sdk_vivo_package_name": "cn.ultralisk.game56.vivo",\n    "s_sdk_vivo_qg_url": "https://pay.vivo.com.cn/vivopay/order/request",\n    "s_sdk_vivo_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/vivo/v1",\n    "s_sdk_vivo_version_code": "498",\n    "s_sdk_vivo_version_name": "1.7.67",\n    "s_sdk_vivo_video_id": "1d4615666c0d48f0b2ffce92f0b2c360",\n    "s_sdk_webreview_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/md5/01b4a69e918c7a4b56/",\n    "s_sdk_webreview_test_gameres_url": "0",\n    "s_sdk_weixin_appid": "wx674c94b5a44a75de",\n    "s_sdk_weixin_appsecret": "0544a630b0709ccef000fadd06eeaaf8",\n    "s_sdk_weixin_banner_adunit_ids": {\n        "2": "adunit-ca3c5e24aa0b0550"\n    },\n    "s_sdk_weixin_change_log": "\u6b63\u5f0f\u5305",\n    "s_sdk_weixin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/weixin_icon/56.png",\n    "s_sdk_weixin_grid_adunit_id": "0",\n    "s_sdk_weixin_interstitial_ids": {\n        "1": "adunit-4b67037ff587c207"\n    },\n    "s_sdk_weixin_login_url": "https://sdkserver.ultralisk.cn/wxuserlogin",\n    "s_sdk_weixin_mch_id": "0",\n    "s_sdk_weixin_offer_id": "1450022447",\n    "s_sdk_weixin_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game56/weixin/v1",\n    "s_sdk_weixin_sub_context": "0",\n    "s_sdk_weixin_subscribe_url": "https://subscrible.ultralisk.cn/wxsubscrible/postwxsubscribleusermsg",\n    "s_sdk_weixin_version_name": "1.2.21",\n    "s_sdk_weixin_video_adunit_ids": {\n        "4": "adunit-a028c754067b671d",\n        "401": "adunit-82338934784624ec",\n        "402": "adunit-1126c52f754adc6c",\n        "403": "adunit-70a355ddef44f552"\n    },\n    "s_sdk_xiaomi_gameres_url": null,\n    "s_sdk_xiaomiqg_banner_id": "",\n    "s_sdk_xiaomiqg_insert_id": "12345",\n    "s_sdk_xiaomiqg_package_name": "com.ultralisk.game56.mi",\n    "s_sdk_xiaomiqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game56/xiaomiqg/v1",\n    "s_sdk_xiaomiqg_version_code": "1",\n    "s_sdk_xiaomiqg_version_name": "1.0.0",\n    "s_sdk_xiaomiqg_video_id": "12345",\n    "srcRootPath": "assets/scripts/",\n    "t_customer_service_info": [\n        "kefu@ultralisk.cn"\n    ],\n    "t_sdk_baidu_jump_games": [\n        {\n            "id": "gVPpWFaCDbKoC2VKawlPsMCjWMuoYObk",\n            "index": "70",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/70.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/70.png"\n            ]\n        },\n        {\n            "id": "vhAHSZ2oCteEEtf8C6HiQeUZgWTj5F1M",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/75.png"\n            ]\n        },\n        {\n            "id": "3B10fP8fRsHpjlOprdW89c2y8U313ps9",\n            "index": "73",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/73.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/73.png"\n            ]\n        },\n        {\n            "id": "cA5GKqcGBGEgXmSXpNjxjOqDt0IB9boY",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/74.png"\n            ]\n        },\n        {\n            "id": "EkVaIkAWsaHWWD0Rks1uvEHrYv1OClFq",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/80.png"\n            ]\n        },\n        {\n            "id": "WMIhnYCNyOcWP4TISwlEbZ04RtYwviL1",\n            "index": "79",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/79.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/79.png"\n            ]\n        },\n        {\n            "id": "xV0P9UXGP2APaDTi7CXHFuIiKYmtkPMg",\n            "index": "78",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/78.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/78.png"\n            ]\n        },\n        {\n            "id": "2w4vuOxXbFGA1GqVYBI41kG1Atd3FVbw",\n            "index": "76",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/76.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/76.png"\n            ]\n        },\n        {\n            "id": "9YTDrCKInzLR01Mh2qLyp5GT5gkPUlCz",\n            "index": "69",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/69.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/69.png"\n            ]\n        },\n        {\n            "id": "G3Co4nKxv2rvToCBdKuaBLcmRaFqPSe8",\n            "index": "55",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/55.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/55.png"\n            ]\n        },\n        {\n            "id": "lCrh6dpPbTAFPMjMfhEvU0Ex9kn6KGG9",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/55v2.png"\n            ]\n        },\n        {\n            "id": "AF9HIGa1PMVmyLMXbVYqYgNwFmYPtrRy",\n            "index": "85",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/85.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/85.png"\n            ]\n        },\n        {\n            "id": "jFG1LSc5YxBcFbhHikNYqYOqax4mBS8E",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/82.png"\n            ]\n        }\n    ],\n    "t_sdk_baidu_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        },\n        "3": {\n            "payCode": 3,\n            "price": "100",\n            "proName": "\u65b0\u624b\u793c\u5305"\n        }\n    },\n    "t_sdk_baidu_share_list": [\n        {\n            \n        }\n    ],\n    "t_sdk_common_event_ids": {\n        "add_subscrible": "102",\n        "click_more_game_icon_list": "106",\n        "click_more_game_icon_reward": "105",\n        "click_more_game_icon_single": "104",\n        "click_share": "101",\n        "click_subscrible": "103",\n        "open_cdk": "107",\n        "open_share": "100"\n    },\n    "t_sdk_common_modify_tag_afterBuild": [\n        \n    ],\n    "t_sdk_common_modify_tag_beforeBuild": [\n        \n    ],\n    "t_sdk_compress_json_includes": [\n        \n    ],\n    "t_sdk_compress_json_includes_rem": "",\n    "t_sdk_compress_res_config": [\n        {\n            "cmds": "jpeg-recompress --strip -t 0.4 --min 80 | guetzil --quality 85",\n            "rep": ".*//.jpg"\n        },\n        {\n            "cmds": "autopng --quality 40-80 | optipng -strip all -o7 | zopflipng -y --lossy_8bit --lossy_transparent",\n            "rep": ".*//.png"\n        }\n    ],\n    "t_sdk_cop_default_cop": {\n        "ad_interstitial_radios": "30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30;30",\n        "ad_mode": "3",\n        "ad_video_switchs": "100;100;100;100;100;100;30;100;30;100;100;30;100;100;100;100;30",\n        "cloth_function": "15;15;1"\n    },\n    "t_sdk_cop_simulate_city_data": {\n        "0": "\u672a\u77e5\u57ce\u5e02",\n        "1001": "\u6d77\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1002": "\u897f\u5b81",\n        "1003": "\u6d77\u4e1c",\n        "1004": "\u9ec4\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1005": "\u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1006": "\u6d77\u5317\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1007": "\u679c\u6d1b\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1008": "\u7389\u6811\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "101": "\u5317\u4eac",\n        "1101": "\u4e34\u590f\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "1102": "\u7518\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1103": "\u767d\u94f6",\n        "1104": "\u9647\u5357",\n        "1105": "\u5b9a\u897f",\n        "1106": "\u5e73\u51c9",\n        "1107": "\u91d1\u660c",\n        "1108": "\u9152\u6cc9",\n        "1109": "\u5f20\u6396",\n        "1110": "\u5e86\u9633",\n        "1111": "\u5170\u5dde",\n        "1112": "\u6b66\u5a01",\n        "1113": "\u5609\u5cea\u5173",\n        "1114": "\u5929\u6c34",\n        "1201": "\u94f6\u5ddd",\n        "1202": "\u56fa\u539f",\n        "1203": "\u5434\u5fe0",\n        "1204": "\u4e2d\u536b",\n        "1205": "\u77f3\u5634\u5c71",\n        "1301": "\u5546\u6d1b",\n        "1302": "\u5b89\u5eb7",\n        "1303": "\u6986\u6797",\n        "1304": "\u94dc\u5ddd",\n        "1305": "\u54b8\u9633",\n        "1306": "\u897f\u5b89",\n        "1307": "\u6e2d\u5357",\n        "1308": "\u6c49\u4e2d",\n        "1309": "\u5b9d\u9e21",\n        "1310": "\u5ef6\u5b89",\n        "1401": "\u957f\u6625",\n        "1402": "\u767d\u57ce",\n        "1403": "\u677e\u539f",\n        "1404": "\u767d\u5c71",\n        "1405": "\u5409\u6797",\n        "1406": "\u5ef6\u8fb9\u671d\u9c9c\u65cf\u81ea\u6cbb\u5dde",\n        "1407": "\u56db\u5e73",\n        "1408": "\u8fbd\u6e90",\n        "1409": "\u901a\u5316",\n        "1501": "\u94dc\u9675",\n        "1502": "\u4eb3\u5dde",\n        "1503": "\u9ec4\u5c71",\n        "1504": "\u6c60\u5dde",\n        "1505": "\u5408\u80a5",\n        "1506": "\u6dee\u5317",\n        "1507": "\u6ec1\u5dde",\n        "1508": "\u5bbf\u5dde",\n        "1509": "\u6dee\u5357",\n        "1510": "\u868c\u57e0",\n        "1511": "\u516d\u5b89",\n        "1512": "\u961c\u9633",\n        "1513": "\u829c\u6e56",\n        "1514": "\u5ba3\u57ce",\n        "1515": "\u5b89\u5e86",\n        "1516": "\u9a6c\u978d\u5c71",\n        "1601": "\u6069\u65bd\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1602": "\u4ed9\u6843",\n        "1603": "\u6b66\u6c49",\n        "1604": "\u5b5d\u611f",\n        "1605": "\u54b8\u5b81",\n        "1606": "\u5341\u5830",\n        "1607": "\u5929\u95e8",\n        "1608": "\u9ec4\u5188",\n        "1609": "\u5b9c\u660c",\n        "1610": "\u8944\u9633",\n        "1611": "\u9ec4\u77f3",\n        "1612": "\u8346\u95e8",\n        "1613": "\u968f\u5dde",\n        "1614": "\u8346\u5dde",\n        "1615": "\u9102\u5dde",\n        "1616": "\u795e\u519c\u67b6\u6797\u533a",\n        "1617": "\u6f5c\u6c5f",\n        "1701": "\u682a\u6d32",\n        "1702": "\u90b5\u9633",\n        "1703": "\u5cb3\u9633",\n        "1704": "\u5f20\u5bb6\u754c",\n        "1705": "\u6000\u5316",\n        "1706": "\u8861\u9633",\n        "1707": "\u957f\u6c99",\n        "1708": "\u5e38\u5fb7",\n        "1709": "\u90f4\u5dde",\n        "1710": "\u6c38\u5dde",\n        "1711": "\u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1712": "\u6e58\u6f6d",\n        "1713": "\u76ca\u9633",\n        "1714": "\u5a04\u5e95",\n        "1801": "\u5b89\u987a",\n        "1802": "\u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1803": "\u94dc\u4ec1",\n        "1804": "\u516d\u76d8\u6c34",\n        "1805": "\u8d35\u9633",\n        "1806": "\u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf\u81ea\u6cbb\u5dde",\n        "1807": "\u6bd5\u8282",\n        "1808": "\u9075\u4e49",\n        "1809": "\u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1901": "\u592a\u539f",\n        "1902": "\u957f\u6cbb",\n        "1903": "\u8fd0\u57ce",\n        "1904": "\u664b\u4e2d",\n        "1905": "\u5ffb\u5dde",\n        "1906": "\u6714\u5dde",\n        "1907": "\u664b\u57ce",\n        "1908": "\u9633\u6cc9",\n        "1909": "\u5927\u540c",\n        "1910": "\u4e34\u6c7e",\n        "1911": "\u5415\u6881",\n        "2001": "\u6765\u5bbe",\n        "2002": "\u67f3\u5dde",\n        "2003": "\u5d07\u5de6",\n        "2004": "\u767e\u8272",\n        "2005": "\u6cb3\u6c60",\n        "2006": "\u9632\u57ce\u6e2f",\n        "2007": "\u8d3a\u5dde",\n        "2008": "\u8d35\u6e2f",\n        "2009": "\u5317\u6d77",\n        "201": "\u4e0a\u6d77",\n        "2010": "\u5357\u5b81",\n        "2011": "\u6842\u6797",\n        "2012": "\u7389\u6797",\n        "2013": "\u94a6\u5dde",\n        "2014": "\u68a7\u5dde",\n        "2101": "\u51c9\u5c71\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "2102": "\u6500\u679d\u82b1",\n        "2103": "\u4e50\u5c71",\n        "2104": "\u9042\u5b81",\n        "2105": "\u8d44\u9633",\n        "2106": "\u7ef5\u9633",\n        "2107": "\u81ea\u8d21",\n        "2108": "\u5fb7\u9633",\n        "2109": "\u96c5\u5b89",\n        "2110": "\u8fbe\u5dde",\n        "2111": "\u5e7f\u5143",\n        "2112": "\u5e7f\u5b89",\n        "2113": "\u963f\u575d\u85cf\u65cf\u7f8c\u65cf\u81ea\u6cbb\u5dde",\n        "2114": "\u7518\u5b5c\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "2115": "\u6210\u90fd",\n        "2116": "\u5357\u5145",\n        "2117": "\u6cf8\u5dde",\n        "2118": "\u5185\u6c5f",\n        "2119": "\u5b9c\u5bbe",\n        "2120": "\u5df4\u4e2d",\n        "2121": "\u7709\u5c71",\n        "2201": "\u90d1\u5dde",\n        "2202": "\u4e09\u95e8\u5ce1",\n        "2203": "\u6d1b\u9633",\n        "2204": "\u5f00\u5c01",\n        "2205": "\u4fe1\u9633",\n        "2206": "\u7126\u4f5c",\n        "2207": "\u8bb8\u660c",\n        "2208": "\u6fee\u9633",\n        "2209": "\u6d4e\u6e90",\n        "2210": "\u9e64\u58c1",\n        "2211": "\u5b89\u9633",\n        "2212": "\u9a7b\u9a6c\u5e97",\n        "2213": "\u65b0\u4e61",\n        "2214": "\u5357\u9633",\n        "2215": "\u6f2f\u6cb3",\n        "2216": "\u5e73\u9876\u5c71",\n        "2217": "\u5546\u4e18",\n        "2218": "\u5468\u53e3",\n        "2301": "\u77f3\u5bb6\u5e84",\n        "2302": "\u4fdd\u5b9a",\n        "2303": "\u6ca7\u5dde",\n        "2304": "\u8861\u6c34",\n        "2305": "\u5510\u5c71",\n        "2306": "\u90af\u90f8",\n        "2307": "\u5eca\u574a",\n        "2308": "\u79e6\u7687\u5c9b",\n        "2309": "\u90a2\u53f0",\n        "2310": "\u5f20\u5bb6\u53e3",\n        "2311": "\u627f\u5fb7",\n        "2401": "\u798f\u5dde",\n        "2402": "\u53a6\u95e8",\n        "2403": "\u5b81\u5fb7",\n        "2404": "\u8386\u7530",\n        "2405": "\u9f99\u5ca9",\n        "2406": "\u4e09\u660e",\n        "2407": "\u5357\u5e73",\n        "2408": "\u6cc9\u5dde",\n        "2409": "\u6f33\u5dde",\n        "2501": "\u5357\u660c",\n        "2502": "\u4e0a\u9976",\n        "2503": "\u8d63\u5dde",\n        "2504": "\u65b0\u4f59",\n        "2505": "\u9e70\u6f6d",\n        "2506": "\u629a\u5dde",\n        "2507": "\u840d\u4e61",\n        "2508": "\u5b9c\u6625",\n        "2509": "\u666f\u5fb7\u9547",\n        "2510": "\u5409\u5b89",\n        "2511": "\u4e5d\u6c5f",\n        "2601": "\u73e0\u6d77",\n        "2602": "\u4e1c\u839e",\n        "2603": "\u6c5f\u95e8",\n        "2604": "\u9633\u6c5f",\n        "2605": "\u60e0\u5dde",\n        "2606": "\u6c55\u5c3e",\n        "2607": "\u6885\u5dde",\n        "2608": "\u6e05\u8fdc",\n        "2609": "\u6e5b\u6c5f",\n        "2610": "\u63ed\u9633",\n        "2611": "\u5e7f\u5dde",\n        "2612": "\u4e91\u6d6e",\n        "2613": "\u6f6e\u5dde",\n        "2614": "\u6c55\u5934",\n        "2615": "\u97f6\u5173",\n        "2616": "\u6df1\u5733",\n        "2617": "\u4f5b\u5c71",\n        "2618": "\u4e2d\u5c71",\n        "2619": "\u8087\u5e86",\n        "2620": "\u8302\u540d",\n        "2621": "\u6cb3\u6e90",\n        "2701": "\u547c\u548c\u6d69\u7279",\n        "2702": "\u9521\u6797\u90ed\u52d2\u76df",\n        "2703": "\u4e4c\u5170\u5bdf\u5e03",\n        "2704": "\u901a\u8fbd",\n        "2705": "\u5305\u5934",\n        "2706": "\u963f\u62c9\u5584\u76df",\n        "2707": "\u5df4\u5f66\u6dd6\u5c14",\n        "2708": "\u5174\u5b89\u76df",\n        "2709": "\u9102\u5c14\u591a\u65af",\n        "2710": "\u4e4c\u6d77",\n        "2711": "\u547c\u4f26\u8d1d\u5c14",\n        "2712": "\u8d64\u5cf0",\n        "2801": "\u9e64\u5c97",\n        "2802": "\u9e21\u897f",\n        "2803": "\u54c8\u5c14\u6ee8",\n        "2804": "\u9ed1\u6cb3",\n        "2805": "\u4e03\u53f0\u6cb3",\n        "2806": "\u4f0a\u6625",\n        "2807": "\u5927\u5174\u5b89\u5cad\u5730\u533a",\n        "2808": "\u7261\u4e39\u6c5f",\n        "2809": "\u7ee5\u5316",\n        "2810": "\u9f50\u9f50\u54c8\u5c14",\n        "2811": "\u53cc\u9e2d\u5c71",\n        "2812": "\u5927\u5e86",\n        "2813": "\u4f73\u6728\u65af",\n        "2901": "\u846b\u82a6\u5c9b",\n        "2902": "\u8425\u53e3",\n        "2903": "\u4e39\u4e1c",\n        "2904": "\u6c88\u9633",\n        "2905": "\u629a\u987a",\n        "2906": "\u8fbd\u9633",\n        "2907": "\u5927\u8fde",\n        "2908": "\u978d\u5c71",\n        "2909": "\u76d8\u9526",\n        "2910": "\u961c\u65b0",\n        "2911": "\u672c\u6eaa",\n        "2912": "\u9526\u5dde",\n        "2913": "\u94c1\u5cad",\n        "2914": "\u671d\u9633",\n        "3001": "\u6dc4\u535a",\n        "3002": "\u4e34\u6c82",\n        "3003": "\u5a01\u6d77",\n        "3004": "\u83b1\u829c",\n        "3005": "\u65e5\u7167",\n        "3006": "\u6d4e\u5357",\n        "3007": "\u6cf0\u5b89",\n        "3008": "\u70df\u53f0",\n        "3009": "\u804a\u57ce",\n        "301": "\u5929\u6d25",\n        "3010": "\u4e1c\u8425",\n        "3011": "\u83cf\u6cfd",\n        "3012": "\u6ee8\u5dde",\n        "3013": "\u6f4d\u574a",\n        "3014": "\u5fb7\u5dde",\n        "3015": "\u9752\u5c9b",\n        "3016": "\u6d4e\u5b81",\n        "3017": "\u67a3\u5e84",\n        "3101": "\u5357\u4eac",\n        "3102": "\u5e38\u5dde",\n        "3103": "\u82cf\u5dde",\n        "3104": "\u65e0\u9521",\n        "3105": "\u76d0\u57ce",\n        "3106": "\u9547\u6c5f",\n        "3107": "\u8fde\u4e91\u6e2f",\n        "3108": "\u5bbf\u8fc1",\n        "3109": "\u5357\u901a",\n        "3110": "\u5f90\u5dde",\n        "3111": "\u6dee\u5b89",\n        "3112": "\u626c\u5dde",\n        "3113": "\u6cf0\u5dde",\n        "401": "\u91cd\u5e86",\n        "501": "\u5b81\u6ce2",\n        "502": "\u91d1\u534e",\n        "503": "\u5609\u5174",\n        "504": "\u7ecd\u5174",\n        "505": "\u6e56\u5dde",\n        "506": "\u8862\u5dde",\n        "507": "\u821f\u5c71",\n        "508": "\u676d\u5dde",\n        "509": "\u6e29\u5dde",\n        "510": "\u4e3d\u6c34",\n        "511": "\u53f0\u5dde",\n        "601": "\u510b\u5dde",\n        "602": "\u5b9a\u5b89\u53bf",\n        "603": "\u4e1c\u65b9",\n        "604": "\u4e94\u6307\u5c71",\n        "605": "\u5c6f\u660c\u53bf",\n        "606": "\u743c\u6d77",\n        "607": "\u6f84\u8fc8\u53bf",\n        "608": "\u743c\u4e2d\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "609": "\u4e09\u4e9a",\n        "610": "\u767d\u6c99\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "611": "\u6587\u660c",\n        "612": "\u9675\u6c34\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "613": "\u660c\u6c5f\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "614": "\u4fdd\u4ead\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "615": "\u4e34\u9ad8\u53bf",\n        "616": "\u6d77\u53e3",\n        "617": "\u4e07\u5b81",\n        "618": "\u4e50\u4e1c\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "701": "\u8fea\u5e86\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "702": "\u897f\u53cc\u7248\u7eb3\u50a3\u65cf\u81ea\u6cbb\u5dde",\n        "703": "\u4e34\u6ca7",\n        "704": "\u4fdd\u5c71",\n        "705": "\u7389\u6eaa",\n        "706": "\u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf\u81ea\u6cbb\u5dde",\n        "707": "\u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "708": "\u5927\u7406\u767d\u65cf\u81ea\u6cbb\u5dde",\n        "709": "\u4e3d\u6c5f",\n        "710": "\u6012\u6c5f\u5088\u50f3\u65cf\u81ea\u6cbb\u5dde",\n        "711": "\u666e\u6d31",\n        "712": "\u695a\u96c4\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "713": "\u6587\u5c71\u58ee\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "714": "\u6606\u660e",\n        "715": "\u66f2\u9756",\n        "716": "\u662d\u901a",\n        "801": "\u62c9\u8428",\n        "802": "\u660c\u90fd",\n        "803": "\u5c71\u5357",\n        "804": "\u963f\u91cc\u5730\u533a",\n        "805": "\u6797\u829d",\n        "806": "\u65e5\u5580\u5219",\n        "807": "\u90a3\u66f2\u5730\u533a",\n        "901": "\u5580\u4ec0\u5730\u533a",\n        "902": "\u963f\u514b\u82cf\u5730\u533a",\n        "903": "\u548c\u7530\u5730\u533a",\n        "904": "\u54c8\u5bc6",\n        "905": "\u77f3\u6cb3\u5b50",\n        "906": "\u5410\u9c81\u756a",\n        "907": "\u535a\u5c14\u5854\u62c9\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "908": "\u5df4\u97f3\u90ed\u695e\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "909": "\u660c\u5409\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "910": "\u5854\u57ce\u5730\u533a",\n        "911": "\u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c\u81ea\u6cbb\u5dde",\n        "912": "\u963f\u52d2\u6cf0\u5730\u533a",\n        "913": "\u4e4c\u9c81\u6728\u9f50",\n        "914": "\u514b\u62c9\u739b\u4f9d",\n        "915": "\u4f0a\u7281\u54c8\u8428\u514b\u81ea\u6cbb\u5dde"\n    },\n    "t_sdk_hago_share_list": null,\n    "t_sdk_headline_jump_games": [\n        {\n            "id": "ttce78b8c5514341ba",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/83.png"\n            ]\n        },\n        {\n            "id": "tt0ed0786d91eb92cc",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/86.png"\n            ]\n        },\n        {\n            "id": "tt347f42c2ab55ec48",\n            "index": "70",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/70.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/70.png"\n            ]\n        },\n        {\n            "id": "tt3321459cac1b2a8e",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/55v2.png"\n            ]\n        },\n        {\n            "id": "tt4e2a3897d110084b",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/82.png"\n            ]\n        },\n        {\n            "id": "tt286b5ed6b74165b2",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/80.png"\n            ]\n        },\n        {\n            "id": "ttbeffc84221d594a2",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/75.png"\n            ]\n        },\n        {\n            "id": "tt2c515aecb37b1973",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/74.png"\n            ]\n        },\n        {\n            "id": "tt78120eafe73835d4",\n            "index": "79",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/79.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/79.png"\n            ]\n        },\n        {\n            "id": "ttb51ec3a32a3476ce",\n            "index": "69",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/69.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/69.png"\n            ]\n        }\n    ],\n    "t_sdk_headline_jump_games_video_type": [\n        \n    ],\n    "t_sdk_headline_pay_code": {\n        \n    },\n    "t_sdk_headline_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share1.jpg",\n            "templateId": "ia9dfhe1eiodr2f3n5",\n            "title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share2.jpg",\n            "templateId": "h3fjll49d1022o97ag",\n            "title": "\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share3.jpg",\n            "templateId": "2lt0bm1g1fvtagqajd",\n            "title": "\u8fd9\u4e24\u5957\u670d\u88c5\uff0c\u8be5\u6295\u7968\u7ed9\u8c01\uff1f"\n        }\n    ],\n    "t_sdk_headline_share_recorder_video_desc": [\n        [\n            "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u54c7\uff0c\u8fd9\u4e9b\u8863\u670d\u4e5f\u592a\u6f02\u4eae\u4e86\u5427\uff0c\u597d\u591a\u79cd\u98ce\u683c\u5440~"\n        ],\n        [\n            "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u6709\u4eba\u4e00\u8d77\u73a9\u670d\u88c5\u7ade\u731c\u5417\uff1f\u6211\u8fde\u7eed\u731c\u5bf9\u4e86\u4e94\u4e2a~"\n        ],\n        [\n            "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u518d\u73a9\u4e00\u4e2a\u5c0f\u65f6\uff0c\u4eca\u5929\u6211\u8981\u628a\u7f57\u4e3d\u7684\u597d\u611f\u5ea6\u5237\u6ee1\uff01"\n        ]\n    ],\n    "t_sdk_headline_share_video_cuttemplateid": {\n        \n    },\n    "t_sdk_headline_subscribe_templete_ids": {\n        \n    },\n    "t_sdk_headline_tt_navigate_to_mini_game_app_id_list": [\n        "ttce78b8c5514341ba",\n        "tt0ed0786d91eb92cc",\n        "tt347f42c2ab55ec48",\n        "tt3321459cac1b2a8e",\n        "tt4e2a3897d110084b",\n        "tt286b5ed6b74165b2",\n        "ttbeffc84221d594a2",\n        "tt2c515aecb37b1973",\n        "tt78120eafe73835d4",\n        "ttb51ec3a32a3476ce"\n    ],\n    "t_sdk_huawei_adv_tag_2_native_index": null,\n    "t_sdk_huawei_native_index_2_native_id": null,\n    "t_sdk_huawei_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        },\n        "3": {\n            "payCode": 3,\n            "price": "100",\n            "proName": "\u65b0\u624b\u793c\u5305"\n        }\n    },\n    "t_sdk_kaixin_share_list": [\n        {\n            \n        }\n    ],\n    "t_sdk_oppoqg_adv_tag_2_native_index": {\n        \n    },\n    "t_sdk_oppoqg_jump_games": [\n        {\n            "id": "com.ultralisk.game83.nearme.gamecenter",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/83.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game70.nearme.gamecenter",\n            "index": "70",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/70.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/70.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game86.nearme.gamecenter",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/86.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game75.nearme.gamecenter",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/75.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game74.nearme.gamecenter",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/74.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game80.nearme.gamecenter",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/80.png"\n            ]\n        }\n    ],\n    "t_sdk_oppoqg_native_index_2_native_id": {\n        \n    },\n    "t_sdk_oppoqg_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        },\n        "3": {\n            "payCode": 3,\n            "price": "100",\n            "proName": "\u65b0\u624b\u793c\u5305"\n        }\n    },\n    "t_sdk_oppoqg_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_oppoqg_show_inter_box_adv_tags": [\n        \n    ],\n    "t_sdk_privacyPolicy_dataArray": [\n        {\n            "name": "\u9690\u79c1\u653f\u7b56",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/oppoleishoupolicy.json"\n        }\n    ],\n    "t_sdk_qq_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share1.jpg",\n            "title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share2.jpg",\n            "title": "\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share3.jpg",\n            "title": "\u8fd9\u4e24\u5957\u670d\u88c5\uff0c\u8be5\u6295\u7968\u7ed9\u8c01\uff1f"\n        }\n    ],\n    "t_sdk_record_duration_limit_object": {\n        "*": {\n            "max": 300,\n            "min": 3\n        },\n        "2": {\n            "max": 300,\n            "min": 15\n        }\n    },\n    "t_sdk_refresh_channels": [\n        "huawei",\n        "baishan"\n    ],\n    "t_sdk_trim_adv_err_object": {\n        "*": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u91cd\u65b0\u8bd5\u8bd5\u770b\u5427\uff01",\n        "baidu": {\n            "code||errCode": {\n                "3010003": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "3010005||3010006": "\u6b63\u5728\u4e3a\u60a8\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\uff0c\u4e0d\u8981\u91cd\u590d\u70b9\u51fb\u3002"\n            }\n        },\n        "headline||weixin||qq": {\n            "code||errCode": {\n                "1004": "\u6682\u65f6\u6ca1\u6709\u9002\u5408\u60a8\u89c2\u770b\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01"\n            }\n        },\n        "oppoqg": {\n            "(this.errCode==1001 || this.errCode == 1004)&&errMsg": {\n                "/10001/||/10100/||/10101/||/10403/": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10405/": "\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u592a\u4f4e\uff0c\u4e0d\u80fd\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10406/": "\u9700\u8981\u8fde\u63a5\u5230 Wifi \u7f51\u7edc",\n                "/11002/": "\u8fd9\u4e2a\u5e7f\u544a\u53ea\u80fd\u5728OPPO\u624b\u673a\u4e0a\u64ad\u653e\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684\u673a\u578b\u3002",\n                "/11003/": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u54271\uff01"\n            }\n        },\n        "vivo": {\n            "code||errCode": {\n                "-100||101||500": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "-3||108||30005": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30007": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30010": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u53ef\u80fd\u662f\u662f\u7531\u4e8e\u60a8\u7ecf\u5e38\u5173\u95ed\u5e7f\u544a\u9020\u6210\u7684\uff0c\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\u3002"\n            }\n        }\n    },\n    "t_sdk_uc_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share1.jpg",\n            "title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share2.jpg",\n            "title": "\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share3.jpg",\n            "title": "\u8fd9\u4e24\u5957\u670d\u88c5\uff0c\u8be5\u6295\u7968\u7ed9\u8c01\uff1f"\n        }\n    ],\n    "t_sdk_vivo_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        },\n        "3": {\n            "payCode": 3,\n            "price": "100",\n            "proName": "\u65b0\u624b\u793c\u5305"\n        }\n    },\n    "t_sdk_vivo_share_list": [\n        {\n            \n        }\n    ],\n    "t_sdk_vivo_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_webreview_cdk_goodsid": [\n        {\n            "count": 100,\n            "goodsid": 2\n        }\n    ],\n    "t_sdk_weixin_grid_adunits": {\n        "list": "",\n        "list_roll": "",\n        "single": "",\n        "table": ""\n    },\n    "t_sdk_weixin_jump_games": [\n        {\n            "id": "wxc22ab8a3dd9ba848",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/83.png"\n            ]\n        },\n        {\n            "id": "wx2ec0b7f791ec8c25",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/86.png"\n            ]\n        },\n        {\n            "id": "wxa44fb0b2873dbca0",\n            "index": "70",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/70.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/70.png"\n            ]\n        },\n        {\n            "id": "wx64bd4e57ca56d886",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/55v2.png"\n            ]\n        },\n        {\n            "id": "wxe6ff4d6d0f759a9e",\n            "index": "100",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/100.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/100.png"\n            ]\n        },\n        {\n            "id": "wxe22e720e831505df",\n            "index": "110",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/110.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/110.png"\n            ]\n        },\n        {\n            "id": "wxb46fd918cedeb944",\n            "index": "106",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/106.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/106.png"\n            ]\n        },\n        {\n            "id": "wxb86b60ba6a42fd5a",\n            "index": "112",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/112.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/112.png"\n            ]\n        },\n        {\n            "id": "wx3babf3ce1df56e56",\n            "index": "56v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/56v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/56v2.png"\n            ]\n        },\n        {\n            "id": "wxa0ba65844f626111",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/82.png"\n            ]\n        },\n        {\n            "id": "wx242593952fb2df7a",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/80.png"\n            ]\n        },\n        {\n            "id": "wx7b9b74c53dd576ac",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/74.png"\n            ]\n        },\n        {\n            "id": "wxe96631b5cbe4ffc1",\n            "index": "79",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/79.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/79.png"\n            ]\n        },\n        {\n            "id": "wx4f87cd56ed816382",\n            "index": "55",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/55.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/55.png"\n            ]\n        },\n        {\n            "id": "wx1189f4046873d2d9",\n            "index": "69",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/69.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/69.png"\n            ]\n        },\n        {\n            "id": "wx6e4c7afc700917fc",\n            "index": "78",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/78.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/78.png"\n            ]\n        },\n        {\n            "id": "wx34cddecc3621aa58",\n            "index": "76",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/76.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/76.png"\n            ]\n        },\n        {\n            "id": "wx0fb566f4c045797b",\n            "index": "73",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/73.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/73.png"\n            ]\n        },\n        {\n            "id": "wxa743a1981387bc73",\n            "index": "85",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/85.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/85.png"\n            ]\n        },\n        {\n            "id": "wx43a316abd6205af7",\n            "index": "63",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/63.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/63.png"\n            ]\n        },\n        {\n            "id": "wxeab8875f495561a5",\n            "index": "53",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/53.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/53.png"\n            ]\n        },\n        {\n            "id": "wxc9595ac3ee5ac49f",\n            "index": "105",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/105.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/105.png"\n            ]\n        }\n    ],\n    "t_sdk_weixin_navigate_to_mini_game_app_id_list": [\n        \n    ],\n    "t_sdk_weixin_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        },\n        "3": {\n            "payCode": 3,\n            "price": "100",\n            "proName": "\u65b0\u624b\u793c\u5305"\n        }\n    },\n    "t_sdk_weixin_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share1.jpg",\n            "title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share2.jpg",\n            "title": "\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game56/share3.jpg",\n            "title": "\u8fd9\u4e24\u5957\u670d\u88c5\uff0c\u8be5\u6295\u7968\u7ed9\u8c01\uff1f"\n        }\n    ],\n    "t_sdk_weixin_subscribe_templete_ids": {\n        \n    },\n    "targetCreatorBranch": "v1",\n    "targetCreatorExePath": "creator/CocosCreator.exe",\n    "targetCreatorGitAddr": "ude2/prj.ulcocoscreator2.0.10",\n    "targetProjectBranch": "v1_sdkv6_googleplay_i18n_release",\n    "targetProjectGitAddr": "ude2/prj.game56",\n    "tempCreatorProjectPaths": [\n        [\n            "assets/",\n            "assets/"\n        ],\n        [\n            "declare/",\n            "declare/"\n        ],\n        [\n            "packages/",\n            "packages/"\n        ],\n        [\n            "settings/",\n            "settings/"\n        ],\n        [\n            "jsconfig.json",\n            ""\n        ],\n        [\n            "project.json",\n            ""\n        ],\n        [\n            "tsconfig.json",\n            ""\n        ]\n    ],\n    "tempProjectName": "cc_proj",\n    "autoUploadPack": false,\n    "B_OBFUSCATOR_CCONFIG": false,\n    "B_SHOW_LICENCE_INFO_ON_LOADING": false,\n    "build_cc_web_mobile_module_config": {\n        "embedWebDebugger": false,\n        "title": "\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6"\n    },\n    "i_sdk_licence_info_mode": 0,\n    "s_sdk_cop_channel_id": "169",\n    "s_sdk_cop_version": "6638",\n    "s_sdk_licence_info": "",\n    "t_sdk_increment_fields": [\n        \n    ],\n    "_target_project_branch": "v1_sdkv6_googleplay_i18n_release",\n    "_target_project_log": "2021-07-28 16:22:39 +0800-tangyuanlin-58116fc2",\n    "_target_last_commit_time": 1627460559,\n    "_target_creator_branch": "v1",\n    "_target_creator_log": "2021-11-29 14:23:58 +0800-gengxiaoxiao-bf0819d8",\n    "_target_creator_last_commit_time": 1638167038,\n    "prjVersion": "58116fc2",\n    "rootPath": "D:/ulwork/ulsdk/",\n    "rootSdkPath": "D:/ulwork/ulsdk/prj.sdk.html5/",\n    "gitRepoPath": "D:/ulwork/ulsdk/h5_games_res/",\n    "taskDate": "2021_12_23",\n    "taskTick": "2021_12_23_14_21_07",\n    "taskTickShort": "1223_142107",\n    "taskName": "facebook",\n    "configName": "task_game56_ylljlm_v1",\n    "targetPath": "D:/ulwork/ulsdk/h5_out/56_facebook_1223_142107/",\n    "resCachePath": "D:/ulwork/ulsdk/h5_res_cache/prj.game56/",\n    "packagePath": "D:/ulwork/ulsdk/prj.games.html5.channels.packages/prj.game56/prj.game56_v1_sdkv6_googleplay_i18n_release_facebook_1223_142107/",\n    "buildDisabled": false,\n    "creatorExePath": "D:/ulwork/ude2/prj.ulcocoscreator2.0.10/creator/CocosCreator.exe",\n    "taskJsonPath": "D:/ulwork/ulsdk/prj.games.html5.channels.tasks/task_game56_ylljlm_v1/task.json",\n    "tempProjPath": "D:/ulwork/ulsdk/h5_out/56_facebook_1223_142107/cc_proj/",\n    "moduleList": "common,build_cc_web_mobile,facebook,googleAnalytics",\n    "envCheckResult": [\n        \n    ],\n    "s_sdk_facebook_bannerId": ""\n}'),cc._RF.pop()},{}],en:[function(e,t,o){"use strict";cc._RF.push(t,"f69b57DK3FJ4oJcAaSHbdrV","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={ui:{56:"Attempts left:",77:"No more times, come back tomorrow",54:"Tap to start game",51:"Ranking",48:"Upgrade",43:"You can try it once for free",60:"Free Unlock",61:"Reward of the rank",63:"Collections",64:"Select language",53:"Lucky time",66:"Choose the parts she uses!",67:"Guess again",68:"Reward preview",69:"Whether to see ads for three additional times",80:"Level %d effect:",52:"You don't have this type of item",86:"Double income",84:"Try on",85:"Guess 3 more times",24:"Free upgrade",25:"Growth",26:"Spend coins",27:"It grew %d time +%d",20:"Tips",21:"Options",22:"Free",23:"Upgrade",46:"Free challenge",47:"Lucky time",44:"Change opponent",45:"Launch challenge",42:"Try on",29:"Name",40:"Watch ad to double coins",41:"Save",1:"GET",82:"Error, try again later",3:"Double",2:"Congrats!",5:"Offline time",4:"Double",7:"You found lots of coins when collecting flowers. Congrats!",6:"Watch ad",9:"All ranking",8:"Prize",83:"Extra bonus",81:"%d coins can be produced every %d seconds",39:"Daily Tasks",65:"Randomly get the following item",76:"Clothing quiz collection",75:"To collect, continue to participate in the quiz",38:"Progress",73:"Substitution",72:"Try to win",71:"Play for a while and come back to get your reward",70:"Get extra",59:"Upgrade",79:"Level cap:",78:"Guess right %d time",11:"Prize",10:"Items",13:"Congrats! You got a free attempt in lucky draw",12:"Cancel",15:"Watch ad to get coins equal to 1h production from all fairies: %s",14:"GET",16:"Free upgrade",19:"Congrats! You got new flowers",18:"Successfully grew. Level limit is now raised to %d. Watch ad to upgrade to lv. %d?",31:"Yes",49:"Unlock",37:"Double",36:"Coins produced from all flowers doubles, lasts 15 mins",35:"Cancel",34:"Go to",33:"You have enough coins to buy new clothings",55:"Received",74:"Claimable",32:"My rank",57:"My rank",50:"Name"},daily_task_db_desc:{1:"Challenge in Road of Fairy 3 times",3:"Collect flowers 10 times",2:"Upgrade fairy 1 time"},arena_level_db_stage:{1:"Road of Fairy"},sign_db_title:{1:"Day 1",3:"Day 3",2:"Day 2",5:"Day 5",4:"Day 4",7:"Day 7",6:"Day 6"},alert:{11:"Quit the game now?",12:"Quit game",3:"Reward amount: %s!",5:"Reset",4:"Do you want to reset your dress-up ?",7:"Great",6:"Current combination is the same as the saved image",9:"Saved!",8:"Dress properly first before apply"},shop_template_db_name:{1:"Consume stamina:",2:"Consume stamina:"},item_template_db_desc:{2:"coins",5:"Join attempts",4:"Arena attempts",7:"Max free attempts",6:"Wins"},item_template_db_name:{15:"Free join attempts",17:"Wins",16:"Join attempts",19:"Widget quiz",18:"Max free attempts",1:"Diamonds",3:"Stamina",2:"coins",5:"Dress free trials",4:"Max stamina",9:"Player",8:"Skip ad"},msg:{24:"%d free",25:"Dressing room",20:"Please wait",21:"Not the check-in time",22:"Not owned",23:"Out of rank",1:"Achievement complete",3:"Get items from check-in",2:"Congrats! You got a free attempt in lucky draw",5:"Can't get it now",4:"All collected",7:"Successfully logged in",6:"Impression level up",9:"Purchasing another item, try again later",8:"Failed to login",11:"Not enough [%s]",10:"Claiming processing, try again later",13:"Changing opponent cooling down, please wait",12:"Opponent changed!",15:"Name",14:"Not enough attempts",19:"Can't check in again",18:"You have checked in"},arena_level_db_name:{1:"Common",3:"Advanced",2:"Intermedi.",5:"Sacred",4:"Epic",6:"Supreme"},guide_db_content:{1:"Plant flowers with the fairies!",3:"Let's check the clothing set you got",2:"A fairy sent you some coins! Go and collect them!",5:"Guess correctly and you will get a new clothing!",4:"Saved! You look fresh! Great",6:"Now time for your adventure!"},role_base_db_name:{1:"Lolly",3:"Pheeling",2:"Peacock",5:"Aya",4:"Molly"}},cc._RF.pop()},{}],hi:[function(e,t,o){"use strict";cc._RF.push(t,"9b0037f6D9Gm6xum+YHdy+i","hi"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.hi={ui:{56:"\u0936\u0947\u0937 \u092a\u094d\u0930\u092f\u093e\u0938:",77:"\u0905\u0927\u093f\u0915 \u092c\u093e\u0930 \u0928\u0939\u0940\u0902, \u0915\u0932 \u0935\u093e\u092a\u0938 \u0906 \u091c\u093e\u0913",54:"\u0917\u0947\u092e \u0936\u0941\u0930\u0941 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u091f\u0948\u092a \u0915\u0930\u0947\u0902",51:"\u0930\u0948\u0902\u0915",48:"\u0905\u092a\u0917\u094d\u0930\u0947\u0921",43:"\u0906\u092a \u0907\u0938\u0947 \u090f\u0915 \u092c\u093e\u0930 \u092e\u0941\u092b\u094d\u0924 \u092e\u0947\u0902 \u0906\u091c\u093c\u092e\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902",60:"\u092e\u0941\u095e\u094d\u0924 \u0905\u0928\u0932\u0949\u0915",61:"\u0930\u0948\u0902\u0915 \u0915\u093e \u092a\u0941\u0930\u0938\u094d\u0915\u093e\u0930",63:"\u0938\u0902\u0915\u0932\u0928",64:"\u092d\u093e\u0937\u093e \u091a\u0941\u0928\u0947\u0902",53:"\u0932\u0915\u0940 \u091f\u093e\u0907\u092e",66:"\u0909\u0938\u0915\u0947 \u0926\u094d\u0935\u093e\u0930\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u090f \u091c\u093e\u0928\u0947 \n \u0935\u093e\u0932\u0947 \u092d\u093e\u0917\u094b\u0902 \u0915\u094b \u091a\u0941\u0928\u0947\u0902!",67:"\u092b\u093f\u0930 \u0938\u0947 \u0905\u0928\u0941\u092e\u093e\u0928 \u0932\u0917\u093e\u0913",68:"\u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u092a\u094d\u0930\u093f\u0935\u094d\u092f\u0942",69:"\u091a\u093e\u0939\u0947 \u0924\u0940\u0928 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u0938\u092e\u092f \u0915\u0947 \u0932\u093f\u090f \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0926\u0947\u0916\u0947\u0902",80:"\u0938\u094d\u0924\u0930 %d \u092a\u094d\u0930\u092d\u093e\u0935:",52:"\u0906\u092a\u0915\u0947 \u092a\u093e\u0938 \u0907\u0938 \u0924\u0930\u0939 \u0915\u093e \u0906\u0907\u091f\u092e \u0928\u0939\u0940\u0902 \u0939\u0948",86:"\u0921\u092c\u0932 \u0907\u0928\u0915\u092e",84:"\u0915\u094b\u0936\u093f\u0936",85:"3 \u092c\u093e\u0930 \u0914\u0930 \u0916\u0947\u0932\u0947\u0902",24:"\u092e\u0941\u095e\u094d\u0924 \u0905\u092a\u0917\u094d\u0930\u0947\u0921",25:"\u0935\u0943\u0926\u094d\u0927\u093f",26:"\u0938\u093f\u0915\u094d\u0915\u0947 \u0916\u0930\u094d\u091a\u0947\u0902",27:"\u092f\u0939 %d \u092c\u093e\u0930 \u092c\u095d\u093e +%d",20:"\u091f\u093f\u092a\u094d\u0938",21:"\u0935\u093f\u0915\u0932\u094d\u200d\u092a",22:"\u092e\u0941\u095e\u094d\u0924",23:"\u0905\u092a\u0917\u094d\u0930\u0947\u0921",46:"\u092e\u0941\u095e\u094d\u0924 \u091a\u0941\u0928\u094c\u0924\u0940",47:"\u0932\u0915\u0940 \u091f\u093e\u0907\u092e",44:"\u092a\u094d\u0930\u0924\u093f\u0926\u094d\u0935\u0902\u0926\u094d\u0935\u0940 \u092c\u0926\u0932\u0947\u0902",45:"\u091a\u0941\u0928\u094c\u0924\u0940 \u0926\u0947\u0902",42:"\u0907\u0938 \u092a\u0930 \u0906\u091c\u092e\u093e\u090f\u0902",29:"\u0928\u093e\u092e",40:"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0926\u0947\u0916\u0915\u0930 \u0938\u093f\u0915\u094d\u0915\u0947 \u0921\u092c\u0932 \u0915\u0930\u0947\u0902",41:"\u0938\u0939\u0947\u091c\u0947\u0902",1:"\u092a\u093e\u090f\u0902",82:"\u0924\u094d\u0930\u0941\u091f\u093f, \u092c\u093e\u0926 \u092e\u0947\u0902 \u092a\u0941\u0928\u0903 \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902",3:"\u0926\u0941\u0917\u0941\u0928\u093e",2:"\u092c\u0927\u093e\u0908 \u0939\u094b!",5:"\u0911\u095e\u0932\u093e\u0907\u0928 \u0938\u092e\u092f",4:"\u0926\u0941\u0917\u0941\u0928\u093e",7:"\u092b\u0942\u0932 \u0907\u0915\u091f\u094d\u0920\u093e \u0915\u0930\u0924\u0947 \u0938\u092e\u092f \u0906\u092a\u0915\u094b \n\u0922\u0947\u0930 \u0938\u093e\u0930\u0947 \u0938\u093f\u0915\u094d\u0915\u0947 \u092e\u093f\u0932\u0947\u0964 \u092c\u0927\u093e\u0908 \u0939\u094b!",6:"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0926\u0947\u0916\u0947\u0902",9:"\u0938\u092d\u0940 \u0930\u0948\u0902\u0915\u093f\u0902\u0917",8:"\u092a\u0941\u0930\u0938\u094d\u200d\u0915\u093e\u0930",83:"\u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u0907\u0928\u093e\u092e",81:"%d \u0938\u093f\u0915\u094d\u0915\u0947 \u0939\u0930 %d \u0938\u0947\u0915\u0902\u0921 \n\u092e\u0947\u0902 \u0909\u0924\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u093f\u090f \u091c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902",39:"\u0926\u0948\u0928\u093f\u0915 \u0915\u093e\u0930\u094d\u092f",65:"\u0928\u0940\u091a\u0947 \u0926\u0940 \u0917\u0908 \u0935\u0938\u094d\u0924\u0941\u090f\u0902 \u0930\u0948\u0902\u0921\u092e\u0932\u0940 \u092a\u093e\u090f\u0902",76:"\u0935\u0938\u094d\u0924\u094d\u0930 \u092a\u094d\u0930\u0936\u094d\u0928\u094b\u0924\u094d\u0924\u0930\u0940 \u0938\u0902\u0917\u094d\u0930\u0939",75:"\u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u092a\u094d\u0930\u0936\u094d\u0928\u094b\u0924\u094d\u0924\u0930\u0940 \u092e\u0947\u0902 \u092d\u093e\u0917 \u0932\u0947\u0928\u093e \u091c\u093e\u0930\u0940 \u0930\u0916\u0947\u0902",38:"\u092a\u094d\u0930\u0917\u0924\u093f",73:"\u092a\u094d\u0930\u0924\u093f\u0938\u094d\u0925\u093e\u092a\u0928",72:"\u091c\u0940\u0924\u0928\u0947 \u0915\u0940 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u094b",71:"\u0925\u094b\u0921\u093c\u0940 \u0926\u0947\u0930 \u0915\u0947 \u0932\u093f\u090f \u0916\u0947\u0932\u0947\u0902 \u0914\u0930 \u0905\u092a\u0928\u093e \u0907\u0928\u093e\u092e \u092a\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0935\u093e\u092a\u0938 \u0906\u090f\u0902",70:"\u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902",59:"\u0905\u092a\u0917\u094d\u0930\u0947\u0921 \u0915\u0930\u0947\u0902",79:"\u0938\u094d\u0924\u0930 \u0915\u0940 \u091f\u094b\u092a\u0940:",78:"%d \u092c\u093e\u0930 \u0938\u0939\u0940 \n \u0932\u0917\u0924\u093e \u0939\u0948",11:"\u092a\u0941\u0930\u0938\u094d\u200d\u0915\u093e\u0930",10:"\u0935\u0938\u094d\u0924\u0941\u090f\u0902",13:"\u092c\u0927\u093e\u0908 \u0939\u094b! \u0932\u0915\u0940 \u0921\u094d\u0930\u0949 \u092e\u0947\u0902 \u0906\u092a\u0915\u094b \n\u090f\u0915 \u092e\u0941\u095e\u094d\u0924 \u092a\u094d\u0930\u092f\u093e\u0938 \u092e\u093f\u0932\u093e",12:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0928\u093e",15:"\u0938\u092d\u0940 \u092a\u0930\u093f\u092f\u094b\u0902 \u0938\u0947 1\u0918\u0902\u091f\u0947 \u0909\u0924\u094d\u092a\u093e\u0926\u0928 \u0915\u0947 \n\u092c\u0930\u093e\u092c\u0930 \u0915\u0947 \u0938\u093f\u0915\u094d\u0915\u0947 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \n\u0932\u093f\u090f \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0926\u0947\u0916\u0947\u0902: %s",14:"\u092a\u093e\u090f\u0902",16:"\u092e\u0941\u095e\u094d\u0924 \u0905\u092a\u0917\u094d\u0930\u0947\u0921",19:"\u092c\u0927\u093e\u0908 \u0939\u094b! \u0906\u092a\u0915\u094b \u0928\u090f \u092b\u0942\u0932 \u092e\u093f\u0932\u0947",18:"\u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u092c\u0922\u093c\u0940\u0964 \u0932\u0947\u0935\u0932 \u0938\u0940\u092e\u093e \u0905\u092c %d \u0939\u094b \n\u0917\u0908 \u0939\u0948\u0964 \u0932\u0947\u0935\u0932 %d \u092a\u0930 \u0905\u092a\u0917\u094d\u0930\u0947\u0921 \u0915\u0930\u0928\u0947 \n\u0915\u0947 \u0932\u093f\u090f \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0926\u0947\u0916\u0947\u0902?",31:"\u0939\u093e\u0901",49:"\u0905\u0928\u0932\u0949\u0915 \u0915\u0930\u0947\u0902",37:"\u0926\u0941\u0917\u0941\u0928\u093e",36:"\u0938\u092d\u0940 \u092b\u0942\u0932\u094b\u0902 \u0938\u0947 \u0909\u0924\u094d\u092a\u093e\u0926\u093f\u0924 \u0938\u093f\u0915\u094d\u0915\u0947 \n\u0926\u094b\u0917\u0941\u0928\u0947, 15 \u092e\u093f\u0928\u091f \u0924\u0915 \n\u0930\u0939\u0924\u0947 \u0939\u0948\u0902",35:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0928\u093e",34:"\u092f\u0939\u093e\u0902 \u091c\u093e\u090f\u0902",33:"\u0928\u090f \u0915\u092a\u0921\u093c\u0947 \u0916\u0930\u0940\u0926\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u0947 \n\u092a\u093e\u0938 \u092a\u0930\u094d\u092f\u093e\u092a\u094d\u0924 \u0938\u093f\u0915\u094d\u0915\u0947 \u0939\u0948\u0902",55:"\u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0939\u0941\u0906",74:"\u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0939\u094b \n \u0938\u0915\u0924\u093e \u0939\u0948",32:"\u092e\u0947\u0930\u093e \u0930\u0948\u0902\u0915",57:"\u092e\u0947\u0930\u093e \u0930\u0948\u0902\u0915",50:"\u0928\u093e\u092e"},daily_task_db_desc:{1:"\u092a\u0930\u093f\u092f\u094b\u0902 \u0915\u093e \u0930\u093e\u0938\u094d\u0924\u093e 3 \u092e\u0947\u0902 \n \u091a\u0941\u0928\u094c\u0924\u0940 \u0926\u0947\u0902",3:"10 \u092c\u093e\u0930 \u092b\u0942\u0932 \u0907\u0915\u091f\u094d\u0920\u093e \u0915\u0930\u0947\u0902",2:"\u092a\u0930\u0940 \u0915\u094b 1 \u092c\u093e\u0930 \u0905\u092a\u0917\u094d\u0930\u0947\u0921 \u0915\u0930\u0947\u0902"},arena_level_db_stage:{1:"\u092a\u0930\u093f\u092f\u094b\u0902 \u0915\u093e \u0930\u093e\u0938\u094d\u0924\u093e"},sign_db_title:{1:"\u0926\u093f\u0928 1",3:"\u0926\u093f\u0928 3",2:"\u0926\u093f\u0928 2",5:"\u0926\u093f\u0928 5",4:"\u0926\u093f\u0928 4",7:"\u0926\u093f\u0928 7",6:"\u0926\u093f\u0928 6"},alert:{11:"\u0917\u0947\u092e \u0905\u092d\u0940 \u091b\u094b\u0921\u093c\u0947\u0902?",12:"\u0917\u0947\u092e \u091b\u094b\u0921\u093c\u0947\u0902",3:"\u092a\u0941\u0930\u0938\u094d\u0915\u093e\u0930 \u0930\u093e\u0936\u0940:%s!",5:"\u0930\u0940\u0938\u0947\u091f \u0915\u0930\u0947\u0902,",4:"\u0915\u094d\u092f\u093e \u0906\u092a \u0905\u092a\u0928\u093e \u0921\u094d\u0930\u0947\u0938 \u0905\u092a \u0930\u0940\u0938\u0947\u091f \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902 ?",7:"\u092c\u0939\u0941\u0924 \u0905\u091a\u094d\u091b\u0947",6:"\u0905\u092d\u0940 \u0915\u093e \u0938\u0902\u092f\u094b\u091c\u0928\u0947 \u0938\u0939\u0947\u091c\u0947 \u0917\u090f \u0938\u0902\u092f\u094b\u091c\u0928 \u0938\u093e \u0939\u0940 \u0939\u0948",9:"\u092c\u091a \u0917\u090f!",8:"\u0932\u093e\u0917\u0942 \u0915\u0930\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0905\u091a\u094d\u091b\u0940 \u0924\u0930\u0939 \u0938\u0947 \u0921\u094d\u0930\u0947\u0938 \u0915\u0930\u0947\u0902"},shop_template_db_name:{1:"D\xf9ng th\u1ec3 l\u1ef1c:",2:"D\xf9ng th\u1ec3 l\u1ef1c:"},item_template_db_desc:{2:"\u0938\u093f\u0915\u094d\u0915\u0947",5:"\u0936\u093e\u092e\u093f\u0932\u0947 \u0939\u094b\u0928\u0947 \u0915\u0947 \u092a\u094d\u0930\u092f\u093e\u0938",4:"\u0905\u0916\u093e\u095c\u093e \u092a\u094d\u0930\u092f\u093e\u0938",7:"\u0905\u0927\u093f\u0915\u0924\u092e \u092e\u0941\u095e\u094d\u0924 \u092a\u094d\u0930\u092f\u093e\u0938",6:"\u091c\u0940\u0924"},item_template_db_name:{15:"\u092e\u0941\u095e\u094d\u0924 \u0936\u093e\u092e\u093f\u0932 \u092a\u094d\u0930\u092f\u093e\u0938",17:"\u091c\u0940\u0924",16:"\u0936\u093e\u092e\u093f\u0932\u0947 \u0939\u094b\u0928\u0947 \u0915\u0947 \u092a\u094d\u0930\u092f\u093e\u0938",19:"\u0935\u093f\u091c\u0947\u091f \u092a\u094d\u0930\u0936\u094d\u0928\u094b\u0924\u094d\u0924\u0930\u0940",18:"\u0905\u0927\u093f\u0915\u0924\u092e \u092e\u0941\u095e\u094d\u0924 \u092a\u094d\u0930\u092f\u093e\u0938",1:"\u0939\u0940\u0930\u0947",3:"\u0938\u094d\u091f\u0948\u092e\u093f\u0928\u093e",2:"\u0938\u093f\u0915\u094d\u0915\u0947",5:"\u0921\u094d\u0930\u0947\u0938 \u095e\u094d\u0930\u0940 \u091f\u094d\u0930\u093e\u092f\u0932",4:"\u0905\u0927\u093f\u0915\u0924\u092e \u0938\u094d\u091f\u0948\u092e\u093f\u0928\u093e",9:"\u0916\u093f\u0932\u093e\u0921\u093c\u0940",8:"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0938\u094d\u0915\u093f\u092a \u0915\u0930\u0947\u0902"},msg:{24:"%d \u0928\u093f\u0903\u0936\u0941\u0932\u094d\u0915",25:"\u0921\u094d\u0930\u0947\u0938\u093f\u0902\u0917 \u0930\u0942\u092e",20:"\u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902",21:"\u091a\u0947\u0915 \u0907\u0928 \u091f\u093e\u0907\u092e \u0928\u0939\u0940\u0902 \u0939\u0948",22:"\u092e\u093e\u0932\u093f\u0915 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902",23:"\u0930\u0948\u0902\u0915 \u0938\u0947 \u092c\u093e\u0939\u0930",1:"\u0909\u092a\u0932\u092c\u094d\u0927\u093f \u092a\u0942\u0930\u0940",3:"\u091a\u0947\u0915 \u0907\u0928 \u0938\u0947 \u0906\u0907\u091f\u092e \u092a\u093e\u090f\u0902",2:"\u092c\u0927\u093e\u0908 \u0939\u094b! \u0932\u0915\u0940 \u0921\u094d\u0930\u0949 \u092e\u0947\u0902 \u0906\u092a\u0915\u094b \u090f\u0915 \n\u092e\u0941\u095e\u094d\u0924 \u092a\u094d\u0930\u092f\u093e\u0938 \u092e\u093f\u0932\u093e",5:"\u0907\u0938\u0947 \u0905\u092d\u0940 \u0928\u0939\u0940\u0902 \u092a\u093e \u0938\u0915\u0924\u0947",4:"\u0938\u092d\u0940 \u090f\u0915\u0924\u094d\u0930\u093f\u0924",7:"\u0932\u0949\u0917 \u0907\u0928 \u0938\u092b\u0932 \u0939\u0941\u0906",6:"\u0907\u092e\u094d\u092a\u094d\u0930\u0947\u0936\u0928 \u0932\u0947\u0935\u0932 \u090a\u092a\u0930",9:"\u0915\u094b\u0908 \u0926\u0942\u0938\u0930\u093e \u0906\u0907\u091f\u092e \u0916\u0930\u0940\u0926\u0928\u093e, \u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902",8:"\u0932\u0949\u0917\u093f\u0928 \u0935\u093f\u092b\u0932",11:"\u092a\u0930\u094d\u092f\u093e\u092a\u094d\u0924 \u0928\u0939\u0940\u0902 [%s]",10:"\u0926\u093e\u0935\u093e \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0939\u094b \u0930\u0939\u093e \u0939\u0948, \u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902",13:"\u092a\u094d\u0930\u0924\u093f\u0926\u094d\u0935\u0902\u0926\u094d\u0935\u0940 \u092c\u0926\u0932\u0928\u093e \u0915\u0942\u0932 \u0921\u093e\u0909\u0928 \u0939\u094b \u0930\u0939\u093e \u0939\u0948, \u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902",12:"\u092a\u094d\u0930\u0924\u093f\u0926\u094d\u0935\u0902\u0926\u094d\u0935\u0940 \u092c\u0926\u0932 \u0917\u092f\u093e!",15:"\u0928\u093e\u092e",14:"\u092a\u0930\u094d\u092f\u093e\u092a\u094d\u0924 \u092a\u094d\u0930\u092f\u093e\u0938 \u0928\u0939\u0940\u0902 \u0939\u0948",19:"\u092b\u093f\u0930 \u0938\u0947 \u091a\u0947\u0915 \u0907\u0928 \u0928\u0939\u0940\u0902 \u0915\u0930 \u0938\u0915\u0924\u0947",18:"\u0906\u092a\u0928\u0947 \u091a\u0947\u0915 \u0907\u0928 \u0915\u093f\u092f\u093e \u0939\u0948"},arena_level_db_name:{1:"\u0938\u093e\u092e\u093e\u0928\u094d\u092f",3:"\u0909\u0928\u094d\u0928\u0924",2:"\u0907\u0902\u091f\u0930\u092e\u0940\u0921\u093f\u090f\u091f",5:"\u092a\u0935\u093f\u0924\u094d\u0930",4:"\u0907\u092a\u093f\u0915",6:"\u0938\u0941\u092a\u094d\u0930\u0940\u092e"},guide_db_content:{1:"\u092a\u0930\u093f\u092f\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 \u092b\u0942\u0932\u094b\u0902 \u0915\u0947 \n \u092a\u094c\u0927\u0947 \u0930\u094b\u092a\u0947\u0902!",3:"\u091a\u0932\u093f\u090f \u0906\u092a\u0915\u094b \u092e\u093f\u0932\u0947 \u0915\u092a\u0921\u093c\u094b\u0902 \n \u0915\u0940 \u091c\u093e\u0902\u091a \u0915\u0930\u0924\u0947 \u0939\u0948\u0902",2:"\u090f\u0915 \u092a\u0930\u0940 \u0928\u0947 \u0906\u092a\u0915\u094b \u0915\u0941\u091b \n \u0938\u093f\u0915\u094d\u0915\u0947 \u092d\u0947\u091c\u0947! \u091c\u093e\u0915\u0930 \u0909\u0928\u094d\u0939\u0947\u0902 \n \u0907\u0915\u091f\u094d\u0920\u093e \u0915\u0930\u0947\u0902!",5:"\u0938\u0939\u0940 \u0905\u0928\u0941\u092e\u093e\u0928 \u0932\u0917\u093e\u090f\u0902 \u0914\u0930 \n \u0906\u092a\u0915\u094b \u090f\u0915 \u0928\u092f\u093e \u0935\u0938\u094d\u0924\u094d\u0930 \n \u092e\u093f\u0932\u0947\u0917\u093e!",4:"\u092c\u091a \u0917\u090f! \u0906\u092a \u0924\u0930\u094b\u0924\u093e\u091c\u093e \n\u0926\u093f\u0916 \u0930\u0939\u0947 \u0939\u0948\u0902! \u092c\u0939\u0941\u0924 \n\u0905\u091a\u094d\u091b\u0947",6:"\u0905\u092c \u0906\u092a\u0915\u0947 \u090f\u0921\u0935\u0947\u0902\u091a\u0930 \u0915\u093e \n \u0938\u092e\u092f \u0939\u0948!"},role_base_db_name:{1:"\u0930\u094b\u0939\u0928\u093e",3:"\u092b\u0940\u0932\u093f\u0902\u0917",2:"\u092e\u094b\u0930",5:"\u0906\u092f\u093e",4:"\u092e\u0949\u0932\u0940"}},cc._RF.pop()},{}],id:[function(e,t,o){"use strict";cc._RF.push(t,"4c24594E5VOX7sq3SmnofSU","id"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.id={ui:{56:"Upaya tersisa:",77:"Tidak ada lagi waktu, kembalilah besok",54:"Ketuk untuk memulai game",51:"Daftar peringkat",48:"Upgrade",43:"Anda dapat mencobanya sekali secara gratis",60:"Buka gratis",61:"Imbalan peringkat",63:"Koleksi",64:"Pilih bahasa",53:"Waktu mujur",66:"Pilih bagian yang dia gunakan!",67:"Tebak lagi",68:"Pratinjau hadiah",69:"Apakah akan melihat iklan untuk tiga kali tambahan",80:"Efek level %d:",52:"Kamu tidak punya item jenis ini",86:"Pendapatan ganda",84:"Cobalah",85:"Tebak tiga kali lagi",24:"Upgrade gratis",25:"Tumbuh",26:"Belanjakan koin",27:"Tumbuh %d kali +%d",20:"Panduan",21:"Opsi",22:"Gratis",23:"Upgrade",46:"Tantangan gratis",47:"Waktu mujur",44:"Ganti lawan",45:"Luncurkan tantangan",42:"Coba kenakan",29:"Nama",40:"Tonton iklan untuk menggandakan koin",41:"SIMPAN",1:"Klaim",82:"Galat, coba lagi nanti",3:"Gandakan",2:"Selamat!",5:"Waktu offline",4:"Gandakan",7:"Kamu menemukan banyak koin ketika mengumpulkan bunga. Selamat!",6:"Tonton iklan",9:"Semua peringkat",8:"Hadiah",83:"Hadiah ekstra",81:"%d koin dapat diproduksi setiap %d detik",39:"Tugas Harian",65:"Secara acak mendapatkan item berikut",76:"Koleksi kuis pakaian",75:"untuk menerima, terus berpartisipasi dalam kuis",38:"Kemajuan",73:"Substitusi",72:"Cobalah untuk menang",71:"Mainkan sebentar dan kembali untuk mendapat hadiah",70:"Dapatkan ekstra",59:"Upgrade",79:"Batas level:",78:"Tebak %d kali benar",11:"Hadiah",10:"Item",13:"Selamat! Kamu mendapat upaya gratis di undian berhadiah",12:"BATAL",15:"Tonton iklan untuk mendapatkan koin setara dengan 1j produksi dari semua peri: %s",14:"Klaim",16:"Upgrade gratis",19:"Selamat! Kamu mendapat bunga baru",18:"Berhasil tumbuh. Batas level kini dinaikkan ke %d. Tonton iklan untuk mengupgrade ke lv. %d?",31:"IYA",49:"Buka",37:"Gandakan",36:"Koin yang dihasilkan dari semua bunga digandakan, berlangsung 15 mnt",35:"BATAL",34:"Pergi ke",33:"Kamu punya cukup koin untuk membeli pakaian baru",55:"Diterima",74:"Dapat diklaim",32:"Peringkat saya",57:"Peringkat saya",50:"Nama"},daily_task_db_desc:{1:"Tantang di Jalan Peri 3 kali",3:"Kumpulkan bunga 10 kali",2:"Upgrade peri 1 kali"},arena_level_db_stage:{1:"Jalan Peri"},sign_db_title:{1:"Hari 1",3:"Hari 3",2:"Hari 2",5:"Hari 5",4:"Hari 4",7:"Hari 7",6:"Hari 6"},alert:{11:"Keluar dari game sekarang?",12:"Keluar dari game",3:"Jumlah imbalan:%s!",5:"Reset",4:"Ingin mengatur ulang dandananmu?",7:"Bagus",6:"Kombinasi saat ini sama dengan gambar yang disimpan",9:"Disimpan!",8:"Berdandanlah dengan baik sebelum mengajukan"},shop_template_db_name:{1:"Consumo de Vigor:",2:"Consumo de Vigor:"},item_template_db_desc:{2:"koin",5:"Upaya bergabung",4:"Upaya arena",7:"Upaya gratis maks",6:"Menang"},item_template_db_name:{15:"Upaya bergabung gratis",17:"Menang",16:"Upaya bergabung",19:"Kuis widget",18:"Upaya gratis maks",1:"Berlian",3:"Stamina",2:"koin",5:"Coba gratis berdandan",4:"Stamina maks",9:"Pemain",8:"Lewati iklan"},msg:{24:"%d gratis",25:"Ruang Ganti",20:"Mohon tunggu",21:"Bukan waktu check-in",22:"Tidak dimiliki",23:"Belum masuk peringkat",1:"Prestasi selesai",3:"Dapatkan item dari check-in",2:"Selamat! Kamu mendapat upaya gratis di undian berhadiah",5:"Tidak bisa mengambilnya sekarang",4:"Semua sudah dikumpulkan",7:"Berhasil masuk",6:"Level Kesan naik",9:"Membeli item lain, coba lagi nanti",8:"Gagal masuk",11:"Tidak cukup [%s]",10:"Memproses klaim, coba lagi nanti",13:"Peredaan pergantian lawan, mohon tunggu",12:"Lawan diganti!",15:"Nama",14:"Upaya tidak cukup",19:"Tidak bisa check-in lagi",18:"Kamu sudah check-in"},arena_level_db_name:{1:"Umum",3:"Tingkat Lanjut",2:"Menengah",5:"Keramat",4:"Epik",6:"Unggul"},guide_db_content:{1:"Tanam bunga bersama peri!",3:"Mari kita lihat set pakaian yang kamu punya",2:"Seorang peri mengirimi kamu koin! Ayo ambil koinnya!",5:"Tebak dengan benar dan kamu akan mendapatkan pakaian baru!",4:"Disimpan! Kamu kelihatan menarik! Bagus!",6:"Sekarang saatnya untuk petualanganmu!"},role_base_db_name:{1:"Lolly",3:"Pheeling",2:"Peacock",5:"Aya",4:"Molly"}},cc._RF.pop()},{}],init:[function(e,t,o){"use strict";cc._RF.push(t,"c811f+28JBJvILU83JHrwdf","init"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./game/manager/mgrCfg"),a=e("./game/manager/mgrDirector"),r=e("./game/manager/mgrRecord"),i=e("./game/manager/mgrPlayer"),s=e("./game/manager/mgrDebug"),l=e("./game/manager/mgrNetwork"),c=e("./game/manager/mgrTip"),u=e("./game/manager/mgrPool"),d=e("./game/manager/mgrCop"),p=e("./game/manager/mgrAlu"),f=e("./game/manager/mgrSound"),h=e("./game/manager/mgrWordFilter"),g=e("./game/manager/mgrGuide"),_=e("./game/manager/mgrAd"),m=e("./game/manager/mgrNative"),v=e("./game/manager/mgrSdk"),y=e("./game/manager/mgrAchievement"),C=e("./game/manager/mgrShop"),b=e("./game/manager/mgrRole"),S=e("./game/manager/mgrPart"),R=e("./game/manager/mgrPvp"),T=e("./game/manager/mgrSign"),L=e("./game/manager/mgrOfflineArena"),w=e("./game/manager/mgrDailyTask"),A=e("./game/manager/mgrOnline"),D=e("./game/manager/mgrOfflinePartRank"),I=e("./game/manager/mgrAdNative"),k=e("./game/manager/mgrNativeAdSdk"),E=e("./game/manager/mgrChannel"),M=e("./game/manager/mgrSelectPart");window.ul={},n.default.init(),r.default.init(),a.default.init(),u.default.init(),c.default.init(),h.default.init(),d.default.init(),p.default.init(),m.default.init(),g.default.init(),s.default.init(),i.default.init(),l.default.init(),C.default.init(),f.default.init(),v.default.init(),E.default.init(),_.default.init(),I.default.init(),k.default.init(),b.default.init(),S.default.init(),R.default.init(),T.default.init(),L.default.init(),D.default.init(),w.default.init(),y.default.init(),A.default.init(),M.default.init(),cc._RF.pop()},{"./game/manager/mgrAchievement":"mgrAchievement","./game/manager/mgrAd":"mgrAd","./game/manager/mgrAdNative":"mgrAdNative","./game/manager/mgrAlu":"mgrAlu","./game/manager/mgrCfg":"mgrCfg","./game/manager/mgrChannel":"mgrChannel","./game/manager/mgrCop":"mgrCop","./game/manager/mgrDailyTask":"mgrDailyTask","./game/manager/mgrDebug":"mgrDebug","./game/manager/mgrDirector":"mgrDirector","./game/manager/mgrGuide":"mgrGuide","./game/manager/mgrNative":"mgrNative","./game/manager/mgrNativeAdSdk":"mgrNativeAdSdk","./game/manager/mgrNetwork":"mgrNetwork","./game/manager/mgrOfflineArena":"mgrOfflineArena","./game/manager/mgrOfflinePartRank":"mgrOfflinePartRank","./game/manager/mgrOnline":"mgrOnline","./game/manager/mgrPart":"mgrPart","./game/manager/mgrPlayer":"mgrPlayer","./game/manager/mgrPool":"mgrPool","./game/manager/mgrPvp":"mgrPvp","./game/manager/mgrRecord":"mgrRecord","./game/manager/mgrRole":"mgrRole","./game/manager/mgrSdk":"mgrSdk","./game/manager/mgrSelectPart":"mgrSelectPart","./game/manager/mgrShop":"mgrShop","./game/manager/mgrSign":"mgrSign","./game/manager/mgrSound":"mgrSound","./game/manager/mgrTip":"mgrTip","./game/manager/mgrWordFilter":"mgrWordFilter"}],main:[function(e,t,o){"use strict";cc._RF.push(t,"99ca5HYPuhJE6hdQAgv4xEb","main");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./game/view/scene/vLoadingScene"),i=e("./game/view/scene/vUpdaterScene"),s=e("./game/manager/mgrNative"),l=e("./game/manager/mgrI18n"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){l.default.init();var e=new cc.Scene,t=new cc.Node;t.setAnchorPoint(.5,.5),t.setContentSize(576,1024),t.name="Canvas";var o=t.addComponent(cc.Canvas);o.designResolution=cc.size(576,1024),o.fitHeight=!0,o.fitWidth=!0,t.parent=e,cc.log=console.log;(cc.sys.isNative&&!s.default._temp_isH5()?new i.default:new r.default).parent=t,cc.director.runSceneImmediate(e)},t=a([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"./game/manager/mgrI18n":"mgrI18n","./game/manager/mgrNative":"mgrNative","./game/view/scene/vLoadingScene":"vLoadingScene","./game/view/scene/vUpdaterScene":"vUpdaterScene"}],mgrAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"4ce5b3KZpVOT7mHCSwy/wjw","mgrAchievement");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("../struct/sAchievement"),i=e("../Const"),s=e("./mgrTip"),l=e("./mgrRecord"),c=e("../../ulframework/utils/Tools"),u=e("./mgrCfg"),d=e("./mgrPlayer"),p=e("../../ulframework/utils/Timer"),f=e("./mgrI18n"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_ACHIEVEMENT_STATE_CHANGED:this.onMsgAchievementStateChanged,MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_STAGE_RATING_CHAGNED:this.onMsgStageRatingChanged,MSG_PET_LEVEL_CHANGED:this.onMsgPetLevelChanged,MSG_PET_ADVENTURE_CHANGED:this.onMsgPetAdventureChanged,MSG_PET_COMBINE_LOG_CHANGED:this.onMsgPetCombineLogChanged,MSG_PVE_COUNT_CHANGED:this.onMsgPveCountChanged,MSG_PART_SELECT_SUCCESS:this.onMsgPartSelectSuccess}),p.default.callLoop(.1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=(l.default.getData("achievement")||{}).achievementDatas||{};u.default.forDb_from_achievement_db(function(e,n){var a=new r.default(n.id),s=o[n.id];s?a.setState(s.state):a.setState(i.AchievementState.unlocked),t.achievements[n.id]=a}),this.refreshAchievement(null,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={};c.default.forEachMap(this.achievements,function(e,o){t[o.id]={state:o.state}});var o={achievementDatas:t};l.default.setData("achievement",o)},t.onTimerLoop=function(e){this.tryRefreshAchievement()},t.refreshAchievement=function(e,t){var o=this,n=!1;c.default.forEachMap(this.achievements,function(a,r){var i=r.refreshState(e);n=n||i,i&&!t&&o.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:r.id,state:r.state})}),n&&this.saveRecord()},t.obtainReward=function(e,t){var o=this.achievements[e];if(!o)return cc.warn(ul.format("mgrAchievement.obtainReward, achievement not found! aid = %s",e)),[null,null];if(o.state!=i.AchievementState.finished)return cc.warn(ul.format("mgrAchievement.obtainReward, achievement state id not finished! aid = %s",e)),[null,null];var n=o.template.rewardItemId,a=o.template.rewardAmount;return 0!=n&&d.default.addItemAmount(n,a,t),o.setState(i.AchievementState.received),this.saveRecord(),this.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:o.id,state:o.state}),[n,a]},t.getAchievement=function(e){var t=this.achievements[e];return t||(cc.warn(ul.format("mgrAchievement.getAchievement achievement not found, aid = %s",e)),null)},t.getAchievementsByCategory=function(e){var t=[];return c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&t.push(n)}),t},t.tryRefreshAchievement=function(){var e=null;if(c.default.forEachMap(this.cmdQueue,function(t,o){e||(e=[]),e.push(t)}),e){this.cmdQueue={};for(var t=0;t<e.length;t++){var o=e[t];this.refreshAchievement(o)}}},t.isAchievementCompleted=function(e){if(!e)return!1;var t=this.getAchievement(e);if(!t)return!1;var o=t.state;return o==i.AchievementState.finished||o==i.AchievementState.received},t.isAchievementsAllCompleted=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var o=e[t];if(!this.isAchievementCompleted(o))return!1}return!0},t.getAchievementCanReceiveCount=function(e){var t=0;return c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&n.state==i.AchievementState.finished&&t++}),t},t.playAchievementTip=function(e){this.bAchievementTipEnabled&&s.default.showMsgTip(ul.format(f.default.getText("msg.1")+f.default.getText("ui.78"),e.template.data1))},t._setAchievementTipEnabled=function(e){this.bAchievementTipEnabled=e},t.getShowAchievementsByCategory=function(e){var t={};c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&(t[n.template.subCategory]||(t[n.template.subCategory]=[]),t[n.template.subCategory].push(n))});var o=[];return c.default.forEachMap(t,function(e,t){t=c.default.sortArrayByField(t,"id");for(var n=0;n<t.length;n++){var a=t[n];if(n<t.length-1){if(a.state<=i.AchievementState.finished){o.push(a);break}}else o.push(a)}}),o},t.getAchievementLevel=function(e){var o=t.getAchievement(e),n=o.template.category,a=o.template.subCategory,r=[];c.default.forEachMap(this.achievements,function(e,t){t.template.category==n&&t.template.subCategory==a&&r.push(t)}),r=c.default.sortArrayByField(r,"id");for(var i=0;i<r.length;i++){if(r[i].id==e)return[i+1,r.length]}return[1,1]},t.onMsgAchievementStateChanged=function(e){var t=e,o=t.achievementId;if(t.state==i.AchievementState.finished){var n=this.achievements[o];n.template.bNeedTip&&this.playAchievementTip(n)}this.cmdQueue.MSG_ACHIEVEMENT_STATE_CHANGED=!0},t.onMsgItemAmountChanged=function(e){this.cmdQueue.MSG_ITEM_AMOUNT_CHANGED=!0},t.onMsgStageRatingChanged=function(e){this.cmdQueue.MSG_STAGE_RATING_CHAGNED=!0},t.onMsgPetLevelChanged=function(e){this.cmdQueue.MSG_PET_LEVEL_CHANGED=!0},t.onMsgPetAdventureChanged=function(e){this.cmdQueue.MSG_PET_ADVENTURE_CHANGED=!0},t.onMsgPetCombineLogChanged=function(e){this.cmdQueue.MSG_PET_COMBINE_LOG_CHANGED=!0},t.onMsgPveCountChanged=function(e){this.cmdQueue.MSG_PVE_COUNT_CHANGED=!0},t.onMsgPartSelectSuccess=function(e){this.cmdQueue.MSG_PART_SELECT_SUCCESS=!0},t.achievements={},t.cmdQueue={},t.bAchievementTipEnabled=!0,t}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAchievement":"sAchievement","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrAdNative:[function(e,t,o){"use strict";cc._RF.push(t,"9c3f5f/Of5GTpEu44+f3nqt","mgrAdNative");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("./mgrNativeAdSdk"),i=e("./mgrCfg"),s=e("./mgrAd"),l=e("../../ulframework/utils/Tools"),c=e("./mgrDirector"),u=e("../../ulframework/utils/Timer"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){var t=this;e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH:this.onMsgNativeDataRefresh}),this.requestSomeNativeAdAtStart(),u.default.callLoop(300,function(){t.requestSomeNativeAdAtStart()})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.requestSomeNativeAdAtStart=function(){s.default.triggerAdEvent("native_free_mall")},t.getNativeDataByAdEventId=function(e){var t=i.default.get("ad_event_db",e);return t?r.default.getNativeDataByNativeType(s.default.getAdvId(t)):null},t.getNativeAdStateByAdEventId=function(e){var t=i.default.get("ad_event_db",e);return t?r.default.getNativeAdState(s.default.getAdvId(t)):null},t.onNativeAdViewClenup=function(e,t){if((void 0===t&&(t=!1),e)&&this.getNativeDataByAdEventId(e)){if(t){var o=i.default.get("ad_event_db",e);if(!o)return null;r.default.cleanNativeDataByNativeType(s.default.getAdvId(o))}var n=i.default.get("ad_event_db",e);r.default.onCloseNativeAd(s.default.getAdvId(n),this.nativeBannerRefreshFun[e].userData)}},t.__invokeRefreshData=function(e){var t=e.adEventId||0;if(t){var o=i.default.get("ad_event_db",t);o&&("inject"!=o.nativeType&&"banner"!=o.nativeType||(cc.log("__invokeRefresh: adEventId = ",t),this.__invokeClientRefresh(t,!0)))}},t.__invokeClientRefresh=function(e,t){s.default.triggerAdEvent(e,null,t)},t.registerNativeBannerRefreshFun=function(e,t,o){var n=this,a=i.default.quietGet("ad_event_db",e);cc.isValid(o)&&a&&(this.nativeBannerRefreshFun[e]={fun:t,node:o,userData:this.nativeBannerRefreshFun[e]?this.nativeBannerRefreshFun[e].userData:null},l.default.registerTouchHandler(o,function(t){if(t.isClick()){var o=n.getNativeDataByAdEventId(e);cc.log(n.nativeBannerRefreshFun),o&&n.nativeBannerRefreshFun[e]&&n.nativeBannerRefreshFun[e].userData&&(cc.log("on touch native !!!"),r.default.onClickNativeAd(s.default.getAdvId(a),n.nativeBannerRefreshFun[e].userData))}}),o.addComponent(cc.Component).onDestroy=function(){u.default.callLater(.3,function(){n.onNativeAdViewClenup(e,!0)})},s.default.triggerAdEvent(e),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:s.default.getAdvId(a),userData:{adEventId:e}}))},t.refreshNativeBanner=function(e){cc.log("refreshNativeBanner",e);var t=this.nativeBannerRefreshFun[e];if(cc.log("registerInfo",t),t){if(cc.isValid(t.node)){var o=this.getNativeDataByAdEventId(e);try{t.fun(o)}catch(e){cc.log(e)}}}else cc.warn(ul.format(":)adEventId:%s isn't regist!!!"))},t.onMsgNativeDataRefresh=function(e){var t=this,o=e,n=o.userData.adEventId;cc.log("onMsgNativeDataRefresh",n);var a=this.getNativeDataByAdEventId(n)||{};this.nativeBannerRefreshFun[n]||(this.nativeBannerRefreshFun[n]={}),this.nativeBannerRefreshFun[n].userData=o.userData,cc.log(" try down load image!!!"),cc.log("aaaaaaaaaaaaaaaaaaaaa",a.url),this.__tryRefreshLogic(o.advId),a.url&&(a.url=a.url.replace("https://","http://"),c.default.loadRes(a.url,cc.SpriteFrame,function(e,l){cc.log(e,l),e?(cc.log("BBBBBBBBBBBBBBBBBBBB"),r.default.onImgLoadingFailed(o.advId)):(cc.log("CCCCCCCCCCCCCCCCCCC"),a.spriteFrame=l,r.default.onImgLoadingSuccessful(o.advId));var u=i.default.get("ad_event_db",n);cc.log("\u539f\u751f\u5e7f\u544a\u5185\u5bb9",u),u&&"interstitial"==s.default.getAdType(u)&&ul.length(a)>0&&c.default.openDialog("vNativeDialog",{adEventId:n,userData:o.userData}),t.__tryRefreshLogic(o.advId)}))},t.__tryRefreshLogic=function(e){var t=this;l.default.forEachMap(this.nativeBannerRefreshFun,function(o,n){var a=i.default.quietGet("ad_event_db",o);a&&e&&s.default.getAdvId(a)==e&&t.refreshNativeBanner(o)})},t.nativeBannerRefreshFun={},t}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrNativeAdSdk":"mgrNativeAdSdk"}],mgrAd:[function(e,t,o){"use strict";cc._RF.push(t,"20276rxf1BCtI/uXv/IKIg9","mgrAd");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a,r,i=e("../../ulframework/manager/Manager"),s=e("./mgrRecord"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrAlu"),d=e("./mgrSdk"),p=e("./mgrPlayer"),f=e("./mgrSound"),h=e("./mgrTip"),g=e("../../ulframework/utils/Timer"),_=e("../Const");(function(e){e[e.none=1]="none",e[e.relaxed=2]="relaxed",e[e.careful=3]="careful"})(a=o.AdMode||(o.AdMode={})),function(e){e.interstitial="1",e.banner="2",e.embedded="3",e.video="4",e.url="5",e.paster="6"}(r=o.ADV_ID||(o.ADV_ID={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_OPEN_ADV_RESULT:this.onMsgOpenAdvResult,MSG_ADV_CLOSE_RESULT:this.onMsgAdvCloseResult,MSG_LIFE_CYCLE:this.onMsgLifeCycle})},t.loadRecord=function(){e.loadRecord.call(this);var t=s.default.getData("ad")||{};this.lastFinishedTimes=t.lastFinishedTimes||{},this.dailyMissGuidedNativeIntersitialCount=t.dailyMissGuidedNativeIntersitialCount||0,this.preMissGuideNativeIntersitialGapCount=t.preMissGuideNativeIntersitialGapCount||0},t.saveRecord=function(){e.saveRecord.call(this);var t={lastFinishedTimes:this.lastFinishedTimes||{},dailyMissGuidedNativeIntersitialCount:this.dailyMissGuidedNativeIntersitialCount||0,preMissGuideNativeIntersitialGapCount:this.preMissGuideNativeIntersitialGapCount||0};s.default.setData("ad",t)},t.tryMissGuideNativeIntersitial=function(e){if(3!=(d.default.getCopNumberValueByKey("ad_interstitial_touch_mode")||0))return!1;var t=d.default.getCopNumberValueByKey("daily_miss_guide_native_count")||0;if(t<=0)return!1;if((this.dailyMissGuidedNativeIntersitialCount||0)>=t)return!1;var o=d.default.getCopNumberValueByKey("pre_miss_guide_native_gap_count")||0;if(o>0&&o>(this.preMissGuideNativeIntersitialGapCount||0))return void this.addPreMissGuideNativeIntersitialGapCount(1);return this.preMissGuideNativeIntersitialGapCount=0,e&&e(),this.addDailyMissGuidedNativeIntersitialCount(1),!0},t.addDailyMissGuidedNativeIntersitialCount=function(e){this.dailyMissGuidedNativeIntersitialCount=(this.dailyMissGuidedNativeIntersitialCount||0)+(e||0),this.saveRecord()},t.addPreMissGuideNativeIntersitialGapCount=function(e){this.preMissGuideNativeIntersitialGapCount=(this.preMissGuideNativeIntersitialGapCount||0)+(e||0),this.saveRecord()},t.isAdEventHasChanceTrigger=function(e){var t=c.default.get("ad_event_db",e);if(!t)return!1;if(!u.default.check(t.aluId))return!1;var o=t.ratio;return t.ratioFromCopKey&&(o=d.default.getCopNumberValueByKey(t.ratioFromCopKey)),!(o<=0)&&(!(t.wipeItemId>0&&p.default.getItemAmount(t.wipeItemId)>0)||(cc.log("  \u53bb\u5e7f\u544a\uff0c\u4e0d\u901a\u8fc7"),!1))},t.preCheckCanTriggerAdEvent=function(e){return!!this.preCheckCanTriggerAdEventNoCd(e)&&(!(this.getAdEventRemainCd(e)>0)||(cc.log("  \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7"),!1))},t.preCheckCanTriggerAdEventNoCd=function(e){if(this.getCopAdMode()==a.none)return!1;var t=c.default.get("ad_event_db",e);if(!t)return!1;if(cc.log("mgrAd.preCheckCanTriggerAdEvent",e,t),!this.isAdTypeValid(e))return cc.log("  \u5e7f\u544a\u6ca1\u6709\u6b21\u6570\u4e86 "),!1;if(!u.default.check(t.aluId))return cc.log("  alu\u4e0d\u901a\u8fc7\uff0c\u4e0d\u901a\u8fc7"),!1;var o=t.ratio;if(t.ratioFromCopKey&&(o=d.default.getCopNumberValueByKey(t.ratioFromCopKey),cc.log("  use cop ratio:",o)),cc.log("  \u89e6\u53d1\u51e0\u7387\uff1a",o),!(l.default.random(100)>o))return!(t.wipeItemId>0&&p.default.getItemAmount(t.wipeItemId)>0)||(cc.log("  \u53bb\u5e7f\u544a\uff0c\u4e0d\u901a\u8fc7"),!1);cc.log("  \u6982\u7387\u4e0d\u901a\u8fc7\uff0c\u4e0d\u901a\u8fc7")},t.triggerAdEvent=function(e,t,o,n){var a=c.default.get("ad_event_db",e);if(a)if(cc.log("mgrAd.\u89e6\u53d1\u5e7f\u544a\u4e8b\u4ef6",e,t,o),o||this.preCheckCanTriggerAdEvent(e))if(!n&&this.getAdEventRemainCd(e)>0)cc.log("  \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7");else{var r={};l.default.forEachMap(a.param,function(e,t){r[e]=t}),t&&l.default.forEachMap(t,function(e,t){r[e]=t}),r.adEventId=e,r.advInfo=a.advInfo,r.serialNumber=this.AD_EVENT_SERIAL_NUMBER,this.AD_EVENT_SERIAL_NUMBER++,a.bPauseSound&&f.default.pauseSound("mgrAd"),this.lastTriggerAdEventId=e,this.lastTriggerAdEventParam=t,a.timeout>0&&(this.showWaiting(),this.startTimeoutTimer(a.timeout)),this.markFinished(e);var i=this.getAdvId(a);if(cc.log("  \u5f00\u59cb\u5e7f\u544a",a.cmd,i),p.default.isIgnoreAd())this.sendMsg("MSG_OPEN_ADV_RESULT",{code:1,advId:i,userData:JSON.stringify(r)});else{var s={cmd:a.cmd,data:{advId:i||"",userData:JSON.stringify(r),tag:a.id}};ul.dump(s),d.default.sendMsgToSdk(s)}a.statisticsSdkEvent&&a.statisticsSdkEvent.length>0&&d.default.statisCommonEvent(a.statisticsSdkEvent)}else cc.log("    preCheckCanTriggerAdEvent \u4e0d\u901a\u8fc7")},t.trigMutexBannerIntersitial=function(e,t,o){this.getCopAdMode()==a.relaxed?(this.triggerAdEvent(o),h.default.showNativeBanner(e,t)):this.preCheckCanTriggerAdEvent(o)?this.triggerAdEvent(o,null,!0):h.default.showNativeBanner(e,t)},t.retryLastTriggerAdEvent=function(){this.lastTriggerAdEventId?this.triggerAdEvent(this.lastTriggerAdEventId,this.lastTriggerAdEventParam,!0):cc.warn("mgrAd.retryLastTriggerAdEvent lastTriggerAdEventId not found!")},t.startTimeoutTimer=function(e){var t=this;this.stopTimeoutTimer(),this.timeoutTimer=new g.default(e,1,function(){t.stopTimeoutTimer(),t.showFaild()}),this.timeoutTimer.start()},t.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.showWaiting=function(){},t.hideWaiting=function(){this.sendMsg("MSG_AD_CLOSE_WAITING")},t.showFaild=function(){},t.hideFaild=function(){this.sendMsg("MSG_AD_CLOSE_FAILD")},t.onMsgOpenAdvResult=function(e){var t=e;console.info("mgrAd.onMsgOpenAdvResult"),ul.dump(t,"data");var o=JSON.parse(t.userData||"")||{},n=o.adEventId||0,a=c.default.get("ad_event_db",n);if(a){a.timeout>0&&(this.hideWaiting(),this.hideFaild(),this.stopTimeoutTimer());var r=parseInt(t.code);0==r?(t.msg&&"video"==a.type&&h.default.showMsgTip(t.msg),a.bPauseSound&&f.default.resumeSound("mgrAd")):1==r?(a.bPauseSound&&f.default.resumeSound("mgrAd"),this.markFinished(n)):2==r&&a.bPauseSound&&f.default.resumeSound("mgrAd"),r==a.successCode&&this._doAdEventSuccessdLogic(n,o)}else cc.log("[warn] ul.mgrAd.onMsgAdvShowResult adEventId not found!")},t._doAdEventSuccessdLogic=function(e,t){var o=parseInt(t.serialNumber)||0;if(this.successedAdEventSerialNumbers[o])cc.warn(ul.format("mgrAd.onMsgAdvShowResult ad already do successd! adEventId=%s, serialNumber=%d",e,o));else{this.successedAdEventSerialNumbers[o]=!0;var n=c.default.get("ad_event_db",e),a=[],r=t.rewards||n.param.rewards;r&&r.forEach(function(e){var t=e[0],o=e[1],r=e[2],i=e[3],s=0;s=o?r?Math.random()*(r-o)+o:o:r,s=Math.floor(s),p.default.addItemAmount(t,s,n.statisticsSdkEvent),i||a.push({itemId:t,amount:s,amountSteps:[[s,0]],customerContext:{bBanAdReward:!0}})});var i=null!=t.rewardBoxId?t.rewardBoxId:n.param.rewardBoxId;if(i)p.default.openItemBox(i).forEach(function(e){var t=e[0],o=e[1];p.default.addItemAmount(t,o,n.statisticsSdkEvent),a.push({itemId:t,amount:o,amountSteps:[[o,0]],customerContext:{bBanAdReward:!0}})});n.remainCountItemId>0&&p.default.addItemAmount(n.remainCountItemId,-1,"\u5e7f\u544a\u64ad\u653e\u6b21\u6570"),a.length>0&&h.default.addGotItemTipGroup(a),this.sendMsg("MSG_AD_EVENT_SUCCESSD",{adEventId:e,userData:t})}},t.onMsgAdvCloseResult=function(e){},t.onMsgAdvInfoResult=function(e){var o=this,n=e,a=JSON.parse(n.userData||"")||{},r=parseInt(a.nativeType);if(r){var i=JSON.parse(n.nativeData||"")||{};if(i.title||(i.title="\u5e7f\u544a\u6807\u9898"),i.desc||(i.desc="\u5e7f\u544a\u5185\u5bb9"),i.targetTitle||(i.targetTitle="\u67e5\u770b\u8be6\u60c5"),i.url)return this.downloadedImgFrame[i.url]?(cc.log("\u56fe\u7247\u8d44\u6e90\u5df2\u7f13\u5b58\uff0c\u76f4\u63a5\u4f7f\u7528"),i.frame=this.downloadedImgFrame[i.url],t.NATIVE_ID++,i.id=t.NATIVE_ID,this.cacheNativeDatas[r]=i,void this.sendMsg("MSG_AD_NATIVE_DATA_REFRESH",{nativeType:r})):void cc.loader.load({url:i.url,type:"png"},function(e,n){if(e)cc.error(" onMsgAdvInfoResult load err: ",e.message);else{var a=new cc.SpriteFrame(n);i.frame=a,o.downloadedImgFrame[i.url]=a,t.NATIVE_ID++,i.id=t.NATIVE_ID,o.cacheNativeDatas[r]=i,o.sendMsg("MSG_AD_NATIVE_DATA_REFRESH",{nativeType:r})}});cc.warn(" onMsgAdvInfoResult nativeData.url is null, url : ",i.url)}else cc.warn("mgrAd.onMsgAdvInfoResult nativeType not found!")},t.onMsgLifeCycle=function(e){},t.getRandomRewardId=function(){var e=this,t=[];if(c.default.forDb("ad_reward_db",function(o,n){e.getRewardRemainCount(n.id)>0&&t.push(n)}),t.length<=0)return null;var o=l.default.calcWheelTarget(t,"weight");return o?o.id:null},t.getRewardRemainCount=function(e){var t=c.default.get("ad_reward_db",e);return this.getAdEventRemainCount(t.adEventId)},t.getAdEventRemainCount=function(e){var t=c.default.get("ad_event_db",e);if(!t)return 0;if(t.aluId&&!u.default.check(t.aluId))return 0;var o=t.ratio;return t.ratioFromCopKey&&t.ratioFromCopKey.length>0&&(o=d.default.getCopNumberValueByKey(t.ratioFromCopKey)),o<=0?0:t.remainCountItemId>0?p.default.getItemAmount(t.remainCountItemId):1},t.getAdEventRemainCd=function(e){var t=c.default.get_from_ad_event_db(e);if(!t)return 0;if(p.default.isIgnoreAd()){if(t.cdIgnoreAd>0){var o=this.getLastFinishedTime(e)+t.cdIgnoreAd;return Math.max(0,o-l.default.time())}return 0}if(t.cd>0){o=this.getLastFinishedTime(e)+t.cd;return Math.max(0,o-l.default.time())}return 0},t.getLastFinishedTime=function(e){var t=c.default.get("ad_event_db",e);if(!t)return 0;var o=t.id;return t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]||0},t.markFinished=function(e){var t=c.default.get("ad_event_db",e);if(t){var o=t.id;t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]=l.default.time(),this.saveRecord()}},t.closeAdv=function(e){var t=c.default.get_from_ad_event_db(e);t&&d.default.closeAdv(this.getAdvId(t))},t.isAdTypeValid=function(e){var t=c.default.get_from_ad_event_db(e);if(!t)return!0;switch(this.getAdType(t)){case"video":return _.default.AD_VIDEO_VALID_COUNT>0}return!0},t.isAdCareful=function(){return this.getCopAdMode()!=a.relaxed},t.getAdType=function(e){var t=e.type;e.typeFromCop&&(1==d.default.getCopNumberValueByKey(e.typeFromCop)&&(t="interstitial"));return t},t.getAdvId=function(e){var t=this.getAdType(e),o=e.advId;switch(t){case"interstitial":o=r.interstitial;break;case"banner":o=r.banner;break;case"video":o=r.video}return o},t.getCopAdMode=function(){return d.default.getCopNumberValueByKey("ad_mode")},t.lastFinishedTimes={},t.lastTriggerAdEventId=null,t.lastTriggerAdEventParam=null,t.lastRequestNativeDataTimes={},t.cacheNativeDatas={},t.NATIVE_ID=0,t.NATIVE_INTERSITIAL_AD_EVENT_ID="native_intersitial",t.AD_EVENT_SERIAL_NUMBER=0,t.availableNativeTypes=[],t.downloadedImgFrame={},t.successedAdEventSerialNumbers={},t.dailyMissGuidedNativeIntersitialCount=0,t.preMissGuideNativeIntersitialGapCount=0,t}(i.default);o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrAlu:[function(e,t,o){"use strict";cc._RF.push(t,"c63f19cgZJPEYIwxif9JNGD","mgrAlu");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("../../ulframework/utils/Tools"),i=e("./mgrCop"),s=e("./mgrCfg"),l=e("./mgrStage"),c=e("./mgrChannel"),u={"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.calcCheckData=function(){var e={payChannel:this.getCheckPayChannel(),platform:this.getCheckPlatform(),stageProgress:l.default.getStageProgress()||0,isSupportPasterAdv:c.default._isSupportPasterAdv?1:0};return r.default.forEachMap(i.default.getCops(),function(t,o){var n=parseFloat(o);e[t]=isNaN(n)?o:n}),e},t.getCheckPayChannel=function(){return"unknown"},t.getCheckPlatform=function(){return"unknown"},t.check=function(e){if(!e)return!0;var t=s.default.get("alu_db",e);if(!t)return!1;for(var o=!0,n=this.calcCheckData(),a=0;a<t.conditions.length;a++){var r=t.conditions[a],i=u[r.operator];if(i){var l=i(n[r.key],r.value);o=r.bLogicOr?o||l:o&&l}else cc.warn("mgrAlu.check unknown operator",r.operator)}return o},t.checkIds=function(e){for(var t=0;t<e.length;t++){var o=e[t];if(!this.check(o))return!1}return!0},t.OPERATOR_HANDLERS=u,t}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrCop":"mgrCop","./mgrStage":"mgrStage"}],mgrCfg:[function(e,t,o){"use strict";cc._RF.push(t,"4efa6oODZxF+Ji7gcSaoIFq","mgrCfg");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/utils/CfgParser"),r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),s=e("./mgrAlu"),l=e("../Const"),c=[["arena_config_db","m"],["arena_level_db","m"],["achievement_db","m"],["achievement_target_db","m"],["ad_event_db","m"],["alu_db","m"],["anim_node_db","m"],["badword_db","a"],["cop_db","m"],["cop_process_db","m"],["daily_task_db","m"],["guide_db","ma"],["item_template_db","m"],["item_recover_db","m"],["online_reward_db","ma"],["particle_db","m"],["part_db","m"],["part_type_db","m"],["part_subject_tag_db","m"],["select_part_db","m"],["select_part_stage_db","m"],["sign_db","ma"],["sound_db","m"],["spine_db","m"],["stage_db","m"],["suit_db","m"],["shop_template_db","m"],["random_name_part1_db","a"],["random_name_part2_db","a"],["en_random_name_part1_db","a"],["en_random_name_part2_db","a"],["hi_random_name_part1_db","a"],["hi_random_name_part2_db","a"],["vi_random_name_part1_db","a"],["vi_random_name_part2_db","a"],["id_random_name_part1_db","a"],["id_random_name_part2_db","a"],["pt_random_name_part1_db","a"],["pt_random_name_part2_db","a"],["role_db","ma"],["role_base_db","m"],["reap_db","m"]],u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),cc.log("mgrCfg.onLoad")},t.getDb=function(e){var t=this.allDbs[e||""];return t||cc.warn("[\u8b66\u544a] mgrCfg.getDb db not found! dbName=["+e+"]"),t},t.getDbAndSortByField=function(e,t){var o=this.getDb(e);if(!o)return[];var n=[];return i.default.forEachMap(o,function(e,t){n.push(t)}),t="string"==typeof t?[t]:t,i.default.sortArrayByField(n,t)},t.get=function(e,t,o,n,a){void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a=!1);var r=this.getDb(e);if(!r)return null;var i=r[t];return null==i?(a||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"]"),i):null!=o&&null==(i=i[o])?(a||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+o+"]"),i):null!=n&&null==(i=i[n])?(a||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+o+"], key3=["+n+"]"),i):i},t.quietGet=function(e,t,o,n){return void 0===o&&(o=null),void 0===n&&(n=null),this.get(e,t,o,n,!0)},t.forDb=function(e,t){var o=this.getDb(e);o&&i.default.forEachMap(o,t)},t.getLoadUrls=function(){for(var e=[],t=0;t<c.length;t++){var o=c[t][0];e.push("cfg/"+o)}return e.concat(["cfg/cpart_pos"])},t.processDb=function(){for(var e=0;e<c.length;e++){var t=c[e],o=t[0],n=t[1],r="cfg/"+o,i=cc.loader.getRes(r);if(i){var s=a.default.parseCfgByJsonObj(o,i.json,n);s?this.allDbs[o]=s:cc.warn("\u8b66\u544a] \u914d\u7f6e\u8868\u52a0\u8f7d\u5931\u8d25\uff01",o)}else cc.error("mgrCfg processDb error, data is null, url:"+r)}this._combineItemTemplatedb(),this._processTextDb(),this._processAchievementDb(),this._processAluDb(),this._processPartDbs(),this._processStageDb(),this._processRoleDb()},t._processRoleDb=function(){var e,t,o=this;this.forDb_from_role_db(function(n,a){if(e=o.get_from_role_base_db(n))for(var r=a,i=0;i<r.length;i++)(t=r[i]).spineId=e.spineId,t.name=e.name,t.landSprite=e.landSprite,t.flowerSpineId=e.flowerSpineId,t.idleMovs=e.idleMovs.concat(),t.touchMovs=e.touchMovs.concat(),t.flowerSprs=e.flowerSprs.concat();else cc.warn("_processRoleDb error, temp is null, key : ",n)})},t._processPartDbs=function(){var e=this,t=cc.loader.getRes("cfg/cpart_pos").json;this.forDb_from_part_db(function(o,n){n.typeData=e.get_from_part_type_db(n.type);for(var a=[],r=1;r<=20;r++){var s=n[r.toString()];a.push({featureValue:s,id:r})}a=i.default.sortArrayByField(a,"-featureValue");var l=[];for(r=0;r<4;r++){var c=a[r];l.push(c.id)}n.topSubjectIds=l;for(var u=n.resources,d=[],p=0;p<u.length;p++){var f=u[p],h=t[f+".png"]||cc.v2(0,0);d.push(h)}n.resourcePoses=d})},t._processStageDb=function(){this.forDb_from_stage_db(function(e,t){for(var o={},n=t.gradeWeightsStr.split(","),a=0;a<n.length;a++){var r=n[a],i=r.search(":"),s=r.search("=");if(i>0){var l=parseInt(r.substring(0,i)),c=parseInt(r.substring(i+1,r.length));o[l]={weight:c,bRequired:!1}}else if(s>0){l=parseInt(r.substring(0,s)),c=parseInt(r.substring(s+1,r.length));o[l]={weight:c,bRequired:!0}}}t.gradeWeights=o})},t._combineItemTemplatedb=function(){var e=this.getDb("item_template_db");this.forDb_from_part_db(function(t,o){if(e[o.id])cc.warn(ul.format("\u8b66\u544a\uff01\u8b66\u544a\uff01\u8b66\u544a\uff01 \u90e8\u4ef6\u8868\u4e2did\u3010% d\u3011\u5728\u7269\u54c1\u8868\u4e2d\u5df2\u88ab\u5360\u7528\uff01",o.id));else{var n={id:o.id,name:o.name,quality:o.level,flag:l.default.ITEM_FLAG_PART,icon:o.icon,desc:o.desc,defaultAmount:o.bDefaultOwn?1:0,sellItemId:0,sellItemAmount:0,buySource:1};e[o.id]=n}})},t._processItemBoxDb=function(){for(var e=[],t=[],o=[],n=[],a=1;a<=10;a++)e.push("ratio_"+a),t.push("itemId_"+a),o.push("minAmount_"+a),n.push("maxAmount_"+a);var r=this.allDbs.item_template_db,i=[];this.forDb("item_box_db",function(a,s){var l=[],c={boxId:s.boxId,index:s.index,name:s.name,ratioType:s.ratioType,triggerRatio:s.triggerRatio,items:l};i.push(c);for(var u=0;u<e.length;u++){var d=s[e[u]],p=s[t[u]],f=s[o[u]],h=s[n[u]];if(p>0)r[p]?(h<f&&(h=f),l.push({ratio:d,itemId:p,minAmount:f,maxAmount:h})):cc.warn(ul.format("[warn] itemBox\u4e2d\uff0citemId\u672a\u627e\u5230\uff01 boxId = [% d], itemId = [% d]",s.boxId,p))}});var s={};for(a=0;a<i.length;a++){1==(l=i[a]).index&&(s[l.boxId]=l)}for(a=0;a<i.length;a++){var l;if((l=i[a]).index>1){var c=s[l.boxId];if(c)for(var u=0;u<l.items.length;u++){var d=l.items[u];c.items.push(d)}else cc.warn(ul.format("[warn] _processItemBoxDb headData not found! boxId = %d, index = %d",l.boxId,l.index))}}this.allDbs.item_box_db=s},t._processTextDb=function(){var e=[];this.forDb("badword_db",function(t,o){e.push(o.word)}),this.allDbs.badword_db=e},t._processAchievementDb=function(){i.default.forEachMap(this.getDb("achievement_target_db"),function(e,t){for(var o={},n=0;n<t.cmds.length;n++){o[t.cmds[n]]=!0}t.cmdHash=o})},t._processAluDb=function(){for(var e=[],t=[],o=[],n=[],a=1;a<=5;a++)e.push("logic_or_"+a),t.push("key_"+a),o.push("operator_"+a),n.push("value_"+a);s.default.calcCheckData();var r=s.default.OPERATOR_HANDLERS,i={};this.forDb("alu_db",function(a,s){var l=[],c={id:s.id,name:s.name,conditions:l};i[s.id]=c;for(var u=0;u<5;u++){var d=1==s[e[u]],p=s[t[u]],f=s[o[u]],h=s[n[u]];if(p)if(null==r[f])cc.warn(ul.format("\u903b\u8f91\u8fd0\u7b97\u7b26\u914d\u7f6e\u3010alu_db\u3011\u4e2d sysmbol\u672a\u627e\u5230\uff1a%s",f));else{var g=parseFloat(h),_={bLogicOr:d,key:p,operator:f,value:h=isNaN(g)?h:g};l.push(_)}}}),this.allDbs.alu_db=i},t.validateCfg=function(){if(cc.sys.isNative)cc.log("\u79fb\u52a8\u8bbe\u5907\u8df3\u8fc7\u914d\u7f6e\u8868\u9a8c\u8bc1");else{var e=i.default.time();cc.log("\n\n\n"),cc.log("<<<<\u914d\u7f6e\u8868\u9a8c\u8bc1-\u5f00\u59cb>>>>"),this.checkItems("pvp_farm_subject_db","seasonRewards"),this.checkIdExist("pvp_farm_subject_db","donateItemId","item_template_db"),this.checkItems("pvp_farm_subject_db","donateRewards"),this.checkIdExist("pvp_like_reward_db","rewardItemId","item_template_db"),this.checkIdExist("room_actor_db","spineId","spine_db"),this.checkResExist("room_attr_db","icon"),this.checkIdsExistFromGetter("room_attr_db",function(e){return e.upgradeAids},"achievement_db"),this.checkItems("room_attr_db","upgradeCosts"),this.checkIdExist("room_attr_db","blueprintId","room_blueprint_db"),this.checkResExist("room_map_db","bgTexture"),this.checkItems("room_offline_customer_menu_db","costs"),this.checkItems("room_offline_customer_menu_db","quickCosts"),this.checkItems("room_offline_customer_menu_db","rewards"),this.checkIdsExistFromGetter("room_offline_customer_menu_db",function(e){return e.unlockAids},"achievement_db"),this.checkResesExistFromGetter("room_part_db",function(e){for(var t=[],o=0;o<e.resources.length;o++){var n=e.resources[o],a=n[0],r=n[1];1==a&&t.push(r)}return t}),this.checkIdsExistFromGetter("room_part_db",function(e){for(var t=[],o=0;o<e.resources.length;o++){var n=e.resources[o],a=n[0],r=n[1];2==a&&t.push(r)}return t},"spine_db"),this.checkIdExist("room_part_group_db","defaultPartId","room_part_db"),this.checkIdExist("achievement_db","rewardItemId","item_template_db"),this.checkIdExist("achievement_db","targetType","achievement_target_db"),this.checkResExist("pet_template_db","icon"),this.checkIdExist("pet_template_db","stageSettleSpineId","spine_db"),this.checkIdExist("pet_template_db","activeSkillEffectId","pet_skill_effect_db"),this.checkIdExist("pet_template_db","unlockAid","achievement_db"),this.checkItems("pet_template_db","upgradeCost"),this.checkIdExist("pet_template_db","spineId","spine_db"),this.checkIdExist("pet_template_db","roomActorId","room_actor_db"),this.checkIdExist("pet_skill_effect_db","effectAnimId","anim_node_db"),this.checkIdExist("pet_skill_effect_db","nameAnimId","anim_node_db"),this.checkIdExist("pet_skill_effect_db","soundId","sound_db"),this.checkResesExistFromGetter("food_material_db",function(e){for(var t=[],o=0;o<e.resources.length;o++)for(var n=0;n<e.resources[o].length;n++){var a=e.resources[o][n];t.push(a)}return t}),this.checkIdsExistFromGetter("food_material_db",function(e){return e.upgradeAids},"achievement_db"),this.checkItems("food_material_db","upgradeCost"),this.checkItems("food_material_db","quickUnlockCost"),this.checkResExist("food_subject_category_db","typeIcon"),this.checkIdExist("kitchen_customer_db","spineId","spine_db"),this.checkResExist("kitchen_db","ovenDoorOpenTexture"),this.checkResExist("kitchen_db","ovenDoorCloseTexture"),this.checkResExist("kitchen_db","saladDiskTexture"),this.checkResExist("kitchen_db","typeIcon"),this.checkResExist("anim_node_db","prefabFileName"),this.checkResExist("spine_db","jsonFileName"),this.checkResExist("particle_db","filename"),this.checkItems("share_config_db","rewards"),this.checkIdsExistFromGetter("stage_chapter_db",function(e){return e.stageIds},"stage_db"),this.checkIdsExistFromGetter("stage_chapter_db",function(e){return e.upgradeAids},"achievement_db"),this.checkResExist("stage_chapter_db","bgtexture"),this.checkResExist("stage_chapter_db","titleTexture"),this.checkResExist("stage_chapter_db","kitchenBgTexture"),this.checkResExist("stage_chapter_db","itemBgTexture"),this.checkResExist("stage_chapter_db","curCusorTexture"),this.checkItems("stage_chapter_db","rewardItems"),this.checkIdsExistFromGetter("stage_db",function(e){for(var t=[],o=0;o<e.firstRewards.length;o++)for(var n=e.firstRewards[o],a=0;a<n.length;a++)t.push(n[a]);for(o=0;o<e.rewards.length;o++)for(n=e.rewards[o],a=0;a<n.length;a++)t.push(n[a]);return t},"item_box_db"),this.checkIdsExistFromGetter("stage_db",function(e){return e.displayAids},"achievement_db"),this.checkIdsExistFromGetter("stage_db",function(e){return e.unlockAids},"achievement_db"),this.checkIdsExistFromGetter("stage_db",function(e){return e.materialIds},"food_material_db"),this.checkIdsExistFromGetter("stage_db",function(e){return e.customerIds},"kitchen_customer_db"),this.checkIdsExistFromGetter("stage_db",function(e){for(var t=[],o=0;o<e.customerMenuIds.length;o++){var n=e.customerMenuIds[o],a=(n[0],n[1]);t.push(a)}return t},"stage_menu_db"),this.checkIdsExistFromGetter("stage_menu_db",function(e){for(var t=[],o=0;o<e.materialIds1.length;o++)t.push(e.materialIds1[o]);for(o=0;o<e.materialIds2.length;o++)t.push(e.materialIds1[o]);for(o=0;o<e.materialIds3.length;o++)t.push(e.materialIds1[o]);return t},"food_material_db"),this.checkResExist("ad_reward_db","icon"),this.checkResExist("ad_reward_db","buttonTexture"),this.checkIdExist("ad_reward_db","adEventId","ad_event_db"),this.checkItems("farm_crop_db","growCosts"),this.checkItems("farm_crop_db","outputItems"),this.checkResesExistFromGetter("farm_crop_db",function(e){for(var t=[],o=0;o<e.growResources.length;o++){var n=e.growResources[o],a=n[0],r=n[1];1==a&&t.push(r)}return t}),this.checkIdsExistFromGetter("farm_crop_db",function(e){for(var t=[],o=0;o<e.growResources.length;o++){var n=e.growResources[o],a=n[0],r=n[1];2==a&&t.push(r)}return t},"spine_db"),this.checkIdsExistFromGetter("farm_crop_db",function(e){return e.ripImmediatelyCost.length>0?e.ripImmediatelyCost[0]:[]},"item_template_db"),this.checkIdExist("farm_crop_db","unlockAid","achievement_db"),this.checkResesExistFromGetter("farm_field_db",function(e){return e.resources}),this.checkIdsExistFromGetter("farm_field_db",function(e){return e.visibleAids},"achievement_db"),this.checkIdsExistFromGetter("farm_field_db",function(e){return e.canBuyAids},"achievement_db"),this.checkIdExist("farm_crop_db","buyCosts","achievement_db"),this.checkResExist("farm_crop_type_db","granaryIcon"),this.checkIdsExistFromGetter("sign_lottery_db",function(e){return e.rewardBoxIds},"item_box_db"),this.checkIdExist("sign_lottery_db","costItemId","item_template_db"),this.checkIdExist("sign_db","rewardItemId","item_template_db"),this.checkResExist("sign_db","bgTexture"),this.checkIdsExistFromGetter("suit_db",function(e){return e.displayPartIds},"room_part_db"),this.checkIdsExistFromGetter("suit_db",function(e){return e.partIds},"room_part_db"),this.checkIdExist("suit_db","achievementId","achievement_db"),this.checkIdsExistFromGetter("shop_router_db",function(e){return e.aluIds},"alu_db"),this.checkIdExist("shop_router_db","triggerRatioFromCopKey","cop_db"),this.checkIdsExistFromGetter("shop_router_db",function(e){for(var t=[],o=0;o<e.targets.length;o++)t.push(e.targets[o][0]);return t},"shop_template_db"),this.checkIdExist("shop_template_db","aluId","alu_db"),this.checkItems("shop_template_db","items"),this.checkIdExist("shop_template_db","priceUnit","item_template_db"),this.checkIdExist("shop_template_db","unlockAid","achievement_db"),this.checkIdsExistFromGetter("item_box_db",function(e){for(var t=[],o=0;o<e.items.length;o++)t.push(e.items[o].itemId);return t},"item_template_db"),this.checkResExist("item_template_db","icon"),this.checkIdExist("item_template_db","sellItemId","item_template_db"),this.checkIdExist("item_template_db","common_router_db","item_template_db"),this.checkResExist("daily_lottery_item_db","icon"),cc.log(ul.format("<<<<\u914d\u7f6e\u8868\u9a8c\u8bc1-\u7ed3\u675f>>>> \u7528\u65f6\uff1a%dms\n\n\n",1e3*(i.default.time()-e)))}},t._recursiveForDb=function(e,t){var o=this.getDb(e);if(o){var n=this.dbRules[e];1==n.length?i.default.forEachMap(o,function(e,o){try{t(o)}catch(e){cc.error(e)}}):2==n.length&&i.default.forEachMap(o,function(e,o){i.default.forEachMap(o,function(e,o){try{t(o)}catch(e){cc.error(e)}})})}},t.checkIdExist=function(e,t,o){if(this.getDb(e)){var n=this.getDb(o);n&&this._recursiveForDb(e,function(a){var r=a[t];r&&(n[r]||cc.log(ul.format("[warn] mgrCfg:checkIdExist id not found! srcDb:[%s] %s=[%s] dstDb[%s]",e,t,r,o)))})}},t.checkIdsExistFromGetter=function(e,t,o){if(this.getDb(e)){var n=this.getDb(o);n&&this._recursiveForDb(e,function(a){for(var r=t(a)||[],i=0;i<r.length;i++){var s=r[i];s&&!n[s]&&cc.log(ul.format("[warn] mgrCfg:checkIdExist id not found! srcDb:[%s] id:[%s] dstDb[%s]",e,s,o))}})}},t.checkResExist=function(e,t){this._recursiveForDb(e,function(o){var n=o[t];n&&(cc.loader._getResUuid(n)||cc.log(ul.format("[warn] mgrCfg:checkResExist file not found! db:[%s] %s=[%s]",e,t,n)))})},t.checkResesExistFromGetter=function(e,t){this._recursiveForDb(e,function(o){for(var n=t(o),a=0;a<n.length;a++){var r=n[a];r&&!cc.loader._getResUuid(r)&&cc.log(ul.format("[warn] mgrCfg:checkResExistFromGetter file not found! db:[%s] filename=[%s]",e,r))}})},t.checkItems=function(e,t){this.checkIdsExistFromGetter(e,function(e){for(var t=[],o=0;o<e.length;o++){var n=e[o],a=n[0];n[1];t.push(a)}return t},"item_template_db")},t.get_from_alu_db=function(e,t,o){return this.get("alu_db",e,t,o)},t.forDb_from_alu_db=function(e){this.forDb("alu_db",e)},t.get_from_cop_db=function(e,t,o){return this.get("cop_db",e,t,o)},t.forDb_from_cop_db=function(e){this.forDb("cop_db",e)},t.get_from_cop_process_db=function(e,t,o){return this.get("cop_process_db",e,t,o)},t.forDb_from_cop_process_db=function(e){this.forDb("cop_process_db",e)},t.get_from_achievement_db=function(e,t,o){return this.get("achievement_db",e,t,o)},t.forDb_from_achievement_db=function(e){this.forDb("achievement_db",e)},t.get_from_achievement_target_db=function(e,t,o){return this.get("achievement_target_db",e,t,o)},t.forDb_from_achievement_target_db=function(e){this.forDb("achievement_target_db",e)},t.get_from_spine_db=function(e,t,o){return this.get("spine_db",e,t,o)},t.forDb_from_spine_db=function(e){this.forDb("spine_db",e)},t.get_from_anim_node_db=function(e,t,o){return this.get("anim_node_db",e,t,o)},t.forDb_from_anim_node_db=function(e){this.forDb("anim_node_db",e)},t.get_from_particle_db=function(e,t,o){return this.get("particle_db",e,t,o)},t.forDb_from_particle_db=function(e){this.forDb("particle_db",e)},t.get_from_part_db=function(e,t,o){return this.get("part_db",e,t,o)},t.forDb_from_part_db=function(e){this.forDb("part_db",e)},t.get_from_part_type_db=function(e,t,o){return this.get("part_type_db",e,t,o)},t.forDb_from_part_type_db=function(e){this.forDb("part_type_db",e)},t.get_from_part_subject_tag_db=function(e,t,o){return this.get("part_subject_tag_db",e,t,o)},t.forDb_from_part_subject_tag_db=function(e){this.forDb("part_subject_tag_db",e)},t.get_from_stage_db=function(e,t,o){return this.get("stage_db",e,t,o)},t.forDb_from_stage_db=function(e){this.forDb("stage_db",e)},t.get_from_ad_event_db=function(e,t,o){return this.get("ad_event_db",e,t,o)},t.forDb_from_ad_event_db=function(e){this.forDb("ad_event_db",e)},t.get_from_arena_level_db=function(e,t,o){return this.get("arena_level_db",e,t,o)},t.forDb_from_arena_level_db=function(e){this.forDb("arena_level_db",e)},t.get_from_arena_config_db=function(e,t,o){return this.get("arena_config_db",e,t,o)},t.forDb_from_arena_config_db=function(e){this.forDb("arena_config_db",e)},t.get_from_daily_task_db=function(e,t,o){return this.get("daily_task_db",e,t,o)},t.forDb_from_daily_task_db=function(e){this.forDb("daily_task_db",e)},t.get_from_sign_db=function(e,t,o){return this.get("sign_db",e,t,o)},t.forDb_from_sign_db=function(e){this.forDb("sign_db",e)},t.get_from_online_reward_db=function(e,t,o){return this.get("online_reward_db",e,t,o)},t.forDb_from_online_reward_db=function(e){this.forDb("online_reward_db",e)},t.get_from_suit_db=function(e,t,o){return this.get("suit_db",e,t,o)},t.forDb_from_suit_db=function(e){this.forDb("suit_db",e)},t.get_from_shop_template_db=function(e,t,o){return this.get("shop_template_db",e,t,o)},t.forDb_from_shop_template_db=function(e){this.forDb("shop_template_db",e)},t.get_from_item_template_db=function(e,t,o){return this.get("item_template_db",e,t,o)},t.forDb_from_item_template_db=function(e){this.forDb("item_template_db",e)},t.get_from_item_recover_db=function(e,t,o){return this.get("item_recover_db",e,t,o)},t.forDb_from_item_recover_db=function(e){this.forDb("item_recover_db",e)},t.get_from_role_db=function(e,t,o){return this.get("role_db",e,t,o)},t.forDb_from_role_db=function(e){this.forDb("role_db",e)},t.get_from_reap_db=function(e,t,o){return this.get("reap_db",e,t,o)},t.forDb_from_reap_db=function(e){this.forDb("reap_db",e)},t.get_from_role_base_db=function(e,t,o){return this.get("role_base_db",e,t,o)},t.forDb_from_role_base_db=function(e){this.forDb("role_base_db",e)},t.get_from_guide_db=function(e,t,o){return this.get("guide_db",e,t,o)},t.forDb_from_guide_db=function(e){this.forDb("guide_db",e)},t.get_from_sound_db=function(e,t,o){return this.get("sound_db",e,t,o)},t.forDb_from_sound_db=function(e){this.forDb("sound_db",e)},t.get_from_select_part_db=function(e,t,o){return this.get("select_part_db",e,t,o)},t.forDb_from_select_part_db=function(e){this.forDb("select_part_db",e)},t.get_from_select_part_stage_db=function(e,t,o){return this.get("select_part_stage_db",e,t,o)},t.forDb_from_select_part_stage_db=function(e){this.forDb("select_part_stage_db",e)},t.allDbs={},t.dbRules={},t}(r.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/CfgParser":"CfgParser","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAlu":"mgrAlu"}],mgrChannel:[function(e,t,o){"use strict";cc._RF.push(t,"e3563VNeq9AV5ocUHf7KTAN","mgrChannel");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a,r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrSdk"),l=(e("./mgrGuide"),e("./mgrPlayer")),c=e("../Const"),u=e("./mgrTip"),d=e("../../ulframework/utils/Tools"),p=e("../../ulframework/utils/Timer"),f=e("./mgrDirector"),h=e("./mgrRole"),g=e("./mgrI18n");(function(e){e.toutiao="toutiao",e.douyin="douyin",e.baidu="baidu",e.oppo="oppoqg",e.funheadline="funheadline",e.game4399="4399minigame",e.huawei="huawei",e.iqiyi="iqiyi",e.kaixin="kaixin",e.qq="qq",e.weixin="weixin",e.xiaomi="xiaomiqg",e.uc="uc",e.vivo="vivo",e.debug="debug"})(a||(a={}));var _={},m={},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgSdkShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_SDK_INSTALL_SHORTCUT_RESULT:this.onMsgSdkInstallShortCutResult,MSG_SDK_APP_SHARE_RESULT:this.onMsgSdkAppShareResult,MSG_SDK_WX_GZH_ENTER:this.onMsgWxgzhEnter,MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("channel")||{};this._userOpenVideoRecord=t._userOpenVideoRecord||!0,this._isGetWxgzhReward=t._isGetWxgzhReward||!1,this.bTakedInstallShortCut=t.bTakedInstallShortCut||!1},t.saveRecord=function(){e.saveRecord.call(this);var t={_userOpenVideoRecord:this._userOpenVideoRecord,_isGetWxgzhReward:this._isGetWxgzhReward,bTakedInstallShortCut:this.bTakedInstallShortCut};i.default.setData("channel",t)},t.setChannelName=function(e){this._channelName=e||a.debug},t.isChannel4399=function(){return this._channelName==a.game4399},t.isChannelBaidu=function(){return this._channelName==a.baidu},t.isChannelFunHeadline=function(){return this._channelName==a.funheadline},t.isChannelHeadline=function(){return this.isChannelPlatformToutiao()||this.isChannelPlatformDouyin()},t.isChannelPlatformToutiao=function(){return this._channelName==a.toutiao},t.isChannelPlatformDouyin=function(){return this._channelName==a.douyin},t.isChannelIqiyi=function(){return this._channelName==a.iqiyi},t.isChannelKaixin=function(){return this._channelName==a.kaixin},t.isChannelOppo=function(){return this._channelName==a.oppo},t.isChannelQQ=function(){return this._channelName==a.qq},t.isChannelVivo=function(){return this._channelName==a.vivo},t.isChannelWeixin=function(){return this._channelName==a.weixin},t.isChannelXiaomi=function(){return this._channelName==a.xiaomi},t.isChannelUc=function(){return this._channelName==a.uc},t.isChannelHuawei=function(){return this._channelName==a.huawei},t.canGameInterPush=function(){return!1},t.canGameInterPush1=function(){return!1},t.canGameInterPush2=function(){return!1},t.canGameInterPush3=function(){return!1},t.setInterPushConfig=function(e){for(var t=[],o=0;o<e.length;o++){var n=e[o];n&&t.push({gameId:n.index,url:n.url})}this.interPushConfig=t},t.getInterPushConfig=function(){return this.interPushConfig||[]},t.canSdkInterPush=function(){return this.isChannelHeadline()},t.canChannelOutPush=function(){return this.isChannelBaidu()},t.canShowAdH5=function(){return this.isChannelFunHeadline()},t.canShowFindMe=function(){return!!_[this._channelName]&&this._isSupportFindMinigames},t.getFindMeImage=function(){return _[this._channelName]},t.canAddToMyFavorite=function(){return this.isChannelBaidu()},t.hadGetWxgzhReward=function(){return this._isGetWxgzhReward},t.takeWxgzhReward=function(){this._isNeedAlertWxgzhReward=!1,this._isGetWxgzhReward=!0;return l.default.addItemAmount(c.default.ITEM_ID_GOLD,1e5,"\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1"),this.saveRecord(),1e5},t.isNeedAlertWxgzh=function(){return this._isNeedAlertWxgzhReward},t.onMsgWxgzhEnter=function(e){if(e.bInit)this._isGetWxgzhReward||(this._isNeedAlertWxgzhReward=!0,this.sendMsg("MSG_WX_GZH_ENTER_INIT_ALERT"));else if(!this._isGetWxgzhReward){var t=this.takeWxgzhReward();p.default.callLater(.5,function(){u.default.showMsgTip("\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1 \u91d1\u5e01x"+d.default.formatNumToStr(t))})}},t.setUserOpenVideoRecord=function(e){this._userOpenVideoRecord=!!e,this.saveRecord()},t.getUserOpenVideoRecord=function(){return this._userOpenVideoRecord},t.haveVideoRecord=function(){return"1"==s.default.getCopByKey("b_record_video")&&t._isSupportRecordShare},t.canUseVideoRecord=function(){return this.haveVideoRecord()&&this._userOpenVideoRecord},t.getVideoShareRewardCount=function(){return 30*h.default.getOneMinuteIncome()},t.getVideoShareDesc=function(){return["\u6bcf\u65e5\u524d\u4e24\u6b21\u5206\u4eab\u53ef\u83b7\u5f97","\u91d1\u5e01",this.getVideoShareRewardCount()]},t.onMsgSdkShareVideoResult=function(e){if(e.bSuccessful){if(u.default.showMsgTip("\u5206\u4eab\u6210\u529f"),l.default.getItemAmount(c.default.ITEM_ID_VIDEO_SHARE_COUNT)>0){var t=this.getVideoShareRewardCount();l.default.addItemAmount(c.default.ITEM_ID_VIDEO_SHARE_COUNT,-1,"\u5f55\u5c4f\u5206\u4eab\u6210\u529f"),l.default.addItemAmount(c.default.ITEM_ID_GOLD,t,"\u5f55\u5c4f\u5206\u4eab\u6210\u529f"),u.default.addGotItemTip(c.default.ITEM_ID_GOLD,t,null)}}else u.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t.isOpenPay=function(){return this._isPayEnabled},t.canShare=function(){return!1},t.getShareRewardCount=function(){return 30*h.default.getOneMinuteIncome()},t.getShareDesc=function(){return[g.default.getText("alert.10"),g.default.getText("item_template_db_name.2"),this.getShareRewardCount()]},t.tryShowShare=function(e,t){void 0===t&&(t=null);var o=this.getShareDesc(),n=o[0],a=o[1],r=o[2],i="";i=e?""+e+n+":\n"+a+" "+d.default.formatNumToStr(r):n+":\n"+a+" "+d.default.formatNumToStr(r),u.default.alertPrompt2(g.default.getText("ui.58"),i,g.default.getText("ui.35"),g.default.getText("ui.58"),null,function(){s.default.shareImage("","","",""),t&&t()})},t.tryShowShare2=function(){this.canShare()&&f.default.openDialog("vShareDialog")},t.onMsgSdkShareResult=function(e){if(e.bSuccess){if(u.default.showMsgTip("\u70ab\u8000\u6210\u529f"),l.default.getItemAmount(c.default.ITEM_ID_SHARE_COUNT)>0){l.default.addItemAmount(c.default.ITEM_ID_SHARE_COUNT,-1,"\u5206\u4eab\u6210\u529f");var t=this.getShareRewardCount();l.default.addItemAmount(c.default.ITEM_ID_GOLD,t,"\u5206\u4eab\u6210\u529f"),u.default.addGotItemTip(c.default.ITEM_ID_GOLD,t,null)}}else u.default.showMsgTip("\u70ab\u8000\u5931\u8d25")},t.getInstallShortCutRewardCount=function(){return 2*h.default.getOneHourIncome()},t.isTakedInstallShortCutReward=function(){return this.bTakedInstallShortCut},t.onMsgSdkInstallShortCutResult=function(e){var t=e.code||0,o=e.msg||"";if(o&&(console.log("\u6dfb\u52a0\u5230\u684c\u9762\u5feb\u6377 \u5931\u8d25"),u.default.showMsgTip(o)),!this.bTakedInstallShortCut&&(1==t||2==t)){this.bTakedInstallShortCut=!0,this.saveRecord();var n=this.getInstallShortCutRewardCount();l.default.addItemAmount(c.default.ITEM_ID_GOLD,n,"\u6dfb\u52a0\u5230\u684c\u9762\u5feb\u6377\u65b9\u5f0f\u5956\u52b1"),u.default.addGotItemTip(c.default.ITEM_ID_GOLD,n),this.sendMsg("MSG_SDK_INSTALL_SHORT_CUT_SUC")}},t.getShareImgUrlByIndex=function(e){return(m[this._channelName]||[])[e]},t.onMsgSdkAppShareResult=function(e){e.bSuccessful&&u.default.showMsgTip("\u5e94\u7528\u5206\u4eab\u6210\u529f!!!")},t.getJumpOtherGameRewardCount=function(){return 2*h.default.getOneHourIncome()},t.onMsgSdkJumpOtherGameRewardResult=function(e){var t=e,o=t.bSuccessful;t.rewards;if(o){var n=this.getJumpOtherGameRewardCount();l.default.addItemAmount(c.default.ITEM_ID_GOLD,n,"\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u6210\u529f"),u.default.addGotItemTip(c.default.ITEM_ID_GOLD,n)}},t.isOpenGetFreeGold=function(){return 1==this.isOpenGetFreeGoldInDebug},t._userOpenVideoRecord=!0,t._isGetWxgzhReward=!1,t._isNeedAlertWxgzhReward=!1,t.bTakedInstallShortCut=!1,t._isThirdExit=!1,t._isAbout=!1,t._isMoreGame=!1,t._isULMoreGame=!1,t._isPayEnabled=!1,t._isShareEnabled=!1,t._isUseSdkRank=!1,t._channelName=a.debug,t._isShowUrlAdIcon=!1,t._isSupportRecordShare=!1,t._isSupportClipboardData=!1,t._isSupportInstallShortcut=!1,t._copChannelId="",t._cdkChannelId="",t.interPushConfig=[],t._isSupportFindMinigames=!1,t._isSupportRecommendationBtn=!1,t._isSupportPasterAdv=!1,t.isOpenGetFreeGoldInDebug=!1,t}(r.default);o.default=v,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrRole":"mgrRole","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip"}],mgrCop:[function(e,t,o){"use strict";cc._RF.push(t,"b7f11LUJONC1ZkDAiQLLAgk","mgrCop");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("../../ulframework/utils/Tools"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadLocalCop(),cc.log("mgrCop.onLoad")},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.loadLocalCop=function(){var e={};i.default.forDb("cop_db",function(t,o){e[t]=o.defaultValue}),this.processCop(e),this.localCop=e,cc.log("localCop:",e)},t.processCop=function(e){cc.log("mgrCop.processCop"),i.default.forDb("cop_process_db",function(t,o){var n=e[t];if(null!=n){var a=n.split(o.splitChar)||[];cc.log("  process",t,a);for(var r=0;r<o.outputFieldNames.length;r++){var i=o.outputFieldNames[r],s=a[r];null==s?cc.warn(ul.format("mgrCop.processCop fieldValue not found! index = %d, fieldName = %s",r,i)):(cc.log("  set",i,s),e[i]=s)}}})},t.get=function(e){var t=this.remoteCop[e];return null!=t?t:this.localCop[e]},t.getNumberValue=function(e){var t=this.get(e);if(null==t)return 0;var o=parseFloat(t);return isNaN(o)?0:o},t.getBooleanValue=function(e){var t=this.get(e);return null!=t&&("1"==(t=t.toLowerCase())||"true"==t)},t.getCops=function(){var e={};return 0==s.default.getObjSize(this.localCop)&&this.loadLocalCop(),s.default.forEachMap(this.localCop,function(t,o){e[t]=o}),s.default.forEachMap(this.remoteCop,function(t,o){e[t]=o}),e},t.setRemoteValue=function(e,t){null!=e?(this.remoteCop[e]=t,this.processCop(this.remoteCop)):cc.warn("mgrCop.setRemoteValue key not found!")},t.onReceiveSdkCop=function(e){cc.log("mgrCop.onReceiveSdkCop"),this.remoteCop=JSON.parse(e||"")||{},this.processCop(this.remoteCop)},t.localCop={},t.remoteCop={},t.sdkCop={},t=a([l],t)}(r.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg"}],mgrDailyLottery:[function(e,t,o){"use strict";cc._RF.push(t,"83969jT+MxCYq4N9ewTtLaD","mgrDailyLottery");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrPlayer"),l=e("../../ulframework/utils/Tools"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.getTurnCount=function(){var e=i.default.get("daily_lottery_config_db",1).countItemId;return[s.default.getItemAmount(e),s.default.getRecoverMaxAmount(e)]},t.markTurned=function(){var e=i.default.get("daily_lottery_config_db",1).countItemId;s.default.addItemAmount(e,-1,"\u8f6c\u76d8\u6d88\u8017")},t.getNextTurnIndex=function(){var e=this.getTurnCount(),t=e[0],o=e[1];return Math.min(o,o-t+1)},t.calcResult=function(e){var t=i.default.get("daily_lottery_item_db",e);t||(t=i.default.get("daily_lottery_item_db",1));var o=l.default.calcWheelTarget(t,"weight");return cc.log("result",o),o?o.index:null},t=a([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer"}],mgrDailyTask:[function(e,t,o){"use strict";cc._RF.push(t,"ea1eckjOOtFt486YT9Gq8Yl","mgrDailyTask");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r,i=e("../../ulframework/manager/Manager"),s=e("./mgrCfg"),l=e("../../ulframework/utils/Tools"),c=e("../../ulframework/utils/Timer"),u=e("./mgrRecord"),d=e("./mgrPlayer"),p=e("./mgrTip"),f=e("./mgrRole"),h=e("../Const"),g=cc._decorator.ccclass;(function(e){e[e.CHALLENGE=1]="CHALLENGE",e[e.ROLE_UPGRADE=2]="ROLE_UPGRADE",e[e.HARVEST=3]="HARVEST"})(o.TASK_ID||(o.TASK_ID={})),function(e){e[e.NONE=0]="NONE",e[e.DOING=1]="DOING",e[e.FINISHED=2]="FINISHED",e[e.RECEIVED=3]="RECEIVED"}(r=o.TASK_STATE||(o.TASK_STATE={}));var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),c.default.callLoop(.1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=u.default.getData("dailyTask")||{};this.lastTime=o.lastTime||0,this.bTakedAllFinish=o.bTakedAllFinish||!1;var n=o.recordTasks||{};s.default.forDb_from_daily_task_db(function(e,o){var a=n[o.id]||{},i={id:o.id,state:a.state||r.DOING,count:a.count||0,template:o};t.tasks[o.id]=i})},t.saveRecord=function(){e.saveRecord.call(this);var t={};for(var o in this.tasks)if(this.tasks.hasOwnProperty(o)){var n=this.tasks[o];t[n.id]={state:n.state,count:n.count}}var a={recordTasks:t,lastTime:this.lastTime,bTakedAllFinish:this.bTakedAllFinish};u.default.setData("dailyTask",a)},t.onTimerLoop=function(e){this.tryResetTask()},t.tryResetTask=function(){var e=l.default.time();if(!l.default.isOneDay(e,this.lastTime)){for(var t in this.tasks)if(this.tasks.hasOwnProperty(t)){var o=this.tasks[t];o.count=0,o.state=r.DOING}this.lastTime=e,this.bTakedAllFinish=!1,this.saveRecord()}},t.refreshTask=function(){var e=!1;for(var t in this.tasks)if(this.tasks.hasOwnProperty(t)){var o=this.tasks[t];o.state>r.DOING||o.count>=o.template.targetCount&&(o.state=r.FINISHED,e=!0)}e&&this.saveRecord()},t.simpleRewardFunc=function(){return 10*f.default.getOneMinuteIncome()},t.getTaskIds=function(){var e=[];return s.default.forDb_from_daily_task_db(function(t,o){e.push(o.id)}),e},t.getTaskById=function(e){return this.tasks[e]||null},t.addTaskCount=function(e){var t=this.tasks[e]||null;t&&(t.count>=t.template.targetCount||(t.count++,this.saveRecord(),this.refreshTask()))},t.obtainReward=function(e){var t=this.tasks[e]||null;if(!t)return[];if(t.state!=r.FINISHED)return[];t.state=r.RECEIVED,this.saveRecord();var o=t.template.rewardItemId,n=this.getTaskRewardById(e);return d.default.addItemAmount(o,n,"\u65e5\u5e38\u4efb\u52a1\u53d1\u5956"),this.sendMsg("MSG_TASK_STATE_CHANGED"),[o,n]},t.getBadageCount=function(){var e=0;for(var t in this.tasks){if(this.tasks.hasOwnProperty(t))this.tasks[t].state==r.FINISHED&&e++}return this.canTakeAllFinishReward()&&e++,e},t.getTaskRewardById=function(e){var t=o.getTaskById(e);if(!t)return 0;var n=t.template;if(!n)return 0;var a=this[n.rewardFunc];return a instanceof Function?a.bind(this)():n.rewardAmount},t.getAllTaskState=function(){var e=0,t=0;for(var o in this.tasks){if(this.tasks.hasOwnProperty(o))this.tasks[o].state>=r.RECEIVED&&t++,e++}return[t,e]},t.isTakedAllFinishReward=function(){return this.bTakedAllFinish},t.canTakeAllFinishReward=function(){if(this.bTakedAllFinish)return!1;for(var e in this.tasks){if(this.tasks.hasOwnProperty(e))if(this.tasks[e].state<r.RECEIVED)return!1}return!0},t.getAllFinishReward=function(){return f.default.getOneHourIncome()},t.takeAllFinishReward=function(e){if(void 0===e&&(e=1),!this.canTakeAllFinishReward())return!1;this.bTakedAllFinish=!0,this.saveRecord();var t=this.getAllFinishReward()*e;return d.default.addItemAmount(h.default.ITEM_ID_GOLD,t,"\u9886\u53d6\u5168\u90e8\u6bcf\u65e5\u4efb\u52a1\u5b8c\u6210\u5956\u52b1"),p.default.addGotItemTip(h.default.ITEM_ID_GOLD,t),this.sendMsg("MSG_TASK_STATE_CHANGED"),!0},t.onMsgAdEventSuccessd=function(e){var t=e,n=t.userData;if(n){var a=t.adEventId,r=n.dailyId;if("double_daily"==a){var i=o.obtainReward(r),s=i[0],l=i[1];s&&(d.default.addItemAmount(s,l,"\u6bcf\u65e5\u4efb\u52a1\u53cc\u500d"),p.default.addGotItemTip(s,2*l))}}},t.tasks={},t.bTakedAllFinish=!1,t.lastTime=0,t=o=a([g],t)}(i.default);o.default=_,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrRole":"mgrRole","./mgrTip":"mgrTip"}],mgrDebug:[function(e,t,o){"use strict";cc._RF.push(t,"94b92qCPm9LRpz8RaZNPuEq","mgrDebug");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCop"),s=e("./mgrDirector"),l=e("./mgrTip"),c=e("./mgrGuide"),u=e("./mgrPlayer"),d=e("../Const"),p=e("./mgrPart"),f=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerKeyboardListener(),this.registerListeners({MSG_NETWORK_RESPONSE:this.onMsgNetworkResponse})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onKeyDown=function(e){switch(e){case"a":u.default._items[d.default.ITEM_ID_GOLD]=0;break;case"b":u.default.addItemAmount(d.default.ITEM_ID_GOLD,5e5,"\u6d4b\u8bd5");break;case"ctrl_b":u.default.addItemAmount(d.default.ITEM_ID_GOLD,5e8,"\u6d4b\u8bd5");break;case"c":cc.log("cops",i.default.getCops());break;case"d":case"e":case"f":case"g":break;case"ctrl_g":c.default._debugCancelDebug();break;case"h":case"i":case"j":case"k":case"l":break;case"m":this.bUnlockAllStage=!0,l.default.showMsgTip("\u6240\u6709\u5173\u5361\u5df2\u89e3\u9501");break;case"n":break;case"o":s.default.openDialog("vOfflineDialog",{pastTime:7200,income:1e3});break;case"p":p.default.debugUnlockAllPart(),l.default.showMsgTip("\u6240\u6709\u90e8\u4ef6\u5df2\u83b7\u5f97");break;case"q":case"r":case"s":break;case"t":s.default.enterScene("vDevTestScene")}this.sendMsg("MSG_DEBUG_KEY_DOWN",{keyDesc:e})},t.registerKeyboardListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSystemKeyUp,this)},t.onSystemKeyDown=function(e){var t=e.keyCode;switch(t){case cc.macro.KEY.alt:this.bPressedAlt=!0;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!0;break;case cc.macro.KEY.shift:this.bPressedShift=!0;break;default:var o=this._genKeyDesc(t);this.onKeyDown(o)}},t.onSystemKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.alt:this.bPressedAlt=!1;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!1;break;case cc.macro.KEY.shift:this.bPressedShift=!1}},t._genKeyDesc=function(e){var t="";this.bPressedCtrl&&(t+="ctrl_"),this.bPressedAlt&&(t+="alt_"),this.bPressedShift&&(t+="shift_");for(var o in cc.macro.KEY){if(cc.macro.KEY[o]==e.toString()){t+=o;break}}return t},t.onMsgNetworkResponse=function(e){var t=e;cc.log("onMsgNetworkResponse",t)},t.bPressedCtrl=!1,t.bPressedAlt=!1,t.bPressedShift=!1,t.bUnlockAllStage=!1,t=a([f],t)}(r.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../Const":"Const","./mgrCop":"mgrCop","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrPart":"mgrPart","./mgrPlayer":"mgrPlayer","./mgrTip":"mgrTip"}],mgrDirector:[function(e,t,o){"use strict";cc._RF.push(t,"0aa037Qgl5NHKS0i0g0xTPb","mgrDirector");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/view/DialogBase"),s=e("../Const"),l=e("../../ulframework/utils/Tools"),c=e("../../ulframework/utils/Timer"),u=e("../view/node/vWarpSceneNode"),d=cc._decorator.ccclass,p=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}var r;return n(o,t),r=o,o.processRemoteResLoad=function(){var e=this;if(this.curLoadingRemoteResInfo)cc.log("\u6b63\u5728\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90...: url:"+this.curLoadingRemoteResInfo.url);else if(!(this.RemoteResLoadQueue.length<=0)){this.curLoadingRemoteResInfo=this.RemoteResLoadQueue.shift(),cc.log("\u5f00\u59cb\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90:"+this.curLoadingRemoteResInfo.url);try{window.qg?this.loadRemoteResQg(this.curLoadingRemoteResInfo.url,function(t,o){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return cc.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(o);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}}):cc.loader.load({url:this.curLoadingRemoteResInfo.url,type:"png"},function(t,o){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return cc.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(o);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}})}catch(e){cc.log(e),cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+this.curLoadingRemoteResInfo.url),this.RemoteResLoadQueue.push(this.curLoadingRemoteResInfo),this.curLoadingRemoteResInfo=null}}},o.onLoad=function(){t.onLoad.call(this),cc.view.setResizeCallback(this.onViewResize.bind(this)),cc.log("mgrDirector.onLoad && \u5f00\u542f\u8fdc\u7a0b\u8d44\u6e90\u5904\u7406"),c.default.callLoop(.016,this.processRemoteResLoad.bind(this),!0)},o.loadNode=function(e,t,o){var n="view/"+e;this.loadRes(n,cc.Prefab,function(e,t){if(e)return cc.warn("\u8b66\u544a] mgrDirector.loadNode load prefab:",e),void o(null);var n=cc.instantiate(t);o(n)},t)},o.createView=function(t,o){var n=e(t);if(n){var a=n.default;(o=o||{}).__viewName=t;var r=new a(o);return r.name=t,r}cc.warn("mgrDirector.createView module not found!",t)},o.enterScene=function(e,t){var o=this.createScene();t&&t.resolutionRange&&(o._resolution_range=t.resolutionRange),this.refreshSceneSize(o);var n=o.getChildByName("Canvas");this.createView(e,t).parent=n,cc.director.runSceneImmediate(o),i.default.clearViews()},o.warpSceneWithEffect=function(e,t,o){var n=this,a=this.getRunningSceneCanvas(),s=new cc.Node;s.setContentSize(r.size),l.default.registerTouchHandler(s,function(e){cc.log(" touch mask ")}),a.addChild(s,9999),s.name="__mask";var c=new u.default({fOnFadeInCompleted:function(){var o=n.createScene();t&&t.resolutionRange&&(o._resolution_range=t.resolutionRange),n.refreshSceneSize(o);var a=o.getChildByName("Canvas");c.removeFromParent(),a.addChild(c,1e4),cc.director.runSceneImmediate(o,null,function(){i.default.clearViews(),n.createView(e,t).parent=a})},fOnFadeOutCompleted:function(){var e=r.getRunningSceneCanvas(),t=e.getChildByName("__mask");t&&e.removeChild(t),o instanceof Function&&o()}});a.addChild(c,1e4)},o.createScene=function(){var e=new cc.Scene,t=new cc.Node;return t.setAnchorPoint(.5,.5),t.name="Canvas",t.parent=e,e},o.refreshSceneSize=function(e){var t=(e=e||cc.director.getScene())._resolution_range||s.default.RESOLUTION_RANGE,o=e.getChildByName("Canvas"),n=cc.view.getFrameSize(),a=n.width/n.height,r=t.maxWidth,i=t.minWidth,l=t.maxHeight,c=t.minHeight,u=i,d=c,p=o.getComponent(cc.Canvas);if(p||(p=o.addComponent(cc.Canvas)),a<=i/c)if(a<i/l)u=i,d=l,o.setContentSize(u,d),p.designResolution=cc.size(u,d),o.setPosition(0,0),p.fitHeight=!0,p.fitWidth=!0,cc.view.setDesignResolutionSize(u,d,cc.ResolutionPolicy.EXACT_FIT);else{var f=o.getComponent(cc.Canvas);f||(f=o.addComponent(cc.Canvas)),f.designResolution=cc.size(u,d),f.fitHeight=!1,f.fitWidth=!0,o.setPosition(0,0)}else if(a>r/c)u=r,d=c,o.setContentSize(u,d),p.designResolution=cc.size(u,d),o.setPosition(0,0),p.fitWidth=!0,cc.view.setDesignResolutionSize(u,d,cc.ResolutionPolicy.FIXED_WIDTH);else{var h=o.getComponent(cc.Canvas);h||(h=o.addComponent(cc.Canvas)),h.fitHeight=!0,h.fitWidth=!1,h.designResolution=cc.size(u,d),o.setPosition(0,0)}},o.onViewResize=function(){this.refreshSceneSize(),this.sendMsg("MSG_VIEW_RESIZE")},o.playFadeIn=function(e){var t=r.getRunningSceneCanvas().getChildByName("vWarpSceneNode");t.context={fOnFadeInCompleted:function(){e&&e(),t.playEffectOut()},fOnFadeOutCompleted:function(){}},t.playEffectIn()},o.playFadeOut=function(e){var t=r.getRunningSceneCanvas().getChildByName("vWarpSceneNode");t.context={fOnFadeInCompleted:function(){e&&e(),t.playEffectOut()},fOnFadeOutCompleted:function(){}},t.playEffectIn()},o.openDialog=function(e,t,o,n){if(!i.default.CUR_VIEWS[e]||"vGotItemDialog"==e){var a=this.createView(e,t);if(a instanceof i.default){if(!n)return a.openDialog(o),a;this.playFadeIn(function(){return a.openDialog(o),a})}else cc.warn("mgrDirecotr.openDialog view not a dialog!",e),cc.isValid(a)&&a.destroy();return null}cc.warn("dialog "+e+" have already create")},Object.defineProperty(o,"size",{get:function(){return cc.director.getScene().getChildByName("Canvas").getContentSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(o,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(o,"center",{get:function(){var e=this.size;return cc.v2(e.width/2,e.height/2)},enumerable:!0,configurable:!0}),o.getRunningSceneCanvas=function(){return cc.director.getScene().getChildByName("Canvas")},o.isDeviceOverHeight=function(){var e=cc.view.getFrameSize();return e.width/e.height<.5},o.createSpriteNode=function(e){var t=new cc.Node;return t.addComponent(cc.Sprite).loadSpriteFrame(e),t},o.tryGetRes=function(e,t){return cc.loader.getRes(e,t)},o.loadRes=function(e,t,o,n,a,r){var i=this;void 0!==a&&null!=a||(a=!(!n||!cc.isValid(n)));var s=function(e,t){r&&r(e,t)};if(/http/.test(e)||/https/.test(e))cc.log("\u6dfb\u52a0\u65b0\u7684\u8fdc\u7a0b\u52a0\u8f7d:"+e),this.RemoteResLoadQueue.push({url:e,callback:o,caller:n,bHaveCaller:a});else{var l=t;cc.loader.loadRes(e,l,s,function(r,l){i.__load_res_completeCallback(r,l,e,t,s,o,n,a)})}},o.__load_res_completeCallback=function(e,t,o,n,a,r,i,s){e?(i&&cc.isValid(i)||!s)&&(console.warn("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25:"+o+":",e),this.loadRes(o,n,r,i,s,a)):r(e,t)},o.loadResourceNode=function(e,t){var o,n;e instanceof Array?(o=e[0],n=e[1]):(o=e,n=t);var a=new cc.Node;if(null==o||!n)return cc.warn("mgrDirector.loadResourceNode faild! resType=[%s], resId=[%s].",o,n),a;if(o==s.ResourceType.sprite){var r=this.createSpriteNode(n);r.parent=a,a.nodeSprite=r}return a.__resType=o,a},o.destoryResourceNode=function(){},o.loadRemoteResQg=function(e,t){var o=this;if(this.__cachedRemoteTexture[e])t(null,this.__cachedRemoteTexture[e]);else{var n=new Image,a=function(){n.removeEventListener("load",a),n.removeEventListener("error",r),cc.log("IMAGE \u52a0\u8f7d\u6210\u529f!!",e);var i=new cc.Texture2D;i.initWithElement(n),o.__cachedRemoteTexture[e]=i,t(null,i)},r=function(){n.removeEventListener("load",a),n.removeEventListener("error",r),cc.log("IMAGE \u52a0\u8f7d\u5931\u8d25!!",e),t({error:"error"},null)};n.addEventListener("load",a),n.addEventListener("error",r),n.src=e}},o.RemoteResLoadQueue=[],o.curLoadingRemoteResInfo=null,o.__cachedRemoteTexture={},o=r=a([d],o)}(r.default);o.default=p,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../../ulframework/view/DialogBase":"DialogBase","../Const":"Const","../view/node/vWarpSceneNode":"vWarpSceneNode"}],mgrGuide:[function(e,t,o){"use strict";cc._RF.push(t,"34ba4z71MpL9rGp2+Hmp1Rj","mgrGuide");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=e("../view/node/vGuideView"),u=e("./mgrDirector"),d=e("./mgrTip"),p=e("../Const"),f=e("./mgrI18n"),h=cc._decorator.ccclass,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_GUIDE_POINT:this.onMsgGuidePoint.bind(this),MSG_RECORD_UI_REFRESH:this.onMsgRecordUiRefresh})},t.loadRecord=function(){e.loadRecord.call(this),console.log("mgrGuide loadRecord");for(var t=(i.default.getData("guide")||{}).completedGuideIds||[],o={},n=0;n<t.length;n++)o[t[n]]=!0;this.completedGuideIds=o,this.refreshAvailableGuideIds()},t.saveRecord=function(){e.saveRecord.call(this);var t=[];s.default.forEachMap(this.completedGuideIds,function(e,o){1==o&&t.push(parseInt(e))});var o={completedGuideIds:t};i.default.setData("guide",o)},t.refreshAvailableGuideIds=function(){var e=this,t=[];l.default.forDb("guide_db",function(o,n){var a=parseInt(o);e.completedGuideIds[a]||t.push(a)}),t.sort(),this.availableGuideIds=t,cc.log("refreshAvailableGuideIds",t)},t.onMsgRecordUiRefresh=function(){console.log("mgrGuide onMsgRecordUiRefresh"),this.cancelGuide(),this.forceFinishAllGuides()},t.forceFinishAllGuides=function(){console.log("mgrGuide forceFinishAllGuides");var e={};l.default.forDb("guide_db",function(t,o){var n=parseInt(t);e[n]=!0}),this.completedGuideIds=e,this.saveRecord(),this.refreshAvailableGuideIds()},t.registerGuideNode=function(e,t){var o=this;if(this.registeredNodes[e]!=t)if(cc.isValid(t)){this.registeredNodes[e]&&this.unregisterGuideNode(e),this.registeredNodes[e]=t;var n=new cc.Node;t.addComponent(cc.Component).onDestroy=function(){t.__guide_trigger_node&&(t.__guide_trigger_node=null,o.unregisterGuideNode(e))},n.parent=t,t.__guide_trigger_node=n}else cc.warn(ul.format("mgrGuide.registerGuideNode node is invalid! name = %s.",e))},t.unregisterGuideNode=function(e){var t=this.registeredNodes[e];if(t){var o=t.__guide_trigger_node;cc.isValid(o)&&(o.removeComponent(cc.Component),o.destroy(),t.__guide_trigger_node=null),this.onGuideNodeUnregister(e),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.unregister",e)}),this.registeredNodes[e]=null}else cc.warn(ul.format("mgrGuide.unregisterGuideNode node not found! name = %s.",e))},t.getGuideNode=function(e){var t=this.registeredNodes[e];return cc.isValid(t)?t:null},t.getGuideNodes=function(e){var t=[];if(!e)return t;for(var o=0;o<e.length;o++){var n=e[o],a=this.getGuideNode(n);a&&t.push(a)}return t},t.isGuiding=function(){return console.log("*************\u65b0\u624b\u5f15\u5bfcID\uff1a",this.activeGuideId),cc.isValid(this.guideView)||null!=this.activeGuideId},t.isGuideCompleted=function(e){return 1==this.completedGuideIds[e]},t.cancelGuide=function(){var e=l.default.quietGet("guide_db",this.activeGuideId,this.activeGuideStep);if(e&&e.endMsg.length>=1){var t=e.endMsg,o=t[0],n=t[1];this.sendMsg(o,n)}this.activeGuideId=null,this.activeGuideStep=null,this.bStart=!1,cc.isValid(this.guideView)&&(this.guideView.hideAndRemove(),this.guideView=null)},t.startGuide=function(e,t){this.activeGuideId=e,this.activeGuideStep=t,this.bStart=!0;var o=l.default.get("guide_db",e,t);if(o){var n=this.getGuideNodes(o.nodeNames),a=null,r=p.default.GLOBAL_ORDER_GUIDE;if(!(a=this._searchParentFromCanvas(n[0])))a=cc.director.getScene().getChildByName("Canvas");a.convertToNodeSpace(cc.v2(u.default.width/2,u.default.height/2));0;var i=new c.default({guideId:e,step:t});if(i.parent=a,i.zIndex=r,i.show(),this.guideView=i,o.startMsg.length>=1){var s=o.startMsg,d=s[0],f=s[1];this.sendMsg(d,f)}}},t._searchParentFromCanvas=function(e){if(!cc.isValid(e))return null;for(var t=cc.director.getScene().getChildByName("Canvas"),o=e.parent;o;){if(o==t)return e;o=(e=o).parent}return null},t.completeGuide=function(e,t){var o=l.default.get("guide_db",e);if(!o)return cc.warn(ul.format("mgrGuide.completeGuide guides not found, id = %d.",e)),void this.cancelGuide();if(t>=o.length-1)o[0].bRepeat||(this.completedGuideIds[e]=!0,this.saveRecord(),this.refreshAvailableGuideIds()),this.cancelGuide();else{this.cancelGuide(),this.activeGuideId=e,this.activeGuideStep=t+1,this.bStart=!1;var n=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(n.startTrigger.length<=0){if(this.getGuideNodes(n.nodeNames).length<=0&&n.nodeNames.length>0)return cc.warn("mgrGuide.completeGuide, start next guide, but node not found!",this.activeGuideId,this.activeGuideStep),void this.cancelGuide();this.startGuide(this.activeGuideId,this.activeGuideStep)}}},t.onGuidePoint=function(e,t){this.bDebugCloseGuide||(null!=this.activeGuideId&&null!=this.activeGuideStep&&this._tryStopGuide(e,t),null!=this.activeGuideId&&null!=this.activeGuideStep||this._tryStartGuide(e,t))},t._tryStartGuide=function(e,t){for(var o=0;o<this.availableGuideIds.length;o++)for(var n=this.availableGuideIds[o],a=l.default.get("guide_db",n),r=0;r<a.length;r++){var i=a[r];if(i.bStartStep&&this._checkGuideCanStart(i,e,t))return void this.startGuide(i.id,i.step)}},t._tryStopGuide=function(e,t){var o=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this.bStart){if(this._checkTrigger(o.cancelTrigger,e,t))return void this.cancelGuide();if(this._checkTrigger(o.completeTrigger,e,t)){if(this.completeGuide(this.activeGuideId,this.activeGuideStep),this.activeGuideId&&this.activeGuideStep&&!this.bStart){0;var n=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this._checkGuideCanStart(n,e,t))return void this.startGuide(n.id,n.step)}return}}else if(this._checkGuideCanStart(o,e,t))return void this.startGuide(o.id,o.step)},t._checkTrigger=function(e,t,o){for(var n=function(n){var a=e[n],r=a[0],i=a[1];if(r==t){var l=!0;if(i&&Object.keys(i).length>0&&s.default.forEachMap(i,function(e,t){if(o[e]!=t)return l=!1,!0}),l)return{value:!0}}},a=0;a<e.length;a++){var r=n(a);if("object"==typeof r)return r.value}return!1},t._checkGuideCanStart=function(e,t,o){if(!this._checkTrigger(e.startTrigger,t,o))return!1;if(e.nodeNames.length>0&&this.getGuideNodes(e.nodeNames).length<=0)return!1;return!0},t._debugCancelDebug=function(){this.bDebugCloseGuide=!0,this.cancelGuide(),d.default.showMsgTip(f.default.getText("alert.13"))},t.onGuideNodeUnregister=function(e){var t=this.activeGuideId,o=this.activeGuideStep;if(null!=t&&null!=o)for(var n=l.default.get("guide_db",t,o),a=0;a<n.nodeNames.length;a++){if(n.nodeNames[a]==e)return cc.warn("mgrGuide.onGuideNodeUnregister active guild's node unregister! cancel it!",t,o,e),void this.cancelGuide()}},t.onMsgGuidePoint=function(e){var t=e,o=t.id;this.onGuidePoint(o,t)},t.registeredNodes={},t.bStart=!1,t.bDebugCloseGuide=!1,t.completedGuideIds={},t.availableGuideIds=[],t=a([h],t)}(r.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/node/vGuideView":"vGuideView","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrI18n:[function(e,t,o){"use strict";cc._RF.push(t,"662ddxKV59JVphjqXBIe653","mgrI18n");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("../Const"),i=cc._decorator,s=(i.ccclass,i.property,e("LanguageData")),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.init=function(){e.init.call(this),console.log("mgrI18n.init"),this.defaultLanguage="en",this.loadRecord()},t.onLoad=function(){e.onLoad.call(this)},t._getRecordKey=function(){return r.default.RECORD_DATA_KEY+"_mgrI18n_record"},t.loadRecord=function(){e.loadRecord.call(this),this.recordLanguage=cc.sys.localStorage.getItem(this._getRecordKey()),this._updateLanguage()},t.saveRecord=function(){e.saveRecord.call(this),cc.sys.localStorage.setItem(this._getRecordKey(),this.recordLanguage||"")},t.loadUserRecord=function(){e.loadUserRecord.call(this)},t.saveUserRecord=function(){e.saveUserRecord.call(this)},t._updateLanguage=function(){console.log("mgrI18n._updateLanguage"),console.log("recordLanguage",this.recordLanguage),console.log("sdkLanguage",this.sdkLanguage),console.log("defaultLanguage",this.defaultLanguage),this.recordLanguage?this._innerSetLanguage(this.recordLanguage):this.sdkLanguage?this._innerSetLanguage(this.sdkLanguage):this._innerSetLanguage(this.defaultLanguage)},t._innerSetLanguage=function(e){console.log("mgrI18n._innerSetLanguage",e,this.getLanguage()),this.getLanguage()!=e&&(console.log("  language changed"),this.language=e,s.init(e),s.updateSceneRenderers(),this.sendMsg("MSG_I18N_LANGUAGE_CHANGED"))},t.setLanguage=function(e){this.recordLanguage=e,this.saveRecord(),this._updateLanguage()},t.getLanguage=function(){return this.language},t.setSdkLanguage=function(e){switch(e){case"en-us":this.sdkLanguage="en";break;case"zh":this.sdkLanguage="zhcn";break;case"pt-br":this.sdkLanguage="pt";break;case"vi":this.sdkLanguage="vi";break;case"id":this.sdkLanguage="id";break;case"hi":this.sdkLanguage="hi"}this._updateLanguage()},t.getText=function(e){var t=s.t(e);return t||e},t.trySetLocalizedString=function(e,t){if(cc.isValid(e)){var o=e.getComponent("LocalizedLabel");o||(o=e.addComponent("LocalizedLabel")),o&&(o.dataID=t)}},t.tryLocdLocalizedSpriteFrame=function(e,t){if(cc.isValid(e)){var o=e.getComponent("LocalizedSpriteFixedUrl");o||(o=e.addComponent("LocalizedSpriteFixedUrl")),o&&(o.dataID=t)}},t.hasRecordLanguage=function(){return!!this.recordLanguage},t}(a.default);o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../Const":"Const",LanguageData:"LanguageData"}],mgrNativeAdSdk:[function(e,t,o){"use strict";cc._RF.push(t,"84a16iEKIFOyrHdR5bNIL2L","mgrNativeAdSdk");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a,r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("./mgrSdk"),l=e("./mgrCfg"),c=e("../../ulframework/utils/Tools"),u=e("./mgrAdNative"),d=e("./mgrAd");(function(e){e[e.inVaild=0]="inVaild",e[e.requesting=1]="requesting",e[e.imgLoading=2]="imgLoading",e[e.imgLoadSuccessful=3]="imgLoadSuccessful",e[e.imgLoadFailed=4]="imgLoadFailed",e[e.requestFailed=5]="requestFailed"})(a=o.ENativeAdState||(o.ENativeAdState={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_OPEN_NATIVE_ADV_RESULT:this.onMsgOpenNativeAdvResult.bind(this),MSG_CLICK_NATIVE_ADV_RESULT:this.onMsgClickNativeAdvResult.bind(this),MSG_CLOSE_NATIVE_ADV_RESULT:this.onMsgCloseNativeAdvResult.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.markAdvState=function(e,t){this.cacheNativeStates[e]=t},t.onRequest=function(e){this.markAdvState(e,a.requesting)},t.onRequestSuccessful=function(e){this.markAdvState(e,a.imgLoading)},t.onRequestFailed=function(e){this.markAdvState(e,a.requestFailed)},t.onImgLoadingSuccessful=function(e){this.markAdvState(e,a.imgLoadSuccessful)},t.onImgLoadingFailed=function(e){this.markAdvState(e,a.imgLoadFailed)},t.onNativeAdInvalid=function(e){this.markAdvState(e,a.inVaild)},t.recoverNativeAdState=function(e){this.getNativeDataByNativeType(e)||this.onNativeAdInvalid(e)},t.getNativeAdState=function(e){return this.cacheNativeStates[e]},t.getNativeDataByNativeType=function(e){return this.cacheNativeDatas[e]},t.cleanNativeDataByNativeType=function(e){this.cacheNativeDatas[e]=null,console.log("\u539f\u751f\u7f13\u5b58\u6e05\u9664\u6210\u529f\uff01\uff01\uff01 advId = ",e)},t.onClickNativeAd=function(e,t){var o=this;if(cc.log(t),this.getNativeDataByNativeType(e))if(cc.sys.isMobile){var n={cmd:"/c/clickNativeAdv",data:{advId:e,userData:JSON.stringify(t||{})}};s.default.sendMsgToSdk(n)}else i.default.callLater(.1,function(){var n={code:1,msg:"ok",advId:e,userData:JSON.stringify(t||{})};o.sendMsg("MSG_CLICK_ADV_RESULT",ul.clone(n)),o.sendMsg("MSG_CLICK_NATIVE_ADV_RESULT",ul.clone(n))});else cc.warn(" inbuild sdk: onClickNativeAd: nativeData not found! advId= ",e)},t.onCloseNativeAd=function(e,t){cc.log("inbuild sdk: onCloseNativeAd: advId=",e);var o={cmd:"/c/closeNativeAdv",data:{advId:e,userData:JSON.stringify(t||{})}};s.default.sendMsgToSdk(o)},t._onReceiveNativeData=function(e,t,o){e&&t&&(this.NATIVE_DATA_SERIAL_NUMBER++,t.serialNumber=this.NATIVE_DATA_SERIAL_NUMBER,t.advId=e,this.cacheNativeDatas[e]=t,this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:e,userData:o}))},t.onMsgOpenNativeAdvResult=function(e){cc.log("inbuild sdk: onMsgOpenNativeAdvResult",e);var t=e,o=t.code,n=(t.msg,t.advId),a=JSON.parse(t.userData||"")||{},r=t.nativeData;1==o?(this.onRequestSuccessful(n),this._onReceiveNativeData(n,r,a)):(this.cacheNativeDatas[n]=null,this.onRequestFailed(n),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:n,userData:a}))},t.onMsgClickNativeAdvResult=function(e){var t=e,o=(parseInt(t.code),t.msg,t.advId),n=JSON.parse(t.userData||"")||{};cc.log("inbuild sdk: onMsgClickNativeAdvResult",n),this.sendMsg("MSG_NATIVE_AD_SDK_CLICK_SUCCESS",{advId:o,userData:n}),this.cacheNativeDatas[o]=null,u.default.__invokeRefreshData(n),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:o,userData:n}),this.onCloseNativeAd(o,n)},t.onMsgCloseNativeAdvResult=function(e){var t=e;parseInt(t.code),t.msg,t.advId,JSON.parse(t.userData||"")},t._simulateOpenNativeAdv=function(e,t){var o=this,n=l.default.get("ad_event_db",e);i.default.callLater(c.default.random(1e3,2e3)/1e3,function(){var e=c.default.random(10)-1,a={url:["http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0","http://wx.qlogo.cn/mmopen/Q3auHgzwzM4uUaEQNh72eHUpn1L3Cclvoaf0KAT6SS7sLlziadbzLcicAykx35Dicq0bbVGOVCrSxtB2lQR4SuTuQ/0"][e],title:["\u6d4b\u8bd5","\u6d4b\u8bd5\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u989812412412412","\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898"][e],desc:"\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9"+e,targetTitle:"\u67e5\u770b\u8be6\u60c5"+e},r=d.default.getAdvId(n);if(c.default.random(100)<100){var i={code:1,msg:"ok",advId:r,userData:JSON.stringify(t||{}),nativeData:a};o.sendMsg("MSG_OPEN_ADV_RESULT",ul.clone(i)),o.sendMsg("MSG_OPEN_NATIVE_ADV_RESULT",ul.clone(i))}else{i={code:0,msg:"faild",advId:r,userData:JSON.stringify(t||{})};o.sendMsg("MSG_OPEN_ADV_RESULT",ul.clone(i)),o.sendMsg("MSG_OPEN_NATIVE_ADV_RESULT",ul.clone(i))}})},t.cacheNativeDatas={},t.NATIVE_DATA_SERIAL_NUMBER=0,t.cacheNativeStates={},t}(r.default);o.default=p,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrAd":"mgrAd","./mgrAdNative":"mgrAdNative","./mgrCfg":"mgrCfg","./mgrSdk":"mgrSdk"}],mgrNative:[function(e,t,o){"use strict";cc._RF.push(t,"7b44bW+OKBEzaO/DYUMTOrS","mgrNative");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("../../ulframework/utils/Base64"),l=e("../../ulframework/utils/ULNativeControllerHtml5"),c="org/cocos2dx/javascript/ULNativeController",u="(Ljava/lang/String;)Ljava/lang/String;",d="JAVACALLBACK";function p(e){console.info("on JAVACALLBACK",e);try{var t=s.default.decode(e);m._onNativeCallbackJava(t)}catch(t){cc.warn("JAVACALLBACK decode base64 faild! direct use base64JsonStr"),m._onNativeCallbackJava(e)}}function f(e){console.info("on OCCALLBACK",e);try{var t=s.default.decode(e);m._onNativeCallbackObjc(t)}catch(t){cc.warn("OCCALLBACK decode base64 faild! direct use base64JsonStr"),m._onNativeCallbackObjc(e)}}function h(e){console.info("on ONHTML5CALLBACK",e),m._onNativeCallbackHtml5(e)}var g=cc._decorator,_=g.ccclass,m=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),console.info("mgrNative.onLoad"),window[d]=p,window.OCCALLBACK=f,this.nativeCallbackPending=[],this.bRegisterNativeCallback||(this.bRegisterNativeCallback=!0,this.registerNativeCallback()),i.default.callLoop(1/60,this.onTimer.bind(this),!0)},t.onTimer=function(){var e=this.nativeCallbackPending;for(e.length>0&&console.info("mgrNative.onTimer",e.length);e.length>0;){var t=e.shift();console.info("ready send MSG_NATIVE_CALLBACK"),this.sendMsg("MSG_NATIVE_CALLBACK",{responseData:t})}},t.registerNativeCallback=function(){l.default.isEnabled()?this._registernativeCallbackHtml5():cc.sys.OS_ANDROID==cc.sys.os?this._registerNativeCallbackJava():cc.sys.OS_IOS==cc.sys.os||cc.sys.OS_OSX==cc.sys.os?this._registerNativeCallbackObjc():cc.warn(ul.format("[warn] mgrNative.registerNativeCallback, platform = %s, don't have native controller",cc.sys.os))},t._temp_isH5=function(){return l.default.isEnabled()},t.onNativeCallback=function(e){console.info("onNativeCallback",e),ul.dump(e,"data"),e&&this.nativeCallbackPending.push(e)},t._registerNativeCallbackJava=function(){jsb.reflection.callStaticMethod(c,"setCallFuncName",u,d)},t._registerNativeCallbackObjc=function(){},t._registernativeCallbackHtml5=function(){l.default.init(h),this._callNativeHtml5("initUlsdk",null)},t._onNativeCallbackJava=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),t.text=e}this.onNativeCallback(t)},t._onNativeCallbackObjc=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackObjc jsonStr error!"),t.text=e}this.onNativeCallback(t)},t._onNativeCallbackHtml5=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackJs jsonStr error!"),t.text=e}this.onNativeCallback(t)},t.callNative=function(e,t){return t=t||{},l.default.isEnabled()?this._callNativeHtml5(e,t):cc.sys.OS_ANDROID==cc.sys.os?this._callNativeJava(e,t):cc.sys.OS_IOS==cc.sys.os||cc.sys.OS_OSX==cc.sys.os?this._callNativeObjc(e,t):(cc.warn(ul.format("[warn] mgrNative.callNative, platform = %s, don't have native controller",cc.sys.os)),null)},t._callNativeJava=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod(c,e,u,o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),{error:e}}},t._callNativeObjc=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod("ULNativeController",e+":",o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._callNativeObjc jsonStr error!"),{error:e}}},t._callNativeHtml5=function(e,t){try{var o=JSON.stringify(t),n=l.default[e](o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._callNativeHtml5 jsonStr error!"),{error:e}}},t.nativeCallbackPending=null,t.bRegisterNativeCallback=!1,t=a([_],t)}(r.default));o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Base64":"Base64","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/ULNativeControllerHtml5":"ULNativeControllerHtml5"}],mgrNetwork:[function(e,t,o){"use strict";cc._RF.push(t,"9b767SvZMFC+4wHhZmfMvXC","mgrNetwork");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/network/NetworkManager"),s=e("../../ulframework/network/NetworkAdapterHttpUlServer"),l=e("../../ulframework/network/NetworkAdapterHttp"),c=e("../../ulframework/utils/Timer"),u=e("../Const"),d=e("../../ulframework/utils/Tools"),p=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this);var t=new s.NetworkAdapterHttpUlServer;t.setHost(u.default.SERVER_HOST),t.setUrlFormat(u.default.SERVER_URL_FORMAT),t.setUlServerArg("ultralisk","pc",u.default.SERVER_APP_ID.toString(),"ultralisk"),t.setTimeout(5),this.networkManager=new i.NetworkManager(t),c.default.callLoop(1/60,this.onTimerSpan.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onTimerSpan=function(e){var t=e.span;this.networkManager.update(t)},t.send=function(e,t,o){null==t&&(t={});var n={};n.cmd=e,null!=t&&d.default.forEachMap(t,function(e,t){n[e]=t}),this.networkManager.addTask(n,this.onResponse.bind(this),this.onFaild.bind(this),this.onRequest.bind(this),o)},t.onRequest=function(e){e.isBackgroundEnabled()||this.showWaiting()},t.onResponse=function(e){this.networkManager.getTasks().length<=1&&this.hideWaiting(),this.sendMsg("MSG_NETWORK_RESPONSE",{requestData:e.getRequestData(),responseData:e.getResponseData()})},t.onFaild=function(e){e.isBackgroundEnabled()?this.stopAllTasks():this.showFaild(),this.sendMsg("MSG_NETWORK_FAILD",{requestData:e.getRequestData(),faildMsg:e.getFaildMsg()})},t.stopAllTasks=function(){for(var e=[],t=this.networkManager.getTasks(),o=0;o<t.length;o++){var n=t[o];e.push({requestData:n.getRequestData()})}this.networkManager.stopAllTasks(),this.hideWaiting(),this.hideFaild();for(o=0;o<e.length;o++){var a=e[o];this.sendMsg("MSG_NETWORK_STOP_TASK",a)}},t.retryCurrentTask=function(){this.networkManager.retryCurrentTask(),this.networkManager.getTasks().length>0&&this.showWaiting()},t.showWaiting=function(){this.hideWaiting(),this.hideFaild()},t.hideWaiting=function(){this.sendMsg("MSG_NETWORK_CLOSE_WAITING")},t.showFaild=function(){this.hideWaiting(),this.hideFaild()},t.hideFaild=function(){this.sendMsg("MSG_NETWORK_CLOSE_FAILD")},t.tryCheckNetwork=function(e,t){if(cc.sys.isBrowser)e();else{var o,n=ul.format("http://%s/cc_patch/fake_version.txt","h005up.ultralisk.cn"),a=new l.NetworkAdapterHttp;a.setReceiveCallback(function(t){cc.log("ReceiveCallback"),o&&o.stop(),e&&e()}),a.setFaildCallback(function(e){cc.log("FaildCallback"),o&&o.stop(),t&&t()}),a.send({url:n}),(o=new c.default(.1,50,function(e){cc.log("mgrNetwork.tryCheckNetwork onTimerLoop",e.count),e.count>=50&&t&&t()})).start()}},t=a([p],t)}(r.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/network/NetworkAdapterHttp":"NetworkAdapterHttp","../../ulframework/network/NetworkAdapterHttpUlServer":"NetworkAdapterHttpUlServer","../../ulframework/network/NetworkManager":"NetworkManager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const"}],mgrOfflineArena:[function(e,t,o){"use strict";cc._RF.push(t,"cdc4cM4KB1PYLuG5OnbEJEc","mgrOfflineArena");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("./mgrRecord"),l=e("../struct/sAvatar"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("../../ulframework/utils/Tools"),p=e("../Const"),f=e("./mgrTip"),h=e("./mgrAchievement"),g=e("./mgrPart"),_=e("./mgrI18n"),m=e("./mgrAd"),v=cc._decorator,y=v.ccclass,C=(v.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){this.loadRecord(),i.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.registerListeners({MSG_I18N_LANGUAGE_CHANGED:this.updataUniqueRandomName})},t.loadRecord=function(){var e=s.default.getData("offline_arena")||{};if(this.freeCountCostTime=e.freeCountCostTime||0,this.pvpDatas=e.pvpDatas||[],this.seasonBeginTime=e.seasonBeginTime,this.seasonEndTime=e.seasonEndTime,this.seasonUpdateWeek=e.seasonUpdateWeek,this.lastSeasonScore=e.lastSeasonScore,this.lastSeasonRewardReceiveIndexs=e.lastSeasonRewardReceiveIndexs||{},this.lastFreeChangeEnemyTime=e.lastFreeChangeEnemyTime,this.curSeasonRewardReceiveIndexs=e.curSeasonRewardReceiveIndexs||{},this.stageData=null,e.stageData){var t=new l.default;t.fillBySerializeText(e.stageData.enemyAvatarText),this.stageData={stageId:e.stageData.stageId,enemyStructAvatar:t,enemyName:e.stageData.enemyName,enemyLevel:e.stageData.enemyLevel,enemyScore:e.stageData.enemyScore}}this.tryUpdateRank()},t.saveRecord=function(){var e=null;cc.log(this.stageData),this.stageData&&(e={enemyAvatarText:this.stageData.enemyStructAvatar.serializeToText(),enemyName:this.stageData.enemyName,enemyLevel:this.stageData.enemyLevel,enemyScore:this.stageData.enemyScore,stageId:this.stageData.stageId});var t={freeCountCostTime:this.freeCountCostTime,pvpDatas:this.pvpDatas,seasonBeginTime:this.seasonBeginTime,seasonEndTime:this.seasonEndTime,seasonUpdateWeek:this.seasonUpdateWeek,lastSeasonScore:this.lastSeasonScore,lastSeasonRewardReceiveIndexs:this.lastSeasonRewardReceiveIndexs,curSeasonRewardReceiveIndexs:this.curSeasonRewardReceiveIndexs,stageData:e,lastFreeChangeEnemyTime:this.lastFreeChangeEnemyTime};s.default.setData("offline_arena",t)},t.onTimerLoop=function(){this.refreshFreeCount()},t.getMaxLevel=function(){return ul.length(c.default.getDb("arena_level_db"))},t.getPlayerData=function(){for(var e=u.default.getUid(),t=0;t<this.pvpDatas.length;t++){var o=this.pvpDatas[t];if(o.uid==e)return o.rank=t+1,o}},t.getPlayerLevel=function(){var e=this.getPlayerData();return e&&e.score||1},t.getStandLevel=function(){var e=this.getPlayerLevel();return ul.clamp(e,1,25)},t.getPvpDatas=function(){for(var e=0;e<this.pvpDatas.length;e++){this.pvpDatas[e].rank=e+1}return this.pvpDatas},t.getRandomPlayer=function(){},t.getLastSeasonRecord=function(){return[this.lastSeasonScore,this.lastSeasonRewardReceiveIndexs]},t.isSeasonRewardCanReceive=function(e){if(!this.lastSeasonScore)return!1;var t=c.default.get_from_arena_level_db(this.lastSeasonScore);return!this.lastSeasonRewardReceiveIndexs[e]&&!!t.seasonRewardIndxs[e-1]},t.isSeasonRewardReceived=function(e){if(!this.lastSeasonScore)return!1;var t=c.default.get_from_arena_level_db(this.lastSeasonScore);return!(!this.lastSeasonRewardReceiveIndexs[e]||!t.seasonRewardIndxs[e-1])},t.receiveSeasonReward=function(e){if(this.isSeasonRewardCanReceive(e)){var t=c.default.get_from_arena_level_db(this.lastSeasonScore).seasonRewards[e-1],o=t[0],n=t[1],a=c.default.get_from_item_template_db(o);if(a.flag==p.default.ITEM_FLAG_CHEST)for(var r=a.data.rewards,i=0;i<r.length;i++)for(var s=r[i],l=u.default.openItemBox(s),d=0;d<l.length;d++){var h=l[d],g=h[0],_=h[1];u.default.addItemAmount(g,_,"\u7cbe\u7075\u5723\u6bbf\u6bb5\u4f4d\u5956\u52b1"),f.default.addGotItemTip(g,_)}else u.default.addItemAmount(o,n,"\u7cbe\u7075\u5723\u6bbf\u6bb5\u4f4d\u5956\u52b1"),f.default.addGotItemTip(o,n);this.lastSeasonRewardReceiveIndexs[e]=!0,this.saveRecord()}},t.markLastSeasonReceived=function(e){this.lastSeasonRewardReceiveIndexs[e]=!0,this.saveRecord()},t.hadRewardCanReceive=function(){for(var e=this.getPlayerLevel(),t=1;t<=e;t++){var o=c.default.get_from_arena_level_db(t);if(o&&(o.havReward&&!this.curSeasonRewardReceiveIndexs[t]))return!0}return!1},t.isCurSeasonRewardCanReceive=function(e){return!(this.getPlayerLevel()<e)&&!this.curSeasonRewardReceiveIndexs[e]},t.isCurSeasonRewardReceived=function(e){return!!this.curSeasonRewardReceiveIndexs[e]},t.receiveCurSeasonReward=function(e){if(this.isCurSeasonRewardCanReceive(e)){var t=c.default.get_from_arena_level_db(e).seasonRewards[0],o=t[0],n=t[1];u.default.addItemAmount(o,n,"\u7cbe\u7075\u5723\u6bbf\u6bb5\u4f4d\u5956\u52b1"),f.default.addGotItemTip(o,n),this.curSeasonRewardReceiveIndexs[e]=!0,this.sendMsg("MSG_SEASON_REWARD_RECEIVED"),this.saveRecord()}},t.join=function(e,t,o){var n=u.default.getUid(),a=u.default.getName(),r=this.getPlayerData(),i=r&&r.score||1,s=c.default.getDb("arena_level_db"),l=ul.length(s);if(cc.log("join",e,i,l,r),u.default.addItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT,-1,"\u7cbe\u7075\u5723\u6bbf\u53c2\u8d5b\u6d88\u8017"),e)i=ul.clamp(i+1,1,l),this.faildCount=0;else{this.faildCount++;var f=c.default.get_from_arena_level_db(i);this.faildCount>=f.dropFaildCount?(this.faildCount=0,--i>l&&(i=l),i<1&&(i=1),cc.log("\u964d\u7ea7")):cc.log("\u6bb5\u4f4d\u4fdd\u62a4")}this.clearStageData(),u.default.addItemAmount(p.default.ITEM_ID_ARENA_JOIN_COUNT,1,"\u7edf\u8ba1"),e&&u.default.addItemAmount(p.default.ITEM_ID_ARENA_WIN_COUNT,1,"\u7edf\u8ba1"),this.sendMsg("MSG_ARENA_COUNT_CHANGED");for(var h=this.pvpDatas,g=h.length-1;g>=0;g--){if(h[g].uid==n){h.splice(g,1);break}}h.push({uid:n,name:a,data:o.serializeToText(),score:i,stageId:t,rank:null}),this.pvpDatas=d.default.sortArrayByField(this.pvpDatas,"-score"),this.saveRecord()},t.clearStageData=function(){this.stageData=null,this.saveRecord()},t.getOrCreateStageData=function(){var e=_.default.getLanguage(),t=this.stageData;if(!t){var o=this.getPlayerLevel(),n=this.getMaxLevel(),a=ul.clamp(d.default.random(-2,2)+o,1,n),r=this.createRandomStageId(),i=this.createRandomStructAvatar(a,r)[0],s=c.default.get_from_stage_db(r),l=g.default.calcGrade(s,i);t={stageId:r,enemyName:u.default.calcRandomName(e),enemyLevel:a,enemyStructAvatar:i,enemyScore:l},cc.log("\u968f\u673a\u751f\u6210stageData"),this.stageData=t,this.saveRecord()}return t},t.getFreeChangeEnemyRemainTime=function(){var e=this.lastFreeChangeEnemyTime||0,t=c.default.get_from_arena_config_db(1);return Math.max(0,e+t.freeChangeEnemyGap-d.default.time())},t.markFreeChangeEnemy=function(){this.lastFreeChangeEnemyTime=d.default.time(),this.saveRecord()},t.getAchievementBadgeCount=function(){var e=c.default.get_from_arena_config_db(1);return h.default.getAchievementCanReceiveCount(e.achievementCategory)},t.getSeasonRewardBadgeCount=function(){for(var e=0,t=1;t<=4;t++)this.isSeasonRewardCanReceive(t)&&e++;return e},t.getFreeCountBadgeCount=function(){var e=this.getFreeCount(),t=e[0];e[1];return t},t.getAllBadgeCount=function(){var e=0;return e+=this.hadRewardCanReceive()?1:0,e+=this.getFreeCountBadgeCount(),e+=m.default.getAdEventRemainCount("free_challenge")},t.getFreeCount=function(){return[u.default.getItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT),u.default.getItemAmount(p.default.ITEM_ID_ARENA_FREE_MAX_COUNT)]},t.refreshFreeCount=function(){var e=this.freeCountCostTime,t=this.getFreeCount(),o=t[0],n=t[1],a=d.default.time();if(n<=o)0!=this.freeCountCostTime&&(this.freeCountCostTime=0,this.saveRecord());else{if(a<e&&(e=a,this.freeCountCostTime=e,this.saveRecord()),e<=0){if(n<=o)return;e=a,this.freeCountCostTime=e,this.saveRecord()}var r=a-e,i=this._getFreeCountRecoverTime(),s=Math.floor(r/i);s<=0||(e+=s*i,n<=(o+=s)&&(o=Math.min(o,n),e=0),u.default._setItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT,o),this.freeCountCostTime=e,this.saveRecord(),cc.log("mgrOfflineArena.refreshFreeCount finish",o,n,e))}},t.getFreeCountRecoverRemainTime=function(){var e=this.freeCountCostTime;if(e<=0)return null;var t=d.default.time()-e,o=this._getFreeCountRecoverTime();return o<t?0:o-t},t._getFreeCountRecoverTime=function(){return c.default.get_from_arena_config_db(1).countRecoverTime},t.tryUpdateRank=function(e){this.seasonBeginTime||this.startSeason(),d.default.time()>this.seasonEndTime&&this.startSeason();var t=new Date(1e3*d.default.time()).getDay();t=e||t,cc.log("tryUpdateRank"),cc.log("  self.seasonUpdateWeek",this.seasonUpdateWeek),cc.log("  week",t);var o=!1,n=c.default.get_from_arena_config_db(1);if(this.seasonUpdateWeek<t)for(var a=1;a<=t-this.seasonUpdateWeek;a++){cc.log("do daily");for(var r=0;r<this.pvpDatas.length;r++){if((s=this.pvpDatas[r]).uid!=u.default.getUid())try{this.doRandomAction(s)}catch(e){cc.error(e)}}for(var i=1;i<=d.default.random(n.dailyInitCountMin,n.dailyInitCountMax);i++)try{this.pvpDatas.push(this.createRandomData())}catch(e){cc.error(e)}}this.seasonUpdateWeek=t,o=!0;for(r=0;r<this.pvpDatas.length;r++){var s=this.pvpDatas[r];try{if(!c.default.get_from_stage_db(s.stageId)){var l=this.createRandomStageId(),p=this.createRandomStructAvatar(s.score,l)[0];s.data=p.serializeToText(),s.stageId=l}}catch(e){cc.error(e)}}var f=d.default.sortArrayByField(this.pvpDatas,"-score"),h=[];for(a=f.length-1;a>=100;a--){f[a].uid!=u.default.getUid()&&(h.push(a),o=!0)}for(r=0;r<h.length;r++){a=h[r];f.splice(a,1)}this.pvpDatas=f,o&&this.saveRecord()},t.doRandomAction=function(e){var t=e.score,o=d.default.getObjSize(c.default.getDb("arena_level_db")),n=c.default.get_from_arena_level_db(t);if(!n){var a=d.default.random(n.offlineDailyLevelOffsetMin,n.offlineDailyLevelOffsetMax),r=ul.clamp(t+a,1,o);if(t!=r){var i=this.createRandomStageId(),s=this.createRandomStructAvatar(r,i)[0];e.score=r,e.stageId=i,e.data=s.serializeToText()}}},t.stopSeason=function(){var e=this.getPlayerData();e?(this.lastSeasonScore=e.score,this.bLastSeasonRewardReceived=!1):(this.lastSeasonScore=null,this.bLastSeasonRewardReceived=!1),this.lastSeasonRewardReceiveIndexs={},this.curSeasonRewardReceiveIndexs={},this.pvpDatas=[],this.seasonBeginTime=null,this.seasonUpdateWeek=null,this.saveRecord()},t.startSeason=function(){this.stopSeason();d.default.time();var e=new Date,t=e.getDay(),o=new Date;o.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()-(t-1)),o.setHours(0,0,0);var n=new Date;n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()-(t-1)+7),n.setHours(0,0,0),cc.log("########### start season ###########"),cc.log("beginTime",o),cc.log("endTime",n);for(var a=c.default.get_from_arena_config_db(1),r=1;r<=d.default.random(a.dailyInitCountMin,a.dailyInitCountMax);r++)this.pvpDatas.push(this.createRandomData());this.pvpDatas=d.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonBeginTime=o.getTime()/1e3,this.seasonEndTime=n.getTime()/1e3,this.seasonUpdateWeek=1,this.saveRecord()},t.createRandomData=function(){var e=this.createRandomInitLevel(),t=ul.format("random_%06d",this.pvpDatas.length+1),o=this.createUniqueRandomName(),n=e,a=this.createRandomStageId();return{uid:t,name:o,data:this.createRandomStructAvatar(e,a)[0].serializeToText(),score:n,stageId:a,rank:0}},t.createUniqueRandomName=function(){for(var e=_.default.getLanguage(),t={},o=0;o<this.pvpDatas.length;o++){t[this.pvpDatas[o].name]=!0}for(;;){var n=u.default.calcRandomName(e);if(!t[n])return n}},t.updataUniqueRandomName=function(){for(var e=0;e<this.pvpDatas.length;e++)this.pvpDatas[e].name=this.createUniqueRandomName();this.clearStageData()},t.createRandomInitLevel=function(){var e=[];c.default.forDb_from_arena_level_db(function(t,o){e.push(o)});var t=d.default.calcWheelTarget(e,"offlineInitWeight");return t?t.level:1},t.createRandomStageId=function(){var e=c.default.get_from_arena_config_db(1).stageIds;return e[d.default.random(e.length)-1]},t.createRandomStructAvatar=function(e,t){var o=c.default.get_from_arena_level_db(e),n=c.default.get_from_stage_db(t),a=new l.default;if(!o||!n)return cc.log("mgrOfflineArena.createRandomStructAvatar arenaLevel or stage not found!",e,t),[a,0];var r=o.offlineScoreRangeMin,i=o.offlineScoreRangeMax,s=(r+i)/2,u=ul.clone(n.gradeWeights),p=0;for(var f in u)if("13"!=f){var h=null;if(u[f].bRequired){for(var _=[],m=null,v=1e7,y=this.getPartIdsByPartType(f),C=0;C<y.length;C++){var b=y[C];if((R=this.calcPartScore(t,b))>=r&&R<=i)_.push(b);else{var S=Math.abs(s-R);S<v&&(v=S,m=b)}}h=_[d.default.random(_.length)-1]||m}else if(Math.random()>=.5){for(_=[],y=this.getPartIdsByPartType(f),C=0;C<y.length;C++){var R;b=y[C];(R=this.calcPartScore(t,b))>=r&&R<=i&&_.push(b)}_.length>0&&(h=_[d.default.random(_.length)-1])}if(h&&(p++,a.onCmd("CMD_AVATAR_PART_REPLACE",{partType:f,partId:h})),p>=12)break}return[a,g.default.calcGrade(n,a).grade]},t.calcPartScore=function(e,t){var o=this.PART_SCORE_CACHE[e];o||(o={},this.PART_SCORE_CACHE[e]=o);var n=o[t];if(!n){var a=c.default.get_from_stage_db(e).gradeIds,r=c.default.get_from_part_db(t);if(r&&!r.bIgnoreInGrade){for(var i=0,s=0;s<a.length;s++){i+=r[a[s]]||0}n=i/a.length}else n=0;o[t]=n}return n},t.getPartIdsByPartType=function(e){var t=this.PART_ID_BY_PART_TYPE_CACHE[e];if(!t){t=[];var o=c.default.getDb("part_db");for(var n in o)if(o.hasOwnProperty(n)){var a=o[n];a.bIgnoreInGrade||a.type!=e||t.push(parseInt(n))}this.PART_ID_BY_PART_TYPE_CACHE[e]=t}return t},t.freeCountCostTime=null,t.pvpDatas=[],t.seasonBeginTime=null,t.seasonEndTime=null,t.seasonUpdateWeek=null,t.lastSeasonScore=null,t.lastSeasonRewardReceiveIndexs={},t.faildCount=0,t.lastFreeChangeEnemyTime=null,t.stageData=null,t.bLastSeasonRewardReceived=!1,t.curSeasonRewardReceiveIndexs={},t.PART_SCORE_CACHE={},t.PART_ID_BY_PART_TYPE_CACHE={},t=a([y],t)}(r.default));o.default=C,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAvatar":"sAvatar","./mgrAchievement":"mgrAchievement","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPart":"mgrPart","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrOfflinePartRank:[function(e,t,o){"use strict";cc._RF.push(t,"a4c9exbzN1LLYaVEkUGLsHw","mgrOfflinePartRank");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),r=e("../../ulframework/utils/Tools"),i=e("./mgrPlayer"),s=e("./mgrRecord"),l=e("./mgrOfflineArena"),c=e("./mgrPart"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.tryUpdateDatas()},t.loadRecord=function(){e.loadRecord.call(this);var t=s.default.getData("offline_part_rank")||{};this._partRankDatas=t._partRankDatas||{},this._lastRefreshTime=t._lastRefreshTime||0,this.registerListeners({MSG_I18N_LANGUAGE_CHANGED:this.updataName})},t.saveRecord=function(){e.saveRecord.call(this);var t={_partRankDatas:this._partRankDatas,_lastRefreshTime:this._lastRefreshTime};s.default.setData("offline_part_rank",t)},t.tryUpdateDatas=function(){var e=r.default.time();if(!r.default.isOneDay(e,this._lastRefreshTime)){for(var t=l.default.getPvpDatas(),o=c.default.getMaxPartNum(),n=0;n<t.length;n++){var a=t[n],i=this._partRankDatas[a.uid];if(i)i.partNum+=r.default.random(0,1),i.partNum>o&&(i.partNum=o);else{var s=this.getInitPartNum();a.rank<100&&(s+=100-a.rank+r.default.random(-1,1)),s>o&&(s=o),i={uid:a.uid,name:a.name,data:a.data,partNum:s,rank:0},this._partRankDatas[a.uid]=i}}this.updateOwnData(),this._lastRefreshTime=e,this.saveRecord()}},t.updataName=function(){for(var e=l.default.getPvpDatas(),t=0;t<e.length;t++){var o=e[t];this._partRankDatas[o.uid].name=o.name}this.updateOwnData(),this.saveRecord()},t.getInitPartNum=function(){return r.default.random(50,100)},t.updateOwnData=function(){var e=i.default.getUid(),t=this._partRankDatas[e];t?(t.name=i.default.getName(),t.data=c.default.getLastClothes(),t.partNum=c.default.getOwnPartNum()):(t={uid:e,name:i.default.getName(),data:c.default.getLastClothes(),partNum:c.default.getOwnPartNum(),rank:0},this._partRankDatas[e]=t),this.saveRecord()},t.getAllDatas=function(){var e=[];for(var t in this._partRankDatas){var o=this._partRankDatas[t];e.push(o)}e=r.default.sortArrayByField(e,"-partNum");for(var n=0;n<e.length;n++){if((o=e[n]).rank=n+1,o.uid==i.default.getUid()&&o.rank>100){var a=e[99].partNum-o.partNum;o.rank=r.default.random(1e3,1500)*a}}return e},t.getOwnData=function(){var e=i.default.getUid();return this._partRankDatas[e]},t._partRankDatas={},t._lastRefreshTime=0,t}(a.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrOfflineArena":"mgrOfflineArena","./mgrPart":"mgrPart","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrOnline:[function(e,t,o){"use strict";cc._RF.push(t,"84248DQsWxAYIkRpTfWgzzj","mgrOnline");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../Const"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("../../ulframework/utils/Timer"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),d.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("online")||{};if(this.signedDays=t.signedDays,this.startSignDate=t.startSignDate||0,this.signedDay=t.signedDay||0,this.lastSignTime=t.lastSignTime||0,!this.signedDays){var o={},n=c.default.getDb("online_reward_db")||{};for(var a in n)o[a]={day:1,index:1,signTime:0};this.signedDays=o}},t.saveRecord=function(){e.saveRecord.call(this);var t={signedDays:this.signedDays,startSignDate:this.startSignDate,signedDay:this.signedDay,lastSignTime:this.lastSignTime};i.default.setData("online",t)},t.refreshDailyData=function(){if(!l.default.isOneDay(l.default.time(),this.lastSignTime)){this.lastSignTime=l.default.time();var e=!0;if(this.signedDay>=1)o.getSignIndex(this.signedDay)<=1&&(e=!1);e&&(this.signedDay=(this.signedDay||0)+1),this.sendMsg("MSG_ONLINE_DAILY_INFO_REFRESHED"),this.saveRecord()}},t.onTimerLoop=function(){this.refreshDailyData()},t.hasCanRewardSign=function(){return(o.getState()||s.OnlineState.signed)==s.OnlineState.canSign},t.getFormatedTime=function(e){var t=Math.floor(e/60/60),o=Math.floor(e%3600/60),n=e%60;return ul.format("%d:%02d:%02d",t,o,n)},t.getState=function(e){var t=e||this.getSignDay(),o=this.getSignIndex(t),n=this.signedDays[t];if(!n)return s.OnlineState.signOver;var a=n.signTime,r=c.default.get("online_reward_db",t)||{};for(var i in r){var u=r[i];if(u.index==o&&u.day==t)return l.default.time()-a>=u.rewardGap?s.OnlineState.canSign:s.OnlineState.waitGap}return s.OnlineState.signOver},t.getSignDay=function(){return this.signedDay||1},t.getSignIndex=function(e){var t=this.signedDays[e||this.getSignDay()];return t?t.index:0},t.canReSign=function(e){var t=c.default.get("online_reward_db",e)||{},o=this.signedDays[e];if(!o)return!1;var n=o.index;for(var a in t){if(n<=t[a].index)return!0}return!1},t.sign=function(e){var t={bSuccessd:!1};if(this.getState()!=s.OnlineState.canSign&&!e)return t;var o=e||this.getSignDay(),n=this.getSignIndex(e),a=c.default.get("online_reward_db",o,n-1);if(!a)return t;if(0==this.startSignDate&&(this.startSignDate=l.default.time()),!this.signedDays[o])return t;this.signedDays[o].index=this.signedDays[o].index+1,this.signedDays[o].signTime=l.default.time(),e&&e!=this.getSignDay()||(this.lastSignTime=l.default.time()),this.saveRecord();var r=a.rewardItemId,i=a.rewardAmount;return t.bSuccessd=!0,t.rewardItemId=r,t.rewardAmount=i,t},t.getRemainTime=function(){if(this.getState()!=s.OnlineState.waitGap)return 0;var e=this.getSignDay(),t=this.getSignIndex(),o=this.signedDays[e];if(!o)return 0;var n=o.signTime,a=c.default.get("online_reward_db",e)||{};for(var r in a){var i=a[r];if(i.index==t)return i.rewardGap+n-l.default.time()}return 0},t.getRemainTimeStr=function(){var e=this.getRemainTime();return 0==e?"":l.default.formatTime(e,"%M:%S")},t.buildSignLotteryResult=function(){var e=[];return c.default.forDb("sign_lottery_db",function(t,o){var n={cost:[],rewards:[]};n.cost[0]=o.costItemId,n.cost[1]=o.costAmount;for(var a=0;a<o.rewardBoxIds.length;a++)for(var r=o.rewardBoxIds[a],i=u.default.openItemBox(r),s=0;s<i.length;s++)n.rewards.push(i[s]);e.push(n)}),e},t.getBadgeCout=function(){return o.getState()==s.OnlineState.canSign?1:0},t.signedDay=null,t.signedIndex=null,t.lastSignTime=null,t.signedDays={},t.startSignDate=0,t=o=a([f],t)}(r.default));o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrPart:[function(e,t,o){"use strict";cc._RF.push(t,"d1688FzG4tGob3MB6kUv4Cn","mgrPart");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrRecord"),l=e("../Const"),c=e("./mgrTip"),u=e("../../ulframework/utils/Tools"),d=e("./mgrPlayer"),p=e("./mgrSign"),f=e("./mgrShop"),h=e("./mgrAd"),g=e("./mgrDirector"),_=e("./mgrGuide"),m=e("./mgrOfflinePartRank"),v=e("./mgrRole"),y=e("./mgrI18n"),C=cc._decorator.ccclass,b="free_exchange",S="wrap_suit_free",R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.lastTrigSomuchGold=u.default.time(),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=s.default.getData("part")||{};this.lastClothes=o.lastClothes||"",this.touchedParts=o.touchedParts||[],this.freeExchangeTimeDic=o.freeExchangeTimeDic||{},this.suitRewardTaked=o.suitRewardTaked||null,this.suitRewardTaked||(this.suitRewardTaked={},i.default.forDb_from_suit_db(function(e,o){t.suitRewardTaked[o.id]=!1}))},t.saveRecord=function(){e.saveRecord.call(this);var t={lastClothes:this.lastClothes,touchedParts:this.touchedParts,freeExchangeTimeDic:this.freeExchangeTimeDic,suitRewardTaked:this.suitRewardTaked};s.default.setData("part",t)},t.setLastClothes=function(e){this.lastClothes=e||"",this.saveRecord()},t.getLastClothes=function(){return this.lastClothes},t.getPartTypeListData=function(){var e=[];return i.default.forDb_from_part_type_db(function(t,o){o.listOrder&&e.push(o)}),e=u.default.sortArrayByField(e,"listOrder")},t.getPartIdListByType=function(e){var t=[];if(!e)return t;var o=[];i.default.forDb_from_part_db(function(t,n){n.type!=e||n.bIgnoreInGrade||o.push({id:n.id,isOwn:d.default.getItemAmount(n.id)>0?1:0})}),o=u.default.sortArrayByField(o,["-isOwn","id"]);for(var n=0;n<o.length;n++){var a=o[n];t.push(a.id)}return t},t.getTypeHadNews=function(e){var t=this;if(e){var o=!1;return i.default.forDb_from_part_db(function(n,a){if(a.type==e&&!a.bIgnoreInGrade&&d.default.getItemAmount(a.id)>0&&t.isNewPart(a.id))return o=!0,!0}),o}},t.onMsgAdEventSuccessd=function(e){var t=e,n=t.userData;if(n){var a=t.adEventId;if("free_make"==a);else if(a==b){var r=n.suitId;this.lastFreeExchangeTime=u.default.time(),o.randomExchangePart(r,!0)}else if(a==S){r=n.suitId;c.default.showMsgTip(y.default.getText("msg.2")),this.addEchangeChange(r)}}},t.createResNode=function(e,t){var o=new cc.Node;switch(e){case l.ResourceType.sprite:var n=o.addComponent(cc.Sprite);n.spriteFrame=null,n.loadSpriteFrame(t),o.sprite=n;break;default:return null}return o.__res_type=e,o.__res_id=t,o},t.removeResNode=function(e){switch(e.__res_type){case l.ResourceType.sprite:}e.removeFromParent(),e.destroy()},t.debugUnlockAllPart=function(){i.default.forDb_from_part_db(function(e,t){var o=t.id;d.default.getItemAmount(o)<=0&&d.default.addItemAmount(o,1,"\u6d4b\u8bd5")})},t.calcGrade=function(e,t){var o=this._calcPartScores(e.gradeIds,t.allParts),n=0,a=0;for(var r in e.gradeWeights){var i=e.gradeWeights[r],s=i.weight,l=i.bRequired,c=o[r];c?(n+=c*s,a+=s):l&&(a+=s)}var u=0;return a>0&&(u=Math.floor(n/a)),{grade:u+=e.scoreOffset,report:{gradeIds:e.gradeIds,gradeWeights:e.gradeWeights,partScores:o,totalScore:n,totalWeight:a}}},t._calcPartScores=function(e,t){var o={};for(var n in t){var a=t[n];if(a){var r=i.default.get_from_part_db(a);if(r&&!r.bIgnoreInGrade){for(var s=0,l=0;l<e.length;l++){s+=r[e[l]]||0}o[n]=s/e.length}}}return o},t.getSuitProgress=function(e){for(var t=i.default.get_from_suit_db(e).partIds,o=t.length,n=0,a=0;a<t.length;a++){var r=t[a];d.default.getItemAmount(r)>0&&n++}return[n,o]},t.randomExchangePart=function(e,t){var o=this;void 0===t&&(t=!1);var n=this._getRemainParts(e),a=this._randomPart(e);if(a){var r=0;if(!t){var s=this.getSuitProgress(e),u=s[0];s[1];if(r=i.default.get_from_suit_db(e).costArr[u]||0,this.getEchangeChance(e)>0&&(r=0,this.costEchangeChange(e)),d.default.getItemAmount(l.default.ITEM_ID_GOLD)<r)return f.default.tipItemNotEnough(),void f.default.tryOpenShop();d.default.addItemAmount(l.default.ITEM_ID_GOLD,-r,"\u5151\u6362\u90e8\u4ef6\u6d88\u8017")}var p=h.default.preCheckCanTriggerAdEvent(S);_.default.isGuiding()&&(p=!1),0==r&&(p=!1),0==this.getEchangeFreeReward(e)&&(p=!1),h.default.preCheckCanTriggerAdEvent(S)||(p=!1),d.default.addItemAmount(a,1,"\u5151\u6362\u90e8\u4ef6"),m.default.updateOwnData(),c.default.addGotItemTip(a,1,null,{fOnDialogClose:function(){o._isOneSuitFull(a)?o.sendMsg("MSG_SUIT_FULL"):p&&g.default.openDialog("vSuitPartAwardDialog",{suitId:e})}}),this.sendMsg("MSG_PART_GET")}else n.length>0?c.default.showMsgTip(y.default.getText("msg.3")):c.default.showMsgTip(y.default.getText("msg.4"))},t.isGoldEnoughToExchange=function(e){var t=this.getSuitProgress(e),o=t[0],n=(t[1],i.default.get_from_suit_db(e).costArr[o]||0);return!(d.default.getItemAmount(l.default.ITEM_ID_GOLD)<n)},t.canShowAdExchange=function(){var e=h.default.preCheckCanTriggerAdEvent(b),t=u.default.time()-this.lastFreeExchangeTime>180;return e&&t},t.isSuitFull=function(e,t){void 0===t&&(t=!1);var o=i.default.get_from_suit_db(e);if(!o)return!1;for(var n=!0,a=0;a<o.partIds.length;a++){var r=o.partIds[a];if((!t||!this.isPartGradeGet(r)&&!this.isPartSignGet(r))&&d.default.getItemAmount(r)<=0){n=!1;break}}return n},t.nearlyNotFullSuit=function(){var e=this,t=0,o=!0;return i.default.forDb_from_suit_db(function(n,a){if(!e.isSuitFull(a.id,!0))return o=!1,!0;t++}),o&&(t=0),t},t._isOneSuitFull=function(e){var t=null;return i.default.forDb_from_suit_db(function(o,n){for(var a=0;a<n.partIds.length;a++){var r=n.partIds[a];if(e==r)return t=n,!0}}),!!t&&this.isSuitFull(t.id)},t._randomPart=function(e){for(var t=this._getRemainParts(e),o=p.default.getAllRewardParts(),n=t.length-1;n>=0;n--)for(var a=t[n],r=0;r<o.length;r++){if(a==o[r]){t.splice(n,1);break}}if(0==t.length)return null;var i=t[u.default.random(0,t.length-1)];return cc.log("_randomPart : ",i),i},t._getRewardableRemainParts=function(e){for(var t=this._getRemainParts(e),o=p.default.getAllRewardParts(),n=t.length-1;n>=0;n--)for(var a=t[n],r=0;r<o.length;r++){if(a==o[r]){t.splice(n,1);break}}return t},t._getRemainParts=function(e){for(var t=[],o=i.default.get_from_suit_db(e).partIds,n=0;n<o.length;n++){var a=o[n];d.default.getItemAmount(a)<=0&&t.push(a)}return t},t.isPartGradeGet=function(e){for(var t=0;t<100;t++){var o=t*l.default.ONE_STAGE_LEN+1,n=i.default.get_from_arena_level_db(o);if(!n)break;for(var a=n.seasonRewards,r=0;r<a.length;r++){if(a[r][0]==e)return!0}}return!1},t.isPartSignGet=function(e){for(var t=p.default.getAllRewardParts(),o=0;o<t.length;o++){if(t[o]==e)return!0}return!1},t.isNewPart=function(e){for(var t=0;t<this.touchedParts.length;t++){if(e==this.touchedParts[t])return!1}return!0},t.touchPart=function(e){for(var t=0;t<this.touchedParts.length;t++){if(e==this.touchedParts[t])return!1}return this.touchedParts.push(e),this.saveRecord(),!0},t.addEchangeChange=function(e){this.freeExchangeTimeDic[e]=1,this.saveRecord(),this.sendMsg("MSG_PART_GET")},t.costEchangeChange=function(e){var t=this.freeExchangeTimeDic[e]||0;t-=1,this.freeExchangeTimeDic[e]=t,this.saveRecord()},t.getEchangeChance=function(e){return this.freeExchangeTimeDic[e]||0},t.getEchangeFreeReward=function(e){return(this.freeExchangeTimeDic[e]||0)>0?0:this._getRewardableRemainParts(e).length<2?0:1},t.getBadgeCout=function(){var e=this,t=!1;return i.default.forDb_from_suit_db(function(o,n){var a=e.getSuitProgress(n.id),r=a[0];if(r!=a[1])return d.default.getItemAmount(l.default.ITEM_ID_GOLD)>=n.costArr[r]?(t=!0,!0):void 0}),t?1:0},t.getMaxPartNum=function(){var e=0;return i.default.forDb_from_suit_db(function(t,o){e+=o.partIds.length}),e},t.getOwnPartNum=function(){var e=0;return i.default.forDb_from_suit_db(function(t,o){for(var n=0;n<o.partIds.length;n++){var a=o.partIds[n];d.default.getItemAmount(a)>0&&e++}}),e},t.tryTrigSomuchGold=function(){var e=this;if(!_.default.isGuiding()){var t=u.default.time();if(!(t-this.lastTrigSomuchGold<60)){var o=[],n=-1;if(i.default.forDb_from_suit_db(function(t,a){n++;var r=e.getSuitProgress(a.id),i=r[0];if(i!=r[1]){var s=a.costArr[i]||0;o.push({suitId:a.id,cost:s,index:n})}}),0!=o.length){var a=u.default.sortArrayByField(o,"cost"),r=a[0].cost;d.default.getItemAmount(l.default.ITEM_ID_GOLD)>10*r&&(this.lastTrigSomuchGold=t,g.default.openDialog("vGotoSuitDialog",{index:a[0].index}))}else this.lastTrigSomuchGold=t}}},t.cdSomuchGold=function(){this.lastTrigSomuchGold=u.default.time()},t.canTakeSuitReward=function(e){return!!e&&(this.isSuitFull(e)&&!this.suitRewardTaked[e])},t.getSuitRewardCount=function(){return 10*v.default.getOneMinuteIncome()},t.takeSuitReward=function(e,t){if(void 0===t&&(t=1),e&&this.canTakeSuitReward(e)){this.suitRewardTaked[e]=!0,this.saveRecord();var o=this.getSuitRewardCount()*t;return d.default.addItemAmount(l.default.ITEM_ID_GOLD,o,"\u9886\u53d6\u5957\u88c5\u5956\u52b1"),c.default.addGotItemTip(l.default.ITEM_ID_GOLD,o),!0}},t.lastClothes="",t.touchedParts=null,t.freeExchangeTimeDic={},t.suitRewardTaked=null,t.lastFreeExchangeTime=0,t.lastTrigSomuchGold=0,t=o=a([C],t)}(r.default);o.default=R,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrI18n":"mgrI18n","./mgrOfflinePartRank":"mgrOfflinePartRank","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrRole":"mgrRole","./mgrShop":"mgrShop","./mgrSign":"mgrSign","./mgrTip":"mgrTip"}],mgrPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"2d698uw/VFAtrVpD4XImhCp","mgrPlayer");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrCfg"),l=e("../../ulframework/utils/Timer"),c=e("../../ulframework/utils/Tools"),u=e("../Const"),d=e("./mgrTip"),p=e("./mgrShop"),f=e("./mgrSdk"),h=e("./mgrCop"),g=e("./mgrI18n"),_=cc._decorator.ccclass,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),cc.log("mgrPlayer.onLoad",this._playerName),this.loadRecord(),l.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged})},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=i.default.getData("player")||{};this._playerName=o.playerName||"",this._items=o.items||{},this._historyGotItems=o.historyGotItems||{},this._historyUsedItems=o.historyUsedItems||{},this._dailyGotItems=o.dailyGotItems||{},this._dailyUsedItems=o.dailyUsedItems||{},this._historyDailyMaxGotItems=o.historyDailyMaxGotItems||{},this._historyDailyMaxUsedItems=o.historyDailyMaxUsedItems||{},this._recoverCostTimes=o.recoverCostTimes||{},this._lastDailyRefreshTime=o.lastDailyRefreshTime||0,this.lastReceiveVipRewardTime=o.lastReceiveVipRewardTime||0,this._isResetTrialTimes=o.isResetTrialClothTimes||!1,this.deviceCode?this.uid=this.deviceCode:this.uid=o.uid;var n=this._items;s.default.forDb("item_template_db",function(e,t){var o=t.id;null==n[o]&&(n[o]=t.defaultAmount)}),c.default.forEachMap(n,function(e,o){t._historyDisplayedGotItems[e]=o>0}),this.refreshDailyData(),this.refreshRecoverItem()},t.saveRecord=function(){e.saveRecord.call(this);var t={playerName:this._playerName,items:this._items,historyGotItems:this._historyGotItems,historyUsedItems:this._historyUsedItems,dailyGotItems:this._dailyGotItems,dailyUsedItems:this._dailyUsedItems,historyDailyMaxGotItems:this._historyDailyMaxGotItems,historyDailyMaxUsedItems:this._historyDailyMaxUsedItems,lastDailyRefreshTime:this._lastDailyRefreshTime,recoverCostTimes:this._recoverCostTimes,uid:this.uid,lastReceiveVipRewardTime:this.lastReceiveVipRewardTime,isResetTrialClothTimes:this._isResetTrialTimes};i.default.setData("player",t)},t.onTimerLoop=function(e){this.refreshDailyData(),this.refreshRecoverItem()},t.getName=function(){return this._playerName},t.setName=function(e){this._playerName=e,this.saveRecord(),this.sendMsg("MSG_PLAYER_NAME_CHANGED")},t.getItemChangedAge=function(){return this._itemChangedAge},t.getUid=function(){return this.uid||(this.uid=ul.format("%s%03d",ul.formatDate(new Date,"yyyyMMddhhmmss"),c.default.random(999)),this.saveRecord()),this.uid},t._setDeviceCode=function(e){this.deviceCode=e,this.uid&&this.uid!=e&&(this.uid=e,this.saveRecord())},t.getItemAmount=function(e){return this._items[e]||0},t._setItemAmount=function(e,t){if(null!=e&&null!=t){var o=this.getItemAmount(e);if(o!=t){this._items[e]=Math.max(t,0);var n={itemId:e,amountDelta:t-o};this.sendMsg("MSG_ITEM_AMOUNT_CHANGED",n),this.saveRecord(),this._itemChangedAge++}}else cc.warn("\u8b66\u544a] mgrPlayer.setItemAmount arg is wrong!",e,t)},t.addItemAmount=function(e,t,o,n){if(void 0===n&&(n=!1),null!=e&&null!=t){if(t>0){var a=s.default.get("item_template_db",e);if(!a)return void cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount itemId \u4e0d\u5b58\u5728! itemId: ",e);0!=a.sellItemId&&this.getItemAmount(e)>=1&&(e=a.sellItemId,t=a.sellItemAmount*t)}var r=this.getItemAmount(e);this._setItemAmount(e,r+t),n||f.default.statisOnAddItemAmount(e,t,o)}else cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount arg is wrong!",e,t)},t.getItemDailyGotAmount=function(e){return this._historyGotItems[e]||0},t.getItemHistoryGotAmount=function(e){return this._dailyGotItems[e]||0},t.getItemHistoryDailyMaxGotAmount=function(e){return this._historyDailyMaxGotItems[e]||0},t.getItemDailyUsedAmount=function(e){return this._dailyUsedItems[e]||0},t.getItemHistoryUsedAmount=function(e){return this._historyUsedItems[e]||0},t.getItemHistoryDailyMaxUsedAmount=function(e){return this._historyDailyMaxUsedItems[e]||0},t.isDisplayedGotItem=function(e){return 1==this._historyDisplayedGotItems[e]},t.markDisplayedGotItem=function(e){this._historyDisplayedGotItems[e]=!0},t.resetTrialTimes=function(){console.log("resetTrialTimes-----------"+this._isResetTrialTimes),this._isResetTrialTimes||(this._isResetTrialTimes=!0,this._setItemAmount(u.default.ITEM_ID_CLOTH_TRIAL,h.default.getNumberValue("times_trial")),this.saveRecord(),console.log("\u4fdd\u8bc1\u91cd\u7f6e\u90e8\u4ef6\u8bd5\u7528\u6b21\u6570----------"+h.default.getNumberValue("times_trial")))},t.onMsgItemAmountChanged=function(e){var t=e,o=t.itemId,n=t.amountDelta;n>0?(this._historyGotItems[o]=(this._historyGotItems[o]||0)+n,this._dailyGotItems[o]=(this._dailyGotItems[o]||0)+n,this._historyDailyMaxGotItems[o]=Math.max(this._historyDailyMaxGotItems[o]||0,this._dailyGotItems[o])):(this._historyUsedItems[o]=(this._historyUsedItems[o]||0)+-n,this._dailyUsedItems[o]=(this._dailyUsedItems[o]||0)+-n,this._historyDailyMaxUsedItems[o]=Math.max(this._historyDailyMaxUsedItems[o]||0,this._dailyUsedItems[o])),o==u.default.ITEM_ID_VIP&&this.getItemAmount(o)>0&&(this.lastReceiveVipRewardTime=c.default.time(),this.saveRecord())},t.onMsgLanguageChanged=function(){console.log("********************\u66f4\u6539\u81ea\u5df1\u7684\u540d\u5b57");var e=g.default.getLanguage(),t=this.calcRandomName(e);this.setName(t)},t.refreshDailyData=function(){c.default.isOneDay(c.default.time(),this._lastDailyRefreshTime)||(this._dailyGotItems={},this._dailyUsedItems={},this._lastDailyRefreshTime=c.default.time(),this._isResetTrialTimes=!1,this.saveRecord())},t.refreshRecoverItem=function(){var e=this,t=c.default.time();s.default.forDb("item_recover_db",function(o,n){var a=n.id,r=e.getItemAmount(a),i=e.getRecoverMaxAmount(a),s=e._getRecoverCostTime(a),l=0;if(1==n.mode){if(i<=r)return void(0!=s&&e._setRecoverCostTime(a,0));if(t<s&&(s=t,e._setRecoverCostTime(a,s)),s<=0){if(i<=r)return;s=t,e._setRecoverCostTime(a,s)}var u=t-s,d=e._getRecoverTime(a);if((l=Math.floor(u/d))<=0)return;s+=d*l}else{if(2!=n.mode)return void cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",n.mode);if(s<=0)return void e._setRecoverCostTime(a,t);if(c.default.isOneDay(t,s))return;l=1,s=t}i<=(r+=e._getRecoverAmount(a)*l)&&(r=Math.min(r,i),s=0),e._setItemAmount(a,r),e._setRecoverCostTime(a,s)})},t.getRecoverMaxAmount=function(e){var t=s.default.get("item_recover_db",e);return 0!=t.maxAmountRefItemId?this.getItemAmount(t.maxAmountRefItemId):t.maxAmount},t._getRecoverTime=function(e){return s.default.get("item_recover_db",e,"recoverTime")},t._getRecoverAmount=function(e){var t=s.default.get_from_item_recover_db(e);return t.recoverCopValue?f.default.getCopNumberValueByKey(t.recoverCopValue):this.isVip()?t.vipRecoverAmount:t.recoverAmount},t._getRecoverCostTime=function(e){return this._recoverCostTimes[e]||0},t._setRecoverCostTime=function(e,t){this._recoverCostTimes[e]=t,this.saveRecord()},t.getRecoverRemainTime=function(e){var t=s.default.get("item_recover_db",e);if(1==t.mode){var o=this._getRecoverCostTime(e);if(o<=0)return null;var n=c.default.time()-o,a=this._getRecoverTime(e);return a<n?0:a-n}if(2==t.mode){if(this.getItemAmount(e)>=this.getRecoverMaxAmount(e))return null;var r=new Date;return r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.getTime()/1e3-c.default.time()}return cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",t.mode),null},t.openItemBox=function(e){var t=s.default.get("item_box_db",e);return this.openItemBoxByBoxData(t)},t.openItemBoxByBoxData=function(e){var t=[];if(e.triggerRatio<1e4&&c.default.random(1e4)>e.triggerRatio)return t;var o=e.ratioType;if(1==o)for(var n=0;n<e.items.length;n++){if((r=e.items[n]).ratio>=1e4||c.default.random(1e4)<=r.ratio){var a=c.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,a])}}else if(2==o){if(r=c.default.calcWheelTarget(e.items,"ratio")){a=c.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,a])}}else if(3==o)for(n=0;n<e.items.length;n++){var r=e.items[n];a=c.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,a])}return t},t.isVip=function(){return this.getItemAmount(u.default.ITEM_ID_VIP)>=1},t.canReceiveVipReward=function(){if(!this.isVip())return!1;var e=this.lastReceiveVipRewardTime||0;return!c.default.isOneDay(e,c.default.time())},t.buyVip=function(e){this.isVip()||p.default.requestBuy(u.default.ITEM_ID_VIP)},t.tryReceiveVipReward=function(){if(!this.canReceiveVipReward())return d.default.showMsgTip(g.default.getText("msg.5")),{errorCode:!1,rewards:null};for(var e=s.default.get("item_template_db",u.default.ITEM_ID_VIP).data||[],t=0;t<e.length;t++){var o=e[t];this.addItemAmount(o[0],o[1],"\u9b54\u4ed9\u7279\u6743\u6bcf\u65e5\u9886\u53d6"),d.default.addGotItemTip(o[0],o[1])}return this.lastReceiveVipRewardTime=c.default.time(),this.saveRecord(),{errorCode:!0,rewards:e}},t.autoIntitle=function(){var e=g.default.getLanguage();o.getName()||o.setName(o.calcRandomName(e))},t.calcRandomName=function(e){console.log("\u968f\u673a\u540d\u5b57\u8bed\u8a00:",e);var t="";switch(e){case"zhcn":var o=s.default.getDb("random_name_part1_db"),n=s.default.getDb("random_name_part2_db");t=o[c.default.random(o.length)-1].word+n[c.default.random(n.length)-1].word;break;case"vi":var a=s.default.getDb("vi_random_name_part1_db"),r=s.default.getDb("vi_random_name_part2_db");t=a[c.default.random(a.length)-1].word+r[c.default.random(r.length)-1].word;break;case"hi":var i=s.default.getDb("hi_random_name_part1_db"),l=s.default.getDb("hi_random_name_part2_db");t=i[c.default.random(i.length)-1].word+l[c.default.random(l.length)-1].word;break;case"id":var u=s.default.getDb("id_random_name_part1_db"),d=s.default.getDb("id_random_name_part2_db");t=u[c.default.random(u.length)-1].word+d[c.default.random(d.length)-1].word;break;case"pt":var p=s.default.getDb("pt_random_name_part1_db"),f=s.default.getDb("pt_random_name_part2_db");t=p[c.default.random(p.length)-1].word+f[c.default.random(f.length)-1].word;break;case"en":var h=s.default.getDb("en_random_name_part1_db"),g=s.default.getDb("en_random_name_part2_db");t=h[c.default.random(h.length)-1].word+g[c.default.random(g.length)-1].word}return console.log("***\u540d\u5b57\uff1a"+t),t},t.calcRandomHeadIcon=function(){var e=c.default.random(1,6);return ul.format("2d/npc/npc_q_0%d",e)},t.isIgnoreAd=function(){return this.getItemAmount(u.default.ITEM_ID_IGNORE_AD)>=1},t._items={},t._playerName="",t._itemChangedAge=0,t._historyDisplayedGotItems={},t._historyGotItems={},t._historyUsedItems={},t._dailyGotItems={},t._dailyUsedItems={},t._historyDailyMaxGotItems={},t._historyDailyMaxUsedItems={},t._lastDailyRefreshTime=null,t._recoverCostTimes={},t.lastReceiveVipRewardTime=null,t.uid="",t.deviceCode="",t._isResetTrialTimes=!1,t=o=a([_],t)}(r.default);o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrCop":"mgrCop","./mgrI18n":"mgrI18n","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrShop":"mgrShop","./mgrTip":"mgrTip"}],mgrPool:[function(e,t,o){"use strict";cc._RF.push(t,"97f69CulKBN3pqAzZZQdVGA","mgrPool");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/PoolManager"),s=e("./mgrCfg"),l=e("../../ulframework/view/Spine"),c=e("../../ulframework/view/Particle"),u=e("./mgrDirector"),d=e("../../ulframework/view/AnimNode"),p=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.poolManager=new i.default,this._regsiterPoolConfig()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._regsiterPoolConfig=function(){this.poolManager.register("spine",function(e){return s.default.get("spine_db",e)?new l.default(e):null},function(e){e instanceof l.default&&e.reset()},function(e){e instanceof l.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){},100),this.poolManager.register("animNode",function(e){return s.default.get("anim_node_db",e)?new d.default(e):null},function(e){e instanceof d.default&&e.reset()},function(e){e instanceof d.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){},100),this.poolManager.register("particle",function(e){return s.default.get("particle_db",e)?new c.default(e):null},function(e){e instanceof c.default&&e.reset()},function(e){},function(e){},100),this.poolManager.register("view",function(e){return u.default.createView(e)},function(e){},function(e){},function(e){},100)},t.get=function(e,t){return this.poolManager.get(e,t)},t.put=function(e){this.poolManager.put(e)},t.clean=function(e,t){this.poolManager.clean(e,t)},t=a([p],t)}(r.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/PoolManager":"PoolManager","../../ulframework/view/AnimNode":"AnimNode","../../ulframework/view/Particle":"Particle","../../ulframework/view/Spine":"Spine","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector"}],mgrPvp:[function(e,t,o){"use strict";cc._RF.push(t,"2da72IIFfFG14tpN1j/ngnL","mgrPvp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../struct/sRankPlayer"),s=e("../../ulframework/utils/Timer"),l=e("./mgrRecord"),c=e("../Const"),u=e("./mgrNetwork"),d=e("../../ulframework/utils/Tools"),p=e("./mgrPlayer"),f=e("../../ulframework/utils/Base64"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){this.loadRecord(),s.default.callLoop(.1,this.refreshLikeCount.bind(this),!0),this.registerListeners({MSG_NETWORK_RESPONSE:this.onMsgNetworkResponse.bind(this)})},t.loadRecord=function(){var e=l.default.getData("pvp")||{};this.likeCount=e.likeCount||null,this.likeCountCostTime=e.likeCountCostTime||0,this.rewardCount=e.rewardCount||0,this.serverSubject=e.serverSubject||null,null==this.likeCount&&(this.likeCount=10)},t.saveRecord=function(){var e={likeCount:this.likeCount,likeCountCostTime:this.likeCountCostTime,rewardCount:this.rewardCount,serverSubject:this.serverSubject};l.default.setData("pvp",e)},t.requestLikeList=function(){var e=this.serverPlayerCount||0;if(cc.log(e),e<2)this.sendMsg("MSG_PVP_NO_DATA");else{for(var t,o=d.default.random(e);(t=d.default.random(e))==o;);var n={info:{rankarry:[o.toString(),t.toString()],rankid:c.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};u.default.send("/get/getPlayerInoByRankid",n)}},t.requestCommonData=function(e,t){if(cc.log("requestCommonData"),null==this.serverPlayerCount||t){var o="/get/getUserNumInRank",n={info:{rankidarry:[c.default.SERVER_RANK_ID.toString()]}};u.default.send(o,n,e)}if(this.requestOwnInfo(),!this.serverSubject||t){o="/get/getRankName",n={info:{rankidarry:[c.default.SERVER_RANK_ID.toString()]}};u.default.send(o,n,e)}cc.log("requestCommonData end")},t.requestOwnInfo=function(e,t){if(cc.log("requestOwnInfo"),!this.selfPvpPlayer||t){var o={info:{uidarry:[p.default.getUid()],rankid:c.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};u.default.send("/get/getPlayerInfoByUid",o,e)}cc.log("requestOwnInfo end")},t.requestList=function(e,t){cc.log("requestList");for(var o=[],n=e;n<=t;n++)o.push(n.toString());cc.log("requestList",o);var a={info:{rankarry:o,rankid:c.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};u.default.send("/get/getPlayerInoByRankid",a),cc.log("requestList end")},t.requestLike=function(e){cc.log("requestLike");var t={info:{uidarry:[e],scorearry:["1"],rankid:c.default.SERVER_RANK_ID.toString()}};u.default.send("/set/modifyScoreByArry",t),cc.log("requestLike end")},t.requestUpload=function(e){cc.log("requestUpload");var t=p.default.getName(),o=p.default.getUid(),n=this._packPlayerData(t,e),a={info:{uidarray:[o],dataarray:[n],scorearray:["0"],rankid:c.default.SERVER_RANK_ID.toString()}};cc.log("data",n,a),u.default.send("/set/setPlayerInfoWithScoreArray",a),cc.log("requestUpload end")},t.onMsgNetworkResponse=function(e){cc.log("onMsgNetworkResponse");var t=e,o=t.requestData,n=t.responseData;if(-1!=n.code){var a=o.cmd;if("/get/getUserNumInRank"==a){var r=parseInt(n.msg[c.default.SERVER_RANK_ID.toString()])||0;this.serverPlayerCount=r,this.sendMsg("MSG_PVP_PLAYER_COUNT_CHANGED")}else if("/get/getRankName"==a){cc.log("responseData",n);var s=n.msg[c.default.SERVER_RANK_ID.toString()]||"unknown";this.serverSubject&&s!=this.serverSubject&&(this.serverSubject=null),this.serverSubject=s,this.saveRecord(),this.sendMsg("MSG_PVP_SUBJECT_CHANGED"),cc.log("mgrPvp.onMsgNetworkResponse",a,s)}else if("/get/getPlayerInfoByUid"==a){var l=p.default.getUid();if(b=n.msg[l])if(C=JSON.parse(b)){var u=C.data,f=C.rank,h=parseInt(C.score),g=this._unpackPlayerData(u),_=g[0],m=g[1],v=new i.default(l,f,h,_,m);this.selfPvpPlayer=v,this.sendMsg("MSG_PVP_SELF_DATA_CHANGED")}else cc.warn("[warn] mgrPvp.onMsgNetworkResponse /get/getPlayerInfoByUid player data not a validate json",b);else cc.warn("[warn] mgrPvp.onMsgNetworkResponse / get / getPlayerInfoByUid player data not found! uid = ",l)}else if("/get/getPlayerInoByRankid"==a){var y=[];for(var f in n.msg)if(n.msg.hasOwnProperty(f)){var C,b=n.msg[f];if(C=JSON.parse(b)){if(""!=C.data){var S=C.data.toString(),R=(l=C.uid.toString(),h=C.score.toString(),C.stageId,this._unpackPlayerData(S));_=R[0],m=R[1],v=new i.default(l,parseInt(f),h,_,m);y.push(v)}}else cc.log("[warn] mgrPvp.onMsgNetworkResponse /get/getPlayerInoByRankid player data not a validate json",b)}this.saveRecord(),y=d.default.sortArrayByField(y,"rank"),this.sendMsg("MSG_PVP_RESPONSE_PLAYER_FROM_RANK",{players:y,requestData:o})}else"/set/modifyScoreByArry"==a?(this.selfPvpPlayer=null,this.addLikeCount(-1),this.rewardCount++,this.saveRecord(),this.sendMsg("MSG_PVP_LIKE_SUCCESS")):"/set/setPlayerInfoWithScoreArray"==a&&(this.selfPvpPlayer=null,this.sendMsg("MSG_PVP_UPLOAD_SUCCESS"));cc.log("onMsgNetworkResponse end")}},t._packPlayerData=function(e,t){var o=t.join("_");return cc.log("_packPlayerData str ",o),f.default.encodeForUrl(e)+"|"+o},t._unpackPlayerData=function(e){var t=e.indexOf("|");if(null==t)return["unknown",[]];for(var o=e.substring(0,t),n=f.default.decodeForUrl(o),a=e.substring(t+1,e.length).split("_"),r=[],i=0;i<a.length;i++){var s=a[i];r.push(parseInt(s))}return[n,r]},t.getLikeCount=function(){return[this.likeCount,10]},t.addLikeCount=function(e){this.likeCount=Math.max(0,this.likeCount+e),this.saveRecord()},t.refreshLikeCount=function(){var e=this.likeCountCostTime,t=this.getLikeCount(),o=t[0],n=t[1],a=d.default.time();if(n<=o)0!=this.likeCountCostTime&&(this.likeCountCostTime=0,this.saveRecord);else{if(e>a&&(e=a,this.likeCountCostTime=e,this.saveRecord()),e<=0){if(n<=o)return;e=a,this.likeCountCostTime=e,this.saveRecord()}var r=a-e,i=Math.floor(r/600);i<=0||(e+=600*i,n<=(o+=i)&&(o=Math.min(o,n),e=0),this.likeCount=o,this.likeCountCostTime=e,this.sendMsg("MSG_PVP_LIKE_COUNT_CHANGE"),this.saveRecord())}},t.getLikeCountRecoverRemainTime=function(){var e=this.likeCountCostTime;if(e<=0)return null;var t=d.default.time()-e;return 600<t?0:600-t},t.getServerSubjectName=function(){var e=["\u5e73\u884c\u4e16\u754c","\u6625\u6c5f\u82b1\u6708\u591c","\u5168\u65b0\u7684\u81ea\u5df1","\u5510\u987f\u5e84\u56ed","\u68ee\u6797\u7684\u65cb\u5f8b"];if(cc.log("getServerSubjectName ",this.serverSubject),!this.serverSubject)return"";var t=parseInt(this.serverSubject)%e.length;cc.log("getServerSubjectName index : ",t);var o=e[t];return cc.log("getServerSubjectName name : ",o),o},t.likeCount=0,t.likeCountCostTime=0,t.rewardCount=0,t.serverPlayerCount=null,t.serverSubject=null,t.selfPvpPlayer=null,t=a([g],t)}(r.default));o.default=_,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Base64":"Base64","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sRankPlayer":"sRankPlayer","./mgrNetwork":"mgrNetwork","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrRecord:[function(e,t,o){"use strict";cc._RF.push(t,"b01ccp08MRNpa9et5mKMFwU","mgrRecord");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("./mgrSdk"),l=e("../Const"),c=cc._decorator.ccclass,u=l.default.RECORD_DATA_KEY,d="__age__",p="__version__",f="loginId",h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this._readRecord(),i.default.callLoop(1,this.onTimerSpan.bind(this),!0),this.registerListeners({MSG_SDK_RECORD_GET:this.onMsgSdkRecordGet})},t.onTimerSpan=function(e){this.bNeedFlush&&(this.bNeedFlush=!1,this._writeRecord(),this.bNeedUpdateServer=!0)},t.forceRecord=function(){if(!this._loginId)return this._writeRecord(),void console.error("---------\x3e>> mgrRecord forceRecord  _loginId is null");this.record[f]=this._loginId,this._writeRecord(),s.default.saveServerRecord(JSON.stringify(this.record))},t.getLoginId=function(){return this._loginId},t.setLoginId=function(e){this._loginId=e},t.onTimerSpan2=function(e){if(this.bNeedUpdateServer&&this._loginId){this.bNeedUpdateServer=!1;var t=ul.clone(this.record);t.offline_arena=null,s.default.saveServerRecord(JSON.stringify(t))}},t._readRecord=function(e){if(e||(e=cc.sys.localStorage.getItem(u)),!e)return cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u672a\u627e\u5230\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord();var t=JSON.parse(e);return t?1!=t[p]?(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u7248\u672c\u6539\u53d8\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord()):void(this.record=t):(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u6570\u636e\u635f\u574f\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord())},t._writeRecord=function(){var e=JSON.stringify(this.record);cc.sys.localStorage.setItem(u,e)},t._requestFlush=function(){this._bDebugBanWrite||(this.bNeedFlush=!0)},t._setDebugBanWrite=function(e){this._bDebugBanWrite=e},t.getData=function(e){return this.record[e]},t.setData=function(e,t){this.record[e]=t,this.record[d]=(this.record[d]||0)+1,this._requestFlush()},t.resetRecord=function(){this.record={},this.record[d]=0,this.record[p]=1,this._requestFlush(),this.sendMsg("MSG_RECORD_RESET")},t.onMsgSdkRecordGet=function(e){var t=e.userData,o=null;try{t&&(o=JSON.parse(t))}catch(e){console.log(e.message)}var n=this._loginId;if(!o)return console.log(" --------\x3e>>> mgrRecord recordData is null "),this.record[f]=n,void this._writeRecord();var a=this.getData(f),r=o[f];if(r&&r!=a)console.log(" --------\x3e>>> mgrRecord recordData id not same "),console.log(" --------\x3e>>> mgrRecord recordData is cover "),this.record=o,this._writeRecord(),this.sendMsg("MSG_RECORD_RESET"),this.sendMsg("MSG_RECORD_UI_REFRESH");else{var i=this.record[d]||0,s=o[d]||0;console.log(" --------\x3e>>> mgrRecord recordData id is same "),s>i&&(console.log(" --------\x3e>>> mgrRecord recordData is cover "),this.record=o,this.record[f]=n,this._writeRecord(),this.sendMsg("MSG_RECORD_RESET"),this.sendMsg("MSG_RECORD_UI_REFRESH"))}},t.record={},t.bNeedFlush=!1,t._bDebugBanWrite=!1,t.bNeedUpdateServer=!1,t._loginId="",t._timerBindNode=null,t=a([c],t)}(r.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../Const":"Const","./mgrSdk":"mgrSdk"}],mgrRole:[function(e,t,o){"use strict";cc._RF.push(t,"cdb70Mwu8dLvLmMsq5OSrKZ","mgrRole");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrRecord"),l=e("./mgrPlayer"),c=e("../Const"),u=e("./mgrTip"),d=e("../../ulframework/utils/Tools"),p=e("../../ulframework/utils/Timer"),f=e("./mgrSound"),h=e("./mgrDailyTask"),g=e("./mgrAd"),_=e("./mgrShop"),m=e("./mgrDirector"),v=e("./mgrGuide"),y=e("./mgrSdk"),C=e("./mgrChannel"),b=e("./mgrI18n"),S=cc._decorator.ccclass;o.ROLE_MAX_REAP_LEVEL=4;var R=[10,20,30,50,80],T="role_upgrade",L="touch_flower",w="role_double",A="after_reap_upgrade",D=[7,17,27,37,47,57,67,77],I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var r;return n(t,e),r=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this._settlePastTime(),this._generateLuckyRole(),this.trySettlementLastOfflineTime(),p.default.callLoop(1/60,this._settlePastTime.bind(this),!0),p.default.callLoop(60,this._refreshOfflineTime.bind(this),!0),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=s.default.getData("role")||{};if(this.roleLevels=o.roleLevels||null,this.flowerInfo=o.flowerInfo||null,this.roleEvolveLvs=o.roleEvolveLvs||null,this.shareSingleLevels=o.shareSingleLevels||{},this.bGuideLvUpgrade=o.bGuideLvUpgrade||!1,this.roleLevels||(this.roleLevels={},i.default.forDb_from_role_db(function(e,o){t.roleLevels[parseInt(e)]=0})),!this.flowerInfo){this.flowerInfo={};var n=d.default.time();i.default.forDb_from_role_db(function(e,o){for(var a=[],r=0;r<1;r++)a.push({lastOutputTime:n,curOutPut:0,curPersent:0});t.flowerInfo[parseInt(e)]=a})}this.roleEvolveLvs||(this.roleEvolveLvs={},i.default.forDb_from_role_db(function(e,o){t.roleEvolveLvs[parseInt(e)]=0})),this.offLineTime=o.offLineTime||0,0==this.offLineTime&&(this.offLineTime=d.default.time()),i.default.forDb_from_role_db(function(e,o){if(t.roleLevels[parseInt(e)]>0)return v.default.forceFinishAllGuides(),!0})},t.saveRecord=function(){e.saveRecord.call(this);var t={roleLevels:this.roleLevels,flowerInfo:this.flowerInfo,roleEvolveLvs:this.roleEvolveLvs,shareSingleLevels:this.shareSingleLevels,bGuideLvUpgrade:this.bGuideLvUpgrade,offLineTime:this.offLineTime};s.default.setData("role",t)},t.getIsGuideLvUpgrade=function(){return this.bGuideLvUpgrade},t.guidedLvUpgrade=function(){this.bGuideLvUpgrade||(this.bGuideLvUpgrade=!0,this.sendMsg("MSG_ROLE_GUIDE_LVUPGRADE"),this.saveRecord())},t._outputAddition=function(e,t){return e*(1+.3*this.getEvolveLevel(t))},t._reapAddition=function(e){return e},t._timeAddition=function(e){return this.isLuckyRoleTime()?e/2:e},t._settlePastTime=function(){var e=d.default.time();for(var t in this.flowerInfo)if(this.roleLevels.hasOwnProperty(t)&&this.flowerInfo.hasOwnProperty(t)){var o=this.roleLevels[t];if(o){var n=i.default.get_from_role_db(t,o);if(n)for(var a=this.flowerInfo[t],r=0;r<1;r++){var s=a[r],l=s.curPersent,c=this._outputAddition(n.outPutCount,t),u=this._timeAddition(n.outPutTime),p=e-s.lastOutputTime;l>0&&(p+=l*u);var f=Math.floor(p/u),h=p-f*u;s.curPersent=h/u,s.lastOutputTime=e,s.curOutPut+=c*f;var g=28800/n.outPutTime*c;s.curOutPut>g&&(s.curOutPut=g),f>0&&(this.sendMsg("MSG_GUIDE_POINT",{id:"mgrRole._settlePastTime"}),this.sendMsg("MSG_ROLE_AUTO_OUTPUT",{roleId:t,index:r}),this.isLuckyRoleTime()&&(this.specialTimeGold+=c))}}}},t._refreshOfflineTime=function(){this.offLineTime=d.default.time(),this.saveRecord()},t.trySettlementLastOfflineTime=function(){var e=d.default.time(),t=Math.floor(e-this.offLineTime);t>=3600&&(this.willSettlementOfflineTime=t,this.offLineTime=e,this.saveRecord())},t.settleOfflineReward=function(){var e=this.willSettlementOfflineTime,t=2*this.getOneHourIncome(),o=Math.ceil(e/28800*t);return e>28800&&(o=t),o>0&&(this.willSettlementOfflineTime=0),[e,o]},t.getOneHourIncome=function(){return 3600*this.getOneSecondIncome()},t.getOneMinuteIncome=function(){return 60*this.getOneSecondIncome()},t.getOneSecondIncome=function(){var e=0;for(var t in this.flowerInfo)if(this.roleLevels.hasOwnProperty(t)&&this.flowerInfo.hasOwnProperty(t)){var o=this.roleLevels[t];if(o){var n=i.default.get_from_role_db(t,o);if(n){this.flowerInfo[t];for(var a=0;a<1;a++){var r=this._outputAddition(n.outPutCount,t),s=n.outPutTime;e+=Math.ceil(1/s*r)}}}}return e},t.getRoleLevel=function(e){return this.roleLevels[e]},t.getRoleMaxLevel=function(e){var t=this.roleEvolveLvs[e]||0;return R[t]},t.getNextRoleMaxLevel=function(e){var t=Math.min((this.roleEvolveLvs[e]||0)+1,o.ROLE_MAX_REAP_LEVEL);return R[t]},t.canShowUpgrade=function(e){var t=this.roleLevels[e]||0;return!(t>=this.getRoleMaxLevel(e))&&!!i.default.get_from_role_db(e,t+1)},t.isGoldEnoughUpgrade=function(e){var t=this.roleLevels[e]||0;if(t>=this.getRoleMaxLevel(e))return!0;var o=i.default.get_from_role_db(e,t).upgradeCost;return!(l.default.getItemAmount(c.default.ITEM_ID_GOLD)<o)},t.isFreeGoldLessThanUpgrade=function(e){if(!this.canShowUpgrade(e))return!1;var t=r.getOneHourIncome(),o=this.roleLevels[e]||0,n=i.default.get_from_role_db(e,o);return!!n&&t<n.upgradeCost},t.canShowFreeUpgrade=function(e){return!!this.canShowUpgrade(e)&&g.default.preCheckCanTriggerAdEventNoCd(T)},t.upgradeRole=function(e,t){void 0===t&&(t=!1);var o=this.roleLevels[e]||0,n=i.default.get_from_role_db(e,o).upgradeCost;if(!t&&l.default.getItemAmount(c.default.ITEM_ID_GOLD)<n)return _.default.tipItemNotEnough(),void _.default.tryOpenShop();if(!i.default.get_from_role_db(e,o))return!1;if(t||l.default.addItemAmount(c.default.ITEM_ID_GOLD,-n,"\u89d2\u8272\u5347\u7ea7\u6d88\u8017"),this.roleLevels[e]=o+1,this.saveRecord(),r.canAddEvolveLv(e)&&this.guidedLvUpgrade(),f.default.play(104),this.sendMsg("MSG_ROLE_UPGRADE",{roleId:e}),0==o)for(var a=d.default.time(),s=this.flowerInfo[e],u=0;u<s.length;u++){var p=s[u];p.curOutPut=0,p.curPersent=0,p.lastOutputTime=a}return h.default.addTaskCount(h.TASK_ID.ROLE_UPGRADE),this.tryShare(e),!0},t.tryShare=function(e){for(var t=this.getRoleLevel(e),o=0;o<D.length;o++){var n=D[o];if(n==t&&!this.shareSingleLevels[n]){this.shareSingleLevels[n]=!0,this.saveRecord(),C.default.tryShowShare2(),y.default.addGameToMyFavorite(0,"\u4e00\u952e\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f");break}}},t.tryAfterReapUpgrade=function(e){var t=function(){g.default.preCheckCanTriggerAdEvent(A)&&m.default.openDialog("vShareReapDialog",{roleId:e})};C.default.canShare()?m.default.openDialog("vShareReapDialog",{roleId:e,fOnDialogClose:t}):t()},t.getAfterReapUpgradeLevel=function(e){var t=r.getRoleMaxLevel(e);return Math.floor(t/2)},t.doAfterReapUpgradeLevel=function(e){if(e){var t=this.roleLevels[e]||0,o=this.getAfterReapUpgradeLevel(e);t>o||(this.roleLevels[e]=o,this.saveRecord(),u.default.showMsgTip(b.default.getText("msg.6")),f.default.play(104),this.sendMsg("MSG_ROLE_UPGRADE",{roleId:e}))}},t.reapFlower=function(e,t){var o=0,n=this.flowerInfo[e];if(!n)return o;var a=n[t];return a?(o=a.curOutPut,(o=this._reapAddition(o))>0&&(a.curOutPut=0,this.saveRecord(),l.default.addItemAmount(c.default.ITEM_ID_GOLD,o,"\u89e6\u6478\u82b1\u6536\u83b7",!0),h.default.addTaskCount(h.TASK_ID.HARVEST)),this.sendMsg("MSG_GUIDE_POINT",{id:"mgrRole.reapFlower"}),o):o},t.canAddEvolveLv=function(e){return!(this.getRoleLevel(e)<this.getRoleMaxLevel(e))&&!(this.getEvolveLevel(e)>=o.ROLE_MAX_REAP_LEVEL)},t.addEvolveLevel=function(e){if(this.canAddEvolveLv(e)){this.roleEvolveLvs[e]++,this.roleLevels[e]=1;for(var t=d.default.time(),o=this.flowerInfo[e],n=0;n<o.length;n++){var a=o[n];a.lastOutputTime=t,a.curOutPut=0,a.curPersent=0}return this.saveRecord(),!0}},t.getEvolveLevel=function(e){return this.roleEvolveLvs[e]||0},t.getFlowerInfo=function(e,t){var o=this.flowerInfo[e];if(!o)return null;var n=o[t];return n||null},t.tryTrigTouchFlowerAd=function(e){var t=Math.random(),o=d.default.time(),n=o-this.lastTouchFlowerAdTime>180;t<.05&&n&&!v.default.isGuiding()&&(g.default.preCheckCanTriggerAdEvent(L)&&(this.lastTouchFlowerAdTime=o,this.sendMsg("MSG_AD_TOUCH_FLOWER_OPEN"),m.default.openDialog("vTouchFlowerDialog",{roleId:e,bFirstCreate:!0})))},t.setTouchFlowerCd=function(){this.lastTouchFlowerAdTime=d.default.time()},t._generateLuckyRole=function(){var e=[];i.default.forDb_from_role_db(function(t,o){e.push(parseInt(t))}),this.roleIdDoubleLucky=e[d.default.random(1,e.length)-1]},t.isLuckyRoleTime=function(){return d.default.time()-this.lastLuckyRoleTime-900<=0},t.canShowLuckyRoleBtn=function(e){return e==this.roleIdDoubleLucky&&(!(d.default.time()-this.lastLuckyRoleTime<=1080)&&g.default.preCheckCanTriggerAdEvent(w))},t.canShowDoubleRewardBtn=function(){return!(d.default.time()-this.lastLuckyRoleTime<=1080)&&g.default.preCheckCanTriggerAdEvent(w)},t.isDoubleRewardCd=function(){return!(d.default.time()-this.lastLuckyRoleTime<=1080)},t.getDoubleRewardTimeStr=function(){var e=d.default.time()-this.lastLuckyRoleTime;if(e>1080)return"";var t=Math.round(1080-e),o=Math.floor(t/60),n=t%60;return ul.format("%d:%02d",o,n)},t.getLuckyRoleTimeRemain=function(){var e=d.default.time()-this.lastLuckyRoleTime;return e>900?"":d.default.formatTime(900-e,"%M:%S")},t.startLuckyTime=function(){var e=this;this.lastLuckyRoleTime=d.default.time(),this.specialTimeGold=0,this.sendMsg("MSG_LUCKY_TIME_BEGIN"),f.default.play(102),p.default.callLater(900,function(){e._generateLuckyRole(),e.sendMsg("MSG_LUCKY_TIME_END",{sum:e.specialTimeGold})})},t.onMsgAdEventSuccessd=function(e){var t=e,o=t.userData;if(o)switch(t.adEventId){case T:if(!(a=o.roleId))break;this.lastFreeUpgradeTime=d.default.time(),this.upgradeRole(a,!0);break;case L:case"free_gold":var n=r.getOneHourIncome();l.default.addItemAmount(c.default.ITEM_ID_GOLD,n,"\u514d\u8d39\u91d1\u5e01"),u.default.addGotItemTip(c.default.ITEM_ID_GOLD,n,null);break;case w:this.startLuckyTime();break;case A:var a=o.roleId;this.doAfterReapUpgradeLevel(a)}},t.bGuideLvUpgrade=!1,t.offLineTime=0,t.willSettlementOfflineTime=0,t.flowerInfo=null,t.roleLevels=null,t.roleEvolveLvs=null,t.shareSingleLevels=null,t.lastFreeUpgradeTime=0,t.lastTouchFlowerAdTime=0,t.roleIdDoubleLucky=0,t.lastLuckyRoleTime=0,t.specialTimeGold=0,t=r=a([S],t)}(r.default);o.default=I,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrDailyTask":"mgrDailyTask","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrShop":"mgrShop","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrSdk:[function(e,t,o){"use strict";cc._RF.push(t,"467e7ztU4NEF4z8bAbZNEzP","mgrSdk");var n,a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../ulframework/manager/Manager"),s=e("../Const"),l=e("./mgrNative"),c=e("./mgrTip"),u=e("./mgrCop"),d=e("./mgrPlayer"),p=e("./mgrRecord"),f=e("../../ulframework/utils/Tools"),h=e("./mgrChannel"),g=e("./mgrShop"),_=e("./mgrSound"),m=e("./mgrI18n"),v=cc._decorator.ccclass,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return a(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_NATIVE_CALLBACK:this.onMsgNativeCallback,MSG_LIFE_CYCLE:this.onMsgLifeCycle}),this.registerKeyboardListener(),this.startProcMsg()},t.onLoadingComplete=function(){this.setVersion(2)},t.getCopNumberValueByKey=function(e){return u.default.getNumberValue(e)},t.getCopByKey=function(e){return u.default.get(e)},t.registerKeyboardListener=function(){cc.sys.isBrowser?cc.warn("mgrSdk.registerKeyboardListener browser can't register."):cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSystemKeyUp,this)},t.onSystemKeyUp=function(e){var t=e.keyCode;cc.log("mgrSdk.onSystemKeyUp",t),t!=cc.macro.KEY.back&&t!=cc.macro.KEY.escape||l.default._temp_isH5()||this.onClickBack()},t.onMsgLifeCycle=function(e){"onBackPressed"==e.lifeCycle&&(l.default._temp_isH5()||this.onClickBack())},t.onClickBack=function(){var e=this;if(h.default._isThirdExit)this.thirdExitGame();else{if(this.__back_prompt_dialog)return this.__back_prompt_dialog.closeDialog(),void(this.__back_prompt_dialog=null);var t=c.default.alertPrompt2(m.default.getText("ui.20"),m.default.getText("alert.11"),m.default.getText("ui.35"),m.default.getText("alert.12"),function(){e.__back_prompt_dialog&&(e.__back_prompt_dialog.closeDialog(),e.__back_prompt_dialog=null)},function(){cc.game.end()});this.__back_prompt_dialog=t}},t.sendMsgToSdk=function(e){l.default.callNative("sendMsgToSdk",e)},t.onMsgNativeCallback=function(e){var t=e.responseData,o=t.cmd;switch(t.data.msg="",1!=t.data.code&&(t.data.msg=m.default.getText("ui.82")),console.info("mgrSdk.onMsgNativeCallback",o),o){case"/c/channelInfoResult":console.info("channelInfoResult");var n=t.data||{};if(console.info("  copInfo",n.copInfo),u.default.onReceiveSdkCop(n.copInfo),h.default._cardType=n.cardType,h.default._isThirdExit=n.isThirdExit,h.default._isAbout=n.isAbout,h.default._isMoreGame=n.isMoreGame,h.default._isULMoreGame=n.isULMoreGame,h.default._isShowUrlAdIcon=n.isShowUrlAdIcon,h.default._isPayEnabled=!1,h.default._isShareEnabled=!1,h.default._isSupportRecordShare=!1,h.default._isSupportInstallShortcut=!1,h.default._isSupportFindMinigames=!1,h.default._isSupportRecommendationBtn=!1,h.default._isUseSdkRank=n.isUseSdkRank,h.default._copChannelId=n.copChannelId,h.default._cdkChannelId=n.cdkChannelId,h.default._isSupportClipboardData=n.isSupportClipboardData,h.default.isOpenGetFreeGoldInDebug=n.isOpenGetFreeGoldInDebug,m.default.setSdkLanguage(n.gameLanguage),h.default._isSupportPasterAdv=n.isSupportPasterAdv,h.default.setChannelName(n.appName),p.default.setLoginId(n.uuid),h.default.setInterPushConfig(n.jumpInfo||[]),n.payInfo){ul.dump(n.payInfo,"data.payInfo");var a=[];f.default.forEachMap(n.payInfo,function(e,t){a.push({payId:t.payCode,name:t.proName,price:(parseFloat(t.price)||0)/100})}),g.default.onReceiveSdkPayInfo(a)}s.default.SDCARD_PATH=n.sdcardPath,s.default.PACKAGE_VERSION=n.packageVersion,s.default.SDK_VERSION=n.ulsdkVersion,this.sendMsg("MSG_CHANNEL_INFO_RESULT");break;case"/c/payResult":case"/c/prePayResult":console.info(o),c.default.closeWaitingDialog();var r=t.data||{};1==parseInt(r.code)?(console.info("\u652f\u4ed8 \u6210\u529f msg: ",r.msg),this.sendMsg("MSG_SDK_PAY_SUC",{payId:r.payId})):(console.info("\u652f\u4ed8 \u5931\u8d25 msg: ",r.msg),c.default.showMsgTip(r.msg));break;case"/c/shareResult":console.info("/c/shareResult");var i=t.data||{},l=i.userData||"",v=!1;1==parseInt(i.code)?(console.info("---/c/shareResult successed"),v=!0):console.info("---/c/shareResult faild"),this.sendMsg("MSG_SDK_SHARE_RESULT",{bSuccess:v,userData:l});break;case"/c/lifeCycle":console.info("/c/lifeCycle");var y=(t.data||{}).lifeCycle||"";this.sendMsg("MSG_LIFE_CYCLE",{lifeCycle:y});break;case"/c/copInfoResult":console.info("/c/copInfoResult");var C=(t.data||{}).copInfo;u.default.onReceiveSdkCop(C);break;case"/c/megadataServer":console.info("/c/megadataServer");break;case"/c/useCdkey":console.info("/c/useCdkey"),c.default.closeWaitingDialog();var b=t.data||{};if(1==parseInt(b.code)){console.info("\u9886\u53d6 \u6210\u529f ");for(var S=b.data||[],R=0;R<S.length;R++){var T=S[R];d.default.addItemAmount(T.goodsid,T.count,"CDK\u9886\u53d6"),c.default.addGotItemTip(T.goodsid,T.count)}}else console.info("\u9886\u53d6 \u5931\u8d25 msg: ",b.data);break;case"/c/openAdvResult":console.info("/c/openAdvResult"),this.sendMsg("MSG_OPEN_ADV_RESULT",t.data);break;case"/c/openNativeAdvResult":console.info("/c/openNativeAdvResult"),this.sendMsg("MSG_OPEN_NATIVE_ADV_RESULT",t.data);break;case"/c/clickAdvResult":console.info("/c/clickAdvResult"),this.sendMsg("MSG_CLICK_ADV_RESULT",t.data);break;case"/c/clickNativeAdvResult":console.info("/c/clickNativeAdvResult"),this.sendMsg("MSG_CLICK_NATIVE_ADV_RESULT",t.data);break;case"/c/closeAdvResult":console.info("/c/closeAdvResult"),this.sendMsg("MSG_ADV_CLOSE_RESULT",t.data);break;case"/c/closeNativeAdvResult":console.info("/c/closeNativeAdvResult"),this.sendMsg("MSG_CLOSE_NATIVE_ADV_RESULT",t.data);break;case"/c/userLoginResult":console.info("/c/userLoginResult");var L=t.data||{};1==parseInt(L.code)?(console.info("\u767b\u5f55 \u6210\u529f"),c.default.showMsgTip(m.default.getText("msg.7")),this.sendMsg("MSG_SDK_USER_LOGIN_SUCCESS")):(console.info("\u767b\u5f55 \u5931\u8d25 "),c.default.showMsgTip(m.default.getText("msg.8")));break;case"/c/userLoginReportResult":console.info("/c/userLoginReportResult");var w=t.data||{},A=w.code,D=(l=w.userData,1==A);this.sendMsg("MSG_SDK_USER_LOGIN_REPORT_RESULT",{bSuccessful:D,userData:l,code:A});break;case"/c/userIsLoginResult":console.info("/c/userIsLoginResult");var I=!1;1==(A=(t.data||{}).code)?(console.info("\u767b\u5f55\u67e5\u8be2: \u5df2\u767b\u5f55"),I=!0):(console.info("\u767b\u5f55\u67e5\u8be2: \u672a\u767b\u5f55"),I=!1),this.sendMsg("MSG_SDK_USER_IS_LOGIN_RESULT",{bLogin:I});break;case"/c/loginOutResult":console.info("/c/loginOutResult");D=!1;1==(A=(t.data||{}).code)?(console.info("\u767b\u51fa\u6210\u529f"),D=!0):0==A&&(console.info("\u767b\u51fa\u5931\u8d25"),D=!1),this.sendMsg("MSG_SDK_USER_LOGIN_OUT_RESULT",{bSuccessful:D});break;case"/c/advValidCountResult":console.info("/c/advValidCountResult");var k=t.data;s.default.AD_VIDEO_VALID_COUNT=k.video,this.sendMsg("MSG_ADV_VALID_COUNT",t.data);break;case"/c/saveRankDataResult":console.info("/c/saveRankDataResult");var E=t.data,M=(A=E.code,E.msg);D=!1;1==A?(D=!0,console.info("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f")):(D=!1,console.info("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25")),this.sendMsg("MSG_SDK_SAVE_RANK_DATA_RESUTL",{bSuccessful:D,msg:M});break;case"/c/getRankDataResult":console.info("/c/getRankDataResult");D=!1;1==(A=t.data.code)?(console.info("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f!"),D=!0):(console.info("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!"),D=!1),this.sendMsg("MSG_SDK_GET_RANK_DATA_RESULT",{bSuccessful:D});break;case"/c/recorderGameVideoResult":console.info("/c/recorderGameVideoResult");var O=t.data,P=(A=O.code,D=!1,M=O.msg,O.action);1==A?(D=!0,console.info("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529f:"+P)):(console.info("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u5931\u8d25:"+P),D=!1),this.sendMsg("MSG_SDK_RECORD_GAME_VIDEO_RESULT",{bSuccessful:D,msg:M,action:P});break;case"/c/shareGameVideoResult":console.info("/c/shareGameVideoResult");var N=t.data;A=N.code,M=N.msg,l=N.userData,D=!1;1==A?(console.info("\u5f55\u5c4f\u5206\u4eab\u6210\u529f!"),D=!0):console.info("\u5f55\u5c4f\u5206\u4eab\u5931\u8d25!"),this.sendMsg("MSG_SDK_SHARE_VIDEO_RESULT",{msg:M,userData:l,bSuccessful:D});break;case"/c/openJumpResult":console.info("/c/openJumpResult");var B=t.data,U=B.jumpInfo,x=(A=B.code,M=B.msg,B.type);l=B.userData;1==A?"reward"==x?(console.info("\u6fc0\u52b1\u4e92\u63a8\u6570\u636e\u8bf7\u6c42\u6210\u529f!"),this.sendMsg("MSG_SDK_OPEN_JUMP_RESULT",{jumpInfo:U,type:x,msg:M,userData:l})):console.info("\u4e0d\u662f\u6fc0\u52b1\u4e92\u63a8\u6570\u636e!"):console.info("\u6fc0\u52b1\u4e92\u63a8\u6570\u636e\u8bf7\u6c42\u5931\u8d25!");break;case"/c/jumpOtherGameRewardResult":console.info("/c/jumpOtherGameRewardResult");var G=t.data,F=(A=G.code,M=G.msg,l=G.userData,G.rewards);D=!1;1==A?(console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u6210\u529f!"),D=!0):console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT",{bSuccessful:D,msg:M,userData:l,rewards:F});break;case"/c/jumpOtherGameResult":console.info("/c/jumpOtherGameResult");var V=t.data;A=V.code,M=V.msg,l=V.userData,D=!1;1==A?(console.info("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u6210\u529f!"),D=!0):console.info("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_RESULT",{bSuccessful:D,msg:M,userData:l});break;case"/c/extraBonus":console.info("/c/extraBonus");var j=t.data,H=(A=j.code,M=j.msg,1==j.isInitGame);this.sendMsg("MSG_SDK_WX_GZH_ENTER",{msg:M,code:A,bInit:H});break;case"/c/openRecommendationResult":console.info("/c/openRecommendationResult");var K=t.data;A=K.code,M=K.msg,D=!1;1==A?(console.info("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u6210\u529f!"),D=!0):console.info("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u5931\u8d25!"),this.sendMsg("MSG_SDK_OPEN_RECOMMEND_RESULT",{bSuccessful:D,msg:M});break;case"/c/closeRecommendationResult":console.info("/c/closeRecommendationResult");var z=t.data;A=z.code,M=z.msg,D=!1;D=1==A,this.sendMsg("MSG_SDK_CLOSE_RECOMEND_RESULT",{code:A,bSuccessful:D,msg:M});break;case"/c/saveUserDataResult":console.info("/c/saveUserDataResult");var W=t.data;A=W.code,M=W.msg,D=!1;D=1==A,this.sendMsg("MSG_SDK_SAVE_USER_DATA_RESULT",{code:A,bSuccessful:D,msg:M});break;case"/c/getUserDataResult":console.info("/c/getUserDataResult");var q=t.data;this.sendMsg("MSG_SDK_RECORD_GET",{userData:q.userData||{}});break;case"/c/addGameToMyFavoriteResult":console.info("/c/addGameToMyFavoriteResult");var Y=t.data;A=Y.code,l=Y.userData,M=Y.msg,D=1==A;this.sendMsg("MSG_SDK_ADD_GAME_TO_MY_FAVORITE_RESULT",{code:A,bSuccessful:D,userData:l,msg:M});break;case"/c/getUserInfoMsgResult":console.info("/c/getUserInfoMsgResult");var J=t.data;A=J.code,M=J.msg,D=1==A;this.sendMsg("MSG_SDK_GET_USER_INFO_MSG_RESULT",{code:A,bSuccessful:D,msg:M});break;case"/c/appShareResult":console.info("/c/appShareResult");var Q=t.data;A=Q.code,M=Q.msg,D=1==A;this.sendMsg("MSG_SDK_APP_SHARE_RESULT",{code:A,msg:M,bSuccessful:D});break;case"/c/installShortcutResult":console.info("/c/installShortcutResult");var X=t.data;D=1==(A=X.code),M=X.msg,l=X.userData;this.sendMsg("MSG_SDK_INSTALL_SHORTCUT_RESULT",{code:A,bSuccessful:D,msg:M,userData:l});break;case"/c/setClipboardDataResult":console.info("/c/setClipboardDataResult");var Z=t.data,$=(D=1==(A=Z.code),M=Z.msg,Z.clipboardData);l=Z.userData;this.sendMsg("MSG_SDK_SET_CLIPBOARD_DATA_RESULT",{code:A,msg:M,bSuccessful:D,clipboardData:$,userData:l});break;case"/c/getClipboardDataResult":console.info("/c/getClipboardDataResult");var ee=t.data;D=1==(A=ee.code),M=ee.msg,$=ee.clipboardData,l=ee.userData;this.sendMsg("MSG_SDK_GET_CLIPBOARD_DATA_RESULT",{code:A,bSuccessful:D,msg:M,clipboardData:$,userData:l});break;case"/c/pauseSound":console.info("/c/pauseSound");t.data;_.default.pauseSound("mgrSdk");break;case"/c/resumeSound":console.info("/c/resumeSound");t.data;_.default.resumeSound("mgrSdk")}},t.staticSdk=function(e){this.sendMsgToSdk({cmd:"/c/megadataServer",data:e})},t.statisOnStageStart=function(e,t){void 0===t&&(t="\u672a\u77e5\u539f\u56e0"),this.DEBUG&&console.info("mgrSdk:statisOnStageStart(stageId, reason)",e,t);var o=["gameLevelStart",e.toString(),t];this.staticSdk(o)},t.statisOnStageEnd=function(e,t,o,n){n=Math.ceil(n),this.DEBUG&&console.info("mgrSdk:statisOnStageEnd(stageId)",e,t,o,n);var a=["gameLevelComplete",e.toString(),t.toString(),o,"0","0","0","0","0",n.toString()];this.staticSdk(a)},t.statisOnSign=function(e,t){this.DEBUG&&console.info("mgrSdk:statisOnSign(day)",e," times: ",t);var o=["sign",e.toString(),t.toString()];this.staticSdk(o)},t.statisOnAddItemAmount=function(e,t,o){if(this.DEBUG&&console.info("mgrSdk:statisOnAddItemAmount(itemId, amountDelta, reason)",e,t,o),this.STATIS_MONEY_ITEM_IDS[e])if(t>0){var n=["gameCoinAdd",e.toString(),t.toString(),o];this.staticSdk(n)}else{n=["gameCoinLost",e.toString(),Math.abs(t).toString(),o];this.staticSdk(n)}},t.statisOnItemBought=function(e,t,o){var n=["itemBuy",e.toString(),Math.abs(t).toString(),o];this.staticSdk(n)},t.statisOnBuyAction=function(e,t,o){var n=["buyAction",e,t,e,o.toString()];this.staticSdk(n)},t.statisCommonEvent=function(e,t){void 0===t&&(t=1);var o=["commonEventMultiField",e,t.toString()];this.staticSdk(o)},t.setVersion=function(e){this.sendMsgToSdk({cmd:"/c/setVersion",data:e})},t.openMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openMoreGame"})},t.openULMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openUlMoreGame"})},t.shareImage=function(e,t,o,n,a){void 0===a&&(a=""),this.DEBUG&&console.info("mgrSdk:shareImage",e,t,o,n);var r="1";if(h.default.isChannelQQ()){var i=["\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01","\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01","\u738b\u9ed8\u5957\u88c5\u4e0e\u51b0\u516c\u4e3b\u5957\u88c5\uff0c\u6295\u7968\u7ed9\u8c01\uff1f"];n=(s=["https://gamesres.ultralisk.cn/notice/sharegames/game56/qq.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game56/qq_2.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game56/qq_3.jpg"])[l=f.default.random(0,s.length-1)],t=i[l],r=(l+1).toString()}else if(h.default.isChannelHeadline()){var s,l;i=["\u53f6\u7f57\u4e3d\u7cbe\u7075\u68a6\uff0c\u5feb\u6765\u62bd\u53d6\u7cbe\u7f8e\u5957\u88c5\uff01","\u9650\u5b9a\u5957\u88c5\u201c\u5fc3\u4e4b\u821e\u66f2\u201d\u5f00\u653e\u62bd\u53d6\uff01","\u738b\u9ed8\u5957\u88c5\u4e0e\u51b0\u516c\u4e3b\u5957\u88c5\uff0c\u6295\u7968\u7ed9\u8c01\uff1f"];n=(s=["https://gamesres.ultralisk.cn/notice/sharegames/game56/headline_1.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game56/headline_2.jpg","https://gamesres.ultralisk.cn/notice/sharegames/game56/headline_3.jpg"])[l=f.default.random(0,s.length-1)],t=i[l],r=(l+1).toString()}this.sendMsgToSdk({cmd:"/c/openShare",data:{title:e,content:t,url:o,imagePath:n,queryMsg:r,userData:a}})},t.callPhone=function(e){this.sendMsgToSdk({cmd:"/c/callPhone",data:{phoneNum:e}})},t.ulWebView=function(e){this.sendMsgToSdk({cmd:"/c/ulWebView",data:{url:e}})},t.thirdExitGame=function(){this.sendMsgToSdk({cmd:"/c/exitGame",data:{}})},t.uploadRankSdk=function(e){console.info("uploadRankSdk");var t=(new Date).getTime();o.sendMsgToSdk({cmd:"/c/saveRankData",data:{startTime:(t-1e4).toString(),endTime:t.toString(),rankName:"\u6392\u884c\u699c",score:e,order:1}})},t.getRankListSdk=function(e,t){void 0===e&&(e=0),void 0===t&&(t=100),console.info("getRankListSdk"),o.sendMsgToSdk({cmd:"/c/getRankData",data:{dataNum:t,rankName:"\u6392\u884c\u699c",order:1,rankType:e}})},t.openAdH5=function(){console.info("mgrSdk openAdH5"),this.sendMsgToSdk({cmd:"/c/openAdv",data:{advId:"5",userData:JSON.stringify({})}})},t.recordGameVidoe=function(e,t,n){void 0===e&&(e="start"),void 0===t&&(t=120),void 0===n&&(n=!0),console.info("mgrsdk recordGameVidoe"),o.sendMsgToSdk({cmd:"/c/recorderGameVideo",data:{action:e,durationTime:t,isRecordVoice:n}})},t.shareGameVideo=function(e,t,n,a){void 0===e&&(e=""),void 0===t&&(t=""),void 0===a&&(a="{}"),console.info("mgrsdk shareGameVideo"),o.sendMsgToSdk({cmd:"/c/shareGameVideo",data:{title:e,content:t,imagePath:n,userData:a}})},t.userLogin=function(){console.info("mgrsdk userLogin"),o.sendMsgToSdk({cmd:"/c/userLogin"})},t.userLoginReport=function(e,t,n){o.sendMsgToSdk({cmd:"/c/userLoginReport",data:{playerLevel:e,coin:t,userData:n}})},t.userIsLogin=function(){o.sendMsgToSdk({cmd:"/c/userIsLogin"})},t.loginOut=function(){o.sendMsgToSdk({cmd:"/c/loginOut"})},t.openJump=function(e,t,o){void 0===o&&(o=0),console.info("mgrSdk openJump"),this.sendMsgToSdk({cmd:"/c/openJump",data:{gameIndex:e,type:t,count:o}})},t.jumpOtherGame=function(e,t,o){void 0===o&&(o="{}"),console.info("mgrSdk jumpOtherGame"),this.sendMsgToSdk({cmd:"/c/jumpOtherGame",data:{gameIndex:e,type:t,userData:o}})},t.openCrossRecommend=function(e,t,o){void 0===o&&(o=0),console.log("mgrSdk openCrossRecommend"),this.sendMsgToSdk({cmd:"/c/openRecommendation",data:{typeId:o,style:{left:e,top:t}}})},t.closeCrossRecommend=function(){console.info("mgrSdk closeCrossRecommend"),this.sendMsgToSdk({cmd:"/c/closeRecommendation",data:null})},t.clickNativeAdv=function(e,t,o){console.info("mgrSdk clickNativeAdv"),this.sendMsgToSdk({cmd:"/c/clickNativeAdv",data:{adId:e,userData:t,tag:o}})},t.closeAdv=function(e,t){this.sendMsgToSdk({cmd:"/c/closeAdv",data:{advId:e,userData:t}})},t.closeNativeAdv=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/closeNativeAdv",data:{advId:e,userData:t}})},t.openPay=function(e,t){void 0===t&&(t="{}"),console.info("mgrSdk openPay"),c.default.isWaitingDialogOpened()?c.default.showMsgTip(m.default.getText("msg.9")):(c.default.openWaitingDialog("\u63d0\u793a","\u652f\u4ed8\u4e2d..."),this.sendMsgToSdk({cmd:"/c/openPay",data:{payId:e,userData:t}}))},t.useCdk=function(e){console.info("mgrSdk useCdk cdk: ",e),c.default.isWaitingDialogOpened()?c.default.showMsgTip(m.default.getText("msg.10")):(c.default.openWaitingDialog("\u63d0\u793a","\u9886\u53d6\u4e2d..."),this.sendMsgToSdk({cmd:"/c/useCdkey",data:{userId:d.default.getUid(),cdkStr:e,channelId:0}}))},t.getServerRecord=function(){console.info("mgrSdk getServerRecord"),this.sendMsgToSdk({cmd:"/c/getUserData",data:{}})},t.saveServerRecord=function(e){console.info("mgrSdk saveServerRecord"),this.sendMsgToSdk({cmd:"/c/saveUserData",data:{userData:e}})},t.getUserInfoMsg=function(){this.sendMsgToSdk({cmd:"/c/getUserInfoMsgResult",data:{}})},t.addGameToMyFavorite=function(e,t){console.info("mgrSdk addGameToMyFavorite"),this.sendMsgToSdk({cmd:"/c/addGameToMyFavorite",data:{typeId:e,content:t,userData:JSON.stringify({})}})},t.installShortcut=function(e){void 0===e&&(e="{}"),console.info("mgrSdk installShortcut"),this.sendMsgToSdk({cmd:"/c/installShortcut",data:{userData:e}})},t.setClipboardData=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/setClipboardData",data:{clipboardData:e,userData:t}})},t.getClipboardData=function(e){void 0===e&&(e="{}"),this.sendMsgToSdk({cmd:"/c/getClipboardData",data:{userData:e}})},t.DEBUG=!0,t.STATIS_MONEY_ITEM_IDS=((n={})[s.default.ITEM_ID_GOLD]=!0,n),t.__back_prompt_dialog=null,t=o=r([v],t)}(i.default);o.default=y,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrChannel":"mgrChannel","./mgrCop":"mgrCop","./mgrI18n":"mgrI18n","./mgrNative":"mgrNative","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrSelectPart:[function(e,t,o){"use strict";cc._RF.push(t,"015d4LbmFhDOqv6l8h3xBJZ","mgrSelectPart");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("select_part")||{};this.dailyJoinedCount=t.dailyJoinedCount||0,this.lastResetTime=t.lastResetTime||0,this.adAddCount=t.adAddCount||0,this.tryReset()},t.saveRecord=function(){e.saveRecord.call(this);var t={dailyJoinedCount:this.dailyJoinedCount,lastResetTime:this.lastResetTime,adAddCount:this.adAddCount};i.default.setData("select_part",t)},t.tryReset=function(){s.default.isOneDay(s.default.time(),this.lastResetTime||0)||(this.dailyJoinedCount=0,this.adAddCount=0,this.lastResetTime=s.default.time(),this.saveRecord())},t.markJoined=function(){this.sendMsg("MSG_SELECT_PART_CHALLENGE"),this.dailyJoinedCount+=1,this.saveRecord()},t.getJoinedCount=function(){return this.dailyJoinedCount||0},t.addCount=function(e){this.adAddCount+=e,this.sendMsg("MSG_SELECT_PART_COUNT_CHANGE"),this.saveRecord()},t.getCanJoinCount=function(){var e=(l.default.get_from_select_part_db(1).dailyCount||0)+this.adAddCount;return[e-(this.dailyJoinedCount||0),e]},t.dailyJoinedCount=0,t.lastResetTime=0,t.adAddCount=0,t=a([u],t)}(r.default));o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrRecord":"mgrRecord"}],mgrShop:[function(e,t,o){"use strict";cc._RF.push(t,"5912dgiR6xC2LqgHfLrNM7b","mgrShop");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrPlayer"),l=e("./mgrTip"),c=e("./mgrDirector"),u=e("./mgrSdk"),d=e("../Const"),p=e("./mgrAd"),f=e("./mgrAlu"),h=e("../../ulframework/utils/Tools"),g=e("./mgrRecord"),_=e("./mgrChannel"),m=e("./mgrI18n"),v=cc._decorator.ccclass,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_SDK_PAY_SUC:this.onMsgSdkPaySuc})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.getAllShopItemListByCategory=function(e){if(!e)return[];for(var t={},o=0;o<e.length;o++){var n=e[o];t[n]=!0}var a=[];return i.default.forDb_from_shop_template_db(function(e,o){t[o.category]&&f.default.check(o.aluId)&&a.push(o)}),a=h.default.sortArrayByField(a,["-order","id"])},t.requestBuy=function(e){var t=i.default.get_from_shop_template_db(e);if(t){var o=t.price,n=t.priceUnit;if(0!=n){var a=i.default.get_from_item_template_db(n);if(!a)return!1;s.default.getItemAmount(n)<o?l.default.showMsgTip(ul.format(m.default.getText("msg.11"),m.default.getText(a.name))):(s.default.addItemAmount(n,-o,"\u8d2d\u4e70\u6d88\u8017"),this.responseBuy(e))}else u.default.openPay(t.payId)}},t.responseBuy=function(e){var t=i.default.get_from_shop_template_db(e);if(t){for(var o=0;o<t.items.length;o++){var n=t.items[o],a=n[0],r=n[1],c=n[2];s.default.addItemAmount(a,r,"\u8d2d\u4e70"),c||l.default.addGotItemTip(a,r,null)}this.sendMsg("MSG_SHOP_BUY_SUCCESSED",{shopId:e}),u.default.statisOnItemBought(e,1,"\u8d2d\u4e70")}},t.getShopIdByPayId=function(e){var t;return i.default.forDb_from_shop_template_db(function(o,n){if(n.payId==e)return t=n.id,!0}),t},t.onMsgSdkPaySuc=function(e){var t=e,o=this.getShopIdByPayId(t.payId);this.responseBuy(o),g.default.forceRecord()},t.onReceiveSdkPayInfo=function(e){for(var t={},o=0;o<e.length;o++){var n=e[o];t[n.payId]=!0}var a={},r=[];i.default.forDb("shop_template_db",function(e,o){0==o.priceUnit&&o.payId&&(t[o.payId]||(a[o.id]=!0,r.push(o.id)))}),this.banShopIds=a,console.info("mgrShop.onReceiveSdkPayInfo"),console.info("  \u7981\u7528\u5546\u54c1\uff1a",r.join(",")),this.sendMsg("MSG_SHOP_BUY_SUCCESSED",{shopId:0})},t.tipItemNotEnough=function(e){void 0===e&&(e=d.default.ITEM_ID_GOLD);var t=i.default.get_from_item_template_db(e);t&&l.default.showMsgTip(ul.format(m.default.getText("msg.11"),m.default.getText(t.name)))},t.tryOpenShop=function(e){if(void 0===e&&(e=d.default.ITEM_ID_GOLD),e==d.default.ITEM_ID_GOLD){var t=p.default.preCheckCanTriggerAdEvent("free_gold"),o=_.default.isOpenPay();if(t&&o)return void c.default.openDialog("vShop02Dialog");if(o)return void c.default.openDialog("vShop01Dialog");if(t)return void c.default.openDialog("vFreeGoldDialog")}},t.canSupplyItem=function(e){return void 0===e&&(e=d.default.ITEM_ID_GOLD),!1},t.banShopIds={},t=a([v],t)}(r.default);o.default=y,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip"}],mgrSign:[function(e,t,o){"use strict";cc._RF.push(t,"039108UaRpFWr4CM1+LI6AB","mgrSign");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../Const"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("./mgrTip"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("sign")||{};this.signedDay=t.signedDay||0,this.signedIndex=t.signedIndex||0,this.lastSignTime=t.lastSignTime||0},t.saveRecord=function(){e.saveRecord.call(this);var t={signedDay:this.signedDay,signedIndex:this.signedIndex,lastSignTime:this.lastSignTime};i.default.setData("sign",t)},t.getState=function(){if(l.default.isOneDay(l.default.time(),this.lastSignTime)){var e=this.getSignDay(),t=this.getSignIndex();return(o=(c.default.get("sign_db",e)||[])[t])?this.lastSignTime+o.rewardGap<=l.default.time()?s.SignState.canSign:s.SignState.waitGap:s.SignState.signed}var o;e=this.getSignDay();return(o=c.default.quietGet("sign_db",e,0))?s.SignState.canSign:s.SignState.signOver},t.getSignDay=function(){return l.default.isOneDay(l.default.time(),this.lastSignTime)?this.signedDay:this.signedDay+1},t.getSignIndex=function(){return l.default.isOneDay(l.default.time(),this.lastSignTime)?this.signedIndex:0},t.sign=function(){var e={bSuccessd:!1};if(this.getState()!=s.SignState.canSign)return e;var t=this.getSignDay(),o=this.getSignIndex(),n=c.default.get_from_sign_db(t,o);this.lastSignTime=l.default.time(),this.signedDay=t,this.signedIndex=o+1,this.saveRecord(),this.sendMsg("MSG_SIGN");for(var a=0;a<n.rewards.length;a++){var r=n.rewards[a],i=r[0],d=r[1];u.default.addItemAmount(i,d,"\u7b7e\u5230")}return e.bSuccessd=!0,e.rewards=n.rewards,e},t.getNextSignRewardGold=function(){var e=this.getSignDay(),t=this.getSignIndex(),o=(c.default.get("sign_db",e)||[])[t];if(!o)return 0;for(var n=0,a=0;a<o.rewards.length;a++){var r=o.rewards[a],i=r[0],l=r[1];i==s.default.ITEM_ID_GOLD&&(n+=l)}return n},t.isGoldNextSignRewardItem=function(){var e=this.getSignDay(),t=this.getSignIndex(),o=(c.default.get("sign_db",e)||[])[t];if(!o)return!1;for(var n=0;n<o.rewards.length;n++){var a=o.rewards[n],r=a[0];a[1];if(r==s.default.ITEM_ID_GOLD)return!0}return!1},t.getRemainTime=function(){if(this.getState()!=s.SignState.waitGap)return 0;var e=this.getSignDay(),t=this.getSignIndex(),o=(c.default.get("sign_db",e)||[])[t];if(!o)return 0;var n=this.lastSignTime+o.rewardGap;return Math.max(0,n-l.default.time())},t.getBadgeCout=function(){return o.getState()==s.SignState.canSign?1:0},t.getAllRewardParts=function(){var e=[];return c.default.forDb("sign_db",function(t,o){for(var n=0;n<o.length;n++)for(var a=o[n],r=0;r<a.rewards.length;r++){var i=a.rewards[n],l=i[0],u=(i[1],c.default.get_from_item_template_db(l));u&&u.flag==s.default.ITEM_FLAG_PART&&e.push(l)}}),e},t.isSignOver=function(){return 7==this.signedDay&&this.getState()==s.SignState.signOver},t.onMsgAdEventSuccessd=function(e){if("double_reward_sign"==e.adEventId){var t=o.sign();if(t.bSuccessd)for(var n=0;n<t.rewards.length;n++){var a=t.rewards[n],r=a[0],i=a[1];u.default.addItemAmount(r,i,"\u7b7e\u5230\u53cc\u500d"),r!=s.default.ITEM_ID_GOLD?d.default.addGotItemTip(r,i):d.default.addGotItemTip(r,2*i)}}},t.signedDay=null,t.signedIndex=null,t.lastSignTime=null,t=o=a([f],t)}(r.default));o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrSound:[function(e,t,o){"use strict";cc._RF.push(t,"d62efGiv1FBWZE+W4nbmQMF","mgrSound");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrCfg"),l=e("./mgrDirector"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.game.EVENT_HIDE"),o.pauseSound("mgrSound")}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.game.EVENT_SHOW"),o.resumeSound("mgrSound")}),this.registerListeners({MSG_SCENE_LOADED:this.onMsgSceneLoaded}),this._createRootNode(),this._createMusicSource()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("sound")||{};this.musicVolume=null!=t.musicVolume?t.musicVolume:1,this.effectVolume=null!=t.effectVolume?t.effectVolume:1,this.setMusicVomue(this.musicVolume,!0),this.setEffectVolume(this.effectVolume,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={musicVolume:this.musicVolume,effectVolume:this.effectVolume};i.default.setData("sound",t)},t.onMsgSceneLoaded=function(){this.playingMusicSoundId&&this._playMusic(this.playingMusicSoundId)},t._createRootNode=function(){var e=cc.director.getScene().getChildByName("sound");e||((e=new cc.Node).name="sound",e.parent=cc.director.getScene(),cc.game.addPersistRootNode(e));this._nodeRoot=e},t._createMusicSource=function(){var e=new cc.Node;e.parent=this._nodeRoot;var t=e.addComponent(cc.AudioSource);this._musicSource=t},t._playMusic=function(e){var t=this.allAudioClips[e];if(t&&this._musicSource){var o=this._musicSource;o.clip=t,o.loop=!0,o.volume=this.musicVolume,o.setCurrentTime(0),o.play()}},t._stopMusic=function(){this._musicSource&&this._musicSource.stop()},t._playEffect=function(e){var t=this.allAudioClips[e];if(t){var o=this._effectSources[e];o||(o=[],this._effectSources[e]=o);for(var n=null,a=0;a<o.length;a++){var r=o[a];if(!r.isPlaying){n=r;break}}if(!n){var i=new cc.Node;i.parent=this._nodeRoot,n=i.addComponent(cc.AudioSource),o.push(n)}n.clip=t,n.loop=!1,n.volume=this.effectVolume,n.setCurrentTime(0),n.play()}},t._stopEffects=function(){for(var e in this._effectSources)for(var t=this._effectSources[e],o=0;o<t.length;o++){t[o].stop()}},t.play=function(e){var t=this,o=this.allAudioClips[e],n=s.default.get("sound_db",e);if(n)if(1==n.type){if(this.musicVolume<=0)return;if(e==this.playingMusicSoundId)return;if(this.playingMusicSoundId=e,o)this._playMusic(e);else{if(!(a=this.getUrl(e)))return;l.default.loadRes(a,cc.AudioClip,function(o,n){o||(t.allAudioClips[e]=n,e==t.playingMusicSoundId&&t.musicVolume>0&&t._playMusic(e))})}}else{if(this.effectVolume<=0)return;if(n.bStopAllEffect&&this._stopEffects(),o)this._playEffect(e);else{var a;if(!(a=this.getUrl(e)))return;l.default.loadRes(a,cc.AudioClip,function(o,n){o||(t.allAudioClips[e]=n,t._playEffect(e))})}}},t.getUrl=function(e){var t=s.default.get_from_sound_db(e);if(!t)return"";var o=t.fileName.split(".");return 2!=o.length?t.fileName:o[0]},t.stopAll=function(){this._stopEffects(),this._stopMusic()},t.pauseSound=function(e){console.info("\u6682\u505c\u58f0\u97f3:"+e);var t=this.pauseRouters.length>0;if(-1==this.pauseRouters.indexOf(e)&&this.pauseRouters.push(e),!t){this._musicSource.pause();for(var o in this._effectSources)for(var n=this._effectSources[o],a=0;a<n.length;a++){n[a].pause()}}},t.resumeSound=function(e){console.info("\u6062\u590d\u58f0\u97f3:"+e);var t=this.pauseRouters.indexOf(e);t>=0&&this.pauseRouters.splice(t,1),this.pauseRouters.length>0||this._musicSource.resume()},t.getMusicVolmue=function(){return this.musicVolume},t.setMusicVomue=function(e,t){this.musicVolume=e,e<=0?this._stopMusic():this.playingMusicSoundId&&this._playMusic(this.playingMusicSoundId),t||this.saveRecord()},t.getEffectVolume=function(){return this.effectVolume},t.setEffectVolume=function(e,t){this.effectVolume=e,e<=0&&this._stopEffects(),t||this.saveRecord()},t.preload=function(e,t){var o=this,n=this.getUrl(e);n&&!cc.loader.getRes(n,cc.AudioClip)?l.default.loadRes(n,cc.AudioClip,function(n,a){n||(o.allAudioClips[e]=a),t&&t(e)}):t&&t(e)},t.playingMusicSoundId=null,t.musicVolume=1,t.effectVolume=1,t.allAudioClips={},t.pauseRouters=[],t._nodeRoot=null,t._musicSource=null,t._effectSources={},t=o=a([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrRecord":"mgrRecord"}],mgrStage:[function(e,t,o){"use strict";cc._RF.push(t,"62d25C1vvlEvY/VQxvAbWbd","mgrStage");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrRecord"),l=e("./mgrTip"),c=e("./mgrPlayer"),u=e("../Const"),d=e("./mgrDebug"),p=e("./mgrAchievement"),f=e("./mgrDirector"),h=cc._decorator.ccclass,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=s.default.getData("stage")||{};this.stageDatas=o.stageDatas||{},this.stageProgress=o.stageProgress||0,i.default.forDb_from_stage_db(function(e,o){var n=t.stageDatas[o.id]||{rating:0};t.stageDatas[o.id]=n})},t.saveRecord=function(){e.saveRecord.call(this);var t={stageDatas:this.stageDatas,stageProgress:this.stageProgress};s.default.setData("stage",t)},t.tryBeginStage=function(e){var t=i.default.get_from_stage_db(e);if(!t)return cc.warn("mgrStage.tryBeginStage stage not found!",e),l.default.showMsgTip("\u65e0\u6548\u5173\u5361\uff1a"+e),!1;if(!this.isStageUnlocked(e))return l.default.showMsgTip("\u5c1a\u672a\u89e3\u9501"),!1;var o=t.costs[0],n=o[0],a=o[1];if(c.default.getItemAmount(n)<a){var r=i.default.get("item_template_db",n);return l.default.showMsgTip(ul.format("[%s]\u4e0d\u8db3",r.name)),f.default.openDialog("vShopDialog"),!1}return!0},t.costStageEnergy=function(e){var t=i.default.get_from_stage_db(e).costs[0],o=(t[0],t[1]);o>0&&c.default.addItemAmount(u.default.ITEM_ID_ENERGY,-o,"\u5173\u5361\u6d88\u8017")},t.finishStage=function(e,t){var o=i.default.get_from_stage_db(e);if(!o)return cc.warn("mgrStage.finishStage stage not found!",e),null;var n=this.getStageRating(e),a=!1;if(o.stageProgress&&o.stageProgress>0&&this.stageProgress<o.stageProgress&&(this.stageProgress=o.stageProgress),t>n&&(this.stageDatas[e].rating=t,a=!0),0==n&&o.firstRewards)for(var r=0;r<o.firstRewards.length;r++){var s=o.firstRewards[r],l=s[0],d=s[1];i.default.get("item_template_db",l)&&c.default.addItemAmount(l,d,"\u5173\u5361")}var p=0,f=[];t>0&&(f=o["reward_"+t]);for(r=0;r<f.length;r++){var h=f[r];l=h[0],d=h[1];i.default.get("item_template_db",l)&&(c.default.addItemAmount(l,d,"\u5173\u5361"),l==u.default.ITEM_ID_GOLD&&(p+=d))}return a&&(this.sendMsg("MSG_STAGE_RATING_CHAGNED",{stageId:e,rating:t}),this.saveRecord()),{stageId:e,rating:t,goldRewardNum:p}},t.getStageProgress=function(){return this.stageProgress},t.getStageRating=function(e){var t=this.stageDatas[e];return t&&t.rating||0},t.isStageUnlocked=function(e){if(d.default.bUnlockAllStage)return!0;var t=i.default.get_from_stage_db(e);if(!t)return!1;for(var o=t.unlockAids,n=0;n<o.length;n++){var a=o[n];if(!p.default.isAchievementCompleted(a))return!1}return!0},t.calcChapterIdByStageId=function(e){var t=-1;return i.default.forDb("stage_chapter_db",function(o,n){t++;for(var a=0;a<n.stageIds.length;a++)if(e==n.stageIds[a])return n.id,!0}),t},t.getLastChapterIndex=function(){var e=this,t=0;return i.default.forDb_from_stage_db(function(o,n){if(t=n.id,n.stageProgress==e.getStageProgress()+1)return!0}),this.calcChapterIdByStageId(t)},t.calcGetStarNum=function(){var e=0;for(var t in this.stageDatas)if(this.stageDatas.hasOwnProperty(t)){var o=this.stageDatas[t];o.rating>1&&(e+=o.rating-1)}return e},t.stageDatas={},t=a([h],t)}(r.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../Const":"Const","./mgrAchievement":"mgrAchievement","./mgrCfg":"mgrCfg","./mgrDebug":"mgrDebug","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrText:[function(e,t,o){"use strict";cc._RF.push(t,"ef6686BEbZOV7JvEBZVSsF+","mgrText");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.textMapping={},this.processTextDb()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.processTextDb=function(){var e=this;i.default.forDb("text_db",function(t,o){e.textMapping[t]=o.text})},t.get=function(e){var t=this.textMapping[e];return t||(t=e),t},t.format=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.textMapping[e];return n?ul.format.apply(ul,[n].concat(t)):ul.format("%%s%",e)},t=a([s],t)}(r.default);o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg"}],mgrTip:[function(e,t,o){"use strict";cc._RF.push(t,"5653cyPaHRLGYVjQSV6Sg4n","mgrTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrDirector"),s=e("../../ulframework/utils/Timer"),l=e("../view/dialog/vPromptDialog"),c=e("../view/node/vMsgTip"),u=e("../Const"),d=e("./mgrCfg"),p=e("../../ulframework/utils/Tools"),f=e("./mgrPool"),h=e("./mgrShop"),g=e("./mgrAd"),_=e("./mgrPlayer"),m=e("../view/node/vMark"),v=e("../view/node/vGuessYouLike"),y=e("./mgrChannel"),C=e("../view/node/vNativeBanner"),b=e("../view/dialog/vSetLanguage"),S=e("./mgrI18n"),R=cc._decorator.ccclass,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.msgTipQueue=[],this.iconTipQueue={}},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.showPicker=function(e,t,o,n,a){new b.default({title:e,conf:t,callback:o,bKeepDialogOpen:n,fontSize:a}).openDialog(!0)},t.alertPrompt0=function(e,t){return this._alertPrompt(e,t,[],[])},t.alertPrompt=function(e,t,o,n){return this._alertPrompt(e,t,[o],[n])},t.alertPrompt2=function(e,t,o,n,a,r){return this._alertPrompt(e,t,[o,n],[a,r])},t.alertPrompt3=function(e,t,o,n,a,r,i,s){return this._alertPrompt(e,t,[o,n,a],[r,i,s])},t._alertPrompt=function(e,t,o,n){var a=new l.default({title:e,content:t,btnTexts:o,callbacks:n});return a.openDialog(),a},t.showMsgTip=function(e,t,o,n,a){if(t=t||cc.v2(.5*i.default.width,.75*i.default.height),this.msgTipQueue.push({text:e,startPosition:t,color:o,outlineColor:n,deltaY:a}),!this.msgTipTimer){var r=new s.default(1,-1,this._onMsgTipTimerLoop.bind(this));r.start(!0),this.msgTipTimer=r,this._onMsgTipTimerLoop(r)}},t._onMsgTipTimerLoop=function(e){if(this.msgTipQueue.length<=0)return e.stop(),void(this.msgTipTimer=null);var t=this.msgTipQueue.shift(),o=new c.default;o.setText(t.text),t.color&&o.setColorEx(t.color,t.outlineColor),o.play(t.startPosition,t.deltaY)},t.getTipRootNode=function(){var e=i.default.getRunningSceneCanvas(),t=e.getChildByName("__tip_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_root__",t.zIndex=u.default.GLOBAL_ORDER_TIP),t},t.getTipIconRootNode=function(){var e=i.default.getRunningSceneCanvas(),t=e.getChildByName("__tip_icon_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_icon_root__",t.zIndex=u.default.GLOBAL_ORDER_TIP_ICON),t},t.getTipIceNode=function(){var e=i.default.getRunningSceneCanvas(),t=e.getChildByName("__tip_ice__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_ice__",t.position=cc.v2(-i.default.width/2,-i.default.height/2),t.zIndex=u.default.GLOBAL_ORDER_TIP),t},t.addGotItemTip=function(e,t,o,n){this.defaultGotItemQueue.push({itemId:e,amount:t,amountSteps:o,customerContext:n}),this._tryShowGotItemDialog()},t.insertGotItemTip=function(e,t,o,n){this.defaultGotItemQueue.unshift({itemId:e,amount:t,amountSteps:o,customerContext:n}),this._tryShowGotItemDialog()},t.addGotItemTipGroup=function(e){var t=this,o=null;p.default.forEachMap(this.gotItemQueues,function(e,n){if(n!=t.defaultGotItemQueue&&n.length<=0)return o=n,!0}),o||(o=[],this.gotItemQueues.push(o));for(var n=0;n<e.length;n++){var a=e[n];o.push(a)}this._tryShowGotItemDialog()},t._tryShowGotItemDialog=function(){for(var e=this,t=function(t){var n=o.gotItemQueues[t];if(!o.gotItemDialogShowingFlags[t]&&n.length>0){o.gotItemDialogShowingFlags[t]=!0;var a=n.shift(),r={};a.customerContext&&p.default.forEachMap(a.customerContext,function(e,t){r[e]=t}),r.itemId=a.itemId,r.amount=a.amount,r.amountSteps=a.amountSteps,r.fOnDialogClose=function(){e.gotItemDialogShowingFlags[t]=!1,a.customerContext&&a.customerContext.fOnDialogClose instanceof Function&&a.customerContext.fOnDialogClose(),e._tryShowGotItemDialog()},i.default.openDialog("vGotItemDialog",r)}},o=this,n=0;n<this.gotItemQueues.length;n++)t(n)},t.isAllGotItemTipDisplayed=function(){var e=!1;if(p.default.forEachMap(this.gotItemDialogShowingFlags,function(t,o){if(o)return e=!0,!0}),e)return!1;for(var t=0;t<this.gotItemQueues.length;t++){if(this.gotItemQueues[t].length>0)return!1}return!0},t.showItemDetailDialog=function(e,t,o){o=o||{},null==t&&(t=1),o.itemId=e,o.amount=t;i.default.openDialog("vItemDetailDialog",o)},t.isWaitingDialogOpened=function(){return null!=this.waitingDialog},t.openWaitingDialog=function(e,t,o){var n=this;if(!this.isWaitingDialogOpened()){var a=new l.default({title:e||"\u63d0\u793a",content:t||"\u8bf7\u7a0d\u5019...",btnTexts:[o||"\u53d6\u6d88"],fOnDialogClose:function(){n.waitingDialog=null}});a.openDialog(),this.waitingDialog=a}},t.closeWaitingDialog=function(){this.waitingDialog&&(this.waitingDialog.closeDialog(),this.waitingDialog=null)},t.playParticleOnce=function(e,t,o,n,a){var r=f.default.get("particle",e);r&&(r.parent=a||this.getTipRootNode(),r.position=r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.setAutoRemoveOnFinish(!0))},t.playSpineOnce=function(e,t,o,n,a){var r=f.default.get("spine",e);r&&(r.parent=a||this.getTipRootNode(),r.position=r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.play("mov_1",!1),r.registerEventCallback(function(e){"cpmplete"==e.name&&(r.removeFromParent(),f.default.put(r),r=null)}))},t.playAnimNodeOnce=function(e,t,o,n,a){var r=f.default.get("animNode",e);r&&(r.parent=a||this.getTipRootNode(),r.position=a?cc.v2(t,o):r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.play(),r.registerEventCallback(function(e){"finished"!=e.name&&"lastframe"!=e.name||(r.removeFromParent(),f.default.put(r),r=null)}))},t.showIconTips=function(e,t,o,n,a){var r=d.default.get("item_template_db",e,"icon"),l=ul.format("*%d",t);if(o=o||new cc.Vec2(0,0),n=n||new cc.Vec2(60,60),o=cc.v2(o.x-i.default.width/2,o.y-i.default.height/2),n=cc.v2(n.x-i.default.width/2,n.y-i.default.height/2),a){var c=.5;this.iconTipQueue[a]||(this.iconTipQueue[a]=[]),0==this.iconTipQueue[a].length&&(c=0),this.iconTipQueue[a].push({icon:r,startPos:o,endPos:n,text:l,interval:c}),this.iconTipTimer||(this.iconTipTimer=new s.default(.1,-1,this._onShowIconTimerCallback.bind(this)),this.iconTipTimer.start(!0))}else this._playShowIcon({icon:r,startPos:o,endPos:n,text:l})},t.showIconTipsWithAdRewardCheck=function(e,t,o,n,a){var r="got_item_addition_reward";if(g.default.preCheckCanTriggerAdEvent(r)){cc.log("vGotItemDialog.initAdRewad trigger a ad reward.",r);var i=d.default.get("ad_event_db",r),s=_.default.openItemBox(i.param.rewardBoxId);this.addGotItemTip(e,t,null,{adEventId:r,adRewards:s})}else this.showIconTips(e,t,o,n,a)},t._onShowIconTimerCallback=function(){var e=this,t=!0;if(p.default.forEachMap(this.iconTipQueue,function(e,o){o&&o.length>0&&(t=!1)}),t)return this.iconTipTimer.stop(),void(this.iconTipTimer=null);p.default.forEachMap(this.iconTipQueue,function(t,o){if(o&&o.length>0){var n=o[0];n.interval-=.1,n.interval<=0&&(n=o.shift(),e._playShowIcon(n))}else e.iconTipQueue[t]=[]})},t._playShowIcon=function(e){},t.showCommonRouter=function(e,t){var n=this,a=d.default.get("item_template_db",e),r=a.buySource||1,i=d.default.get("common_router_db",r),s=this["__checkCommonRouter"+i.router.toString()];if(s instanceof Function){var l=s({itemId:e});if(1!=l){if(0==l){var c=this["__commonRouter"+i.router.toString()],u={};return u.param=i.param||{},u.itemId=e,u.reason=t,c(u)}return o.showMsgTip(ul.format(S.default.getText("msg.11"),S.default.getText(a.name))),void cc.warn("error: this router is checked, and not pass"+e)}}else cc.warn("error: this router is not exist!!!"+e);o.showItemDetailDialog(e,null,{callback:function(){var o=n["__commonRouter"+i.router.toString()],a={};return a.param=i.param||{},a.itemId=e,a.reason=t,o(a)},bCanBuy:1==i.router,bCanGet:1!=i.router,routerDes:i.name})},t.__commonRouter1=function(e){var t=e.itemId;if(d.default.quietGet("shop_template_db",t))return h.default.requestBuy(t),!0;d.default.get("shop_router_db",e.itemId);return!0},t.__commonRouter2=function(e){return!0},t.__commonRouter3=function(e){return!0},t.__checkCommonRouter1=function(e){return d.default.get("shop_template_db",e.itemId)?1:d.default.get("shop_router_db",e.itemId)?0:-1},t.__checkCommonRouter2=function(e){return 1},t.__checkCommonRouter3=function(e){return 1},t.__checkCommonRouter4=function(e){return 1},t.__checkCommonRouter5=function(e){return 1},t.setCountBadgeValue=function(e,t,o,n,a){var r=e.__mark;if(t>0){r||(r=new m.default,e.addChild(r,99),e.__mark=r),o=o||0,n=n||0,a=a||1;var i=e.getContentSize();r.setPosition(i.width/2*.8+o,i.height/2*.8+n),r.scale=a,r.setCount(t)}else r&&(e.removeChild(r),e.__mark=null)},t.addChildToCanvas=function(e,t){e.parent=this.getTipRootNode(),e.setPosition(e.parent.convertToNodeSpace(t))},t.playIconTip=function(e,t,o,n){void 0===n&&(n=!1)},t.playLittleFlower=function(e,t,n,a){void 0===n&&(n=1),void 0===a&&(a=1);var r=o.getTipRootNode(),i=f.default.get("view","vFlowerTip");i.parent=r;var s=i.parent.convertToNodeSpaceAR(e);i.setPosition(s.x,s.y+70*n),i.fillData(t),i.stopAllActions(),i.scale=0,i.rotation=0;var l=p.default.random(-70,70)*n*a,c=p.default.random(-40,-90);a>1&&(c=p.default.random(-500,250)),i.runAction(cc.sequence(cc.scaleTo(.12,.5*n).easing(cc.easeIn(1.5)),cc.spawn(cc.jumpBy(.5,cc.v2(l,c),120*n,1).easing(cc.easeOut(1.5)),cc.sequence(cc.delayTime(.2),cc.rotateTo(.2,90))),cc.scaleTo(.05,0),cc.callFunc(function(){var e=i.parent.convertToWorldSpaceAR(i.getPosition()),t=r.convertToNodeSpaceAR(e),o=f.default.get("spine","yan");o.position=t.addSelf(cc.v2(0,-20)),o.parent=r,o.scale=.3,o.setTimeScale(3),o.play("mov_1",!1),o.registerEventCallback(function(e){"cpmplete"==e.name&&(o.removeFromParent(),f.default.put(o),o=null)}),i.removeFromParent(),f.default.put(i)})))},t.playAnimNodeOnce56=function(e,t,o,n,a){var r=f.default.get("animNode",e);r&&(r.parent=a||this.getTipRootNode(),r.position=a?cc.v2(t,o):r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.play(),r.registerEventCallback(function(e){"finished"!=e.name&&"lastframe"!=e.name||(r.removeFromParent(),r.destroy())}))},t.tryAddGuessYouLikeNode=function(e,t){(void 0===t&&(t=cc.v2(0,0)),y.default.canGameInterPush3())&&(new v.default({offset:t}).parent=e)},t.showNativeBanner=function(e,t,o){void 0===o&&(o=cc.v2(0,0)),this.nativeAdBanner&&cc.isValid(this.nativeAdBanner)||(this.nativeAdBanner=new C.default({adEventId:e}),this.nativeAdBanner.parent=t),this.nativeAdBanner.y=-i.default.height/2+this.nativeAdBanner.height/2+o.y,this.nativeAdBanner.x=o.x,this.nativeAdBanner.active=!0},t.hideNativeBanner=function(){this.nativeAdBanner&&(this.nativeAdBanner.destroy(),this.nativeAdBanner=null)},t.defaultGotItemQueue=[],t.gotItemQueues=[o.defaultGotItemQueue],t.gotItemDialogShowingFlags={},t.waitingDialog=null,t=o=a([R],t)}(r.default);o.default=T,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/dialog/vPromptDialog":"vPromptDialog","../view/dialog/vSetLanguage":"vSetLanguage","../view/node/vGuessYouLike":"vGuessYouLike","../view/node/vMark":"vMark","../view/node/vMsgTip":"vMsgTip","../view/node/vNativeBanner":"vNativeBanner","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrPool":"mgrPool","./mgrShop":"mgrShop"}],mgrUnitTest:[function(e,t,o){"use strict";cc._RF.push(t,"d38b3oLvxpNuaKnX1HT6A6J","mgrUnitTest"),cc._RF.pop()},{}],mgrWordFilter:[function(e,t,o){"use strict";cc._RF.push(t,"a1118JdzxdJhYgV0aWBnGCX","mgrWordFilter");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this._loadWords()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._loadWords=function(){if(!this.badwords){var e=i.default.getDb("badword_db");this._processBadwords(e)}},t._processBadwords=function(e){this.badwords=e},t.checkStr=function(e){if(!e)return!0;for(var t=this.badwords,o=0;o<t.length;o++)if(e.match(t[o]))return!1;return!0},t.filterStr=function(e,t){t=t||this.REP_STR;for(var o=this.badwords,n=0;n<o.length;n++)e=e.replace(o[n],t);return e},t.hasSymbol=function(e){return!!e.match(this.REP_NO_SYMBOL)},t.filterSymbol=function(e){return e?e=e.replace(this.REP_NO_SYMBOL,""):""},t.REP_STR="**",t.REP_NO_SYMBOL=/[\!\@\#\$\%\^\&\*\(\)\`\~\<\>\,\.\/\?\;\:\'\"\[\]\{\}\\\|\-\=\_\+\n\r\t\b ]/g,t=a([s],t)}(r.default);o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg"}],"polyglot.min":[function(e,t,o){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,a){"function"==typeof define&&define.amd?define([],function(){return a(e)}):"object"==(void 0===o?"undefined":n(o))?t.exports=a(e):e.Polyglot=a(e)})(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function o(e){var t,o,n,a={};for(t in e)if(e.hasOwnProperty(t)){o=e[t];for(n in o)a[o[n]]=t}return a}function a(e){return e.replace(/^\s+|\s+$/g,"")}function r(e,t,o){var n,r;return null!=o&&e?n=a((r=e.split(d))[s(t,o)]||r[0]):n=e,n}function i(e){var t=o(f);return t[e]||t.en}function s(e,t){return p[i(e)](t)}function l(e,t){for(var o in t)"_"!==o&&t.hasOwnProperty(o)&&(e=e.replace(new RegExp("%\\{"+o+"\\}","g"),t[o]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function u(e){var t={};for(var o in e)t[o]=e[o];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var o;for(var a in e)e.hasOwnProperty(a)&&(o=e[a],t&&(a=t+"."+a),"object"==(void 0===o?"undefined":n(o))?this.extend(o,a):this.phrases[a]=o)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var o,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof t._?o=t._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof o&&(t=u(t),n=l(n=r(o,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var d="||||",p={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},f={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],pt:[function(e,t,o){"use strict";cc._RF.push(t,"5e379qlFa9O3bFeSurV407I","pt"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.pt={ui:{56:"Tentativas restantes:",77:"N\xe3o h\xe1 mais vezes, volte amanh\xe3",54:"Toque para come\xe7ar o jogo",51:"Classifica\xe7\xe3o",48:"Melhorar",43:"Voc\xea pode experiment\xe1-lo uma vez de gra\xe7a",60:"Desbloquear gr\xe1tis",61:"Recompensa da classifica\xe7\xe3o",63:"Cole\xe7\xf5es",64:"Selecione um idioma",53:"Hora da sorte",66:"Escolha as pe\xe7as que ela usa!",67:"Adivinhe novamente",68:"Visualiza\xe7\xe3o da recompensa",69:"Se deseja ver an\xfancios por mais tr\xeas vezes",80:"Efeito de n\xedvel %d:",52:"Voc\xea n\xe3o tem esse tipo de item",86:"Ganhos em dobro",84:"Uma vez",85:"Adivinhe mais tr\xeas vezes",24:"Melhoria gr\xe1tis",25:"Crescimento",26:"Gaste moedas",27:"Cresceu %d vez +%d",20:"Dicas",21:"Op\xe7\xf5es",22:"Gr\xe1tis",23:"Melhorar",46:"Desafio gr\xe1tis",47:"Hora da sorte",44:"Alterar advers\xe1rio",45:"Iniciar desafio",42:"Experimente",29:"Nome",40:"Assista ao an\xfancio para moedas em dobro",41:"Salvar",1:"OBTER",82:"Erro, tente novamente mais tarde",3:"Em dobro",2:"Parab\xe9ns!",5:"Tempo offline",4:"Em dobro",7:"Voc\xea encontrou muitas moedas ao coletar flores. Parab\xe9ns!",6:"Assistir ao an\xfancio",9:"Toda a classifica\xe7\xe3o",8:"Pr\xeamio",83:"Pr\xeamios extras",81:"%d moedas podem ser produzidas a cada %d segundos",39:"Tarefas di\xe1rias",65:"Obtenha aleatoriamente o item a seguir",76:"Cole\xe7\xe3o de perguntas sobre roupas",75:"para receber, continue a participar do question\xe1rio",38:"Progresso",73:"Substitui\xe7\xe3o",72:"Tente ganhar",71:"Jogue por um tempo e volte para receber sua recompensa",70:"Obter extra",59:"Melhorar",79:"Limite de n\xedvel:",78:"Adivinha direito %d vez",11:"Pr\xeamio",10:"Itens",13:"Parab\xe9ns! Voc\xea ganhou uma tentativa gr\xe1tis no sorteio",12:"Cancelar",15:"Assista ao an\xfancio para ganhar moedas iguais a 1 hora de produ\xe7\xe3o de todas as fadas: %s",14:"OBTER",16:"Melhoria gr\xe1tis",19:"Parab\xe9ns! Voc\xea ganhou novas flores",18:"Crescimento com sucesso. O limite de n\xedvel agora subiu para %d. Assistir ao an\xfancio para melhorar para o Nv. %d?",31:"Sim",49:"Desbloquear",37:"Em dobro",36:"As moedas produzidas a partir de todas as flores dobram. Dura\xe7\xe3o de 15 minutos.",35:"Cancelar",34:"Ir para",33:"Voc\xea tem moedas o suficiente para comprar roupas novas",55:"Recebido",74:"Claimable",32:"Minha classifica\xe7\xe3o",57:"Minha classifica\xe7\xe3o",50:"Nome"},daily_task_db_desc:{1:"Desafie na Rua da Fada 3 vezes",3:"Colete flores 10 vezes",2:"Melhore uma fada 1 vez"},arena_level_db_stage:{1:"Rua da Fada"},sign_db_title:{1:"Dia 1",3:"Dia 3",2:"Dia 2",5:"Dia 5",4:"Dia 4",7:"Dia 7",6:"Dia 6"},alert:{11:"Sair do jogo agora?",12:"Sair do jogo",3:"Valor da recompensa: %s!",5:"Redefinir",4:"Deseja redefinir sua vestimenta?",7:"\xd3timo",6:"A combina\xe7\xe3o atual \xe9 igual \xe0 imagem salva",9:"Salvo! ",8:"Primeiro, vista-se adequadamente antes de solicitar"},shop_template_db_name:{1:"\u0938\u094d\u091f\u0948\u092e\u093f\u0928\u093e \u0916\u092a\u0924:",2:"\u0938\u094d\u091f\u0948\u092e\u093f\u0928\u093e \u0916\u092a\u0924:"},item_template_db_desc:{2:"moedas",5:"Tentativas de participa\xe7\xe3o",4:"Tentativas da Arena",7:"Tentativas gr\xe1tis m\xe1x.",6:"Vit\xf3rias"},item_template_db_name:{15:"Tentativas gratuitas de participa\xe7\xe3o",17:"Vit\xf3rias",16:"Tentativas de participa\xe7\xe3o",19:"Teste de widget",18:"Tentativas gr\xe1tis m\xe1x.",1:"Diamantes",3:"Vigor",2:"moedas",5:"Per\xedodo de teste de vestimentas gr\xe1tis",4:"Vigor m\xe1ximo",9:"Jogador",8:"Pular an\xfancio"},msg:{24:"%d gr\xe1tis",25:"Provador",20:"Por favor, aguarde",21:"N\xe3o \xe9 a hora do check-in",22:"N\xe3o possu\xeddo",23:"Fora da classifica\xe7\xe3o",1:"Realiza\xe7\xe3o conclu\xedda",3:"Obtenha itens do check-in",2:"Parab\xe9ns! Voc\xea ganhou uma tentativa gr\xe1tis no sorteio",5:"N\xe3o \xe9 poss\xedvel obter agora",4:"Tudo coletado",7:"Conex\xe3o com sucesso",6:"Subida do n\xedvel de impress\xe3o",9:"Comprando outro item. Tente novamente mais tarde.",8:"Falha no login",11:"[%s] insuficiente(s)",10:"Processamento da reivindica\xe7\xe3o. Tente novamente mais tarde.",13:"Aguarde enquanto um novo advers\xe1rio \xe9 recarregado.",12:"Advers\xe1rio alterado!",15:"Nome",14:"Tentativas insuficientes",19:"N\xe3o \xe9 poss\xedvel fazer check-in de novo",18:"Voc\xea fez check-in"},arena_level_db_name:{1:"Comum",3:"Avan\xe7ada",2:"Intermedi.",5:"Sagrado",4:"\xc9pico",6:"Supremo"},guide_db_content:{1:"Plante flores com as fadas!",3:"Vamos verificar o conjunto de roupas que voc\xea tem",2:"Uma fada enviou algumas moedas para voc\xea! Colete-as!",5:"Adivinhe corretamente e ganhe uma roupa nova!",4:"Salvo! Voc\xea parece excelente. \xd3timo!",6:"Agora \xe9 hora da sua aventura!"},role_base_db_name:{1:"Lolly",3:"Paula",2:"Pav\xe3o",5:"Ana",4:"Maia"}},cc._RF.pop()},{}],sAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"2e26eNZ+xdEfJTn72iLqHxo","sAchievement"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Const"),a=e("../manager/mgrCfg"),r=e("../manager/mgrAchievement"),i=e("../manager/mgrPlayer"),s=e("../manager/mgrStage"),l=["data1","data2","data3","data4"],c=function(){function e(e){this.id=e,this.template=a.default.get("achievement_db",e),this.count=0,this.maxCount=0,this.state=n.AchievementState.unlocked}return e.prototype.setState=function(e){this.state=e},e.prototype.refreshCount=function(e){var t=this.template.targetType,o=a.default.get("achievement_target_db",t);if(o){if(!e||o.cmdHash[e]){var n=this[o.calcCountHandlerName];if(n instanceof Function){var i=n.bind(this)(),s=i[0],l=i[1],c=null!=this.count&&this.count!=s;this.count=s,this.maxCount=l,c&&r.default.sendMsg("MSG_ACHIEVEMENT_COUNT_CHANGED",{achievementId:this.id})}else cc.warn(ul.format("sAchievement.refreshCount handler not found! handler = %s",o.calcCountHandlerName))}}else cc.warn(ul.format("sAchievement.refreshCount target not found! targetType = %s",t))},e.prototype.refreshState=function(e){return(this.state==n.AchievementState.unlocked||0==this.maxCount)&&(this.refreshCount(e),this.state==n.AchievementState.unlocked&&this.maxCount<=this.count&&(this.state=n.AchievementState.finished,!0))},e.prototype._calcCount1=function(){var e=this.template,t=e.data1;return 1,[e.data2<=s.default.getStageRating(t)?1:0,1]},e.prototype._calcCount2=function(){var e=this.template,t=0,o=e.data1,n=e.data2,r=e.data3,i=a.default.quietGet("stage_chapter_db",o);if(t=0,i)for(var l=0;l<i.stageIds.length;l++){var c=i.stageIds[l];r<=s.default.getStageRating(c)&&t++}else cc.warn("sAchievement._calcCount2 chapter not found!",o);return[t,n]},e.prototype._calcCount4=function(){var e=this.template,t=e.data1,o=e.data2;return[i.default.getItemAmount(t),o]},e.prototype._calcCount5=function(){var e=this.template,t=e.data1,o=e.data2;return[this.__getItemAmountByFlag(t),o]},e.prototype._calcCount7=function(){var e=this.template,t=e.data1,o=e.data2;return[i.default.getItemHistoryGotAmount(t),o]},e.prototype._calcCount10=function(){var e=0,t=1,o=this.template.data1,n=a.default.quietGet("suit_db",o);if(n){for(var r=0;r<n.partIds.length;r++){var s=n.partIds[r];i.default.getItemAmount(s)>0&&e++}t=n.partIds.length}else cc.warn("sAchievement._calcCount10 suit not found!",o);return[e,t]},e.prototype._calcCount20=function(){for(var e=this.template,t=0,o=0,n=0;n<l.length;n++){var a=e[l[n]];a&&(o++,r.default.isAchievementCompleted(a)&&t++)}return[t,o]},e.prototype._calcCount21=function(){var e=0,t=0,o=this.template.customData.itemIds;if(o){t=o.length;for(var n=0;n<o.length;n++){var a=o[n];i.default.getItemAmount(a)>0&&e++}}return[e,t]},e.prototype._calcCount22=function(){var e=this.template.data1;return[i.default.getItemAmount(n.default.ITEM_ID_SELECT_PART_SUCCESS_COUNT),e]},e.prototype.__getItemAmountByFlag=function(e){var t=0;return a.default.forDb("item_template_db",function(o,n){n.flag==e&&i.default.getItemAmount(n.id)>0&&(t+=1)}),t},e}();o.default=c,cc._RF.pop()},{"../Const":"Const","../manager/mgrAchievement":"mgrAchievement","../manager/mgrCfg":"mgrCfg","../manager/mgrPlayer":"mgrPlayer","../manager/mgrStage":"mgrStage"}],sAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"c34c0aqD9dHi6/axcF5aOx3","sAvatar"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../manager/mgrCfg"),a=function(){function e(){this.setToDefault(),this._registerCmdHander()}return e.prototype._registerCmdHander=function(){var e,t=((e={}).CMD_AVATAR_PART_REMOVE=this._onCmdPartRemove.bind(this),e.CMD_AVATAR_PART_REPLACE=this._onCmdPartReplace.bind(this),e);this.cmdHanders=t},e.prototype.onCmd=function(e,t){var o=this.cmdHanders[e];o?o(t):cc.log("[warn] sAvatar.onCmd handler !found! cmd.",e)},e.prototype.setToDefault=function(){var e={};n.default.forDb_from_part_type_db(function(t,o){var n=null;o.defaultId&&(n=o.defaultId),e[o.id]=n}),this.allParts=e},e.prototype.removePartType=function(e){this.allParts&&e&&(this.allParts[e]=null)},e.prototype.removeAllPartType=function(){this.allParts={}},e.prototype.getPartId=function(e){var t=this.allParts[e];if(!t)return null;var o=n.default.get_from_part_db(t);return o&&o.bIgnoreInGrade?null:t},e.prototype.getPartDatas=function(){for(var e=[],t=this.getUsedPartIds(),o=0;o<t.length;o++){var a=t[o],r=n.default.get_from_part_db(a);r&&r.typeData&&0!=a&&r.typeData.defaultId!=a&&e.push(a)}return e},e.prototype.getUsedPartIds=function(){var e=[];for(var t in this.allParts){var o=this.allParts[t];if(null!=o)n.default.get_from_part_db(o).bIgnoreInGrade||e.push(o)}return e},e.prototype.serializeToText=function(){var e=this,t=[];n.default.forDb_from_part_type_db(function(o,a){var r=a.id,i=e.getPartId(r);if(i){var s=n.default.get_from_part_db(i);s&&!s.bIgnoreInGrade&&t.push(i)}});var o="";return t.length>0&&(o=t.join("_")),o},e.prototype.fillBySerializeText=function(e){if(this.setToDefault(),e)for(var t=e.split("_"),o=0;o<t.length;o++){var a=parseInt(t[o]),r=n.default.get_from_part_db(a);r&&(this.allParts[r.type]=a)}},e.prototype._onCmdPartRemove=function(e){var t=e.partType,o=n.default.get_from_part_type_db(t);o&&(0!=o.defaultId?this.allParts[t]=o.defaultId:this.allParts[t]=null)},e.prototype._onCmdPartReplace=function(e){var t=e.partType,o=e.partId;this.allParts[t]=o},e}();o.default=a,cc._RF.pop()},{"../manager/mgrCfg":"mgrCfg"}],sRankPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"43bf0HR2RBFhZVmSnhPEbqw","sRankPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t,o,n,a){this.uid=e,this.rank=t,this.score=o,this.data=a,this.name=n}}();o.default=n,cc._RF.pop()},{}],singlePageReuseList:[function(e,t,o){"use strict";cc._RF.push(t,"1336eaYdjJLlb1bHngS59ci","singlePageReuseList");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Const"),i=e("../../../ulframework/utils/Tools"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=e.call(this)||this;return t.layoutType=null,t.creator=null,t.settor=null,t.destoryer=null,t.root=null,t.child1=null,t.child2=null,t.defaultActionInterval=.2,t.bIsLoop=!0,t.space=null,t.datas=[],t.moveCallFn=null,t.buildUi(),t}return n(t,e),t.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.destoryer)for(var t=1;t<=2;t++)this.destoryer(this["child"+t.toString()],this.datas[t-1]);return!0},t.prototype.setDatas=function(e,t){this.datas=e,t||this.skipToPage(this.curIndex)},t.prototype.getDatas=function(){return this.datas},t.prototype.setMoveCallFn=function(e){this.moveCallFn=e},t.prototype.setSettor=function(e){return this.settor=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setDestroyer=function(e){return this.destoryer=e,this},t.prototype.setLayoutType=function(e){return this.layoutType=e,this},t.prototype.setSpace=function(e){return this.space=e,this},t.prototype.getCurIndex=function(){return this.curIndex},t.prototype.getMaxIndex=function(){return this.datas.length-1},t.prototype.buildUi=function(){var e,t=this;this.root=new cc.Node,this.root.setContentSize(576,1024),this.root.parent=this,i.default.registerTouchHandler(this.root,function(o){if("began"==o.name)e=o.getLocation();else if("ended"==o.name){var n=o.getLocation().x-e.x;n>60?t.moveToLastPage():n<-60&&t.moveToNextPage()}}),this.curIndex=0,this.lastIndex=0,this.focusChildIndex=1,this.unfocusChildIndex=2},t.prototype.moveToNextPage=function(){this.lastIndex=this.curIndex,this.curIndex++,this.curIndex>this.datas.length-1&&0==this.bIsLoop&&(this.curIndex=this.datas.length-1),this.moveToCurPage()},t.prototype.setCurPage=function(e){this.curIndex=e},t.prototype.moveToLastPage=function(){this.lastIndex=this.curIndex,this.curIndex--,this.curIndex<0&&0==this.bIsLoop&&(this.curIndex=0),this.moveToCurPage()},t.prototype.moveToPage=function(e){this.lastIndex=this.curIndex,this.setCurPage(e),this.moveToCurPage()},t.prototype.skipToPage=function(e){this.setCurPage(e),this.lastIndex=this.curIndex,this.moveToCurPage()},t.prototype.setLoop=function(e){this.bIsLoop=e},t.prototype.moveToCurPage=function(){this.space||(this.layoutType==cc.Layout.Type.HORIZONTAL?this.space=r.default.RESOLUTION_RANGE.maxWidth:this.space=r.default.RESOLUTION_RANGE.maxHeight),null==this.child1&&(this.child1=new cc.Node,this.child1.parent=this.root,this.creator(this.child1)),null==this.child2&&(this.child2=new cc.Node,this.child2.parent=this.root,this.creator(this.child2));var e=new cc.Vec2,t=new cc.Vec2,o=new cc.Vec2,n=new cc.Vec2,a=this["child"+this.focusChildIndex.toString()],i=this["child"+this.unfocusChildIndex.toString()];if(this.lastIndex==this.curIndex)e.y=0,t.y=0,o.y=0,n.y=0,e.x=0,t.x=this.space,o.x=0,n.x=this.space;else{var s=this.focusChildIndex;this.focusChildIndex=this.unfocusChildIndex,this.unfocusChildIndex=s,this.lastIndex<this.curIndex?this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,o.y=0,n.y=0,e.x=this.space,t.x=0,o.x=0,n.x=-1*this.space):(e.x=0,t.x=0,o.x=0,n.x=0,e.y=this.space,t.y=0,o.y=0,n.y=-1*this.space):this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,o.y=0,n.y=0,e.x=-1*this.space,t.x=0,o.x=0,n.x=this.space):(e.x=0,t.x=0,o.x=0,n.x=0,e.y=-1*this.space,t.y=0,o.y=0,n.y=this.space)}a.setPosition(e),i.setPosition(t);var l=this.curIndex%this.datas.length;l<0&&(l+=this.datas.length);var c=this.lastIndex%this.datas.length;c<0&&(c+=this.datas.length),this.settor(a,this.datas[l]),l!=c&&this.settor(i,this.datas[c]),a.stopAllActions(),a.runAction(cc.moveTo(this.defaultActionInterval,o)),i.stopAllActions(),i.runAction(cc.moveTo(this.defaultActionInterval,n)),this.moveCallFn&&"function"==typeof this.moveCallFn&&this.moveCallFn(this)},t=a([l],t)}(cc.Node));o.default=c,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../Const":"Const"}],ul:[function(e,t,o){"use strict";function n(e,t){e.sign=t?"":e.negative?"-":e.sign;var o=e.min-e.argument.length+1-e.sign.length,n=new Array(o<0?0:o).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument}function a(e,t){var o="";t||(t=0);for(var n="",r=0;r<t+1;r++)n+="    ";if("object"==typeof e)for(var i in e){var s=e[i];"object"==typeof s?(o+=n+"'"+i+"' ...\n",o+=a(s,t+1)):o+=n+"'"+i+"' => \""+s+'"\n'}else o="===>"+e+"<===("+typeof e+")";return o}function r(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}cc._RF.push(t,"2f20f/O6ERNBZxpEn6hffbG","ul"),ul.format=function(){if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var e=arguments[0],t=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),o=new Array,a=new Array,r=0,i=0,s=0,l=0,c="",u=null;u=t.exec(e);)u[9]&&(r+=1),i=l,s=t.lastIndex-u[0].length,a[a.length]=e.substring(i,s),l=t.lastIndex,o[o.length]={match:u[0],left:!!u[3],sign:u[4]||"",pad:u[5]||" ",min:u[6]||0,precision:u[8],code:u[9]||"%",negative:parseInt(arguments[r])<0,argument:String(arguments[r])};if(a[a.length]=e.substring(l),0==o.length)return e;if(arguments.length-1<r)return null;u=null;var d=null,p=null;for(p=0;p<o.length;p++)"%"==o[p].code?d="%":"b"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(2)),d=n(o[p],!0)):"c"==o[p].code?(o[p].argument=String(String.fromCharCode(Math.abs(parseInt(o[p].argument)))),d=n(o[p],!0)):"d"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument))),d=n(o[p])):"f"==o[p].code?(o[p].argument=String(Math.abs(parseFloat(o[p].argument)).toFixed(o[p].precision?o[p].precision:6)),d=n(o[p])):"o"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(8)),d=n(o[p])):"s"==o[p].code?(o[p].argument=o[p].argument.substring(0,o[p].precision?o[p].precision:o[p].argument.length),d=n(o[p],!0)):"x"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p])):"X"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p]).toUpperCase()):d=o[p].match,c+=a[p],c+=d;return c+=a[p]},ul.formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t},ul.dump=function(e,t,o){var n=a(e);console.log("dump-begin",t),console.log(n),console.log("dump-end")},ul.actionFloat=function(e,t,o,n){var a=cc.delayTime(e);return a.update=function(e){n(t*(1-e)+o*e)},a},ul.clone=function e(t){var o,n=r(t);if(t instanceof cc.Node)return t;if("object"===n)o={};else{if("array"!==n)return t;o=[]}if("array"===n)for(var a=0,i=t.length;a<i;a++)o.push(e(t[a]));else if("object"===n)for(var s in t)o[s]=e(t[s]);return o},ul.length=function(e){var t=r(e);if("array"===t)return e.length;if("object"===t){var o=0;for(var n in e)e[n]&&o++;return o}return 0},ul.clamp=function(e,t,o){return e<t&&(e=t),e>o&&(e=o),e},cc._RF.pop()},{}],vAfterReapUpgradeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3bce3+ONlFDcKNLtH26xvMF","vAfterReapUpgradeDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../../manager/mgrRole"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrI18n"),c="after_reap_upgrade",u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonSure=null,t.labelContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vAfterReapUpgradeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonSure:{varname:"buttonSure",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.fillData=function(){var e=this.context.roleId,t=i.default.getRoleMaxLevel(e);Math.floor(t/2);this.labelContent.string=ul.format(l.default.getText("ui.18"),t,t)},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.context.roleId;t?s.default.triggerAdEvent(c,{roleId:t},!0):this.closeDialog()}},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==c&&this.closeDialog()},t}(r.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrI18n":"mgrI18n","../../manager/mgrRole":"mgrRole"}],vArenaRankDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2251fC8d29HLI+eITzKajwB","vArenaRankDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../node/vComboAvatar"),s=e("../../../ulframework/view/ReuseList"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrOfflineArena"),u=e("../../../ulframework/utils/Timer"),d=e("../../../ulframework/view/ReuseLayouterVBox"),p=e("../node/vRankItem"),f=e("../../../ulframework/view/ReuseLayouterHBox"),h=e("../../manager/mgrCfg"),g=e("../node/vRankPartItem"),_=e("../../manager/mgrPlayer"),m=e("../../manager/mgrI18n"),v=function(e){function t(t){var o=e.call(this,t)||this;return o.buttonBack=null,o.labelMyName=null,o.labelMyRank=null,o.labelSubject=null,o.labelTargetRoleName=null,o.nodeBottom=null,o.nodeDebug=null,o.nodeLeft=null,o.nodeLeftTop=null,o.nodePartList=null,o.nodeRankList=null,o.nodeRight=null,o.nodeRole=null,o.nodeRoleAvatar=null,o.nodeTop=null,o.players=[],o.comboAvatar=null,o.listRank=null,o.listPart=null,o.selectedPlayer=null,o.context.bImmediately=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vArenaRankDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_labelMyName:{varname:"labelMyName",vartype:cc.Label},CC_labelMyRank:{varname:"labelMyRank",vartype:cc.Label},CC_labelSubject:{varname:"labelSubject",vartype:cc.Label},CC_labelTargetRoleName:{varname:"labelTargetRoleName",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeDebug:{varname:"nodeDebug",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodePartList:{varname:"nodePartList",vartype:cc.Node},CC_nodeRankList:{varname:"nodeRankList",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeRole:{varname:"nodeRole",vartype:cc.Node},CC_nodeRoleAvatar:{varname:"nodeRoleAvatar",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size);var t=this.nodePartList.getComponent(cc.Widget);t&&t.updateAlignment(),this.players=c.default.getPvpDatas(),cc.log("this.players"),cc.log(this.players),this.uiFadeIn(),this.buildUi(),this.fillData(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=l.default.height/2,this.nodeRight.x=l.default.width/2,this.nodeBottom.y=-l.default.height/2+200,this.nodeLeft.x=-l.default.width/2,this.nodeLeftTop.x=-l.default.width/2,this.nodeLeftTop.y=l.default.height/2,l.default.isDeviceOverHeight()&&(this.nodeTop.y=l.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeRight.__op=this.nodeRight.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeRight.x+=200,this.nodeBottom.y-=300,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;u.default.callLater(.2,function(){e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeBottom.runAction(cc.moveTo(.2,e.nodeBottom.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op))},this)},t.prototype.buildUi=function(){var e=this;this.comboAvatar=new i.default,this.comboAvatar.parent=this.nodeRoleAvatar,this.comboAvatar.refresh();var t=new s.default;t.setLayouter((new d.default).setCellSize(296,71).setGap(4).setPending(4)),t.setCreator(function(t){var o=new p.default({fOnClick:e.onClickRankPlayer.bind(e)});o.parent=t,t.item=o}),t.setSetter(function(t,o){var n=t.item,a=!1;e.selectedPlayer&&(a=e.selectedPlayer.uid==o.uid),n.fillByPlayerData(o,a)}),t.parent=this.nodeRankList,t.setContentSize(this.nodeRankList.getContentSize()),this.listRank=t,(t=new s.default).setLayouter((new f.default).setCellSize(108,111).setGap(15).setPending(4)),t.setCreator(function(t){var o=new g.default({fOnClick:e.onClickCollectionItem.bind(e)});o.parent=t,t.item=o}),t.setSetter(function(e,t){e.item.fillData(t)}),t.parent=this.nodePartList,t.setContentSize(this.nodePartList.getContentSize()),this.listPart=t},t.prototype.fillData=function(){var e=c.default.getPlayerData();if(this.labelMyName.string=_.default.getName(),e?!e.rank||e.rank<=0?this.labelMyRank.string=m.default.getText("msg.23"):this.labelMyRank.string=ul.format("%s",e.rank.toString()):this.labelMyRank.string=m.default.getText("msg.23"),this.listRank.setDatas(this.players),!this.selectedPlayer)for(var t=0;t<this.players.length;t++){var o=this.players[t];this.onSelectPlayer(o);break}},t.prototype.fillAvatar=function(){var e=this.selectedPlayer;if(!e)return this.nodeRoleAvatar.active=!1,this.labelTargetRoleName.string="",void this.listPart.setDatas([]);this.nodeRoleAvatar.active=!0,this.comboAvatar.fillBySerializeText(e.data),this.comboAvatar.refresh();var t=this.comboAvatar.getSAvatar().getPartDatas();cc.log(t),this.listPart.setDatas(t);var o=e.stageId,n=h.default.get("stage_db",o,"name");this.labelTargetRoleName.string=m.default.getText(n)},t.prototype.onSelectPlayer=function(e){this.selectedPlayer=e,this.listRank.refreshActiveCells(),this.fillAvatar()},t.prototype.onTouchButtonBack=function(e){e.isClick()&&this.closeDialog()},t.prototype.onClickCollectionItem=function(e){l.default.openDialog("vPartDetailDialog",{partId:e})},t.prototype.onMsgItemAmountChanged=function(){this.fillAvatar()},t.prototype.onClickRankPlayer=function(e){this.onSelectPlayer(e)},t}(r.default);o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrPlayer":"mgrPlayer","../node/vComboAvatar":"vComboAvatar","../node/vRankItem":"vRankItem","../node/vRankPartItem":"vRankPartItem"}],vArenaResultScene:[function(e,t,o){"use strict";cc._RF.push(t,"e7997MzMzNAEr5CpjiZo/F6","vArenaResultScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrCfg"),l=e("../node/vComboAvatar"),c=e("../../manager/mgrPlayer"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrSdk"),p=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrTip"),h=e("../../../ulframework/view/ReuseList"),g=e("../../../ulframework/view/ReuseLayouterHBox"),_=e("../node/vClothWearItem"),m=e("../../manager/mgrChannel"),v=cc._decorator,y=v.ccclass,C=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.buttonBg=null,t.buttonVideo=null,t.labelRoleNameLeft=null,t.labelRoleNameRight=null,t.labelScoreLeft=null,t.labelScoreRight=null,t.labelSubject=null,t.nodeAnimLeft=null,t.nodeAnimRight=null,t.nodeAnimVs=null,t.nodeEffectLeft=null,t.nodeEffectRight=null,t.nodeLeft=null,t.nodeLeftTop=null,t.nodeLoseLeft=null,t.nodeLoseRight=null,t.nodePartListLeft=null,t.nodePartListRight=null,t.nodePartsLeft=null,t.nodePartsRight=null,t.nodeRoleAvatarLeft=null,t.nodeRoleAvatarRight=null,t.nodeRoleLeft=null,t.nodeRoleRight=null,t.nodeScoreInfoLeft=null,t.nodeScoreInfoRight=null,t.nodeTop=null,t.nodeVideoShareReward=null,t.nodeVs=null,t.nodeWinLeft=null,t.nodeWinRight=null,t.spritePrint=null,t._bActionFinished=!1,t._listPartLeft=null,t._listPartRight=null,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vArenaResultScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_buttonBg:{varname:"buttonBg",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBg"}]},CC_buttonVideo:{varname:"buttonVideo",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonVideo"}]},CC_labelRoleNameLeft:{varname:"labelRoleNameLeft",vartype:cc.Label},CC_labelRoleNameRight:{varname:"labelRoleNameRight",vartype:cc.Label},CC_labelScoreLeft:{varname:"labelScoreLeft",vartype:cc.Label},CC_labelScoreRight:{varname:"labelScoreRight",vartype:cc.Label},CC_labelSubject:{varname:"labelSubject",vartype:cc.Label},CC_nodeAnimLeft:{varname:"nodeAnimLeft",vartype:cc.Node},CC_nodeAnimRight:{varname:"nodeAnimRight",vartype:cc.Node},CC_nodeAnimVs:{varname:"nodeAnimVs",vartype:cc.Node},CC_nodeEffectLeft:{varname:"nodeEffectLeft",vartype:cc.Node},CC_nodeEffectRight:{varname:"nodeEffectRight",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeLoseLeft:{varname:"nodeLoseLeft",vartype:cc.Node},CC_nodeLoseRight:{varname:"nodeLoseRight",vartype:cc.Node},CC_nodePartListLeft:{varname:"nodePartListLeft",vartype:cc.Node},CC_nodePartListRight:{varname:"nodePartListRight",vartype:cc.Node},CC_nodePartsLeft:{varname:"nodePartsLeft",vartype:cc.Node},CC_nodePartsRight:{varname:"nodePartsRight",vartype:cc.Node},CC_nodeRoleAvatarLeft:{varname:"nodeRoleAvatarLeft",vartype:cc.Node},CC_nodeRoleAvatarRight:{varname:"nodeRoleAvatarRight",vartype:cc.Node},CC_nodeRoleLeft:{varname:"nodeRoleLeft",vartype:cc.Node},CC_nodeRoleRight:{varname:"nodeRoleRight",vartype:cc.Node},CC_nodeScoreInfoLeft:{varname:"nodeScoreInfoLeft",vartype:cc.Node},CC_nodeScoreInfoRight:{varname:"nodeScoreInfoRight",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_nodeVideoShareReward:{varname:"nodeVideoShareReward",vartype:cc.Node},CC_nodeVs:{varname:"nodeVs",vartype:cc.Node},CC_nodeWinLeft:{varname:"nodeWinLeft",vartype:cc.Node},CC_nodeWinRight:{varname:"nodeWinRight",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.uiFadeIn(),this.buildUi(),this.registerListeners({MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.spritePrint.node.active=m.default.isChannel4399();var e=this.context.stageResult,t=e.stageId,o=s.default.get("stage_db",t),n=this.context.arenaStageData,a=e.rating>=4;this.labelSubject.string=o.name;var r=this.context.structAvatar;cc.log("Mine",r.serializeToText());var i=new l.default;i.parent=this.nodeRoleAvatarLeft,i.fillBySerializeText(r.serializeToText()),i.refresh(),this.nodeLoseLeft.active=!1,this.nodeWinLeft.active=a,this.nodeScoreInfoLeft.active=!1,this.nodeAnimLeft.active=!1,this.labelRoleNameLeft.string=c.default.getName(),this.labelScoreLeft.node.active=!1,r=n.enemyStructAvatar,cc.log("Enemy",r.serializeToText()),(i=new l.default).parent=this.nodeRoleAvatarRight,i.fillBySerializeText(r.serializeToText()),i.refresh(),this.nodeLoseRight.active=!1,this.nodeWinRight.active=!a,this.nodeScoreInfoRight.active=!1,this.nodeAnimRight.active=!1,this.labelRoleNameRight.string=n.enemyName,this.labelScoreRight.node.active=!1,this.buttonVideo.node.active=!1;var u=new h.default;u.setLayouter((new g.default).setCellSize(70,70).setGap(5).setPending(10)),u.setCreator(function(e){var t=new _.default({bLeft:!0});t.parent=e,e.item=t}),u.setSetter(function(e,t){e.item.fillData(t)}),u.parent=this.nodePartListLeft,u.setContentSize(this.nodePartListLeft.getContentSize()),this._listPartLeft=u,this._listPartLeft.setDatas(this.context.structAvatar.getPartDatas()),(u=new h.default).setLayouter((new g.default).setCellSize(70,70).setGap(5).setPending(10)),u.setCreator(function(e){var t=new _.default({bLeft:!1});t.parent=e,e.item=t}),u.setSetter(function(e,t){e.item.fillData(t)}),u.parent=this.nodePartListRight,u.setContentSize(this.nodePartListRight.getContentSize()),this._listPartRight=u,this._listPartRight.setDatas(n.enemyStructAvatar.getPartDatas())},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=u.default.height/2,this.nodeLeft.x=-u.default.width/2,this.nodeLeftTop.x=-u.default.width/2,this.nodeLeftTop.y=u.default.height/2,u.default.isDeviceOverHeight()&&(this.nodeTop.y=u.default.height/2-50),this.nodePartsLeft.active=!1,this.nodePartsRight.active=!1;for(var t=[this.nodeTop],o=0;o<t.length;o++){t[o].opacity=0}this.nodeVs.scale=0;this.nodeRoleLeft.y=1280,this.nodeRoleLeft.runAction(cc.sequence(cc.delayTime(.4),cc.moveTo(.5,0,0).easing(cc.easeBackOut()),cc.callFunc(function(){for(var e=0;e<t.length;e++){t[e].runAction(cc.fadeIn(1))}}),cc.delayTime(.5),cc.callFunc(function(){e.playAddScore()}))),this.nodeRoleRight.y=-1280,this.nodeRoleRight.runAction(cc.sequence(cc.delayTime(.4),cc.moveTo(.5,0,0).easing(cc.easeBackOut()))),this.nodeAnimVs.runAction(cc.sequence(cc.delayTime(.9),cc.callFunc(function(){var t=e.nodeAnimVs.getComponent(cc.Animation);t.play(t.defaultClip.name),e.nodeVs.runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut()))})))},t.prototype.playAddScore=function(){var e=this;this.labelScoreLeft.string="0",this.labelScoreLeft.node.active=!0,this.labelScoreLeft.node.runAction(cc.sequence(ul.actionFloat(2,0,this.context.stageResult.score,function(t){e.labelScoreLeft.string=Math.floor(t).toString()}),cc.callFunc(function(){e.playAction2()}))),this.labelScoreRight.string="0",this.labelScoreRight.node.active=!0,this.labelScoreRight.node.runAction(ul.actionFloat(2,0,this.context.enemyScore,function(t){e.labelScoreRight.string=Math.floor(t).toString()}));for(var t=[this.nodeAnimLeft,this.nodeAnimRight],o=function(e){var o=t[e];o.active=!0;var a=o.getComponent(cc.Animation);a.play(a.defaultClip.name),a.on("finished",function(){o.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){})))},n);for(var r=[o.getChildByName("glow1").getComponent(cc.ParticleSystem),o.getChildByName("glow2").getComponent(cc.ParticleSystem),o.getChildByName("glow1").getChildByName("star").getComponent(cc.ParticleSystem),o.getChildByName("glow2").getChildByName("star").getComponent(cc.ParticleSystem)],i=function(e){var t=r[e];t.node.runAction(cc.sequence(cc.delayTime(1.9),cc.callFunc(function(){t.emissionRate=0})))},s=0;s<r.length;s++)i(s)},n=this,a=0;a<t.length;a++)o(a)},t.prototype.playAction2=function(){var e=this,t=this.context.stageResult.rating>=4?this.nodeEffectLeft:this.nodeEffectRight,o=t.parent.convertToWorldSpaceAR(t.getPosition());t.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){f.default.playParticleOnce("p_xingxing_bao_03",o.x,o.y,1.2),f.default.playParticleOnce("p_xingxing_bao_03",o.x,o.y,1.2)}))),this.nodeScoreInfoLeft.active=!0,this.nodeScoreInfoLeft.scale=0,this.nodeScoreInfoLeft.runAction(cc.sequence(cc.scaleTo(.8,1).easing(cc.easeBackOut()),cc.delayTime(.8),cc.callFunc(function(){e.playAction3()}))),this.nodeScoreInfoRight.active=!0,this.nodeScoreInfoRight.scale=0,this.nodeScoreInfoRight.runAction(cc.scaleTo(.8,1).easing(cc.easeBackOut()))},t.prototype.playAction3=function(){var e=this;this.labelScoreLeft.string=this.context.stageResult.score,this.labelScoreRight.string=this.context.enemyScore,this._bActionFinished=!0,m.default.canUseVideoRecord()&&d.default.recordGameVidoe("stop");var t=this.context.stageResult.rating>=4,o=p.default.time()-this.context.recordStartTime;u.default.openDialog("vArenaRewardDialog",{recordTime:o,bOpenByResult:!0,bWin:t,fOnDialogClose:function(){for(var t=[e.nodePartsLeft,e.nodePartsRight],o=0;o<t.length;o++){var n=t[o];n.active=!0,n.y=-u.default.height/2,n.__op=n.position,n.y-=200,n.runAction(cc.moveTo(.3,n.__op).easing(cc.easeBackOut()))}var a=[e.buttonBack.node];for(o=0;o<a.length;o++){var r=a[o];r.active=!0,r.opacity=0,r.runAction(cc.fadeIn(1))}}})},t.prototype.onTouchButtonBack=function(e){e.isClick()&&this._bActionFinished&&u.default.warpSceneWithEffect("vHubScene")},t.prototype.onTouchButtonBg=function(e){},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(p.default.time()-this.context.recordStartTime>=15?d.default.shareGameVideo():f.default.showMsgTip("\u672c\u6b21\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed\uff0c\u65e0\u6cd5\u5206\u4eab\u3002"))},t.prototype.onMsgSdkShareVideoResult=function(e){e.bSuccessful&&(this.buttonVideo.node.active=!1)},t=a([y],t)}(i.default));o.default=C,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSdk":"mgrSdk","../../manager/mgrTip":"mgrTip","../node/vClothWearItem":"vClothWearItem","../node/vComboAvatar":"vComboAvatar"}],vArenaRewardDetailItem:[function(e,t,o){"use strict";cc._RF.push(t,"345c4cT9uZBcKqs9OmR5KUy","vArenaRewardDetailItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("./vLevelBar"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrOfflineArena"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrRole"),p=e("../../manager/mgrAd"),f=e("../../Const"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonExtraReward=null,t.buttonTake=null,t.labelDesc=null,t.labelExtraReward=null,t.nodeLevel=null,t.nodeTagCanTake=null,t.nodeTagTaked=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vArenaRewardDetailItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonExtraReward:{varname:"buttonExtraReward",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonExtraReward"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelExtraReward:{varname:"labelExtraReward",vartype:cc.Label},CC_nodeLevel:{varname:"nodeLevel",vartype:cc.Node},CC_nodeTagCanTake:{varname:"nodeTagCanTake",vartype:cc.Node},CC_nodeTagTaked:{varname:"nodeTagTaked",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e,t,o){this.context.level=e,this.context.index=t,this.context.bCanAdReward=o,this.isResourceLoaded()&&this.refresh()},t.prototype.buildUi=function(){var e=new s.default;e.parent=this.nodeLevel,this.levelBar=e},t.prototype.refresh=function(){var e=this.context.level;if(e){var t=l.default.get_from_arena_level_db(e);if(t){e<=c.default.getPlayerLevel()?(this.nodeTagCanTake.active=c.default.isCurSeasonRewardCanReceive(e),this.nodeTagTaked.active=c.default.isCurSeasonRewardReceived(e)):(this.nodeTagCanTake.active=!1,this.nodeTagTaked.active=!1),this.buttonTake.node.active=this.nodeTagCanTake.active;var o=t.seasonRewards[0],n=o[0],a=o[1],r=l.default.get_from_item_template_db(n);if(r&&(this.spriteIcon.loadSpriteFrame(r.icon),this.labelDesc.string=ul.format("%sx%s",r.name,u.default.formatNumToStr(a))),this.buttonExtraReward.node.active=!1,!this.buttonTake.node.active){var i=30*d.default.getOneMinuteIncome();this.labelExtraReward.string=u.default.formatNumToStr(i),this.context.bCanAdReward&&i>0&&(p.default.markFinished("got_item_addition_reward"),this.buttonExtraReward.node.active=!0)}}}},t.prototype.onTouchButtonTake=function(e){e.isClick()&&(c.default.receiveCurSeasonReward(this.context.level),this.refresh())},t.prototype.onTouchButtonExtraReward=function(e){e.isClick()&&p.default.triggerAdEvent("got_item_addition_reward",{rewardBoxId:0,rewards:[[f.default.ITEM_ID_GOLD,30*d.default.getOneMinuteIncome()]]},!0,!0)},t=a([g],t)}(i.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrRole":"mgrRole","./vLevelBar":"vLevelBar"}],vArenaRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"58bf4u8rmNBeJhhZPiVr6Cl","vArenaRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/singlePageReuseList"),l=e("../node/vArenaRewardItem"),c=e("../../manager/mgrAd"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrSdk"),p=e("../../manager/mgrTip"),f=e("../../manager/mgrOfflineArena"),h=e("../../Const"),g=e("../../manager/mgrPlayer"),_=e("../../manager/mgrChannel"),m=e("../../manager/mgrDirector"),v=cc._decorator,y=v.ccclass,C=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonClose1=null,t.buttonLeft=null,t.buttonRight=null,t.buttonVideo=null,t.labelVideoShareReward=null,t.nodeList=null,t.nodeVideoShareReward=null,t.singleList=null,t.bCanAdReward=!1,t.bAdReceived=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vArenaRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonClose1:{varname:"buttonClose1",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose1"}]},CC_buttonLeft:{varname:"buttonLeft",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonLeft"}]},CC_buttonRight:{varname:"buttonRight",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonRight"}]},CC_buttonVideo:{varname:"buttonVideo",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonVideo"}]},CC_labelVideoShareReward:{varname:"labelVideoShareReward",vartype:cc.Label},CC_nodeList:{varname:"nodeList",vartype:cc.Node},CC_nodeVideoShareReward:{varname:"nodeVideoShareReward",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);c.default.preCheckCanTriggerAdEvent("got_item_addition_reward")&&(this.bCanAdReward=!0),this.buildUi(),this.fillData(),this.context.bOpenByResult&&c.default.triggerAdEvent("wrap_result"),this.registerListeners({MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_SEASON_REWARD_RECEIVED:this.onMsgSeasonRewardReceived,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),c.default.preCheckCanTriggerAdEvent("pas_xianzizhilu_reward")&&c.default.triggerAdEvent("pas_xianzizhilu_reward",{style:{x:(m.default.width/2-250)/m.default.width,y:(m.default.height/2-140+350)/m.default.height,w:500/m.default.width,h:0}},!0)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){c.default.closeAdv("pas_xianzizhilu_reward"),e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new s.default;t.setCreator(function(e){var t=new l.default;t.parent=e,e.item=t}),t.setSettor(function(t,o){t.item.fillData(o,e.bCanAdReward&&!e.bAdReceived)}),t.setLayoutType(cc.Layout.Type.HORIZONTAL),t.parent=this.nodeList,t.setLoop(!1),this.singleList=t},t.prototype.fillData=function(){for(var e=this,t=[],o=0;o<6;o++)t.push(o);this.singleList.setDatas(t);var n=f.default.getPlayerLevel(),a=this.context.bOpenByResult,r=this.context.bWin;if(this.buttonClose.node.active=!0,this.buttonClose1.node.active=!1,a){this.buttonClose.node.active=!1;var i=Math.floor((n-1)/h.default.ONE_STAGE_LEN);r||(i=Math.floor(n/h.default.ONE_STAGE_LEN)),this.singleList.setMoveCallFn(function(t){e.refreshButton(t),e.sendMsg("MSG_ARENA_REWARD_SHOW",{index:i,bWin:r}),e.singleList.setMoveCallFn(function(t){e.refreshButton(t)})}),this.singleList.moveToPage(i)}this.nodeVideoShareReward.active=a&&g.default.getItemAmount(h.default.ITEM_ID_VIDEO_SHARE_COUNT)>0,this.labelVideoShareReward.string=u.default.formatNumToStr(_.default.getVideoShareRewardCount()),this.buttonVideo.node.active=a&&_.default.canUseVideoRecord()},t.prototype.refreshButton=function(e){var t=e.getDatas()[e.getCurIndex()]*h.default.ONE_STAGE_LEN+1,o=f.default.getPlayerLevel();this.buttonClose1.node.active=t>o||!f.default.isCurSeasonRewardCanReceive(t)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonLeft=function(e){e.isClick()&&this.singleList.moveToLastPage()},t.prototype.onTouchButtonRight=function(e){e.isClick()&&this.singleList.moveToNextPage()},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(this.context.recordTime>=15?d.default.shareGameVideo():p.default.showMsgTip("\u672c\u6b21\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed\uff0c\u65e0\u6cd5\u5206\u4eab\u3002"))},t.prototype.onTouchButtonClose1=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgSdkShareVideoResult=function(e){e.bSuccessful&&(this.buttonVideo.node.active=!1)},t.prototype.onMsgSeasonRewardReceived=function(e){this.context.bOpenByResult&&this.refreshButton(this.singleList)},t.prototype.onMsgAdEventSuccessd=function(e){if("got_item_addition_reward"==e.adEventId){this.bAdReceived=!0,this.refreshButton(this.singleList);for(var t=[],o=0;o<6;o++)t.push(o);this.singleList.setDatas(t)}},t=a([y],t)}(i.default));o.default=C,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSdk":"mgrSdk","../../manager/mgrTip":"mgrTip","../node/singlePageReuseList":"singlePageReuseList","../node/vArenaRewardItem":"vArenaRewardItem"}],vArenaRewardItem:[function(e,t,o){"use strict";cc._RF.push(t,"2f862bAeI5MyoJTsV55LF89","vArenaRewardItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("./vArenaRewardDetailItem"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrOfflineArena"),c=e("../../Const"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutStarEmpty=null,t.layoutStarFull=null,t.nodeList=null,t.spriteLevel=null,t.list=[],t}return n(t,e),t.prototype._getResourceName=function(){return"node/vArenaRewardItem"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutStarEmpty:{varname:"layoutStarEmpty",vartype:cc.Layout},CC_layoutStarFull:{varname:"layoutStarFull",vartype:cc.Layout},CC_nodeList:{varname:"nodeList",vartype:cc.Node},CC_spriteLevel:{varname:"spriteLevel",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh(),this.registerListeners({MSG_ARENA_REWARD_SHOW:this.onMsgArenaRewardShow})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e,t){this.context.rank=e,this.context.bCanAdReward=t,this.isResourceLoaded()&&this.refresh()},t.prototype.buildUi=function(){var e=new i.default;e.setContentSize(400,200),e.parent=this.nodeList,this.list.push(e)},t.prototype.refresh=function(){var e=this.context.rank;if(this.context.rank||0==e){var t=e*c.default.ONE_STAGE_LEN+1,o=s.default.get_from_arena_level_db(t);if(o){for(var n=o.seasonRewards.length,a=0;a<this.list.length;a++){(u=this.list[a]).fillData(t,a,this.context.bCanAdReward),u.active=a<n}this.spriteLevel.loadLocalziedSpriteFrame(o.texture);var r=l.default.getPlayerLevel(),i=this.layoutStarFull.node;for(a=0;a<i.childrenCount;a++){var u;(u=i.children[a]).active=t+a<=r}}}},t.prototype.onMsgArenaRewardShow=function(e){var t=e;if(t.index==this.context.rank){for(var o=l.default.getPlayerLevel(),n=t.bWin,a=this.layoutStarFull.node,r=null,i=this.context.rank*c.default.ONE_STAGE_LEN+1,s=0;s<a.childrenCount;s++){var u=a.children[s],d=i+s;n&&d==o&&(r=u),n||d-1!=o||(r=u)}r&&(r.active=!0,r.stopAllActions(),r.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.2,1.2),cc.delayTime(1.6),cc.scaleTo(.2,1)),cc.blink(2,3)),cc.callFunc(function(){r.active=n}))))}},t=a([d],t)}(r.default));o.default=p,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrOfflineArena":"mgrOfflineArena","./vArenaRewardDetailItem":"vArenaRewardDetailItem"}],vArenaStagePreviewCommitDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2a263jBVPFNm7a39u6nNyZW","vArenaStagePreviewCommitDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vComboAvatar"),l=e("../../manager/mgrDirector"),c=e("../../../ulframework/utils/Timer"),u=e("../../manager/mgrOfflineArena"),d=e("../../manager/mgrPlayer"),p=e("../../Const"),f=e("../../manager/mgrTip"),h=e("../../../ulframework/utils/Tools"),g=e("../node/vLevelBar"),_=e("../../manager/mgrCfg"),m=e("../node/vPartDetailText"),v=e("../../manager/mgrAd"),y=e("../../manager/mgrGuide"),C=e("../../manager/mgrI18n"),b=cc._decorator,S=b.ccclass,R=(b.property,"free_challenge"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonChange=null,t.buttonStart=null,t.labelFreeChangeEnemyRemainTime=null,t.labelName=null,t.labelStartRemainCount=null,t.labelStartTime=null,t.nodeAvatar=null,t.nodeLevel=null,t.nodeStartAd=null,t.nodeStartNoAd=null,t.nodeSubject=null,t.spriteLevel=null,t.levelBar=null,t._comboAvatar=null,t._canTrigAd=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vArenaStagePreviewCommitDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonChange:{varname:"buttonChange",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonChange"}]},CC_buttonStart:{varname:"buttonStart",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonStart"}]},CC_labelFreeChangeEnemyRemainTime:{varname:"labelFreeChangeEnemyRemainTime",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_labelStartRemainCount:{varname:"labelStartRemainCount",vartype:cc.Label},CC_labelStartTime:{varname:"labelStartTime",vartype:cc.Label},CC_nodeAvatar:{varname:"nodeAvatar",vartype:cc.Node},CC_nodeLevel:{varname:"nodeLevel",vartype:cc.Node},CC_nodeStartAd:{varname:"nodeStartAd",vartype:cc.Node},CC_nodeStartNoAd:{varname:"nodeStartNoAd",vartype:cc.Node},CC_nodeSubject:{varname:"nodeSubject",vartype:cc.Node},CC_spriteLevel:{varname:"spriteLevel",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),this.buildUi(),this.fillData(),this.fillAd(),this._tryGuide(),c.default.callLoop(1,this.onTimerLoop.bind(this),this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),v.default.triggerAdEvent("xianzizhilu_preview")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTimerLoop=function(){this.refreshTime()},t.prototype._tryGuide=function(){y.default.registerGuideNode("vArenaStagePreviewCommitDialog.buttonStart",this.buttonStart.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vArenaStagePreviewCommitDialog.onOpenDialogCompleted"})},t.prototype.buildUi=function(){this._comboAvatar=new s.default,this._comboAvatar.parent=this.nodeAvatar,this._comboAvatar.refresh();var e=new g.default;e.parent=this.nodeLevel,this.levelBar=e},t.prototype.fillData=function(){var e=u.default.getOrCreateStageData(),t=_.default.get("arena_level_db",e.enemyLevel),o=_.default.get_from_stage_db(e.stageId);this.labelName.string=e.enemyName,this.spriteLevel.loadLocalziedSpriteFrame(t.texture),this.levelBar.setLevel(5,t.star+1),this._comboAvatar.fillBySerializeText(e.enemyStructAvatar.serializeToText()),this._comboAvatar.refresh(),this.nodeSubject.removeAllChildren();for(var n=0;n<o.gradeIds.length;n++){var a=o.gradeIds[n],r=new m.default;r.fillData(a),this.nodeSubject.addChild(r)}this.refreshTime()},t.prototype.refreshTime=function(){var e=u.default.getFreeCount(),t=e[0],o=e[1];this.labelStartRemainCount.string=ul.format(C.default.getText("ui.56")+"%d/%d",t,o);var n=u.default.getFreeChangeEnemyRemainTime();this.labelFreeChangeEnemyRemainTime.string=n<=0?"":h.default.formatTime(n,"%H:%M:%S");var a=u.default.getFreeCountRecoverRemainTime();this.labelStartTime.string=a?h.default.formatTime(a,"%H:%M:%S"):"",f.default.setCountBadgeValue(this.buttonStart.node,d.default.getItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT)+v.default.getAdEventRemainCount(R))},t.prototype.fillAd=function(){var e=u.default.getFreeCount(),t=e[0];e[1];this._canTrigAd=v.default.preCheckCanTriggerAdEventNoCd(R);var o=this._canTrigAd&&t<=0;this.nodeStartAd.active=o,this.nodeStartNoAd.active=!o},t.prototype.gotoClothScene=function(){var e=u.default.getOrCreateStageData().stageId;_.default.get_from_stage_db(e)&&l.default.warpSceneWithEffect("vClothScene",{stageId:e,suitId:this.context.suitId,bFromPvp:!0})},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonChange=function(e){e.isClick()&&(u.default.getFreeChangeEnemyRemainTime()<=0?(u.default.markFreeChangeEnemy(),u.default.clearStageData(),this.fillData(),this.context.fOnFillData&&this.context.fOnFillData(),f.default.showMsgTip(C.default.getText("msg.12"))):f.default.showMsgTip(C.default.getText("msg.13")))},t.prototype.onTouchButtonStart=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vArenaStagePreviewCommitDialog.buttonStart.click"});var t=u.default.getFreeCount(),o=t[0];t[1];this._canTrigAd&&o<=0?v.default.triggerAdEvent(R,null,!0):d.default.getItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT)<=0?f.default.showMsgTip(C.default.getText("msg.14")):this.gotoClothScene()}},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==R&&this.gotoClothScene()},t=a([S],t)}(i.default);o.default=T,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","../node/vComboAvatar":"vComboAvatar","../node/vLevelBar":"vLevelBar","../node/vPartDetailText":"vPartDetailText"}],vArenaStagePreviewDialog:[function(e,t,o){"use strict";cc._RF.push(t,"829ebSkPd9JDK2Ak0WuUaMi","vArenaStagePreviewDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vComboAvatar"),l=e("../../manager/mgrOfflineArena"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrTip"),d=e("../../manager/mgrPlayer"),p=e("../../Const"),f=e("../../../ulframework/utils/Timer"),h=e("../../manager/mgrDirector"),g=e("../node/vLevelBar"),_=e("../../manager/mgrAd"),m=e("../../manager/mgrGuide"),v=e("../../manager/mgrAdNative"),y=cc._decorator,C=y.ccclass,b=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonRank=null,t.buttonReward=null,t.buttonStart=null,t.labelDescAd=null,t.labelEnemyName=null,t.labelMyName=null,t.labelTargetAd=null,t.labelTitleAd=null,t.nodeAvatarLeft=null,t.nodeAvatarRight=null,t.nodeBottom=null,t.nodeLeft=null,t.nodeLeftTop=null,t.nodeMid=null,t.nodeMyLevel=null,t.nodeNativeAd=null,t.nodeRight=null,t.nodeStartNoAd=null,t.nodeTop=null,t.spriteIconAd=null,t.spriteMyLevel=null,t.myLevelBar=null,t._comboAvatarLeft=null,t._comboAvatarRight=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vArenaStagePreviewDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonRank:{varname:"buttonRank",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonRank"}]},CC_buttonReward:{varname:"buttonReward",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonReward"}]},CC_buttonStart:{varname:"buttonStart",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonStart"}]},CC_labelDescAd:{varname:"labelDescAd",vartype:cc.Label},CC_labelEnemyName:{varname:"labelEnemyName",vartype:cc.Label},CC_labelMyName:{varname:"labelMyName",vartype:cc.Label},CC_labelTargetAd:{varname:"labelTargetAd",vartype:cc.Label},CC_labelTitleAd:{varname:"labelTitleAd",vartype:cc.Label},CC_nodeAvatarLeft:{varname:"nodeAvatarLeft",vartype:cc.Node},CC_nodeAvatarRight:{varname:"nodeAvatarRight",vartype:cc.Node},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeMid:{varname:"nodeMid",vartype:cc.Node},CC_nodeMyLevel:{varname:"nodeMyLevel",vartype:cc.Node},CC_nodeNativeAd:{varname:"nodeNativeAd",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeStartNoAd:{varname:"nodeStartNoAd",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_spriteIconAd:{varname:"spriteIconAd",vartype:cc.Sprite},CC_spriteMyLevel:{varname:"spriteMyLevel",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(h.default.size),this.uiFadeIn(),this.buildUi(),this.fillData(),this._tryGuide(),f.default.callLoop(1,this.onTimerLoop.bind(this),this),this.registerListeners({MSG_PLAYER_NAME_CHANGED:this.onMsgPlayerNameChanged}),d.default.getName()||h.default.openDialog("vPlayerNameDialog"),_.default.trigMutexBannerIntersitial("ban_xianzizhilu",this,"wrap_xianzizhilu"),this.spriteIconAd.node._orgSize=this.spriteIconAd.node.getContentSize(),v.default.registerNativeBannerRefreshFun("na_xianzizhilu",this.adaptNativeAd.bind(this),this.nodeNativeAd)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){_.default.closeAdv("ban_xianzizhilu"),e.prototype.onDestroy.call(this)},t.prototype.onTimerLoop=function(){this.refreshTime()},t.prototype._tryGuide=function(){m.default.registerGuideNode("vArenaStagePreviewDialog.buttonStart",this.buttonStart.node)},t.prototype.uiFadeIn=function(){var e=this;this.nodeLeft.x=-h.default.width/2,this.nodeRight.x=h.default.width/2,this.nodeTop.y=h.default.height/2,this.nodeLeftTop.x=-h.default.width/2,this.nodeLeftTop.y=h.default.height/2,h.default.isDeviceOverHeight()&&(this.nodeTop.y=h.default.height/2-50),this.nodeLeft.__op=this.nodeLeft.position,this.nodeRight.__op=this.nodeRight.position,this.nodeTop.__op=this.nodeTop.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeLeft.x-=400,this.nodeRight.x+=400,this.nodeTop.y+=200,this.nodeLeftTop.x-=400;f.default.callLater(.2,function(){e.nodeLeft.runAction(cc.moveTo(.4,e.nodeLeft.__op).easing(cc.easeBackOut())),e.nodeRight.runAction(cc.moveTo(.4,e.nodeRight.__op).easing(cc.easeBackOut())),e.nodeTop.runAction(cc.moveTo(.4,e.nodeTop.__op).easing(cc.easeBackOut())),e.nodeLeftTop.runAction(cc.moveTo(.4,e.nodeLeftTop.__op).easing(cc.easeBackOut()))},this),this.buttonStart.node.scale=0,this.buttonStart.node.runAction(cc.sequence(cc.delayTime(.2+.4),cc.callFunc(function(){var t=e.buttonStart.node.parent.convertToWorldSpaceAR(e.buttonStart.node.getPosition());u.default.playParticleOnce("p_ui_upgrade",t.x,t.y,1.2)}),cc.scaleTo(.4,1).easing(cc.easeBackOut()))),this.buttonStart.node.scale=0,this.buttonStart.node.runAction(cc.sequence(cc.delayTime(.8),cc.scaleTo(.4,1).easing(cc.easeBackOut())))},t.prototype.buildUi=function(){this._comboAvatarLeft=new s.default,this._comboAvatarLeft.parent=this.nodeAvatarLeft,this._comboAvatarLeft.refresh(),this._comboAvatarRight=new s.default,this._comboAvatarRight.parent=this.nodeAvatarRight,this._comboAvatarRight.refresh();var e=new g.default;e.parent=this.nodeMyLevel,this.myLevelBar=e},t.prototype.fillData=function(){var e=l.default.getOrCreateStageData();this.labelEnemyName.string=e.enemyName,this._comboAvatarLeft.fillBySerializeText(e.enemyStructAvatar.serializeToText()),this._comboAvatarLeft.refresh();var t=l.default.getPlayerData();if(this.labelMyName.string=d.default.getName(),t){o=c.default.get("arena_level_db",t.score);this.spriteMyLevel.loadLocalziedSpriteFrame(o.texture),this.myLevelBar.setLevel(5,o.star+1),this._comboAvatarRight.fillBySerializeText(t.data),this._comboAvatarRight.refresh()}else{var o=c.default.get("arena_level_db",1);this.spriteMyLevel.loadLocalziedSpriteFrame(o.texture),this.myLevelBar.setLevel(5,1),this._comboAvatarRight.setToDefault(),this._comboAvatarRight.refresh()}u.default.setCountBadgeValue(this.buttonStart.node,d.default.getItemAmount(p.default.ITEM_ID_ARENA_FREE_COUNT)+_.default.getAdEventRemainCount("free_challenge"),-20,-20),this.refreshTime()},t.prototype.refreshTime=function(){l.default.hadRewardCanReceive()?u.default.setCountBadgeValue(this.buttonReward.node,1):u.default.setCountBadgeValue(this.buttonReward.node,0)},t.prototype.gotoClothScene=function(){var e=this;h.default.openDialog("vArenaStagePreviewCommitDialog",{suitId:this.context.suitId,fOnFillData:function(){e.fillData()}})},t.prototype.adaptNativeAd=function(e){if(e){if(this.nodeNativeAd.active=!0,this.labelTitleAd.string=e.title,this.labelDescAd.string=e.desc,this.labelTargetAd.string=e.targetTitle,this.spriteIconAd.setSpriteFrameAndKeepSize(e.spriteFrame),e.spriteFrame&&e.spriteFrame.getOriginalSize){var t=this.spriteIconAd.node._orgSize,o=t.height,n=t.width,a=e.spriteFrame.getOriginalSize(),r=a.width,i=a.height,s=n/r,l=o/i,c=Math.min(s,l);this.spriteIconAd.node.setContentSize(cc.size(c*r,c*i))}}else this.nodeNativeAd.active=!1},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.suitId?h.default.warpSceneWithEffect("vHubScene"):this.closeDialog())},t.prototype.onTouchButtonRank=function(e){e.isClick()&&h.default.openDialog("vArenaRankDialog")},t.prototype.onTouchButtonReward=function(e){e.isClick()&&h.default.openDialog("vArenaRewardDialog")},t.prototype.onTouchButtonStart=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vArenaStagePreviewDialog.buttonStart.click"}),this.gotoClothScene())},t.prototype.onTouchButtonGotoAd=function(e){cc.log("TODO vArenaStagePreviewDialog.onTouchButtonGotoAd")},t.prototype.onMsgPlayerNameChanged=function(){this.labelMyName.string=d.default.getName()},t=a([C],t)}(i.default));o.default=b,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","../node/vComboAvatar":"vComboAvatar","../node/vLevelBar":"vLevelBar"}],vAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"48e3eKvowJNt4EjaoLTip/z","vAvatar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../manager/mgrCfg"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrPart"),l=e("../../Const"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allParts={},t.cmdHandlers={},t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._registerCmdHander()},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this._removeAllRes(),e.prototype.onDestroy.call(this)},t.prototype._registerCmdHander=function(){this.cmdHandlers.CMD_AVATAR_PART_REPLACE=this._onCmdPartReplace.bind(this),this.cmdHandlers.CMD_AVATAR_PART_REMOVE=this._onCmdPartRemove.bind(this),this.cmdHandlers.CMD_AVATAR_PART_NORMAL=this._onCmdPartNormal.bind(this),this.cmdHandlers.CMD_AVATAR_PART_BLACK=this._onCmdPartBlack.bind(this)},t.prototype._removeAllRes=function(){if(this.allParts)for(var e in this.allParts)if(this.allParts.hasOwnProperty(e)){var t=this.allParts[e];this._removeResParts(t)}},t.prototype._removeResParts=function(e){e&&this._removeResNodes(e.nodes)},t.prototype._removeResNodes=function(e){if(e)for(var t=0;t<e.length;++t)s.default.removeResNode(e[t])},t.prototype.isAllResLoaded=function(){for(var e in this.allParts)if(this.allParts.hasOwnProperty(e))for(var t=this.allParts[e],o=0;o<t.nodes.length;o++){var n=t.nodes[o];if(n.sprite){if(null==n.sprite.spriteFrame)return!1}else if(n.spine&&!n.spine.isLoaded())return!1}return!0},t.prototype.refreshAll=function(){var e=this.context.structAvatar.allParts;if(this.allParts)for(var t in this.allParts){if(this.allParts.hasOwnProperty(t))if(a=this.allParts[t])if(e[t]){var o=!1;if((n=e[t])&&a.partId==n){o=!0;continue}o||(this._removeResParts(this.allParts[t]),this.allParts[t]=null)}else this._removeResParts(this.allParts[t]),this.allParts[t]=null}for(var t in e){var n;if(e.hasOwnProperty(t))if(!this.allParts||!this.allParts[t])if(n=e[t]){var a={partId:n,nodes:this._createResNodes(n,!1)};this.allParts[t]=a}}},t.prototype._createResNodes=function(e,t){var o=r.default.get_from_part_db(e);if(!o)return[];for(var n,a,i,c=[],u=o.resources,d=o.typeData.orders,p=o.resourcePoses,f=0;f<u.length;++f)n=u[f],i=p[f],0!=n.length&&(a=s.default.createResNode(l.ResourceType.sprite,n))&&(t?(a.setScale(-1,1),a.setPosition(-i.x,i.y)):a.setPosition(i.x,i.y),this.addChild(a,d[f]),c.push(a));return c},t.prototype.onCmd=function(e,t){var o=this.cmdHandlers[e];o?o(t):cc.warn("vAvatar.onCmd handler not found! cmd:",e)},t.prototype._onCmdPartReplace=function(e){this.refreshAll()},t.prototype._onCmdPartRemove=function(e){this.refreshAll()},t.prototype._onCmdPartNormal=function(e){if(!this.context.bForShadow){var t=e.partType,o=this.allParts[t];if(o)for(var n=0;n<o.nodes.length;n++){var a=o.nodes[n].sprite;a&&(a.node.color=cc.color(255,255,255))}}},t.prototype._onCmdPartBlack=function(e){if(!this.context.bForShadow){var t=e.partType,o=this.allParts[t];if(o)for(var n=0;n<o.nodes.length;n++){var a=o.nodes[n].sprite;a&&(a.node.color=cc.color(0,0,0))}}},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPart":"mgrPart"}],vCdkDialog:[function(e,t,o){"use strict";cc._RF.push(t,"de833KtLbNP7YoQ5qjNiOMO","vCdkDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrTip"),l=e("../../manager/mgrSdk"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSure=null,t.editboxInput=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vCdkDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonSure:{varname:"buttonSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_editboxInput:{varname:"editboxInput",vartype:cc.EditBox}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.editboxInput.string;t||s.default.showMsgTip("\u8bf7\u8f93\u5165\u5151\u6362\u7801"),l.default.useCdk(t)}},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrSdk":"mgrSdk","../../manager/mgrTip":"mgrTip"}],vClothPartItem:[function(e,t,o){"use strict";cc._RF.push(t,"2bfb0d9kMhGkLE8iOMLnLdN","vClothPartItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../../ulframework/utils/Timer"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrPart"),d=e("./vLevelBar"),p=e("../../manager/mgrPlayer"),f=e("../../manager/mgrTip"),h=e("../../manager/mgrGuide"),g=e("../../manager/mgrI18n"),_=e("../../manager/mgrAd"),m=cc._decorator,v=m.ccclass,y=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.nodeChoose=null,t.nodeHeart=null,t.nodeNewTag=null,t.nodeRecommend=null,t.nodeTrial=null,t.nodeUnchoose=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vClothPartItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_nodeChoose:{varname:"nodeChoose",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_nodeNewTag:{varname:"nodeNewTag",vartype:cc.Node},CC_nodeRecommend:{varname:"nodeRecommend",vartype:cc.Node},CC_nodeTrial:{varname:"nodeTrial",vartype:cc.Node},CC_nodeUnchoose:{varname:"nodeUnchoose",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(this.context.partId,this.context.bSelected,this.context.bTrialable,this.context.bTrialing)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype._tryGuide=function(){h.default.registerGuideNode("vClothPartItem.buttonItem"+this.context.partId,this.buttonItem.node)},t.prototype.buildUi=function(){var e=new d.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(e,t,o,n){if(e&&(this.context.bTrialable=o,this.context.bTrialing=n,this.context.partId=e,this.context.bSelected=t,this.isResourceLoaded())){this.nodeChoose.active=t,this.nodeUnchoose.active=!t,this._tryGuide();var a=s.default.get_from_part_db(e);a?(this.spriteIcon.loadSpriteFrame(a.icon),this.levelBar.setLevel(5,a.level)):(this.spriteIcon.spriteFrame=null,this.levelBar.setLevel(5,0));var r=p.default.getItemAmount(e)>0,i=cc.Sprite.State.NORMAL;if(this.spriteIcon.setState(i),this.nodeUnchoose.getComponent(cc.Sprite).setState(i),this.levelBar.setSprState(i),this.nodeNewTag.active=u.default.isNewPart(e)&&r,this.nodeTrial.active=!r&&o&&!n,cc.log(e,"----",o,"-----",n),this.context.bStage){var l=((this.context.recommendData||{})[a.type]||{})[e]||{};this.nodeRecommend.active=!!l.bRecommend,this.nodeRecommend.active&&(this.nodeNewTag.active=!1)}else this.nodeRecommend.active=!1}},t.prototype.onTouchButtonItem=function(e){var t=this,o=this.context.partId,n=p.default.getItemAmount(o)>0||this.context.bTrialing;if(this.nodeNewTag.active&&(u.default.touchPart(o),this.nodeNewTag.active=!1),"began"==e.name&&(this.context.seTimer=new l.default(.5,1,function(e){t.context.seTimer.stop(),t.context.seTimer=null,h.default.isGuiding()||c.default.openDialog("vPartDetailDialog",{partId:o})}),this.context.seTimer.start()),"ended"==e.name||"cancelled"==e.name||"moved"==e.name&&!e.isInClickRange()){if(!this.context.seTimer)return;this.context.seTimer.stop(),this.context.seTimer=null}if(e.isClick())if(this.sendMsg("MSG_GUIDE_POINT",{id:"vClothPartItem.buttonItem.click"}),n)this.context.fOnClick&&this.context.fOnClick(o);else{if(this.context.bTrialable){var a=this.context.bStage?"pk\u6362\u88c5":"\u81ea\u7531\u6362\u88c5";return void _.default.triggerAdEvent("wrap_cloth_trial",{extraAdInfo:[a],partId:o})}f.default.showMsgTip(g.default.getText("msg.22"))}},t=a([v],t)}(i.default));o.default=y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","./vLevelBar":"vLevelBar"}],vClothSaveSuccessDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0b8e5B+58lCh73s8yg8OEQM","vClothSaveSuccessDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrDirector"),l=e("../../manager/mgrTip"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonOk=null,t.labelContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vClothSaveSuccessDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonOk:{varname:"buttonOk",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonOk"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),l.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButtonOk=function(e){e.isClick()&&s.default.warpSceneWithEffect("vHubScene")},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vClothScene:[function(e,t,o){"use strict";cc._RF.push(t,"45e76ujgKdHtLY3o+V6TrWF","vClothScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/view/ReuseList"),c=e("../../manager/mgrPart"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrTip"),p=e("../node/vComboAvatar"),f=e("../../manager/mgrGuide"),h=e("../../../ulframework/utils/Timer"),g=e("../node/vClothTypeItem"),_=e("../node/vClothPartItem"),m=e("../../../ulframework/view/ReuseLayouterHBox"),v=e("../../manager/mgrOfflineArena"),y=e("../../manager/mgrDailyTask"),C=e("../../manager/mgrSdk"),b=e("../../../ulframework/utils/Tools"),S=e("../../manager/mgrSound"),R=e("../../manager/mgrAd"),T=e("../../manager/mgrPlayer"),L=e("../../Const"),w=e("../../manager/mgrChannel"),A=e("../../manager/mgrI18n"),D=e("../node/vPartDetailText"),I=e("../../manager/mgrRole"),k=cc._decorator,E=k.ccclass,M=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.buttonCommit=null,t.buttonDelete=null,t.labelTitle=null,t.nodeBottom=null,t.nodeLeft=null,t.nodeLeftTop=null,t.nodeListPart=null,t.nodeListType=null,t.nodeMid=null,t.nodeNoItemTips=null,t.nodeRight=null,t.nodeRole=null,t.nodeSubject=null,t.nodeTop=null,t.spritePrint=null,t._recommendData={},t._comboAvatar=null,t._listType=null,t._listPart=null,t._selectType=null,t.isTrialedPartIds={},t.canTrialPartIds={},t._recordVideoStartTime=0,t._stopRecordVideo=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vClothScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_buttonCommit:{varname:"buttonCommit",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCommit"}]},CC_buttonDelete:{varname:"buttonDelete",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonDelete"}]},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeListPart:{varname:"nodeListPart",vartype:cc.Node},CC_nodeListType:{varname:"nodeListType",vartype:cc.Node},CC_nodeMid:{varname:"nodeMid",vartype:cc.Node},CC_nodeNoItemTips:{varname:"nodeNoItemTips",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeRole:{varname:"nodeRole",vartype:cc.Node},CC_nodeSubject:{varname:"nodeSubject",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),S.default.play(2)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),T.default.resetTrialTimes(),this.uiFadeIn(),this.fillData(),this.buildUi(),this.fillType(),this.setDefault(),this.onSelectType(12),this.registerListeners({MSG_GUIDE_DRESS_BEGIN:this.onMsgGuideDressBegin,MSG_GUIDE_DRESS_END:this.onMsgGuideDressEnd,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),w.default.canUseVideoRecord()&&h.default.callLater(b.default.random(2,4),function(){this._stopRecordVideo||(C.default.recordGameVidoe("start",120),this._recordVideoStartTime=b.default.time())}.bind(this)),this.context.stageId||R.default.triggerAdEvent("wrap_cloth"),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype._tryGuide=function(){var e=this;h.default.callLater(.016,function(){f.default.registerGuideNode("vClothScene.buttonCommit",e.buttonCommit.node),e.context.bFromPvp?e.sendMsg("MSG_GUIDE_POINT",{id:"vClothScene.onResourceLoaded.bFromPvp"}):e.sendMsg("MSG_GUIDE_POINT",{id:"vClothScene.onResourceLoaded"})})},t.prototype.stopRecordVideo=function(){return this._stopRecordVideo=!0,w.default.canUseVideoRecord()?(C.default.recordGameVidoe("stop"),b.default.time()-this._recordVideoStartTime):0},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=s.default.height/2,this.nodeBottom.y=-s.default.height/2,this.nodeRight.x=s.default.width/2,this.nodeLeft.x=-s.default.width/2,this.nodeLeftTop.x=-s.default.width/2,this.nodeLeftTop.y=s.default.height/2,s.default.isDeviceOverHeight()&&(this.nodeTop.y=s.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeRight.__op=this.nodeRight.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeBottom.y-=200,this.nodeRight.x+=200,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;h.default.callLater(.2,function(){e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeBottom.runAction(cc.moveTo(.2,e.nodeBottom.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op))},this)},t.prototype.buildUi=function(){var e=this;this._comboAvatar=new p.default,this._comboAvatar.parent=this.nodeRole,this.spritePrint.node.active=w.default.isChannel4399();var t=(new m.default).setCellSize(88,88).setGap(5).setPending(10),o=new l.default;o.parent=this.nodeListType,o.setContentSize(this.nodeListType.getContentSize()),o.setLayouter(t),o.setCreator(function(t){var o=new g.default({fOnClick:e.onSelectType.bind(e)});o.parent=t,t.item=o}),o.setSetter(function(t,o){var n=t.item,a=o.id;n.fillData(a,a==e._selectType)}),this._listType=o,t=(new m.default).setCellSize(108,111).setGap(15).setPending(10),(o=new l.default).parent=this.nodeListPart,o.setContentSize(this.nodeListPart.getContentSize()),o.setLayouter(t),o.setCreator(function(t){var o=new _.default({recommendData:e._recommendData,bStage:!!e.context.stageId,fOnClick:e.onSelectPart.bind(e)});o.parent=t,t.item=o}),o.setSetter(function(t,o){var n=t.item,a=o,r=e._comboAvatar.getPartIdByPartId(a);n.fillData(a,a==r,e.isPartTrialable(a),e.isPartTrialing(a))}),this._listPart=o},t.prototype.fillData=function(){var e=this.context.stageId;if(e){var t=u.default.get_from_stage_db(e);this.labelTitle.string=t.name;var o=t.gradeIds,n={},a=0,r=0;u.default.forDb_from_part_db(function(e,t){if(!t.bIgnoreInGrade){var i=n[t.type];i||(i=[],n[t.type]=i),a=0;for(var s=0;s<o.length;s++){var l=o[s];r=t[l]||0,a+=r}i.push({id:t.id,score:a})}});var i={};for(var s in n){var l=n[s],d=b.default.sortArrayByField(l,"-score");i[s]={};for(var p=0;p<d.length;p++){var f=d[p];i[s][f.id]={id:f.id,score:f.score,bRecommend:p<2},this.canTrialPartIds[s]||(this.canTrialPartIds[s]=[]),this.canTrialPartIds[s].length<3&&this.isPartTrialable(f.id)&&this.canTrialPartIds[s].push(f.id)}}this._recommendData=i,this.nodeSubject.removeAllChildren();for(p=0;p<t.gradeIds.length;p++){var h=t.gradeIds[p],g=new D.default;g.fillData(h),this.nodeSubject.addChild(g)}}else{this.labelTitle.string=A.default.getText("msg.25");for(var _=c.default.getPartTypeListData(),m=0;m<_.length;m++)for(var s=_[m].id,v=c.default.getPartIdListByType(s),y=0;y<v.length;y++){var C=v[y];if(this.canTrialPartIds[s]||(this.canTrialPartIds[s]=[]),this.canTrialPartIds[s].length>=3)break;this.isPartTrialable(C)&&this.canTrialPartIds[s].push(C)}}},t.prototype.fillType=function(){var e=c.default.getPartTypeListData();this._listType.setDatas(e)},t.prototype.setDefault=function(){var e=this.context.suitId,t=this.context.stageId;if(e){var o=u.default.get_from_suit_db(e);o&&this._comboAvatar.fillByPartIds(o.partIds),this._comboAvatar.refresh()}else if(t){var n=u.default.get_from_stage_db(t);this._comboAvatar.fillByPartIds(n.defaultPartIds),this._comboAvatar.refresh()}else{var a=c.default.getLastClothes();this._comboAvatar.fillBySerializeText(a),this._comboAvatar.refresh()}},t.prototype.fillPart=function(){var e=null;e=this.context.stageId?this.getPartIdListByType():this.getPartIdListByType2(),this._listPart.setDatas(e),this.nodeNoItemTips.active=e.length<=0},t.prototype.getPartIdListByType=function(){var e=[];if(!this._selectType)return e;var t=[],o=this._recommendData[this._selectType]||{};for(var n in o){var a=o[n]||{};(T.default.getItemAmount(a.id)>0||this.isPartTrialing(a.id)||this.canTrialPartIds[this._selectType].indexOf(a.id)>=0&&this.isPartTrialable(a.id))&&t.push({id:a.id,isOwn:T.default.getItemAmount(a.id)>0?1:0,score:a.score})}t=b.default.sortArrayByField(t,["isOwn","id"]);for(var r=0;r<t.length;r++){a=t[r];e.push(a.id)}return e},t.prototype.getPartIdListByType2=function(){var e=this,t=[];if(!this._selectType)return t;var o=[];u.default.forDb_from_part_db(function(t,n){n.type!=e._selectType||n.bIgnoreInGrade||(T.default.getItemAmount(n.id)>0||e.isPartTrialing(n.id)||e.canTrialPartIds[e._selectType].indexOf(n.id)>=0&&e.isPartTrialable(n.id))&&o.push({id:n.id,isOwn:T.default.getItemAmount(n.id)>0?1:0})}),o=b.default.sortArrayByField(o,["isOwn","id"]);for(var n=0;n<o.length;n++){var a=o[n];t.push(a.id)}return t},t.prototype.onSelectType=function(e,t){(this._selectType!=e||t)&&(this._selectType=e,this.fillPart(),this._listType.refreshActiveCells())},t.prototype.onSelectPart=function(e){e&&(this._comboAvatar.getPartIdByPartId(e)==e?this._comboAvatar.partRemove(e):this._comboAvatar.partReplace(e),!this.isTrialedPartIds[e]&&T.default.getItemAmount(e)<=0&&(this.isTrialedPartIds[e]=!0),this._comboAvatar.refresh(),this.onSelectType(this._selectType,!0))},t.prototype.onTouchButtonBack=function(e){e.isClick()&&(this.stopRecordVideo(),s.default.warpSceneWithEffect("vHubScene"))},t.prototype.onTouchButtonCommit=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vClothScene.buttonCommit.click"});var t=this._comboAvatar.getPartId(12),o=u.default.get_from_part_db(t);if(t&&!o.bIgnoreInGrade){var n=this._comboAvatar.serializeToText();if(this.context.stageId)c.default.setLastClothes(n),this.arenaStageFinish();else{if(n==c.default.getLastClothes())return void d.default.alertPrompt(A.default.getText("ui.20"),A.default.getText("alert.6"),A.default.getText("alert.7"),null);S.default.play(105);var a=this.stopRecordVideo();s.default.openDialog("vCommitDialog",{partStr:n,recordTime:a})}}else d.default.alertPrompt(A.default.getText("ui.20"),A.default.getText("alert.8"),A.default.getText("alert.7"),null)}},t.prototype.arenaStageFinish=function(){var e=this.context.stageId,t=this._comboAvatar.getSAvatar(),o=u.default.get_from_stage_db(e),n=v.default.getOrCreateStageData(),a=n.enemyScore.grade,r=c.default.calcGrade(o,t).grade;v.default.getPlayerLevel()<4&&(a=Math.floor(a/2)),1==v.default.getPlayerLevel()&&(r+=10);var i=1;r>=a&&(i=4),y.default.addTaskCount(y.TASK_ID.CHALLENGE),v.default.join(i>=4,o.id,t),s.default.warpSceneWithEffect("vArenaResultScene",{structAvatar:t,stageResult:{stageId:e,score:r,rating:i},arenaStageData:n,enemyScore:a,recordStartTime:this._recordVideoStartTime})},t.prototype.onTouchButtonDelete=function(e){var t=this;e.isClick()&&d.default.alertPrompt2(A.default.getText("ui.20"),A.default.getText("alert.4"),A.default.getText("ui.35"),A.default.getText("alert.5"),null,function(){t.setDefault()})},t.prototype.isPartTrialable=function(e){if(T.default.getItemAmount(e)>0)return!1;if(!R.default.isAdEventHasChanceTrigger("wrap_cloth_trial"))return!1;var t=T.default.getItemAmount(L.default.ITEM_ID_CLOTH_TRIAL)-ul.length(this.isTrialedPartIds);return!(!t||t<=0)&&(!(ul.length(this.isTrialedPartIds)>=3)&&!this.isTrialedPartIds[e])},t.prototype.isPartTrialing=function(e){return this.isTrialedPartIds[e]||!1},t.prototype.onMsgGuideDressBegin=function(){this._listPart.setTouchScrollEnabled(!1),this._listType.setTouchScrollEnabled(!1)},t.prototype.onMsgGuideDressEnd=function(){this._listPart.setTouchScrollEnabled(!0),this._listType.setTouchScrollEnabled(!0)},t.prototype.onMsgAdEventSuccessd=function(e){var t=e,o=t.adEventId,n=t.userData.partId;if("wrap_cloth_trial"==o&&n){this.onSelectPart(n);var a=10*I.default.getOneMinuteIncome();a>0&&(T.default.addItemAmount(L.default.ITEM_ID_GOLD,a,"\u8bd5\u7528\u90e8\u4ef6\u5956\u52b1"),d.default.addGotItemTip(L.default.ITEM_ID_GOLD,a)),T.default.addItemAmount(L.default.ITEM_ID_CLOTH_TRIAL,-1,"\u6311\u6218\u7684\u8bd5\u7a7f\u6b21\u6570\u6d88\u8017")}},t=a([E],t)}(i.default));o.default=M,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDailyTask":"mgrDailyTask","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRole":"mgrRole","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vClothPartItem":"vClothPartItem","../node/vClothTypeItem":"vClothTypeItem","../node/vComboAvatar":"vComboAvatar","../node/vPartDetailText":"vPartDetailText"}],vClothTrialDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a9687t4FG5P0oZSb+PZarJ8","vClothTrialDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrRole"),d=e("../../manager/mgrCfg"),p=e("../node/vLevelBar"),f=e("../../manager/mgrPlayer"),h=e("../../Const"),g=cc._decorator,_=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonTake=null,t.labelReward=null,t.nodeHeart=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vClothTrialDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_labelReward:{varname:"labelReward",vartype:cc.Label},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){this.labelReward.string="+"+l.default.formatNumToStr(this.getRewardCount());var e=this.context.partId,t=d.default.get_from_part_db(e);if(e){this.spriteIcon.loadSpriteFrame(t.icon);var o=new p.default;o.parent=this.nodeHeart,o.setSpace(0),o.setLevel(5,t.level)}},t.prototype.getRewardCount=function(){return 10*u.default.getOneMinuteIncome()},t.prototype.onMsgAdEventSuccessd=function(e){if("wrap_cloth_trial"==e.adEventId){this.context.fOnClick&&this.context.fOnClick(this.context.partId);var t=this.getRewardCount();f.default.addItemAmount(h.default.ITEM_ID_GOLD,t,"\u8bd5\u7528\u90e8\u4ef6\u5956\u52b1"),c.default.addGotItemTip(h.default.ITEM_ID_GOLD,t),f.default.addItemAmount(h.default.ITEM_ID_CLOTH_TRIAL,-1,"\u6311\u6218\u7684\u8bd5\u7a7f\u6b21\u6570\u6d88\u8017"),this.closeDialog(!0)}},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonTake=function(e){if(e.isClick()){var t=this.context.bStage?"pk\u6362\u88c5":"\u81ea\u7531\u6362\u88c5";s.default.triggerAdEvent("wrap_cloth_trial",{extraAdInfo:[t]})}},t=a([_],t)}(i.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRole":"mgrRole","../../manager/mgrTip":"mgrTip","../node/vLevelBar":"vLevelBar"}],vClothTypeItem:[function(e,t,o){"use strict";cc._RF.push(t,"b1513tBY5ZBqLF/QFYPt16T","vClothTypeItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrPart"),c=e("../../manager/mgrGuide"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.nodeChoose=null,t.nodeNewTag=null,t.nodeUnchoose=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vClothTypeItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_nodeChoose:{varname:"nodeChoose",vartype:cc.Node},CC_nodeNewTag:{varname:"nodeNewTag",vartype:cc.Node},CC_nodeUnchoose:{varname:"nodeUnchoose",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(this.context.type,this.context.bSelected),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype._tryGuide=function(){c.default.registerGuideNode("vClothTypeItem.buttonItem"+this.parent.__cell_id,this.buttonItem.node)},t.prototype.fillData=function(e,t){if(e&&(this.context.type=e,this.context.bSelected=t,this.isResourceLoaded())){this.nodeChoose.active=t,this.nodeUnchoose.active=!t;var o=s.default.get_from_part_type_db(e);o?this.spriteIcon.loadSpriteFrame(o.icon):this.spriteIcon.spriteFrame=null,this.nodeNewTag.active=l.default.getTypeHadNews(e)}},t.prototype.onTouchButtonItem=function(e){e.isClick()&&(this.context.fOnClick&&this.context.fOnClick(this.context.type),this.sendMsg("MSG_GUIDE_POINT",{id:"vClothTypeItem.buttonItem.click"}))},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPart":"mgrPart"}],vClothWearItem:[function(e,t,o){"use strict";cc._RF.push(t,"752dch9ArRAcLX7v2I23eBQ","vClothWearItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrCfg"),s=e("../../manager/mgrDirector"),l=e("./vLevelBar"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.nodeHeart=null,t.nodeLeft=null,t.nodeRight=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vClothWearItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new l.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(e){this.context.partId=e,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.partId;if(e){this.nodeLeft.active=!!this.context.bLeft,this.nodeRight.active=!this.context.bLeft;var t=i.default.get_from_part_db(e);t&&(this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.levelBar.setSpace(0),this.levelBar.setLevel(5,t.level))}}},t.prototype.onTouchButtonItem=function(e){if(e.isClick()){var t=this.context.partId;t&&s.default.openDialog("vPartDetailDialog",{partId:t})}},t}(r.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","./vLevelBar":"vLevelBar"}],vComboAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"b2eb4LyDTFFYJK4djzv/QUU","vComboAvatar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),r=e("../../struct/sAvatar"),i=e("./vAvatar"),s=e("../../manager/mgrCfg"),l=function(e){function t(t){var o=e.call(this,t)||this;return o.structAvatar=null,o.viewAvatar=null,o.structAvatar=new r.default,o.viewAvatar=new i.default({structAvatar:o.structAvatar}),o.viewAvatar.parent=o,o}return n(t,e),t.prototype.getSAvatar=function(){return this.structAvatar},t.prototype.removeAll=function(e){this.structAvatar.removeAllPartType(),e||this.refresh()},t.prototype.fillByPartIds=function(e){this.structAvatar.setToDefault();for(var t=0;t<e.length;t++){var o=e[t];this.partReplace(o)}},t.prototype.refresh=function(){this.viewAvatar.refreshAll()},t.prototype.setToDefault=function(){this.structAvatar.setToDefault()},t.prototype.partRemove=function(e){var t=s.default.get_from_part_db(e);t&&this.structAvatar.onCmd("CMD_AVATAR_PART_REMOVE",{partType:t.type})},t.prototype.partReplace=function(e){var t=s.default.get_from_part_db(e);t&&this.structAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:t.type,partId:t.id})},t.prototype.setPartBlack=function(e){this.viewAvatar.onCmd("CMD_AVATAR_PART_BLACK",{partType:e})},t.prototype.setPartNormal=function(e){this.viewAvatar.onCmd("CMD_AVATAR_PART_NORMAL",{partType:e})},t.prototype.getPartId=function(e){return this.structAvatar.getPartId(e)},t.prototype.getPartIdByPartId=function(e){var t=s.default.get_from_part_db(e);return t?this.structAvatar.getPartId(t.type):null},t.prototype.fillBySerializeText=function(e){this.structAvatar.fillBySerializeText(e)},t.prototype.serializeToText=function(){return this.structAvatar.serializeToText()},t}(a.default);o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../struct/sAvatar":"sAvatar","./vAvatar":"vAvatar"}],vCommitDialog:[function(e,t,o){"use strict";cc._RF.push(t,"bbfb3xxoopKcrp4DBSVLbZr","vCommitDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../../manager/mgrSdk"),s=e("../../manager/mgrTip"),l=e("../../manager/mgrDirector"),c=e("../node/vComboAvatar"),u=e("../../manager/mgrPart"),d=e("../../../ulframework/utils/Timer"),p=e("../../manager/mgrPlayer"),f=e("../../Const"),h=e("../../manager/mgrGuide"),g=e("../../../ulframework/utils/Tools"),_=e("../../manager/mgrChannel"),m=e("../../manager/mgrAd"),v=function(e){function t(t){var o=e.call(this,t)||this;return o.buttonCancel=null,o.buttonSure=null,o.buttonVideo=null,o.nodeCurRole=null,o.nodeLeft=null,o.nodePastRole=null,o.nodeRight=null,o.nodeVideoShareReward=null,o.pastAvatar=null,o.curAvatar=null,o.context.bImmediately=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vCommitDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonSure:{varname:"buttonSure",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_buttonVideo:{varname:"buttonVideo",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonVideo"}]},CC_nodeCurRole:{varname:"nodeCurRole",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodePastRole:{varname:"nodePastRole",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeVideoShareReward:{varname:"nodeVideoShareReward",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),this.buildUi(),this.fillData(),this.uiFadeIn(),this.registerListeners({MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult}),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype._tryGuide=function(){h.default.registerGuideNode("vCommitDialog.buttonSure",this.buttonSure.node)},t.prototype.uiFadeIn=function(){var e=this;this.nodeLeft.x=-l.default.width/4,this.nodeRight.x=l.default.width/4,this.buttonCancel.node.setScale(0),this.buttonSure.node.setScale(0),this.buttonVideo.node.setScale(0),this.nodeLeft.__op=this.nodeLeft.position,this.nodeRight.__op=this.nodeRight.position,this.nodeLeft.x-=200,this.nodeRight.x+=200;d.default.callLater(.2,function(){e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op).easing(cc.easeBackOut())),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op).easing(cc.easeBackOut())),e.buttonCancel.node.runAction(cc.sequence(cc.delayTime(.2),cc.scaleTo(.2,1).easing(cc.easeBackOut()))),e.buttonSure.node.runAction(cc.sequence(cc.delayTime(.2),cc.scaleTo(.2,1).easing(cc.easeBackOut()),cc.callFunc(function(){e.sendMsg("MSG_GUIDE_POINT",{id:"vCommitDialog.uiFadeIn"})}))),e.buttonVideo.node.active&&e.buttonVideo.node.runAction(cc.sequence(cc.delayTime(.2),cc.scaleTo(.2,1).easing(cc.easeBackOut())))},this)},t.prototype.buildUi=function(){this.pastAvatar=new c.default,this.pastAvatar.parent=this.nodePastRole,this.pastAvatar.refresh(),this.curAvatar=new c.default,this.curAvatar.parent=this.nodeCurRole,this.curAvatar.refresh()},t.prototype.fillData=function(){this.context.recordTime;var e=this.context.partStr;this.curAvatar.fillBySerializeText(e),this.curAvatar.refresh();var t=u.default.getLastClothes();this.pastAvatar.fillBySerializeText(t),this.pastAvatar.refresh(),this.buttonVideo.node.active=_.default.canUseVideoRecord(),this.nodeVideoShareReward.active=p.default.getItemAmount(f.default.ITEM_ID_VIDEO_SHARE_COUNT)>0;var o=this.nodeVideoShareReward.getChildByName("New Label");if(o){var n=o.getComponent(cc.Label);n&&(n.string="+"+g.default.formatNumToStr(_.default.getVideoShareRewardCount()))}},t.prototype.actionMerge=function(){var e=this;this.nodeLeft.stopAllActions(),this.nodeLeft.runAction(cc.spawn(cc.fadeOut(.5).easing(cc.easeOut(1.5)),cc.moveTo(.5,0,0).easing(cc.easeOut(1.5)))),this.nodeRight.stopAllActions(),this.nodeRight.runAction(cc.sequence(cc.moveTo(.5,0,0).easing(cc.easeOut(1.5)),cc.callFunc(function(){e.actionFinish()})))},t.prototype.actionFinish=function(){l.default.openDialog("vClothSaveSuccessDialog"),m.default.triggerAdEvent("wrap_commit")},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vCommitDialog.buttonSure.click"});var t=this.context.partStr;u.default.setLastClothes(t),this.buttonCancel.node.active=!1,this.buttonSure.node.active=!1,this.buttonVideo.node.active=!1,this.actionMerge()}},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(this.context.recordTime>=15?i.default.shareGameVideo():s.default.showMsgTip("\u672c\u6b21\u5f55\u5c4f\u65f6\u95f4\u592a\u77ed\uff0c\u65e0\u6cd5\u5206\u4eab\u3002"))},t.prototype.onMsgSdkShareVideoResult=function(e){e.bSuccessful&&(this.buttonVideo.node.active=!1)},t}(r.default);o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSdk":"mgrSdk","../../manager/mgrTip":"mgrTip","../node/vComboAvatar":"vComboAvatar"}],vDailyAdConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"926davBikZCwpznOsEnps9/","vDailyAdConfirmDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonTake=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDailyAdConfirmDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&(this.context.fOnClickTake&&this.context.fOnClickTake(this.context.dailyId),this.closeDialog())},t.prototype.onTouchButtonTake=function(e){e.isClick()&&s.default.triggerAdEvent("double_daily",{dailyId:this.context.dailyId},!0)},t.prototype.onMsgAdEventSuccessd=function(e){"double_daily"==e.adEventId&&this.closeDialog()},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vDailyDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e9b95b7LAdCToAvb7UYm2g/","vDailyDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVBox"),c=e("../node/vDailyItem"),u=e("../../manager/mgrDailyTask"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrAd"),f=e("../../manager/mgrTip"),h=e("../../../ulframework/utils/Tools"),g=e("../../Const"),_=cc._decorator,m=_.ccclass,v=(_.property,"double_daily"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSimpleAd=null,t.buttonTakeAd=null,t.buttonTakeNoAd=null,t.labelProgress=null,t.labelReward=null,t.nodeBg=null,t.nodeFinished=null,t.nodeList=null,t.nodeReward=null,t.nodeSimpleAdIcon=null,t.nodeToggle=null,t.progressBar=null,t.toggleSimpleAd=null,t.list=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDailyDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonSimpleAd:{varname:"buttonSimpleAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSimpleAd"}]},CC_buttonTakeAd:{varname:"buttonTakeAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTakeAd"}]},CC_buttonTakeNoAd:{varname:"buttonTakeNoAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTakeNoAd"}]},CC_labelProgress:{varname:"labelProgress",vartype:cc.Label},CC_labelReward:{varname:"labelReward",vartype:cc.Label},CC_nodeBg:{varname:"nodeBg",vartype:cc.Node},CC_nodeFinished:{varname:"nodeFinished",vartype:cc.Node},CC_nodeList:{varname:"nodeList",vartype:cc.Node},CC_nodeReward:{varname:"nodeReward",vartype:cc.Node},CC_nodeSimpleAdIcon:{varname:"nodeSimpleAdIcon",vartype:cc.Node},CC_nodeToggle:{varname:"nodeToggle",vartype:cc.Node},CC_progressBar:{varname:"progressBar",vartype:cc.ProgressBar},CC_toggleSimpleAd:{varname:"toggleSimpleAd",vartype:cc.Toggle}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),this.refreshAllFinish(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_TASK_STATE_CHANGED:this.onMsgTaskStateChanged}),p.default.triggerAdEvent("wrap_daily")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new s.default;t.setLayouter((new l.default).setCellSize(440,134).setGap(10).setPending(5)),t.setCreator(function(t){var o=new c.default({fOnClickTake:e.onItemClickTake.bind(e),fOnClickTakeAd:e.onItemClickTakeAd.bind(e),fOnClickGoto:e.onItemClickGoto.bind(e)});o.parent=t,t.item=o}),t.setSetter(function(e,t){e.item.fillData(t,!1,!1)}),t.parent=this.nodeList,t.setContentSize(this.nodeList.getContentSize()),this.list=t,this.toggleSimpleAd.node.on("toggle",this.refreshToggleIcon.bind(this)),this.refreshToggleIcon()},t.prototype.fillData=function(){var e=u.default.getTaskIds();this.list.setDatas(e)},t.prototype.refreshAllFinish=function(){var e=u.default.canTakeAllFinishReward(),t=u.default.getAllTaskState(),o=t[0],n=t[1],a=u.default.getAllFinishReward(),r=u.default.isTakedAllFinishReward();this.nodeBg.height=e?660:610,this.nodeToggle.y=e?-370:-320,this.progressBar.progress=o/n,this.labelProgress.string=o+"/"+n,this.labelReward.string="+"+h.default.formatNumToStr(a);p.default.isAdCareful();this.buttonTakeAd.node.active=e&&!1,this.buttonTakeNoAd.node.active=e&&!0,this.buttonSimpleAd.node.active=e&&!1,this.nodeFinished.active=r;var i=this.buttonTakeNoAd.node;this.buttonTakeAd.node.active&&(i=this.buttonTakeAd.node),i.active&&(i.stopAllActions(),i.scale=1,i.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeInOut(1.5)))))),this.nodeToggle.active=!1,this.list.refreshActiveCells()},t.prototype.refreshToggleIcon=function(){var e=this.toggleSimpleAd.isChecked;this.nodeSimpleAdIcon.active=e,this.list.refreshActiveCells()},t.prototype.takeReward=function(e){var t=u.default.obtainReward(e),o=t[0],n=t[1];o&&(f.default.addGotItemTip(o,n),this.list.refreshActiveCells())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonTakeAd=function(e){e.isClick()},t.prototype.onTouchButtonTakeNoAd=function(e){e.isClick()&&d.default.openDialog("vGotDailyRewardDialog",{itemId:g.default.ITEM_ID_GOLD,amount:u.default.getAllFinishReward()})},t.prototype.onTouchButtonSimpleAd=function(e){e.isClick()},t.prototype.onTouchButtonGotoAd=function(e){cc.log("TODO vDailyDialog.onTouchButtonGotoAd")},t.prototype.onItemClickTake=function(e){this.takeReward(e)},t.prototype.onItemClickTakeAd=function(e){p.default.triggerAdEvent(v,{dailyId:e},!0)},t.prototype.onItemClickGoto=function(e){var t=u.default.getTaskById(e);if(t){var o=t.template.gotoHandleName,n=this[o];n instanceof Function?n.bind(this)():cc.warn(ul.format("onItemClickGoto handler not found! handler = %s",o))}},t.prototype.gotoChallenge=function(){this.closeDialog(),d.default.openDialog("vArenaStagePreviewDialog",null,!0)},t.prototype.gotoRoleUpgrade=function(){this.closeDialog()},t.prototype.gotoHarvest=function(){this.closeDialog()},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==v&&this.refreshAllFinish()},t.prototype.onMsgTaskStateChanged=function(e){this.refreshAllFinish()},t=a([m],t)}(i.default);o.default=y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrDailyTask":"mgrDailyTask","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip","../node/vDailyItem":"vDailyItem"}],vDailyItem:[function(e,t,o){"use strict";cc._RF.push(t,"c2fffaQAMpDcrJMzll66Hv1","vDailyItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrDailyTask"),s=e("../../../ulframework/utils/Tools"),l=e("../../manager/mgrI18n"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGoto=null,t.buttonTake=null,t.buttonTakeAd=null,t.labelCount=null,t.labelDesc=null,t.labelReward=null,t.labelRewardAd=null,t.nodeFinished=null,t.nodeReward=null,t.nodeRewardAd=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vDailyItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonGoto:{varname:"buttonGoto",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonGoto"}]},CC_buttonTake:{varname:"buttonTake",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_buttonTakeAd:{varname:"buttonTakeAd",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTakeAd"}]},CC_labelCount:{varname:"labelCount",vartype:cc.Label},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelReward:{varname:"labelReward",vartype:cc.Label},CC_labelRewardAd:{varname:"labelRewardAd",vartype:cc.Label},CC_nodeFinished:{varname:"nodeFinished",vartype:cc.Node},CC_nodeReward:{varname:"nodeReward",vartype:cc.Node},CC_nodeRewardAd:{varname:"nodeRewardAd",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e,t,o){this.context.dailyId=e,this.context.bToggleShow=t,this.context.bToggleChecked=o,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.dailyId;if(e){var t=this.context.bToggleShow,o=this.context.bToggleChecked,n=i.default.getTaskById(e);if(n){var a=n.template;if(a){this.spriteIcon.loadSpriteFrame(a.icon),this.labelDesc.string=l.default.getText(a.desc),this.labelCount.string=n.count+"/"+a.targetCount;var r=i.default.getTaskRewardById(e);this.labelReward.string="+"+s.default.formatNumToStr(r),this.labelRewardAd.string="+"+s.default.formatNumToStr(2*r),this.buttonGoto.node.active=n.state==i.TASK_STATE.DOING,this.nodeFinished.active=n.state==i.TASK_STATE.RECEIVED;t?(this.buttonTakeAd.node.active=n.state==i.TASK_STATE.FINISHED&&!1,this.buttonTake.node.active=n.state==i.TASK_STATE.FINISHED&&!o):(this.buttonTakeAd.node.active=n.state==i.TASK_STATE.FINISHED&&!1,this.buttonTake.node.active=n.state==i.TASK_STATE.FINISHED);var c=this.buttonTake.node;this.buttonTakeAd.node.active&&(c=this.buttonTakeAd.node),c.active&&(c.stopAllActions(),c.scale=1,c.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeInOut(1.5))))))}}}},t.prototype.onTouchButtonGoto=function(e){e.isClick()&&this.context.fOnClickGoto&&this.context.fOnClickGoto(this.context.dailyId)},t.prototype.onTouchButtonTake=function(e){e.isClick()&&(this.buttonTake.node.stopAllActions(),this.context.fOnClickTake&&this.context.fOnClickTake(this.context.dailyId))},t.prototype.onTouchButtonTakeAd=function(e){e.isClick()&&(this.buttonTakeAd.node.stopAllActions(),this.context.fOnClickTakeAd&&this.context.fOnClickTakeAd(this.context.dailyId))},t}(r.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDailyTask":"mgrDailyTask","../../manager/mgrI18n":"mgrI18n"}],vDebugInfoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"47a90qBLBVD9os4hYdSvxl6","vDebugInfoDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/DialogBase"),i=e("../../manager/mgrDirector"),s=e("../../../ulframework/view/DebugMenu"),l=e("../../../ulframework/view/ReuseList"),c=e("../../../ulframework/view/ReuseLayouterVBox"),u=e("../../Const"),d=e("../../manager/mgrCop"),p=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrTip"),h=e("../../manager/mgrRecord"),g=e("../../manager/mgrPlayer"),_=e("../../manager/mgrChannel"),m=cc._decorator,v=m.ccclass,y=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editboxInput=null,t.nodeInfo=null,t.nodeMenu=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDebugInfoDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_editboxInput:{varname:"editboxInput",vartype:cc.EditBox},CC_nodeInfo:{varname:"nodeInfo",vartype:cc.Node},CC_nodeMenu:{varname:"nodeMenu",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(i.default.size),this.nodeInfo.getComponent(cc.Widget).updateAlignment(),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isShadowEnabled=function(){return!1},t.prototype.buildUi=function(){var e=this,t=new s.default([["\u5173\u95ed",function(){"gold"==e.editboxInput.string&&_.default.isOpenGetFreeGold()&&(g.default.addItemAmount(u.default.ITEM_ID_GOLD,1e5,"\u6d4b\u8bd5\u6dfb\u52a0\u91d1\u5e01"),e.closeDialog(!0)),e.closeDialog(!0)}],["time",function(){f.default.showMsgTip(ul.format("time:%s",p.default.time()))}],["\u91cd\u7f6e\u5b58\u6863",function(){h.default.resetRecord(),f.default.showMsgTip("ojbk"),cc.audioEngine.stopAll(),cc.game.restart()}],["log->console",function(){cc.log=console.log,cc.log("cc.log is refrence to cc.info")}]],200,50,4);t.parent=this.nodeMenu,t.x=5,t.y=-5;var o=this.nodeInfo,n=new l.default;n.parent=o,n.setLayouter((new c.default).setCellSize(o.getContentSize().width-8,16).setGap(4).setPending(4)),n.setCreator(function(e){var t=new cc.Node;t.parent=e;var o=t.addComponent(cc.Label);o.fontSize=16,o.lineHeight=16,o.horizontalAlign=cc.Label.HorizontalAlign.LEFT,o.verticalAlign=cc.Label.VerticalAlign.CENTER,o.overflow=cc.Label.Overflow.SHRINK,t.setContentSize(e.getContentSize()),e.label=o}),n.setSetter(function(e,t){e.label.string=t}),n.setContentSize(o.getContentSize());var a=n.addComponent(cc.Widget);a.top=0,a.bottom=0,a.right=0,a.left=0,a.isAlignOnce=!1;var r=["\u8c03\u8bd5\u4fe1\u606f\uff1a"];r.push(ul.format("GAME_VERSION = [%s]",u.default.GAME_VERSION)),r.push(ul.format("uid = [%s]",g.default.getUid()));var i=d.default.getCops(),m=Object.keys(i);m.sort(),r.push(""),r.push("cop:");for(var v=0;v<m.length;v++){var y=m[v],C=i[y];r.push(ul.format("  [%s] = [%s]",y,C))}r.push(""),r.push("ultralisk \u6210\u90fd\u96f7\u517d\u4e92\u52a8 \u7248\u6743\u6240\u6709");var b=cc.sys.language;r.push("\u5f53\u524d\u8bed\u8a00\u73af\u5883\uff1a"+b),n.setDatas(r)},t=a([v],t)}(r.default));o.default=y,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRecord":"mgrRecord","../../manager/mgrTip":"mgrTip"}],vDevTestScene:[function(e,t,o){"use strict";cc._RF.push(t,"d7728C3+aJAF5R+DNx/55Ou","vDevTestScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrDirector"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.labelTitle=null,t.layoutBg=null,t.nodeButtonItemTemplate=null,t.nodeScrollViewContent=null,t.scrollViewList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vDevTestScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_nodeButtonItemTemplate:{varname:"nodeButtonItemTemplate",vartype:cc.Node},CC_nodeScrollViewContent:{varname:"nodeScrollViewContent",vartype:cc.Node},CC_scrollViewList:{varname:"scrollViewList",vartype:cc.ScrollView}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.string=this.name,this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){for(var e=[["_Hub","vHubScene"],["_Garden","vGardenInfoDialog"],["_Sign","vSignDialog"],["_debugInfo","vDebugInfoDialog"],["AnimNode","TestAnimNode"],["Particle","TestParticle"],["Sound","TestSound"],["Spine","TestSpine"]],t=0;t<e.length;t++){var o=e[t],n=o[0],a=o[1],i=o[2],s=cc.instantiate(this.nodeButtonItemTemplate);s.getChildByName("Label").getComponent(cc.Label).string=n,s.parent=this.nodeScrollViewContent,s.name=a,s.context=i,s.getComponent(r.default).registerOnTouchCallback(this.onTouchButtonItem.bind(this))}this.nodeButtonItemTemplate.active=!1,this.scrollViewList.cancelInnerEvents=!1},t.prototype.onTouchButtonBack=function(e){e.isClick()&&s.default.enterScene("vHudScene")},t.prototype.onTouchButtonItem=function(e){if(e.isClick()){var t=cc.instantiate(this.buttonBack.node);s.default.enterScene(e.target.name,e.target.context),t.parent=cc.director.getScene().getChildByName("Canvas"),t.zIndex=1e3;t.getContentSize();t.getComponent(r.default).registerOnTouchCallback(function(e){e.isClick()&&s.default.enterScene("vDevTestScene")})}},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrDirector":"mgrDirector"}],vDoubleRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"05092+wqAxMKYjlrsySyINQ","vDoubleRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrTip"),c=e("../../manager/mgrAdNative"),u=e("../../manager/mgrDirector"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCarefulAd=null,t.buttonCarefulAdGiveup=null,t.labelDescAd=null,t.labelTargetAd=null,t.labelTitleAd=null,t.nodeBg=null,t.nodeCarefulAd=null,t.nodeNativeAd=null,t.spriteIconAd=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDoubleRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCarefulAd:{varname:"buttonCarefulAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAd"}]},CC_buttonCarefulAdGiveup:{varname:"buttonCarefulAdGiveup",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAdGiveup"}]},CC_labelDescAd:{varname:"labelDescAd",vartype:cc.Label},CC_labelTargetAd:{varname:"labelTargetAd",vartype:cc.Label},CC_labelTitleAd:{varname:"labelTitleAd",vartype:cc.Label},CC_nodeBg:{varname:"nodeBg",vartype:cc.Node},CC_nodeCarefulAd:{varname:"nodeCarefulAd",vartype:cc.Node},CC_nodeNativeAd:{varname:"nodeNativeAd",vartype:cc.Node},CC_spriteIconAd:{varname:"spriteIconAd",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillAd();var t=cc.v2(0,0);s.default.preCheckCanTriggerAdEvent("pas_double_ad_sure")?(t=cc.v2(0,-195),s.default.triggerAdEvent("pas_double_ad_sure",{style:{x:(u.default.width/2-250)/u.default.width,y:(u.default.height/2-140+200)/u.default.height,w:500/u.default.width,h:0}},!0),s.default.triggerAdEvent("wrap_double_ad_sure")):s.default.trigMutexBannerIntersitial("ban_double_ad_sure",this,"wrap_double_ad_sure"),l.default.tryAddGuessYouLikeNode(this,t),this.spriteIconAd.node._orgSize=this.spriteIconAd.node.getContentSize(),c.default.registerNativeBannerRefreshFun("na_double_ad_sure",this.adaptNativeAd.bind(this),this.nodeNativeAd)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){s.default.closeAdv("ban_double_ad_sure"),s.default.closeAdv("pas_double_ad_sure"),e.prototype.onDestroy.call(this)},t.prototype.fillAd=function(){s.default.isAdCareful();this.nodeCarefulAd.active=!0},t.prototype.adaptNativeAd=function(e){if(e){if(this.nodeBg.height=460,this.nodeNativeAd.active=!0,this.labelTitleAd.string=e.title,this.labelDescAd.string=e.desc,this.labelTargetAd.string=e.targetTitle,e.spriteFrame&&e.spriteFrame.getOriginalSize){var t=this.spriteIconAd.node._orgSize,o=t.height,n=t.width,a=e.spriteFrame.getOriginalSize(),r=a.width,i=a.height,s=n/r,l=o/i,c=Math.min(s,l);this.spriteIconAd.node.setContentSize(cc.size(c*r,c*i))}}else this.nodeBg.height=360,this.nodeNativeAd.active=!1},t.prototype.onTouchButtonCarefulAd=function(e){e.isClick()&&(this.closeDialog(!0),s.default.triggerAdEvent("role_double",null,!0))},t.prototype.onTouchButtonCarefulAdGiveup=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSimpleAd=function(e){e.isClick()&&(this.closeDialog(!0),s.default.triggerAdEvent("role_double",null,!0))},t.prototype.onTouchButtonSimpleAdGiveup=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonGotoAd=function(e){cc.log("TODO vDoubleRewardDialog.onTouchButtonGotoAd")},t=a([p],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vFindMeBaiduDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c42da4rhA5PIqI+9jzX9ANb","vFindMeBaiduDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeBaiduDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vFindMeDouyinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d5e4alkHxtJob3bwcxH0A55","vFindMeDouyinDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeDouyinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vFindMeToutiaoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"ff0beqYUbVMl64xVJpJWRos","vFindMeToutiaoDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeToutiaoDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vFlowerItem:[function(e,t,o){"use strict";cc._RF.push(t,"d13e9MVwzJG1K2ILXj2O3Ir","vFlowerItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPool"),s=e("../../manager/mgrRole"),l=e("../../manager/mgrCfg"),c=e("../../../ulframework/utils/Tools"),u=e("../../manager/mgrTip"),d=e("../../manager/mgrGuide"),p=e("../../manager/mgrDirector"),f=e("../../manager/mgrSound"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelGold=null,t.nodeFlowerBig=null,t.nodeGoldIcon=null,t.nodeTouch=null,t.progressBar=null,t._spineRefs=[],t._bPlaying=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vFlowerItem"},t.prototype._getResourceBindingConfig=function(){return{CC_labelGold:{varname:"labelGold",vartype:cc.Label},CC_nodeFlowerBig:{varname:"nodeFlowerBig",vartype:cc.Node},CC_nodeGoldIcon:{varname:"nodeGoldIcon",vartype:cc.Node},CC_nodeTouch:{varname:"nodeTouch",vartype:cc.Node},CC_progressBar:{varname:"progressBar",vartype:cc.ProgressBar}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.tryStartLuckyTime(),this.registerListeners({MSG_ROLE_AUTO_OUTPUT:this.onMsgRoleAutoOutput,MSG_LUCKY_TIME_BEGIN:this.onMsgLuckyTimeBegin,MSG_LUCKY_TIME_END:this.onMsgLuckyTimeEnd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&this.updateProgress()},t.prototype.onDestroy=function(){this.closeLuckyTime();for(var t=0;t<this._spineRefs.length;t++){var o=this._spineRefs[t];o&&(o.removeFromParent(),i.default.put(o),this._spineRefs[t]=null)}e.prototype.onDestroy.call(this)},t.prototype.getRoleIdelMov=function(){var e=this.context.roleId,t=l.default.get_from_role_db(e,0),o=s.default.getEvolveLevel(e);return t.idleMovs[o]},t.prototype.getRoleTouchMov=function(){var e=this.context.roleId,t=l.default.get_from_role_db(e,0),o=s.default.getEvolveLevel(e);return t.touchMovs[o]},t.prototype.buildUi=function(){var e,t=this,o=this.context.roleId,n=this.context.index,a=s.default.getEvolveLevel(o),r=l.default.get_from_role_db(o,0);if(r){(e=i.default.get("spine",r.flowerSpineId)).parent=this.nodeFlowerBig,e.play(this.getRoleIdelMov()),this._spineRefs.push(e);var c=this.getRoleTouchMov();e.registerEventCallback(function(e){"cpmplete"==e.name&&e.movKey==c&&(t._bPlaying=!1)});var u=r.flowerSprs,d=u[a>=u.length?u.length-1:a];this.context.spr=d;var p=s.default.getFlowerInfo(o,n);p?(this.nodeGoldIcon.parent.active=!1,p.curOutPut>0&&this.tryShowGold()):cc.warn("vFlowerItem buildUi error, flowerInfo is null")}},t.prototype.updateProgress=function(){var e=this.context.roleId,t=this.context.index;if(0!=s.default.getRoleLevel(e)){this.progressBar.node.active=!0;var o=s.default.getFlowerInfo(e,t);o?(this.progressBar.progress=o.curPersent,0==o.curOutPut?this.labelGold.string="":this.labelGold.string=c.default.formatNumToStr(o.curOutPut)):cc.warn("vFlowerItem updateProgress error, flowerInfo is null")}else this.progressBar.node.active=!1},t.prototype.tryShowGold=function(){var e=this.nodeGoldIcon,t=e.parent;if(!t.active){t.active=!0,t.stopAllActions(),t.setScale(0,1),t.runAction(cc.scaleTo(.3,1,1));var o=c.default.random(10,15)/100;e.stopAllActions(),e.setPosition(0,0),e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(o,0,10).easing(cc.easeOut(1.5)),cc.moveTo(o,0,0).easing(cc.easeIn(1.5)),cc.moveTo(.05,0,2).easing(cc.easeOut(1.5)),cc.moveTo(.05,0,0).easing(cc.easeIn(1.5)),cc.delayTime(.3))))}},t.prototype.tryPlayBigFlower=function(){this._bPlaying||(this._bPlaying=!0,this._spineRefs[0].play([this.getRoleTouchMov(),this.getRoleIdelMov()]))},t.prototype.playFlower=function(){},t.prototype.playGoldFly=function(e){for(var t=this.getGoldNum(e),o=0;o<t;o++)this.playGoldIconFly(.2*o)},t.prototype.getGoldNum=function(e){var t=s.default.getOneSecondIncome();return e>60*t?5:e>45*t?4:e>30*t?3:e>15*t?2:1},t.prototype.playGoldIconFly=function(e){var t=i.default.get("view","vGoldTip"),o=u.default.getTipIconRootNode(),n=this.nodeGoldIcon.parent.convertToWorldSpaceAR(this.nodeGoldIcon.getPosition());t.parent=o;var a=o.convertToNodeSpaceAR(n);t.setPosition(a);var r=-1;Math.random()>.5&&(r=1);var s=cc.v2(a.x+r*c.default.random(40,140),a.y+c.default.random(-10,10)),l=d.default.getGuideNode("vHubScene.nodeGoldIcon"),f=cc.v2(-162,p.default.height/2-30);if(f=o.convertToNodeSpaceAR(f),l){var h=l.parent.convertToWorldSpaceAR(l.getPosition());f=o.convertToNodeSpaceAR(h)}t.startPlay(),t.opacity=0,t.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){t.opacity=255}),cc.spawn(cc.jumpTo(.4,s,c.default.random(40,70),1),cc.sequence(cc.scaleTo(.1,.2,1.2),cc.scaleTo(.1,1,1)).repeat(2)),cc.callFunc(function(){t.anchorY=0}),cc.spawn(cc.jumpTo(.3,s,25,1),cc.sequence(cc.scaleTo(.15,.7,1.3),cc.scaleTo(.15,1,1))),cc.delayTime(.2),cc.moveTo(.5,f).easing(cc.easeIn(2)),cc.callFunc(function(){t.sendMsg("MSG_ROLE_GOLD_FLY_OVER"),t.stopPlay(),t.anchorY=.5,t.removeFromParent(),i.default.put(t)})))},t.prototype.tryStartLuckyTime=function(){s.default.isLuckyRoleTime()&&this.startLuckyTime()},t.prototype.startLuckyTime=function(){for(var e=0;e<this._spineRefs.length;e++){this._spineRefs[e].setTimeScale(2)}},t.prototype.closeLuckyTime=function(){for(var e=0;e<this._spineRefs.length;e++){this._spineRefs[e].setTimeScale(1)}},t.prototype.onMsgRoleAutoOutput=function(e){var t=e,o=t.roleId,n=t.index;o==this.context.roleId&&n==this.context.index&&this.tryShowGold()},t.prototype.tuochItem=function(e){if(this.isResourceLoaded()){var t=this.nodeTouch.getBoundingBoxToWorld(),o=e.getLocation();if(t.contains(o)){var n=this.context.roleId,a=this.context.index,r=s.default.reapFlower(n,a);if(r){s.default.tryTrigTouchFlowerAd(n),f.default.play(103),this.tryPlayBigFlower();for(var i=c.default.random(1,3),l=0;l<i;l++)this.playFlower();return this.playGoldFly(r),this.nodeGoldIcon.parent.active=!1,!1}}}},t.prototype.onMsgReapLevelAdd=function(e){var t=this;if(this.isResourceLoaded()){var o=this.context.roleId,n=(this.context.index,s.default.getEvolveLevel(o)),a=l.default.get_from_role_db(o,0);if(a){var r=this._spineRefs[0];r.play(this.getRoleIdelMov());var i=this.getRoleTouchMov();r.registerEventCallback(function(e){"cpmplete"==e.name&&e.movKey==i&&(t._bPlaying=!1)});var c=a.flowerSprs,u=c[n>=c.length?c.length-1:n];this.context.spr=u,this.tryStartLuckyTime()}}},t.prototype.onMsgReapDo1=function(){if(this.isResourceLoaded()){this._bPlaying=!1;var e=this.nodeGoldIcon,t=e.parent;t.stopAllActions(),t.active=!1,e.stopAllActions()}},t.prototype.onMsgLuckyTimeBegin=function(e){this.startLuckyTime()},t.prototype.onMsgLuckyTimeEnd=function(e){this.closeLuckyTime()},t=a([g],t)}(r.default));o.default=_,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip"}],vFlowerTip:[function(e,t,o){"use strict";cc._RF.push(t,"48ce3Pi9nRA/pY7HGQVlCi9","vFlowerTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vFlowerTip"},t.prototype._getResourceBindingConfig=function(){return{CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=this.context.spr;t&&this.fillData(t)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.spr=e,this.isResourceLoaded()&&this.spriteIcon.loadSpriteFrame(e)},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vFreeGoldDialog:[function(e,t,o){"use strict";cc._RF.push(t,"31c5bB2nvVL27zR2YXng07g","vFreeGoldDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrRole"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrTip"),d=e("../../manager/mgrI18n"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonTake=null,t.labelContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFreeGoldDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),u.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=s.default.getOneHourIncome();this.labelContent.string=ul.format(d.default.getText("ui.15"),l.default.formatNumToStr(e))},t.prototype.onTouchButtonTake=function(e){e.isClick()&&c.default.triggerAdEvent("free_gold",null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgAdEventSuccessd=function(e){"free_gold"==e.adEventId&&this.closeDialog()},t=a([f],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrI18n":"mgrI18n","../../manager/mgrRole":"mgrRole","../../manager/mgrTip":"mgrTip"}],vGoldTip:[function(e,t,o){"use strict";cc._RF.push(t,"c7e43GW+vVB+pWnjOFaZ8D/","vGoldTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeParticle=null,t._particle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGoldTip"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeParticle:{varname:"nodeParticle",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this._particle=this.nodeParticle.getComponent(cc.ParticleSystem)},t.prototype.startPlay=function(){this.context.isPlaying=!0,this.refresh()},t.prototype.stopPlay=function(){this.context.isPlaying=!1,this.refresh()},t.prototype.refresh=function(){this.isResourceLoaded()&&(this.context.isPlaying?this._particle.resetSystem():this._particle.stopSystem())},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vGotDailyRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"99354T9WqhKOYrdGyBO6sgA","vGotDailyRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrDailyTask"),c=e("../../manager/mgrCfg"),u=e("../../../ulframework/utils/Tools"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSure=null,t.buttonSureAd=null,t.labelDesc=null,t.nodeEff=null,t.spriteIcon=null,t.adEventId=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGotDailyRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonSure:{varname:"buttonSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_buttonSureAd:{varname:"buttonSureAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSureAd"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeEff:{varname:"nodeEff",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.initAdReawrd(),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.nodeEff.scale=0,this.nodeEff.runAction(cc.scaleTo(.1,1,1)),s.default.triggerAdEvent("got_item")},t.prototype.isClickShadowClose=function(){return!1},t.prototype.initAdReawrd=function(){this.buttonClose.node.active=!1,this.buttonSureAd.node.active=!1,this.buttonSure.node.active=!0;var e="double_all_daily",t=s.default.preCheckCanTriggerAdEvent(e),o=this.context.amount;this.labelDesc.string=u.default.formatNumToStr(o),t&&o>0&&(this.adEventId=e,this.buttonClose.node.active=!0,this.buttonSureAd.node.active=!0,this.buttonSure.node.active=!1,this.labelDesc.string=u.default.formatNumToStr(o)+"*2")},t.prototype.fillData=function(){var e=this.context.itemId,t=c.default.get_from_item_template_db(e);t.icon&&this.spriteIcon.loadSpriteFrame(t.icon)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(l.default.takeAllFinishReward(),this.closeDialog())},t.prototype.onTouchButtonSure=function(e){e.isClick()&&(l.default.takeAllFinishReward(),this.closeDialog())},t.prototype.onTouchButtonSureAd=function(e){e.isClick()&&s.default.triggerAdEvent("double_all_daily",null,!0)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.adEventId&&(l.default.takeAllFinishReward(2),this.closeDialog())},t=a([p],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDailyTask":"mgrDailyTask"}],vGotItemDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c5e75nVVFlNsKBjMpEmvHDz","vGotItemDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrPlayer"),c=e("../../manager/mgrSound"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/utils/Tools"),p=e("../../manager/mgrGuide"),f=e("../node/vPartDetailText"),h=e("../node/vLevelBar"),g=e("../../manager/mgrRole"),_=e("../../Const"),m=cc._decorator,v=m.ccclass,y=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSure=null,t.buttonSureAd=null,t.labelDesc=null,t.labelExtraReward=null,t.nodeEff=null,t.nodeFeature=null,t.nodeHeart=null,t.spriteIcon=null,t.levelBar=null,t.adEventId=null,t.adRewards=null,t.bAdReceived=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGotItemDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonSure:{varname:"buttonSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_buttonSureAd:{varname:"buttonSureAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSureAd"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelExtraReward:{varname:"labelExtraReward",vartype:cc.Label},CC_nodeEff:{varname:"nodeEff",vartype:cc.Node},CC_nodeFeature:{varname:"nodeFeature",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),c.default.play(102)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.initAdReawrd(),this.fillData(),l.default.markDisplayedGotItem(this.context.itemId),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.nodeEff.scale=0,this.nodeEff.runAction(cc.scaleTo(.1,1,1)),u.default.triggerAdEvent("got_item"),this.sendMsg("MSG_GUIDE_POINT",{id:"vGotItemDialog.onOpenDialogCompleted"})},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUi=function(){var e=new h.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.initAdReawrd=function(){if(this.buttonClose.node.active=!1,this.buttonSureAd.node.active=!1,this.buttonSure.node.active=!0,!this.bAdReceived)if(this.context.adEventId&&this.context.adRewards)cc.log("vGotItemDialog.initAdReward find context ad",this.context.adEventId,this.context.adRewards),this.adEventId=this.context.adEventId,this.adRewards=this.context.adRewards,this.buttonClose.node.active=!0,this.buttonSureAd.node.active=!0,this.buttonSure.node.active=!1,p.default.registerGuideNode("vGotItemDialog.buttonClose",this.buttonClose.node);else{if(this.context.bBanAdReward)return cc.log("vGotItemDialog.initAdReward ban ad reward."),void p.default.registerGuideNode("vGotItemDialog.buttonClose",this.buttonSure.node);var e="got_item_addition_reward",t=u.default.preCheckCanTriggerAdEvent(e),o=30*g.default.getOneMinuteIncome();t&&o>0?(cc.log("vGotItemDialog.initAdRewad trigger a ad reward.",e),this.adEventId=e,this.adRewards=[[_.default.ITEM_ID_GOLD,o]],cc.log("  rewards:",this.adRewards),u.default.markFinished(this.adEventId),this.buttonClose.node.active=!0,this.buttonSureAd.node.active=!0,this.buttonSure.node.active=!1,p.default.registerGuideNode("vGotItemDialog.buttonClose",this.buttonClose.node)):p.default.registerGuideNode("vGotItemDialog.buttonClose",this.buttonSure.node)}},t.prototype.fillData=function(){var e=this.context.itemId,t=this.context.amount,o=s.default.get_from_item_template_db(e);console.log("**************101",e,t,o),o.icon&&this.spriteIcon.loadSpriteFrame(o.icon),this.labelExtraReward.string=d.default.formatNumToStr(30*g.default.getOneMinuteIncome());var n=s.default.get_from_part_db(e);if(n){this.labelDesc.node.active=!1,this.levelBar.setSpace(5),this.levelBar.setLevel(5,n.level);var a=n.topSubjectIds;if(a)for(var r=0;r<a.length;r++){var i=a[r],l=s.default.get_from_part_subject_tag_db(i),c=new f.default;c.fillData(l.id.toString()),this.nodeFeature.addChild(c)}}else this.labelDesc.string=d.default.formatNumToStr(t)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vGotItemDialog.buttonClose.click"}),this.closeDialog())},t.prototype.onTouchButtonSure=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vGotItemDialog.buttonClose.click"}),this.closeDialog())},t.prototype.onTouchButtonSureAd=function(e){e.isClick()&&u.default.triggerAdEvent(this.adEventId,{rewardBoxId:0,rewards:this.adRewards},!0,!0)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.adEventId&&(this.bAdReceived=!0,this.initAdReawrd())},t=a([v],t)}(i.default));o.default=y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRole":"mgrRole","../../manager/mgrSound":"mgrSound","../node/vLevelBar":"vLevelBar","../node/vPartDetailText":"vPartDetailText"}],vGotoSuitDialog:[function(e,t,o){"use strict";cc._RF.push(t,"89763zwaoNJXpYadSGcEE2O","vGotoSuitDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrDirector"),l=e("../../manager/mgrPart"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGoto=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGotoSuitDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonGoto:{varname:"buttonGoto",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonGoto"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonGoto=function(e){e.isClick()&&(l.default.cdSomuchGold(),s.default.warpSceneWithEffect("vSuitScene",{suitIndex:this.context.index}))},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPart":"mgrPart"}],vGuessYouLikeItem:[function(e,t,o){"use strict";cc._RF.push(t,"de07ejXgWBPjbsscgvhPEUS","vGuessYouLikeItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelName=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuessYouLikeItem"},t.prototype._getResourceBindingConfig=function(){return{CC_labelName:{varname:"labelName",vartype:cc.Label},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.info=e,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.info;e&&e.url&&this.spriteIcon.loadSpriteFrame(e.url)}},t.prototype.getTouchRect=function(){return this.isResourceLoaded()?this.spriteIcon.node.getBoundingBoxToWorld():null},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vGuessYouLike:[function(e,t,o){"use strict";cc._RF.push(t,"de0eaj6HXpPZY73GmqTdX5D","vGuessYouLike");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("./vGuessYouLikeItem"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrSdk"),u=e("../../manager/mgrChannel"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutBox=null,t.widgetBg=null,t.widgetMask=null,t._items=[],t._bFilled=!1,t._bDirRight=!0,t._bFirstStroll=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuessYouLike"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutBox:{varname:"layoutBox",vartype:cc.Layout},CC_widgetBg:{varname:"widgetBg",vartype:cc.Widget},CC_widgetMask:{varname:"widgetMask",vartype:cc.Widget}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.width=s.default.width;var t=this.context.offset||cc.v2(0,0);this.y=-s.default.height/2+200+t.y,this.x=this.x+t.x,this.widgetBg.updateAlignment(),this.widgetMask.updateAlignment(),c.default.openJump("56","list"),this.fillInfo(),l.default.registerTouchHandler(this.layoutBox.node,this.onTouchNodeBg.bind(this))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillInfo=function(){var e=u.default.getInterPushConfig();if(e&&0!=e.length&&!this._bFilled){this._bFilled=!0;for(var t=0;t<e.length;t++){var o=new i.default;o.setContentSize(77.5,100),o.parent=this.layoutBox.node,o.fillData(e[t]),this._items.push(o)}this.layoutBox.updateLayout(),this.startRoll()}},t.prototype.startRoll=function(){var e=this;this.stopAllActions();var t=this.layoutBox.node,o=t.parent.width,n=t.width;if(n!=o){var a=o/2-n/2,r=-a;if(a>0&&(r=-(a=-a)),this._bFirstStroll&&(this._bFirstStroll=!1,n>o?(t.x=r,this._bDirRight=!1):(t.x=a,this._bDirRight=!0)),t.x<a)this._bDirRight=!0,t.runAction(cc.sequence(cc.moveTo(.2,a,0),cc.callFunc(function(){e.startRoll()})));else if(t.x>r)this._bDirRight=!1,t.runAction(cc.sequence(cc.moveTo(.2,r,0),cc.callFunc(function(){e.startRoll()})));else{if(this._bDirRight){var i=(r-t.x)/60;t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(i,r,0),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!1,e.startRoll()})))}else{i=Math.abs(a-t.x)/60;t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(i,a,0),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!0,e.startRoll()})))}}}},t.prototype.stopRoll=function(){this.layoutBox.node.stopAllActions()},t.prototype.onTouchNodeBg=function(e){switch(e.name){case"began":this.stopRoll();break;case"moved":this.layoutBox.node.x+=e.getDeltaX();break;default:this.startRoll()}if(e.isClick())for(var t=e.getLocation(),o=0;o<this._items.length;o++){var n=this._items[o],a=n.getTouchRect();if(a&&a.contains(t)){var r=n.context.info;if(!r)continue;return void c.default.jumpOtherGame(r.gameId,"list")}}},t=a([p],t)}(r.default));o.default=f,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrSdk":"mgrSdk","./vGuessYouLikeItem":"vGuessYouLikeItem"}],vGuideArrow:[function(e,t,o){"use strict";cc._RF.push(t,"059d2vsboRBSqFIQYk8E6SK","vGuideArrow");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideArrow"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vGuideMask:[function(e,t,o){"use strict";cc._RF.push(t,"1e813/+31BG6587xEYKG0RQ","vGuideMask");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrDirector"),s=e("../../Const"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrGuide"),d=e("../../manager/mgrI18n"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeLeftBottom=null,t.spriteBlockBottom=null,t.spriteBlockLeft=null,t.spriteBlockRight=null,t.spriteBlockTop=null,t.spriteHole=null,t.rect=null,t.maskType=s.GuideMaskType.none_passAll,t.bFadeIn=!1,t._mask_click_last_time=0,t._mask_click_count=0,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideMask"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeLeftBottom:{varname:"nodeLeftBottom",vartype:cc.Node},CC_spriteBlockBottom:{varname:"spriteBlockBottom",vartype:cc.Sprite},CC_spriteBlockLeft:{varname:"spriteBlockLeft",vartype:cc.Sprite},CC_spriteBlockRight:{varname:"spriteBlockRight",vartype:cc.Sprite},CC_spriteBlockTop:{varname:"spriteBlockTop",vartype:cc.Sprite},CC_spriteHole:{varname:"spriteHole",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.updateMask(),this.updateListeners()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setMaskType=function(e){this.maskType=e,this.updateMask(),this.updateListeners()},t.prototype.setRect=function(e){this.rect=e,this.updateMask()},t.prototype.updateListeners=function(){if(this.isResourceLoaded()){var e=this.maskType;this.spriteHole.node.opacity=130,this.spriteBlockLeft.node.opacity=130,this.spriteBlockRight.node.opacity=130,this.spriteBlockTop.node.opacity=130,this.spriteBlockBottom.node.opacity=130,this.spriteHole.node.opacity=180,l.default.unregisterTouchHandler(this.spriteHole.node),l.default.unregisterTouchHandler(this.spriteBlockLeft.node),l.default.unregisterTouchHandler(this.spriteBlockRight.node),l.default.unregisterTouchHandler(this.spriteBlockTop.node),l.default.unregisterTouchHandler(this.spriteBlockBottom.node),e==s.GuideMaskType.mask_passAll||e==s.GuideMaskType.none_passAll||(e==s.GuideMaskType.mask_blockAll||e==s.GuideMaskType.none_blockkAll?(l.default.registerTouchHandler(this.spriteHole.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)):e!=s.GuideMaskType.mask_passHole&&e!=s.GuideMaskType.none_passHole||(l.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),l.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)))}},t.prototype.updateMask=function(){if(this.isResourceLoaded()){this.nodeResource.setContentSize(i.default.size),this.nodeLeftBottom.getComponent(cc.Widget).updateAlignment();var e,t=this.nodeResource.getContentSize(),o=this.rect,n=this.maskType,a=n==s.GuideMaskType.mask_blockAll||n==s.GuideMaskType.mask_passAll||n==s.GuideMaskType.mask_passHole;if(o)this.spriteHole.node.x=o.x,this.spriteHole.node.y=o.y,this.spriteHole.node.setContentSize(o.size.width+1,o.size.height+1),(e=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,e.right=t.width-o.x,e.top=0,e.bottom=0,e.updateAlignment(),(e=this.spriteBlockRight.getComponent(cc.Widget)).left=o.xMax,e.right=0,e.top=0,e.bottom=0,e.updateAlignment(),(e=this.spriteBlockTop.getComponent(cc.Widget)).left=o.x,e.right=t.width-o.xMax,e.top=0,e.bottom=o.yMax,e.updateAlignment(),this.spriteBlockBottom.enabled=!0,(e=this.spriteBlockBottom.getComponent(cc.Widget)).left=o.x,e.right=t.width-o.xMax,e.top=t.height-o.y,e.bottom=0,e.updateAlignment();else(e=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,e.right=0,e.top=0,e.bottom=0,e.updateAlignment();a?o?(this.spriteHole.enabled=!0,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!0,this.spriteBlockTop.enabled=!0,this.spriteBlockBottom.enabled=!0):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!1,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1)}},t.prototype.fadeIn=function(){if(this.bFadeIn=!0,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.opacity=0,e.stopAllActions(),e.runAction(cc.fadeIn(.3)))}},t.prototype.fadeOut=function(){if(this.bFadeIn=!1,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.stopAllActions(),e.runAction(cc.fadeOut(.3)))}},t.prototype._onClickMaskLeftTop=function(){var e=this._mask_click_last_time||0;(l.default.time()-e<.5?this._mask_click_count++:this._mask_click_count=0,cc.log("vGuideMask._onClickMaskLeftTop",this._mask_click_count),this._mask_click_last_time=l.default.time(),this._mask_click_count>=19)&&(this._mask_click_count=0,c.default.alertPrompt2(d.default.getText("ui.20"),d.default.getText("alert.1"),d.default.getText("ui.35"),d.default.getText("alert.2"),null,function(){u.default._debugCancelDebug()}).parent.zIndex=s.default.GLOBAL_ORDER_DIALOG+1)},t.prototype.onTouchMask=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vGuideMask.click"}),e.getLocationX()<=100&&e.getLocationY()>=i.default.height-100&&this._onClickMaskLeftTop())},t=a([f],t)}(r.default));o.default=h,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrTip":"mgrTip"}],vGuideTip:[function(e,t,o){"use strict";cc._RF.push(t,"54dbe1CSJhPS58JzJXVJ0sg","vGuideTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrCfg"),s=e("../../manager/mgrPool"),l=e("../../manager/mgrI18n"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.labelName=null,t.nodeArrow=null,t.nodeSpine=null,t.spriteNameBg=null,t.spine=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:{varname:"labelContent",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_nodeArrow:{varname:"nodeArrow",vartype:cc.Node},CC_nodeSpine:{varname:"nodeSpine",vartype:cc.Node},CC_spriteNameBg:{varname:"spriteNameBg",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){cc.isValid(this.spine)&&(s.default.put(this.spine),this.spine.removeFromParent()),this.spine=null,e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=i.default.get("guide_db",e,t);if(o.tipSpineId){var n=s.default.get("spine",o.tipSpineId);n&&(n.parent=this.nodeSpine,n.play("mov_1",!0),this.spine=n)}o.tipName?(this.spriteNameBg.node.active=!0,this.labelName.string=l.default.getText(o.tipName)):this.spriteNameBg.node.active=!1;var a=l.default.getText(o.tipContent);this.labelContent.string=l.default.getText(a),this.nodeArrow.active=!o.bTipArrowDisabled},t.prototype.setAnchorPoint=function(e,t){this.isResourceLoaded()&&this.nodeResource.setAnchorPoint(e,t)},t=a([u],t)}(r.default));o.default=d,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool"}],vGuideView:[function(e,t,o){"use strict";cc._RF.push(t,"38f2bEVSjVPJ6lsbQuojwI3","vGuideView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../manager/mgrCfg"),i=e("../../manager/mgrGuide"),s=e("../../manager/mgrPool"),l=e("./vGuideMask"),c=e("./vGuideTip"),u=e("./vGuideArrow"),d=e("../../../ulframework/view/ViewBase"),p=e("../../manager/mgrSound"),f=e("../../../ulframework/utils/Timer"),h=e("../../../ulframework/utils/Tools"),g=cc._decorator,_=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bHide=!1,t.slideIndex=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.updatePos()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.bHide||(cc.warn("vGuideView.onCleanup \u5f15\u5bfc\u5f02\u5e38\u9000\u51fa\uff0c\u5e76\u6ca1\u6709\u8c03\u7528\u8fc7hideAndRemove\u51fd\u6570"),cc.warn("  \u5c1d\u8bd5\u53d6\u6d88\u5f15\u5bfc"),i.default.cancelGuide()),cc.isValid(this.spineClick)&&(s.default.put(this.spineClick),this.spineClick.removeFromParent(),this.spineClick=null)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=r.default.get("guide_db",e,t);if(cc.isValid(this.mask)&&(this.mask.destroy(),this.mask=null),cc.isValid(this.tip)&&(this.tip.destroy(),this.tip=null),cc.isValid(this.arrow)&&(this.arrow.destroy(),this.arrow=null),this.mask=new l.default,this.mask.parent=this,this.mask.setMaskType(o.maskType),o.tipContent&&(this.tip=new c.default({guideId:e,step:t}),this.tip.parent=this),"click"==o.arrowType){var n=o.bFlipArrow?-1:1,a=new cc.Node;a.parent=this,a.scaleX=n,a.rotation=o.arrowRotate,this.nodeSpine=a;var i=s.default.get("spine","ui_guide_click");i.parent=a,i.play("mov_1",!0),this.spineClick=i}else"slide"==o.arrowType&&(this.arrow=new u.default,this.arrow.parent=this,this.arrow.scaleX=o.bFlipArrow?-1:1,this.playSlideArrowAction())},t.prototype.playSlideArrowAction=function(){var e=this.context.guideId,t=this.context.step,o=r.default.get("guide_db",e,t),n=i.default.getGuideNodes(o.nodeNames);if(n.length<2)return cc.warn("vGuideView.playSlideArrowAction nodes not enough!"),this.arrow.destroy(),void(this.arrow=null);var a=this.slideIndex%n.length,s=n[a],l=h.default.convertRectToNodeSpace(this,h.default.calcNodeBoundingBoxToWorld(s,o.nodeExt));if(0==a)this.arrow.setPosition(l.center),this.arrow.opacity=0,this.arrow.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(this.playSlideArrowAction.bind(this))));else if(a==n.length-1){var c=this.arrow.position.sub(l.center).mag()/450;this.arrow.runAction(cc.sequence(cc.moveTo(c,l.center),cc.fadeOut(.3),cc.callFunc(this.playSlideArrowAction.bind(this))))}else{c=this.arrow.position.sub(l.center).mag()/450;this.arrow.runAction(cc.sequence(cc.moveTo(c,l.center),cc.callFunc(this.playSlideArrowAction.bind(this))))}this.slideIndex++},t.prototype.show=function(){this.buildUi();var e=this.context.guideId,t=this.context.step,o=r.default.get("guide_db",e,t);o.soundId&&p.default.play(o.soundId),this.mask&&this.mask.fadeIn(),this.arrow&&(this.arrow.stopActionByTag(1),this.arrow.opacity=0,this.arrow.runAction(cc.fadeIn(.3)).setTag(1)),this.nodeSpine&&(this.nodeSpine.stopActionByTag(1),this.nodeSpine.opacity=0,this.nodeSpine.runAction(cc.fadeIn(.3)).setTag(1)),this.tip&&(this.tip.stopActionByTag(1),this.tip.opacity=0,this.tip.runAction(cc.fadeIn(.3)).setTag(1))},t.prototype.hideAndRemove=function(){var e=this;this.bHide=!0,cc.isValid(this.mask)&&this.mask.fadeOut(),cc.isValid(this.arrow)&&(this.arrow.stopAllActions(),this.arrow.runAction(cc.fadeOut(.3))),cc.isValid(this.nodeSpine)&&(this.nodeSpine.stopAllActions(),this.nodeSpine.runAction(cc.fadeOut(.3))),cc.isValid(this.tip)&&(this.tip.stopAllActions(),this.tip.runAction(cc.fadeOut(.3))),f.default.callLater(.3,function(){e.destroy()},this)},t.prototype.updatePos=function(){var e=this.context.guideId,t=this.context.step,o=r.default.get("guide_db",e,t),n=this.calcFirstNodeRect(),a=h.default.convertRectToNodeSpace(this,n);if(this.mask&&this.mask.setRect(n),this.tip)if(a){var i=0,s=0,l=0,c=0,u=o.tipDir||"left";"left"==u||"leftTop"==u||"leftBottom"==u?(i=a.x-10,l=1):"right"==u||"rightTop"==u||"rightBottom"==u?(i=a.xMax+10,l=0):(i=a.center.x,l=.5),"top"==u||"leftTop"==u||"rightTop"==u?(s=a.yMax+10,c=0):"bottom"==u||"leftBottom"==u||"rightBottom"==u?(s=a.y-10,c=1):(s=a.center.y,c=.5),cc.log("update tipPos",l,c,i,s),this.tip.setAnchorPoint(l,c),this.tip.x=i+(o.tipOffset[0]||0),this.tip.y=s+(o.tipOffset[1]||0)}else this.tip.setAnchorPoint(.5,.5),this.tip.x=o.tipOffset[0]||0,this.tip.y=o.tipOffset[1]||0;this.nodeSpine&&"click"==o.arrowType&&(a?cc.isValid(this.nodeSpine)&&this.nodeSpine.setPosition(a.center):cc.warn("vGuideView.updatePos rect not found!"))},t.prototype.calcFirstNodeRect=function(){var e=this.context.guideId,t=this.context.step,o=r.default.get("guide_db",e,t),n=o.nodeNames[0];if(!n)return null;var a=i.default.getGuideNode(n);return a?h.default.calcNodeBoundingBoxToWorld(a,o.nodeExt):null},t=a([_],t)}(d.default));o.default=m,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrSound":"mgrSound","./vGuideArrow":"vGuideArrow","./vGuideMask":"vGuideMask","./vGuideTip":"vGuideTip"}],vHubScene:[function(e,t,o){"use strict";cc._RF.push(t,"5896dix2f5DQpPQCLGzWG30","vHubScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrSound"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrAd"),u=e("../node/vRoleItem"),d=e("../../manager/mgrPlayer"),p=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrGuide"),h=e("../../Const"),g=e("../../manager/mgrTip"),_=e("../../../ulframework/utils/Timer"),m=e("../../manager/mgrSign"),v=e("../../manager/mgrDailyTask"),y=e("../../manager/mgrOfflineArena"),C=e("../../manager/mgrSdk"),b=e("../../manager/mgrRole"),S=e("../../manager/mgrShop"),R=e("../../manager/mgrOnline"),T=e("../../manager/mgrPart"),L=e("../../manager/mgrPool"),w=e("../../manager/mgrChannel"),A=e("../../manager/mgrSelectPart"),D=e("../../manager/mgrCfg"),I=e("../../manager/mgrAchievement"),k=e("../../manager/mgrI18n"),E=cc._decorator,M=E.ccclass,O=(E.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdd=null,t.buttonAddShortCut=null,t.buttonCloth=null,t.buttonDaily=null,t.buttonDoubleReward=null,t.buttonExchange=null,t.buttonFindMeBaidu=null,t.buttonFindMeDouyin=null,t.buttonFindMeToutiao=null,t.buttonGiftPack=null,t.buttonH5UrlAd=null,t.buttonJumpOtherGame2=null,t.buttonMoreGame=null,t.buttonOnline=null,t.buttonPartRank=null,t.buttonPvp=null,t.buttonSelectPart=null,t.buttonSetting=null,t.buttonShare=null,t.buttonSign=null,t.labelAddShortCut=null,t.labelDoubleReward=null,t.labelGold=null,t.labelOnline=null,t.labelSpecialTime=null,t.nodeBottom=null,t.nodeDoubleRewardMask=null,t.nodeGoldIcon=null,t.nodeHandLight=null,t.nodeJumpOtherGame=null,t.nodeLeft=null,t.nodeLeftBottom=null,t.nodeLeftTop=null,t.nodeOnlineMask=null,t.nodeParticle=null,t.nodeRight=null,t.nodeRightBottom=null,t.nodeRightTop=null,t.nodeRole1=null,t.nodeRole2=null,t.nodeRole3=null,t.nodeRole4=null,t.nodeRole5=null,t.nodeScene=null,t.nodeSpecialTimeBg=null,t.nodeSpecialTimeTItle=null,t.nodeSpine1=null,t.nodeTop=null,t.spritePrint=null,t.roleItems=[],t.isSlidePlaySound=!1,t._spineRefs=[],t.bBanGoTo=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vHubScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdd:{varname:"buttonAdd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAdd"}]},CC_buttonAddShortCut:{varname:"buttonAddShortCut",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAddShortCut"}]},CC_buttonCloth:{varname:"buttonCloth",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCloth"}]},CC_buttonDaily:{varname:"buttonDaily",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonDaily"}]},CC_buttonDoubleReward:{varname:"buttonDoubleReward",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonDoubleReward"}]},CC_buttonExchange:{varname:"buttonExchange",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonExchange"}]},CC_buttonFindMeBaidu:{varname:"buttonFindMeBaidu",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonFindMeBaidu"}]},CC_buttonFindMeDouyin:{varname:"buttonFindMeDouyin",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonFindMeDouyin"}]},CC_buttonFindMeToutiao:{varname:"buttonFindMeToutiao",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonFindMeToutiao"}]},CC_buttonGiftPack:{varname:"buttonGiftPack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonGiftPack"}]},CC_buttonH5UrlAd:{varname:"buttonH5UrlAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonH5UrlAd"}]},CC_buttonJumpOtherGame2:{varname:"buttonJumpOtherGame2",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonJumpOtherGame2"}]},CC_buttonMoreGame:{varname:"buttonMoreGame",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonMoreGame"}]},CC_buttonOnline:{varname:"buttonOnline",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonOnline"}]},CC_buttonPartRank:{varname:"buttonPartRank",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonPartRank"}]},CC_buttonPvp:{varname:"buttonPvp",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonPvp"}]},CC_buttonSelectPart:{varname:"buttonSelectPart",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSelectPart"}]},CC_buttonSetting:{varname:"buttonSetting",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSetting"}]},CC_buttonShare:{varname:"buttonShare",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonShare"}]},CC_buttonSign:{varname:"buttonSign",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSign"}]},CC_labelAddShortCut:{varname:"labelAddShortCut",vartype:cc.Label},CC_labelDoubleReward:{varname:"labelDoubleReward",vartype:cc.Label},CC_labelGold:{varname:"labelGold",vartype:cc.Label},CC_labelOnline:{varname:"labelOnline",vartype:cc.Label},CC_labelSpecialTime:{varname:"labelSpecialTime",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeDoubleRewardMask:{varname:"nodeDoubleRewardMask",vartype:cc.Node},CC_nodeGoldIcon:{varname:"nodeGoldIcon",vartype:cc.Node},CC_nodeHandLight:{varname:"nodeHandLight",vartype:cc.Node},CC_nodeJumpOtherGame:{varname:"nodeJumpOtherGame",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftBottom:{varname:"nodeLeftBottom",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeOnlineMask:{varname:"nodeOnlineMask",vartype:cc.Node},CC_nodeParticle:{varname:"nodeParticle",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeRightBottom:{varname:"nodeRightBottom",vartype:cc.Node},CC_nodeRightTop:{varname:"nodeRightTop",vartype:cc.Node},CC_nodeRole1:{varname:"nodeRole1",vartype:cc.Node},CC_nodeRole2:{varname:"nodeRole2",vartype:cc.Node},CC_nodeRole3:{varname:"nodeRole3",vartype:cc.Node},CC_nodeRole4:{varname:"nodeRole4",vartype:cc.Node},CC_nodeRole5:{varname:"nodeRole5",vartype:cc.Node},CC_nodeScene:{varname:"nodeScene",vartype:cc.Node},CC_nodeSpecialTimeBg:{varname:"nodeSpecialTimeBg",vartype:cc.Node},CC_nodeSpecialTimeTItle:{varname:"nodeSpecialTimeTItle",vartype:cc.Node},CC_nodeSpine1:{varname:"nodeSpine1",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),s.default.play(1)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.uiFadeIn(),this.buildUi(),this.fillData(),this.refreshBtns(),_.default.callLoop(.1,this.onTimerLoop.bind(this),this),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgSdkShareResult,MSG_ADV_VALID_COUNT:this.onMsgAdValidCount,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_ROLE_GOLD_FLY_OVER:this.onMsgRoleGoldFlyOver,MSG_ROLE_UPGRADE:this.onMsgRoleUpgrade,MSG_LUCKY_TIME_BEGIN:this.onMsgLuckyTimeBegin,MSG_LUCKY_TIME_END:this.onMsgLuckyTimeEnd,MSG_ONLINE_SIGN:this.onMsgOnlineSign,MSG_SIGN:this.onMsgSign,MSG_WX_GZH_ENTER_INIT_ALERT:this.onMsgWxgzhEnterInitAlert,MSG_RECORD_UI_REFRESH:this.onMsgRecordUiRefresh,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_I18N_LANGUAGE_CHANGED:this.onMsgLanguageChanged}),p.default.registerTouchHandler(this.nodeScene,this.onTouchHandler.bind(this),!0),this._tryGuide(),this._tryAlertWxgzhReward(),this._tryOpenSomeDialog(),h.default.IS_INHUB_FIRSTTIME&&c.default.isAdCareful()&&w.default.isChannelOppo()?h.default.IS_INHUB_FIRSTTIME=!1:c.default.triggerAdEvent("wrap_hub"),b.default.isLuckyRoleTime()?this.startLuckyTime():(this.nodeSpecialTimeBg.active=!1,this.nodeSpecialTimeTItle.active=!1),this._showCrossRecommend()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.labelSpecialTime.string=b.default.getLuckyRoleTimeRemain())},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this);for(var t=0;t<this._spineRefs.length;t++){var o=this._spineRefs[t];o.removeFromParent(),L.default.put(o)}this._spineRefs.length=0,w.default._isSupportRecommendationBtn&&C.default.closeCrossRecommend()},t.prototype.onTimerLoop=function(){g.default.setCountBadgeValue(this.buttonSign.node,m.default.getBadgeCout(),-10,-5),g.default.setCountBadgeValue(this.buttonDaily.node,v.default.getBadageCount(),-10,-5),g.default.setCountBadgeValue(this.buttonPvp.node,y.default.getAllBadgeCount(),-10,-5),g.default.setCountBadgeValue(this.buttonMoreGame.node,w.default.hadGetWxgzhReward()?0:1,-10,-5),g.default.setCountBadgeValue(this.buttonOnline.node,R.default.getBadgeCout(),-10,-5),g.default.setCountBadgeValue(this.buttonExchange.node,T.default.getBadgeCout(),-10,-5);var e=D.default.get_from_select_part_db(1),t=0;if(e){var o=D.default.get_from_suit_db(e.suitIds[0]);if(o)for(var n=0;n<o.partIds.length;n++){I.default.getAchievement(o.partIds[n]).state==h.AchievementState.finished&&t++}}g.default.setCountBadgeValue(this.buttonSelectPart.node,A.default.getCanJoinCount()[0]+t),this.nodeDoubleRewardMask.active=!b.default.isDoubleRewardCd(),this.labelDoubleReward.string=b.default.getDoubleRewardTimeStr(),this.nodeOnlineMask.active=R.default.getState()!=h.OnlineState.canSign,this.labelOnline.string=R.default.getRemainTimeStr()},t.prototype._showCrossRecommend=function(){var e=cc.view.getFrameSize();w.default._isSupportRecommendationBtn&&(C.default.openCrossRecommend(10,Math.floor(.2*e.height),0),C.default.openCrossRecommend(10,Math.floor(.3*e.height),1))},t.prototype._tryGuide=function(){f.default.registerGuideNode("vHubScene.buttonExchange",this.buttonExchange.node),f.default.registerGuideNode("vHubScene.buttonPvp",this.buttonPvp.node),f.default.registerGuideNode("vHubScene.buttonCloth",this.buttonCloth.node),f.default.registerGuideNode("vHubScene.buttonSelectPart",this.buttonSelectPart.node),b.default.getRoleLevel(15)>0&&(T.default.getLastClothes()?y.default.getPlayerData()?this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.onResourceLoaded.selectPart"}):this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.onResourceLoaded.pvp"}):this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.onResourceLoaded.cloth"}))},t.prototype._tryOpenSomeDialog=function(){var e=this;if(!f.default.isGuiding()){var t=b.default.settleOfflineReward(),o=t[0],n=t[1];if(n>0)l.default.openDialog("vOfflineDialog",{pastTime:o,income:n,fOnDialogClose:function(){e._tryOpenSomeDialog()}});else{var a=b.default.getRoleLevel(15)>0;m.default.getState()==h.SignState.canSign&&a&&l.default.openDialog("vSignDialog");var r=k.default.hasRecordLanguage();console.log("*************",r),r||l.default.openDialog("vSetLanguage")}}},t.prototype.uiFadeIn=function(){var e=this;this.nodeLeft.x=-l.default.width/2,this.nodeLeftBottom.x=-l.default.width/2,this.nodeRight.x=l.default.width/2,this.nodeRightBottom.x=l.default.width/2,this.nodeTop.y=l.default.height/2,this.nodeBottom.y=-l.default.height/2,this.nodeLeft.y=l.default.height/2,l.default.isDeviceOverHeight()&&(this.nodeTop.y=l.default.height/2-50,this.nodeLeft.y=l.default.height/2-30),this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftBottom.__op=this.nodeLeftBottom.position,this.nodeRight.__op=this.nodeRight.position,this.nodeRightBottom.__op=this.nodeRightBottom.position,this.nodeTop.__op=this.nodeTop.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeLeft.x-=200,this.nodeLeftBottom.x-=200,this.nodeRight.x+=200,this.nodeRightBottom.x+=200,this.nodeTop.y+=200,this.nodeBottom.y-=200;_.default.callLater(.2,function(){e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftBottom.runAction(cc.moveTo(.2,e.nodeLeftBottom.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeRightBottom.runAction(cc.moveTo(.2,e.nodeRightBottom.__op)),e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeBottom.runAction(cc.moveTo(.2,e.nodeBottom.__op))},this)},t.prototype.buildUi=function(){this.spritePrint.node.active=w.default.isChannel4399(),this.createRoleItems(),f.default.registerGuideNode("vHubScene.nodeGoldIcon",this.nodeGoldIcon)},t.prototype.createRoleItems=function(){for(var e=[this.nodeRole1,this.nodeRole2,this.nodeRole3,this.nodeRole4,this.nodeRole5],t=0;t<e.length;t++){var o=new u.default({roleId:t+11});o.parent=e[t],this.roleItems.push(o)}},t.prototype.fillData=function(){this.labelAddShortCut.string="+"+p.default.formatNumToStr(w.default.getInstallShortCutRewardCount()),this.updateLabelGold()},t.prototype.refreshBtns=function(){this.buttonShare.node.active=!1,this.buttonH5UrlAd.node.active="1"==C.default.getCopByKey("ad_h5"),this.nodeJumpOtherGame.active=!1,this.buttonJumpOtherGame2.node.active=!1,this.buttonMoreGame.node.active=!1,this.buttonAdd.node.active=S.default.canSupplyItem(),this.buttonGiftPack.node.active=w.default.isOpenPay(),this.buttonDoubleReward.node.active=c.default.preCheckCanTriggerAdEventNoCd("role_double");var e=R.default.getState();this.buttonOnline.node.active=e!=h.OnlineState.signOver,this.buttonFindMeBaidu.node.active=!1,this.buttonFindMeToutiao.node.active=!1,this.buttonFindMeDouyin.node.active=!1,this.buttonAddShortCut.node.active=!1},t.prototype.updateLabelGold=function(){this.labelGold.string=p.default.formatNumToStr(d.default.getItemAmount(h.default.ITEM_ID_GOLD))},t.prototype._tryAlertWxgzhReward=function(){if(w.default._isNeedAlertWxgzhReward){var e=w.default.takeWxgzhReward();_.default.callLater(.5,function(){g.default.showMsgTip("\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1 \u91d1\u5e01x"+p.default.formatNumToStr(e))}),f.default.isGuiding()||g.default.addGotItemTip(h.default.ITEM_ID_GOLD,e)}},t.prototype.startLuckyTime=function(){var e=this.nodeSpecialTimeBg;e.active=!0,e.stopAllActions(),e.opacity=0,e.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5)))),this.nodeSpecialTimeTItle.active=!0},t.prototype.closeLuckyTime=function(){this.nodeSpecialTimeBg.stopAllActions(),this.nodeSpecialTimeBg.active=!1,this.nodeSpecialTimeTItle.active=!1},t.prototype.onTouchButtonSetting=function(e){e.isClick()&&l.default.openDialog("vSettingDialog")},t.prototype.onTouchButtonShare=function(e){e.isClick()&&w.default.tryShowShare(null)},t.prototype.onTouchButtonCloth=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.buttonCloth.click"}),l.default.warpSceneWithEffect("vClothScene"))},t.prototype.onTouchButtonDaily=function(e){e.isClick()&&l.default.openDialog("vDailyDialog")},t.prototype.onTouchButtonExchange=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.buttonExchange.click"}),l.default.warpSceneWithEffect("vSuitScene"))},t.prototype.onTouchButtonPvp=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.buttonPvp.click"}),l.default.openDialog("vArenaStagePreviewDialog",null,!0))},t.prototype.onTouchButtonSign=function(e){e.isClick()&&l.default.openDialog("vSignDialog")},t.prototype.onTouchButtonAdd=function(e){e.isClick()&&S.default.tryOpenShop()},t.prototype.onTouchButtonMoreGame=function(e){e.isClick()&&l.default.openDialog("vMoreGameDialog")},t.prototype.onTouchButtonGiftPack=function(e){e.isClick()&&l.default.openDialog("vShop01Dialog")},t.prototype.onTouchButtonH5UrlAd=function(e){e.isClick()&&C.default.openAdH5()},t.prototype.onTouchButtonDoubleReward=function(e){e.isClick()&&b.default.isDoubleRewardCd()&&l.default.openDialog("vDoubleRewardDialog")},t.prototype.onTouchButtonOnline=function(e){e.isClick()&&(cc.log("\u4e92\u63a8",w.default.getInterPushConfig()),R.default.getState()==h.OnlineState.canSign&&l.default.openDialog("vOnlineDialog"))},t.prototype.onTouchButtonJumpOtherGame2=function(e){e.isClick()&&l.default.openDialog("vJumpOtherGameWelfareDialog")},t.prototype.onTouchButtonFindMeBaidu=function(e){e.isClick()&&l.default.openDialog("vFindMeBaiduDialog")},t.prototype.onTouchButtonFindMeDouyin=function(e){e.isClick()&&l.default.openDialog("vFindMeDouyinDialog")},t.prototype.onTouchButtonFindMeToutiao=function(e){e.isClick()&&l.default.openDialog("vFindMeToutiaoDialog")},t.prototype.onTouchButtonPartRank=function(e){e.isClick()&&l.default.openDialog("vPartRankDialog")},t.prototype.onTouchButtonAddShortCut=function(e){e.isClick()&&C.default.installShortcut()},t.prototype.onTouchButtonSelectPart=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHubScene.buttonSelectPart.click"}),l.default.warpSceneWithEffect("vSelectPartExchangeScene"))},t.prototype.onMsgSdkShareResult=function(e){this.refreshBtns()},t.prototype.onMsgAdValidCount=function(e){this.refreshBtns()},t.prototype.onMsgAdEventSuccessd=function(e){this.refreshBtns()},t.prototype.onMsgItemAmountChanged=function(e){e.itemId==h.default.ITEM_ID_GOLD&&(this.updateLabelGold(),T.default.tryTrigSomuchGold())},t.prototype.onMsgRoleGoldFlyOver=function(){this.nodeGoldIcon.stopAllActions();this.nodeGoldIcon.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)))},t.prototype.onMsgRoleUpgrade=function(){this.fillData()},t.prototype.onMsgWxgzhEnterInitAlert=function(e){this._tryAlertWxgzhReward()},t.prototype.onMsgLuckyTimeBegin=function(e){this.startLuckyTime()},t.prototype.onMsgLuckyTimeEnd=function(e){this.closeLuckyTime();var t=e.sum,o=ul.format(k.default.getText("alert.3"),p.default.formatNumToStr(t));g.default.alertPrompt(k.default.getText("ui.20"),o,k.default.getText("ui.31"))},t.prototype.onMsgOnlineSign=function(e){this.refreshBtns()},t.prototype.onMsgSign=function(e){this.refreshBtns()},t.prototype.onMsgRecordUiRefresh=function(){this.updateLabelGold();for(var e=0;e<this.roleItems.length;e++){this.roleItems[e].destroy()}this.roleItems=[],this.createRoleItems()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgLanguageChanged=function(){this.uiFadeIn(),this.fillData(),this.refreshBtns(),this.onMsgRecordUiRefresh()},t.prototype.onTouchHandler=function(e){for(var t=this,o=0;o<this.roleItems.length;o++){this.roleItems[o].tuochScene(e)}var n=e.getLocation();e.isClick()&&l.default.loadRes("2d/particle/star_boom",cc.Prefab,function(e,t){if(!e){var o=g.default.getTipIconRootNode(),a=cc.instantiate(t);a.parent=o,a.position=o.convertToNodeSpaceAR(n)}});var a=this.nodeHandLight.parent.convertToNodeSpaceAR(n);switch(e.name){case"began":this.nodeHandLight.active=!0,this.nodeHandLight.stopAllActions(),this.isSlidePlaySound=!1;break;case"moved":this.isSlidePlaySound||(this.isSlidePlaySound=!0);break;default:this.nodeHandLight.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){t.nodeHandLight.position=cc.v2(0,2*l.default.height)})))}this.nodeHandLight.position=a},t=a([M],t)}(i.default));o.default=O,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/SceneBase":"SceneBase","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDailyTask":"mgrDailyTask","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineArena":"mgrOfflineArena","../../manager/mgrOnline":"mgrOnline","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSelectPart":"mgrSelectPart","../../manager/mgrShop":"mgrShop","../../manager/mgrSign":"mgrSign","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vRoleItem":"vRoleItem"}],vJumpGameItem:[function(e,t,o){"use strict";cc._RF.push(t,"c5314mx+6pJLYXWfk4a2jOI","vJumpGameItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrSdk"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpGameItem"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:{varname:"button1",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton1"}]},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this.context.info;e&&(e.url?this.spriteIcon.loadSpriteFrame(e.url):this.spriteIcon.spriteFrame=null)},t.prototype.onTouchButton1=function(e){e.isClick()&&this.context.info&&this.context.info.gameId&&s.default.jumpOtherGame(this.context.info.gameId,"list")},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrSdk":"mgrSdk"}],vJumpGameWelfareItem:[function(e,t,o){"use strict";cc._RF.push(t,"5c528Tp4SpPgoDlgBjqQcn4","vJumpGameWelfareItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrSdk"),u=e("../../Const"),d=e("../../manager/mgrChannel"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.labelAmount=null,t.nodeReceived=null,t.nodeReward=null,t.spriteIcon=null,t.spriteReward=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpGameWelfareItem"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:{varname:"button1",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton1"}]},CC_labelAmount:{varname:"labelAmount",vartype:cc.Label},CC_nodeReceived:{varname:"nodeReceived",vartype:cc.Node},CC_nodeReward:{varname:"nodeReward",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite},CC_spriteReward:{varname:"spriteReward",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.jumpInfo=e.jumpInfo,this.context.index=e.index,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this,t=this.context.jumpInfo;if(t){t.url&&this.spriteIcon.loadSpriteFrameAndKeepSize(t.url);var o=s.default.get_from_item_template_db(u.default.ITEM_ID_GOLD);o&&o.icon&&this.spriteReward.loadSpriteFrameAndKeepSize(o.icon),this.labelAmount.string=l.default.formatNumToStr(d.default.getJumpOtherGameRewardCount()),this.nodeReceived.active=t.bReceived,t.bReceived||this.nodeResource.runAction(cc.sequence(cc.delayTime(.3*(this.context.index||0)),cc.callFunc(function(){e.nodeReward.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.2),cc.scaleTo(.3,1),cc.scaleTo(.3,.8),cc.scaleTo(.3,1))))})))}},t.prototype.onTouchButton1=function(e){e.isClick()&&this.context.jumpInfo&&this.context.jumpInfo.index&&c.default.jumpOtherGame(this.context.jumpInfo.index,"reward")},t=a([f],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrSdk":"mgrSdk"}],vJumpOtherGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"8e09d6PCfRDpJZWx/OAsOUA","vJumpOtherGameDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../node/vJumpGameItem"),s=e("../../manager/mgrSdk"),l=e("../../manager/mgrChannel"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vJumpOtherGameDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_nodeList:{varname:"nodeList",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),s.default.openJump("56","list")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=l.default.getInterPushConfig();if(e&&!(e.length<=0)){e.length>9&&(e=e.slice(0,9));for(var t=0;t<e.length;t++){var o=e[t],n=new i.default({info:o});n.setContentSize(112,144),n.parent=this.nodeList}}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t}(r.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrSdk":"mgrSdk","../node/vJumpGameItem":"vJumpGameItem"}],vJumpOtherGameWelfareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"095f8ZhTjNG1bRY/iPpoOrF","vJumpOtherGameWelfareDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrSdk"),l=e("../../../ulframework/view/ReuseList"),c=e("../node/vJumpGameWelfareItem"),u=e("../../../ulframework/view/ReuseLayouterVGrid"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeList=null,t.listGame=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vJumpOtherGameWelfareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_nodeList:{varname:"nodeList",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),s.default.openJump("56","reward"),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUi=function(){var e=new l.default;e.setLayouter((new u.default).setCellSize(124,160).setCols(3).setGap(30,15).setPending(20)),e.setCreator(function(e){var t=new c.default;t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.listGame=e},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgSdkOpenJumpResult=function(e){for(var t=e.jumpInfo,o=[],n=0;n<t.length;n++)o.push({jumpInfo:t[n],index:n});this.listGame.setDatas(o)},t=a([p],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrSdk":"mgrSdk","../node/vJumpGameWelfareItem":"vJumpGameWelfareItem"}],vJumpOtherGame:[function(e,t,o){"use strict";cc._RF.push(t,"d8ffeD4i4VGw6ASZfE0gmsb","vJumpOtherGame");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrSdk"),s=e("../../manager/mgrChannel"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonIcon=null,t.spriteIcon=null,t.showIndex=-1,t.gameIndex="",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGame"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonIcon:{varname:"buttonIcon",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonIcon"}]},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.changeIndex(),this.repeatAction()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.repeatAction=function(){var e=this;this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(1.5),cc.callFunc(function(){e.changeIndex()}))))},t.prototype.changeIndex=function(){i.default.openJump("56","single");var e=s.default.getInterPushConfig();if(e&&!(e.length<=0)){this.showIndex++,this.showIndex>=e.length&&(this.showIndex=0);var t=e[this.showIndex];t&&(this.gameIndex=t.gameId,t.url?this.spriteIcon.loadSpriteFrame(t.url):this.spriteIcon.spriteFrame=null)}},t.prototype.onTouchButtonIcon=function(e){e.isClick()&&this.gameIndex&&i.default.jumpOtherGame(this.gameIndex,"single")},t}(r.default);o.default=l,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrSdk":"mgrSdk"}],vLanguageItem:[function(e,t,o){"use strict";cc._RF.push(t,"2d9daI5wAFLV5KDCxAZKSXF","vLanguageItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrI18n"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonChangeLan=null,t.labelDesc=null,t.nodeBgBlue=null,t.nodeBgYellow=null,t.nodeChoice=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vLanguageItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonChangeLan:{varname:"buttonChangeLan",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonChangeLan"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeBgBlue:{varname:"nodeBgBlue",vartype:cc.Node},CC_nodeBgYellow:{varname:"nodeBgYellow",vartype:cc.Node},CC_nodeChoice:{varname:"nodeChoice",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.context.language=s.default.getLanguage(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e="2d/ui/language_icon/"+this.context.value+".png";this.spriteIcon.loadSpriteFrame(e),this.labelDesc.string=this.context.title,this.context.language==this.context.value?(this.nodeChoice.active=!0,this.nodeBgYellow.active=!1,this.nodeBgBlue.active=!0):(this.nodeChoice.active=!1,this.nodeBgYellow.active=!0,this.nodeBgBlue.active=!1)}},t.prototype.fillData=function(e){this.context.title=e.text,this.context.value=e.value,this.refresh()},t.prototype.onTouchButtonChangeLan=function(e){e.isClick()&&(cc.log("TODO vLanguageItem.onTouchButtonChangeLan"),console.log("\u70b9\u51fb\u9009\u62e9\u8bed\u8a00\uff1a",this.context.value),s.default.setLanguage(this.context.value),this.sendMsg("MSG_CLOSE_LABGUAGE_VIEW"))},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrI18n":"mgrI18n"}],vLevelBar:[function(e,t,o){"use strict";cc._RF.push(t,"f87e2eS/4NPPYnhCtVcVVe5","vLevelBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,function(e){function t(){var t=e.call(this)||this;return t.maxLevel=5,t.curLevel=5,t.space=-5,t.itemPath="2d/ui/common/star",t.layoutStyle=cc.Layout.Type.HORIZONTAL,t.levelSprites={},t}return n(t,e),t.prototype.setItemPath=function(e){this.itemPath=e},t.prototype.setLevel=function(e,t){this.maxLevel=e,this.curLevel=t,this.generate()},t.prototype.setLayoutStyle=function(e){this.layoutStyle=e},t.prototype.setSpace=function(e){this.space=e},t.prototype.generate=function(){for(var e=0;e<this.maxLevel;e++){if(null==(n=this.levelSprites[e]))(n=new cc.Node).parent=this,this.levelSprites[e]=n,n.addComponent(cc.Sprite).loadSpriteFrame(this.itemPath),n.setContentSize(30,30)}var t=this.getComponent(cc.Layout);null==t&&((t=this.addComponent(cc.Layout)).type=this.layoutStyle,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layoutStyle==cc.Layout.Type.HORIZONTAL?t.spacingX=this.space:t.spacingY=this.space,this.setAnchorPoint(.5,.5));for(var o=this.maxLevel;o>0;o--){var n=this.levelSprites[o-1];o>this.curLevel?n.active=!1:n.active=!0}t.updateLayout()},t.prototype.setSprState=function(e){for(var t in this.levelSprites)if(this.levelSprites.hasOwnProperty(t)){var o=this.levelSprites[t];if(o instanceof cc.Node){var n=o.getComponent(cc.Sprite);n&&n.setState(e)}}},t=a([i],t)}(cc.Node));o.default=s,cc._RF.pop()},{}],vLoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"a4eb2KLAtNH1L/gNfF/rXug","vLoadingScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../manager/mgrCfg"),i=e("../../../ulframework/manager/Manager"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/view/SceneBase"),c=e("../../manager/mgrSdk"),u=e("../../manager/mgrSound"),d=e("../../../ulframework/utils/Tools"),p=e("../../manager/mgrNative"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelInformation=null,t.labelProgress=null,t.labelTips=null,t.progressBarLoading=null,t.spriteLogo=null,t.curProgress=0,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vLoadingScene"},t.prototype._getResourceBindingConfig=function(){return{CC_labelInformation:{varname:"labelInformation",vartype:cc.Label},CC_labelProgress:{varname:"labelProgress",vartype:cc.Label},CC_labelTips:{varname:"labelTips",vartype:cc.Label},CC_progressBarLoading:{varname:"progressBarLoading",vartype:cc.ProgressBar},CC_spriteLogo:{varname:"spriteLogo",vartype:cc.Sprite}}},t.prototype.onLoad=function(){cc.log("vLoadingScene.onLoad"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult}),this.buildUi(),this.beginLoading()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.labelTips.node.active=!1,this.progressBarLoading.node.active=!0,this.labelInformation.node.active=!1},t.prototype.beginLoading=function(){this.context.beginTime=d.default.time();var e=r.default.getLoadUrls().concat(["2d/part/body","2d/part/11/11001_1","2d/part/11/11001_2","2d/part/12/12001","2d/part/13/13001_1","2d/part/13/13001_2","2d/part/16/16001","2d/part/17/17001","2d/part/20/20001_1","2d/part/20/20001_2","2d/part/21/21001","2d/part/25/25001","2d/part/27/27001","2d/part/11/11003","2d/part/12/12003_1","2d/part/12/12003_2","2d/part/13/13003_1","2d/part/13/13003_2","2d/part/17/17003","2d/part/18/18003","2d/part/20/20003","2d/part/21/21003","2d/part/22/22003","2d/part/24/24003_1","2d/part/24/24003_2","2d/part/27/27003","2d/part/11/11005","2d/part/12/12005","2d/part/16/16005","2d/part/17/17005","2d/part/18/18005","2d/part/20/20005","2d/part/21/21005","2d/part/22/22005","2d/part/26/26005","2d/part/11/11019_1","2d/part/11/11019_2","2d/part/12/12019","2d/part/16/16019","2d/part/17/17019","2d/part/18/18019","2d/part/20/20019_1","2d/part/20/20019_2","2d/part/21/21019","2d/part/27/27019","2d/part/11/11023_1","2d/part/11/11023_2","2d/part/12/12023","2d/part/13/13023","2d/part/16/16023","2d/part/17/17023","2d/part/18/18023","2d/part/20/20023","2d/part/21/21023","2d/part/26/26023","2d/part/27/27023","2d/part/11/11039_1","2d/part/11/11039_2","2d/part/12/12039_1","2d/part/12/12039_2","2d/part/17/17039","2d/part/18/18039","2d/part/20/20039","2d/part/21/21039","2d/part/22/22039","2d/part/26/26039","2d/part/28/28039","2d/part/11/11046_1","2d/part/11/11046_2","2d/part/12/12046","2d/part/17/17046","2d/part/18/18046","2d/part/20/20046","2d/part/21/21046","2d/part/22/22046","2d/part/25/25046","2d/part/26/26046","2d/part/11/11041_1","2d/part/11/11041_2","2d/part/12/12041","2d/part/17/17041","2d/part/20/20041","2d/part/22/22041","2d/part/25/25041","2d/part/26/26041","2d/part/27/27041","2d/ui/common/star","2d/animation/defaultDialogOpen","2d/animation/defaultDialogClose","2d/anim_node/56_shengji/56_shengji","2d/anim_node/56_shengji/56_hudie","2d/anim_node/56_shengji/56_shengjilizi","view/dialog/vSuitShowDialog","view/node/vArenaRewardItem","view/node/vSuitPartItem","view/node/vClothTypeItem","view/node/vClothPartItem","view/node/vRoleItem","view/node/vFlowerItem","view/node/vWarpSceneNode"]);this.loadRes(e),this.updateProgress()},t.prototype.loadRes=function(e){var t=this;cc.loader.loadResArray(e,function(e,o,n){var a=e/o;t.curProgress=a>t.curProgress?a:t.curProgress,t.updateProgress()},function(o,n){if(o)return cc.warn("loadResArray error : ",o.message),void t.loadRes(e);t.loadFinish()})},t.prototype.loadFinish=function(){r.default.processDb(),i.default.loadAllManagers(),a.default.setSoundPlayHandler(function(){u.default.play(101)});var e=d.default.time()-this.context.beginTime;cc.log("loading finish, \u7528\u65f6"+1e3*e+"ms"),c.default.onLoadingComplete()},t.prototype.updateProgress=function(){this.progressBarLoading.progress=this.curProgress,this.labelProgress.string=Math.round(100*this.curProgress)+"%"},t.prototype.startGame=function(){cc.sys.isNative&&!p.default._temp_isH5()?(this.labelTips.node.active=!0,this.progressBarLoading.node.active=!1,d.default.registerTouchHandler(this,this.onTouchBg.bind(this))):s.default.warpSceneWithEffect("vHubScene")},t.prototype.onTouchBg=function(e){e.isClick()&&s.default.warpSceneWithEffect("vHubScene")},t.prototype.onMsgChannelInfoResult=function(e){this.startGame()},t}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/manager/Manager":"Manager","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrNative":"mgrNative","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound"}],vMark:[function(e,t,o){"use strict";cc._RF.push(t,"fd723UmBTpHV5u37EQQBUDy","vMark");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCount=null,t.nodeRedPoint=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMark"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:{varname:"labelCount",vartype:cc.Label},CC_nodeRedPoint:{varname:"nodeRedPoint",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshCount(),this.playAction()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setCount=function(e){this.context.count=e,this.isResourceLoaded()&&this.refreshCount()},t.prototype.refreshCount=function(){var e=this.context.count&&this.context.count>1?this.context.count:"";this.labelCount.string=e},t.prototype.playAction=function(){this.nodeRedPoint.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.3),cc.scaleTo(.8,1))))},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vMoreGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b8097nVjDxDs6E+TEqfGUSs","vMoreGameDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrTip"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vMoreGameDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrTip":"mgrTip"}],vMsgTip:[function(e,t,o){"use strict";cc._RF.push(t,"89714dAk3pNcohO3hCJp5Yp","vMsgTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrTip"),s=e("../../manager/mgrDirector"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMsgTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.labelContent.node.width=.9*s.default.width},t.prototype.fillData=function(){this.context.text&&this.setText(this.context.text),this.context.textColor&&this.setColorEx(this.context.textColor,this.context.outlineColor)},t.prototype.setText=function(e){this.context.text=e,this.isResourceLoaded()&&(this.labelContent.string=e)},t.prototype.setColorEx=function(e,t){if(this.context.textColor=e,this.context.outlineColor=t,this.isResourceLoaded()){this.labelContent.node.color=e;var o=this.labelContent.getComponent(cc.LabelOutline);t?(o.enabled=!0,o.color=t):o.enabled=!1}},t.prototype.play=function(e,t){this.parent=i.default.getTipRootNode(),t=t||50;var o=e||s.default.center,n=cc.v2(o.x,o.y+t);o=this.parent.convertToNodeSpace(o),n=this.parent.convertToNodeSpace(n),this.scale=0,this.setPosition(o),this.stopAllActions(),this.runAction(cc.spawn(cc.scaleTo(.15,1).easing(cc.easeIn(2)),cc.moveTo(1.1,n).easing(cc.easeOut(1.2)),cc.sequence(cc.fadeIn(.15).easing(cc.easeIn(2)),cc.delayTime(.65),cc.fadeOut(.3),cc.removeSelf(!0))))},t=a([c],t)}(r.default));o.default=u,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vNativeBanner:[function(e,t,o){"use strict";cc._RF.push(t,"69dc9nP099FOaBlmdCNlXVb","vNativeBanner");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrAdNative"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrTip"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vNativeBanner"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelTargetTitle:{varname:"labelTargetTitle",vartype:cc.Label},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.width=l.default.width,s.default.registerNativeBannerRefreshFun(this.context.adEventId,this.refreshBanner.bind(this),this.nodeResource),this.nodeResource.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refreshBanner=function(){var e=this.context.adEventId,t=s.default.getNativeDataByAdEventId(e);if(this.nodeResource.active=!!t,t){this.labelTitle.string=t.title,this.labelDesc.string=t.desc,this.labelTargetTitle.string=t.targetTitle;var o=cc.size(120,120);this.spriteIcon.spriteFrame=t.spriteFrame,this.spriteIcon.node.scale=Math.min(o.width/this.spriteIcon.node.width,o.height/this.spriteIcon.node.height)}else cc.log("refreshBanner nativeData is null, adEventId: ",e)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&c.default.hideNativeBanner()},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vNativeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"36a1aMfRq1FmbQeXBEIZYEV","vNativeDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrNativeAdSdk"),l=e("../../manager/mgrSdk"),c=e("../../manager/mgrAdNative"),u=e("../../manager/mgrAd"),d=e("../../manager/mgrCfg"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.buttonClose=null,t.buttonContent=null,t.buttonFullScreen=null,t.buttonGo=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.nodeImg=null,t.spriteIcon=null,t.adEventId=null,t.nativeDatas=null,t}var o;return n(t,e),o=t,t.prototype._getResourceName=function(){return"dialog/vNativeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:{varname:"buttonBg",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBg"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonContent:{varname:"buttonContent",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonContent"}]},CC_buttonFullScreen:{varname:"buttonFullScreen",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonFullScreen"}]},CC_buttonGo:{varname:"buttonGo",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonGo"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelTargetTitle:{varname:"labelTargetTitle",vartype:cc.Label},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_nodeImg:{varname:"nodeImg",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.existCount++},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.adEventId=this.context.adEventId,1==l.default.getCopNumberValueByKey("ad_interstitial_touch_mode")?(this.buttonContent.node.active=!1,this.buttonBg.node.active=!1,this.buttonFullScreen.node.active=!1):2==l.default.getCopNumberValueByKey("ad_interstitial_touch_mode")?(this.buttonContent.node.active=!1,this.buttonBg.node.active=!0,this.buttonFullScreen.node.active=!1):3==l.default.getCopNumberValueByKey("ad_interstitial_touch_mode")?(this.buttonContent.node.active=!1,this.buttonBg.node.active=!0,this.buttonFullScreen.node.active=!0):4==l.default.getCopNumberValueByKey("ad_interstitial_touch_mode")?(this.buttonContent.node.active=!0,this.buttonBg.node.active=!1,this.buttonFullScreen.node.active=!1):(this.buttonContent.node.active=!1,this.buttonBg.node.active=!1,this.buttonFullScreen.node.active=!1),this.nativeDatas=c.default.getNativeDataByAdEventId(this.adEventId),this.adaptNativeAd(),this.registerListeners({MSG_NATIVE_AD_SDK_CLICK_SUCCESS:this.onMsgNativeAdSdkClickSuccess.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.existCount--,c.default.onNativeAdViewClenup(this.context.adEventId)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.adaptNativeAd=function(){if(this.nativeDatas){this.labelTitle.string=this.nativeDatas.title,this.labelDesc.string=this.nativeDatas.desc,this.labelTargetTitle.string=this.nativeDatas.targetTitle;var e=this.nodeImg.getContentSize();this.spriteIcon.spriteFrame=this.nativeDatas.spriteFrame,this.spriteIcon.node.scale=Math.min(e.width/this.spriteIcon.node.width,e.height/this.spriteIcon.node.height)}},t.prototype.onTouchButtonClose=function(e){var t=this;if(e.isClick()){u.default.tryMissGuideNativeIntersitial(function(){s.default.onClickNativeAd(t.nativeDatas.advId,t.context.userData)})||this.closeDialog()}},t.prototype.onTouchButtonContent=function(e){e.isClick()&&(cc.log("on click content"),s.default.onClickNativeAd(this.nativeDatas.advId,this.context.userData))},t.prototype.onTouchButtonFullScreen=function(e){e.isClick()&&(cc.log("on click fullscreen"),s.default.onClickNativeAd(this.nativeDatas.advId,this.context.userData))},t.prototype.onTouchButtonGo=function(e){e.isClick()&&(cc.log("on click go"),s.default.onClickNativeAd(this.nativeDatas.advId,this.context.userData))},t.prototype.onTouchButtonBg=function(e){e.isClick()&&(cc.log("on click bg"),s.default.onClickNativeAd(this.nativeDatas.advId,this.context.userData))},t.prototype.onMsgNativeAdSdkClickSuccess=function(e){var t=e,o=d.default.get("ad_event_db",this.adEventId),n=u.default.getAdvId(o);t.advId==n&&(s.default.onCloseNativeAd(n,this.context.userData),this.closeDialog())},t.existCount=0,t=o=a([f],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrCfg":"mgrCfg","../../manager/mgrNativeAdSdk":"mgrNativeAdSdk","../../manager/mgrSdk":"mgrSdk"}],vOfflineDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b912fn2dYBDKaXlMLXtYuR5","vOfflineDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrPlayer"),c=e("../../Const"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrTip"),p=e("../../manager/mgrI18n"),f=cc._decorator,h=f.ccclass,g=(f.property,"offline_reward"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCarefulAdSure=null,t.buttonGet=null,t.label1=null,t.label2=null,t.label3=null,t.nodeAdReward=null,t.nodeReward=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vOfflineDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCarefulAdSure:{varname:"buttonCarefulAdSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAdSure"}]},CC_buttonGet:{varname:"buttonGet",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonGet"}]},CC_label1:{varname:"label1",vartype:cc.Label},CC_label2:{varname:"label2",vartype:cc.Label},CC_label3:{varname:"label3",vartype:cc.Label},CC_nodeAdReward:{varname:"nodeAdReward",vartype:cc.Node},CC_nodeReward:{varname:"nodeReward",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),d.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this.context.pastTime,t=this.context.income,o=Math.floor(e/3600),n=Math.floor(e/60)%60,a="";o&&(a+=o+"h"),n&&(a+=n+"m"),this.label1.string=o>=8?p.default.getText("ui.5")+a+"(MAX)":p.default.getText("ui.5")+a,this.label2.string=u.default.formatNumToStr(t),this.label3.string=u.default.formatNumToStr(t)+"*2";var r=s.default.preCheckCanTriggerAdEvent(g);s.default.isAdCareful();this.nodeAdReward.active=r,this.buttonCarefulAdSure.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeInOut(1.5)))))},t.prototype.showSimpleReward=function(){l.default.addItemAmount(c.default.ITEM_ID_GOLD,this.context.income,"\u79bb\u7ebf\u6536\u76ca"),d.default.addGotItemTip(c.default.ITEM_ID_GOLD,this.context.income,null)},t.prototype.onTouchButtonCarefulAdSure=function(e){e.isClick()&&s.default.triggerAdEvent(g,null,!0)},t.prototype.onTouchButtonGet=function(e){e.isClick()&&(this.closeDialog(),this.showSimpleReward())},t.prototype.onMsgAdEventSuccessd=function(e){if(e.adEventId==g){this.closeDialog();var t=this.context.income;l.default.addItemAmount(c.default.ITEM_ID_GOLD,2*t,"\u79bb\u7ebf\u53cc\u500d"),d.default.addGotItemTip(c.default.ITEM_ID_GOLD,2*t,null)}},t=a([h],t)}(i.default);o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vOnlineDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2b0e0GAFUFD1LP0ZyqJbs+6","vOnlineDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrOnline"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrPlayer"),u=e("../../manager/mgrTip"),d=e("../../manager/mgrRole"),p=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrAd"),h=e("../../manager/mgrDirector"),g=cc._decorator,_=g.ccclass,m=(g.property,"double_reward_online"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCarefulAd=null,t.buttonCarefulAdGiveup=null,t.buttonClose=null,t.buttonNoAd=null,t.buttonSimpleAd=null,t.labelCarefulAdCancel=null,t.labelCarefulAdSure=null,t.labelDesc=null,t.nodeCarefulAd=null,t.nodeNoAd=null,t.nodeSimpleAd=null,t.spriteIcon=null,t.toggleSimpleAd=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vOnlineDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCarefulAd:{varname:"buttonCarefulAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAd"}]},CC_buttonCarefulAdGiveup:{varname:"buttonCarefulAdGiveup",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAdGiveup"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonNoAd:{varname:"buttonNoAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonNoAd"}]},CC_buttonSimpleAd:{varname:"buttonSimpleAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSimpleAd"}]},CC_labelCarefulAdCancel:{varname:"labelCarefulAdCancel",vartype:cc.Label},CC_labelCarefulAdSure:{varname:"labelCarefulAdSure",vartype:cc.Label},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeCarefulAd:{varname:"nodeCarefulAd",vartype:cc.Node},CC_nodeNoAd:{varname:"nodeNoAd",vartype:cc.Node},CC_nodeSimpleAd:{varname:"nodeSimpleAd",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite},CC_toggleSimpleAd:{varname:"toggleSimpleAd",vartype:cc.Toggle}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.fillAd(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd});var t=cc.v2(0,0);f.default.preCheckCanTriggerAdEvent("pas_online")?(t=cc.v2(0,-195),f.default.triggerAdEvent("pas_online",{style:{x:(h.default.width/2-250)/h.default.width,y:(h.default.height/2-140+200)/h.default.height,w:500/h.default.width,h:0}},!0),f.default.triggerAdEvent("wrap_online")):f.default.trigMutexBannerIntersitial("ban_online",this,"wrap_online"),u.default.tryAddGuessYouLikeNode(this,t)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){f.default.closeAdv("ban_online"),f.default.closeAdv("pas_online"),e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=s.default.getSignDay(),t=s.default.getSignIndex(),o=l.default.get_from_online_reward_db(e,t-1);if(o){l.default.get_from_item_template_db(o.rewardItemId);var n=o.rewardAmount*d.default.getOneMinuteIncome(),a=p.default.formatNumToStr(n);this.labelDesc.string=""+a,this.labelCarefulAdCancel.string="+"+p.default.formatNumToStr(n),this.labelCarefulAdSure.string="+"+p.default.formatNumToStr(2*n)}},t.prototype.fillAd=function(){f.default.isAdCareful();var e=s.default.getSignDay(),t=s.default.getSignIndex(),o=l.default.get_from_online_reward_db(e,t-1);if(o){var n=f.default.preCheckCanTriggerAdEvent(m)&&o.bAd;if(n){var a=o.rewardAmount*d.default.getOneMinuteIncome(),r=p.default.formatNumToStr(a);this.labelDesc.string=r+"*2"}this.nodeNoAd.active=!n,this.nodeSimpleAd.active=!1,this.nodeCarefulAd.active=n}},t.prototype.sign=function(){var e=s.default.sign();if(e.bSuccessd){this.closeDialog(!0);var t=e.rewardAmount*d.default.getOneMinuteIncome();c.default.addItemAmount(e.rewardItemId,t,"\u5728\u7ebf\u5956\u52b1"),u.default.addGotItemTip(e.rewardItemId,t),this.sendMsg("MSG_ONLINE_SIGN")}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){e.isClick()&&this.sign()},t.prototype.onTouchButtonCarefulAd=function(e){e.isClick()&&f.default.triggerAdEvent(m,null,!0)},t.prototype.onTouchButtonCarefulAdGiveup=function(e){e.isClick()&&this.sign()},t.prototype.onTouchButtonNoAd=function(e){e.isClick()&&this.sign()},t.prototype.onTouchButtonSimpleAd=function(e){e.isClick()&&(this.toggleSimpleAd.isChecked?f.default.triggerAdEvent(m,null,!0):this.sign())},t.prototype.onMsgAdEventSuccessd=function(e){if(e.adEventId==m){var t=s.default.sign();if(t.bSuccessd){this.closeDialog(!0);var o=t.rewardAmount*d.default.getOneMinuteIncome();c.default.addItemAmount(t.rewardItemId,2*o,"\u5728\u7ebf\u5956\u52b1\u53cc\u500d"),u.default.addGotItemTip(t.rewardItemId,2*o),this.sendMsg("MSG_ONLINE_SIGN")}}},t=a([_],t)}(i.default);o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrOnline":"mgrOnline","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRole":"mgrRole","../../manager/mgrTip":"mgrTip"}],vPartDetailDialog:[function(e,t,o){"use strict";cc._RF.push(t,"bfc28tEHjRKXYxZeCN8F8R4","vPartDetailDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vLevelBar"),l=e("../../manager/mgrCfg"),c=e("../node/vPartDetailText"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelDesc=null,t.nodeFeature=null,t.nodeHeart=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPartDetailDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeFeature:{varname:"nodeFeature",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new s.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(){var e=this.context.partId,t=l.default.get_from_part_db(e);if(t){this.labelDesc.string=t.desc,this.spriteIcon.loadSpriteFrame(t.icon),this.levelBar.setSpace(5),this.levelBar.setLevel(5,t.level);var o=t.topSubjectIds;if(o)for(var n=0;n<o.length;n++){var a=o[n],r=l.default.get_from_part_subject_tag_db(a),i=new c.default;i.fillData(r.id.toString()),this.nodeFeature.addChild(i)}}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrCfg":"mgrCfg","../node/vLevelBar":"vLevelBar","../node/vPartDetailText":"vPartDetailText"}],vPartDetailText:[function(e,t,o){"use strict";cc._RF.push(t,"086c693cGlM54wcPvrI/e0d","vPartDetailText");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vPartDetailText"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.on(cc.Node.EventType.SIZE_CHANGED,this.resizeNode.bind(this)),this.refresh(),this.resizeNode()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.id=e,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.nodeResource;this.context.id&&e.getComponent(cc.Sprite).loadSpriteFrame("2d/ui/style_icon/"+this.context.id+".png")},t.prototype.resizeNode=function(){this.setContentSize(this.nodeResource.getContentSize())},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vPartRankDialog:[function(e,t,o){"use strict";cc._RF.push(t,"384599RehdMb5+OJo4dsaGv","vPartRankDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../node/vComboAvatar"),s=e("../../../ulframework/view/ReuseList"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrOfflinePartRank"),u=e("../../../ulframework/utils/Timer"),d=e("../../../ulframework/view/ReuseLayouterVBox"),p=e("../node/vPartRankItem"),f=e("../../manager/mgrI18n"),h=function(e){function t(t){var o=e.call(this,t)||this;return o.buttonBack=null,o.labelMyName=null,o.labelMyOwnNum=null,o.labelMyRank=null,o.nodeBottom=null,o.nodeLeft=null,o.nodeLeftTop=null,o.nodeRankList=null,o.nodeRight=null,o.nodeRole=null,o.nodeRoleAvatar=null,o.nodeTop=null,o.playerDatas=[],o.comboAvatar=null,o.listRank=null,o.selectedPlayer=null,o.context.bImmediately=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPartRankDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_labelMyName:{varname:"labelMyName",vartype:cc.Label},CC_labelMyOwnNum:{varname:"labelMyOwnNum",vartype:cc.Label},CC_labelMyRank:{varname:"labelMyRank",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeRankList:{varname:"nodeRankList",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeRole:{varname:"nodeRole",vartype:cc.Node},CC_nodeRoleAvatar:{varname:"nodeRoleAvatar",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),c.default.updateOwnData(),this.playerDatas=c.default.getAllDatas(),this.uiFadeIn(),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=l.default.height/2,this.nodeRight.x=l.default.width/2,this.nodeBottom.y=-l.default.height/2+200,this.nodeLeft.x=-l.default.width/2,this.nodeLeftTop.x=-l.default.width/2,this.nodeLeftTop.y=l.default.height/2,l.default.isDeviceOverHeight()&&(this.nodeTop.y=l.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeRight.__op=this.nodeRight.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeRight.x+=200,this.nodeBottom.y-=300,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;u.default.callLater(.2,function(){e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeBottom.runAction(cc.moveTo(.2,e.nodeBottom.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op))},this)},t.prototype.buildUi=function(){var e=this;this.comboAvatar=new i.default,this.comboAvatar.parent=this.nodeRoleAvatar,this.comboAvatar.refresh();var t=new s.default;t.setLayouter((new d.default).setCellSize(296,71).setGap(4).setPending(4)),t.setCreator(function(t){var o=new p.default({fOnClick:e.onClickRankPlayer.bind(e)});o.parent=t,t.item=o}),t.setSetter(function(t,o){var n=t.item,a=!1;e.selectedPlayer&&(a=e.selectedPlayer.uid==o.uid),n.fillByPlayerData(o,a)}),t.parent=this.nodeRankList,t.setContentSize(this.nodeRankList.getContentSize()),this.listRank=t},t.prototype.fillData=function(){var e=c.default.getOwnData();if(this.labelMyName.string=e.name,this.labelMyOwnNum.string=""+e.partNum,e?!e.rank||e.rank<=0?this.labelMyRank.string=f.default.getText("msg.23"):this.labelMyRank.string=ul.format("%s",e.rank.toString()):this.labelMyRank.string=f.default.getText("msg.23"),this.listRank.setDatas(this.playerDatas),!this.selectedPlayer)for(var t=0;t<this.playerDatas.length;t++){var o=this.playerDatas[t];this.onSelectPlayer(o);break}},t.prototype.fillAvatar=function(){var e=this.selectedPlayer;e?(this.nodeRoleAvatar.active=!0,this.comboAvatar.fillBySerializeText(e.data),this.comboAvatar.refresh()):this.nodeRoleAvatar.active=!1},t.prototype.onSelectPlayer=function(e){this.selectedPlayer=e,this.listRank.refreshActiveCells(),this.fillAvatar()},t.prototype.onTouchButtonBack=function(e){e.isClick()&&this.closeDialog()},t.prototype.onClickRankPlayer=function(e){this.onSelectPlayer(e)},t}(r.default);o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflinePartRank":"mgrOfflinePartRank","../node/vComboAvatar":"vComboAvatar","../node/vPartRankItem":"vPartRankItem"}],vPartRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"d93b9q6aVBPtpd8VnEPCXMs","vPartRankItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrI18n"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.labelIndex=null,t.labelName=null,t.labelScore=null,t.nodeBgOne=null,t.nodeBgOther=null,t.nodeBgTwo=null,t.nodeIndexOne=null,t.nodeIndexThree=null,t.nodeIndexTwo=null,t.nodeSelect=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPartRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_labelIndex:{varname:"labelIndex",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_labelScore:{varname:"labelScore",vartype:cc.Label},CC_nodeBgOne:{varname:"nodeBgOne",vartype:cc.Node},CC_nodeBgOther:{varname:"nodeBgOther",vartype:cc.Node},CC_nodeBgTwo:{varname:"nodeBgTwo",vartype:cc.Node},CC_nodeIndexOne:{varname:"nodeIndexOne",vartype:cc.Node},CC_nodeIndexThree:{varname:"nodeIndexThree",vartype:cc.Node},CC_nodeIndexTwo:{varname:"nodeIndexTwo",vartype:cc.Node},CC_nodeSelect:{varname:"nodeSelect",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPlayerData=function(e,t){this.context.player=e,this.context.bSelect=t,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.player;if(e){var t=this.context.bSelect;this.nodeIndexOne.active=1==e.rank,this.nodeIndexTwo.active=2==e.rank,this.nodeIndexThree.active=3==e.rank,this.labelIndex.string=e.rank.toString(),e.rank<=3&&(this.labelIndex.string=""),this.nodeBgOne.active=1==e.rank,this.nodeBgTwo.active=2==e.rank,this.nodeBgOther.active=e.rank>2,this.labelScore.string=s.default.getText("ui.10")+e.partNum;var o=new cc.Color;this.labelName.string=e.name;var n=this.labelName.getComponent(cc.LabelOutline);if(n)switch(e.rank){case 1:n.color=o.fromHEX("#E760A0");break;case 2:n.color=o.fromHEX("#A473EE");break;default:n.color=o.fromHEX("#3C84F1")}this.nodeSelect.active=t}}},t.prototype.onTouchButtonItem=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.player)},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrI18n":"mgrI18n"}],vPlayerNameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a1b5fPPjjhEHpmpoX3OZ5vp","vPlayerNameDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrTip"),c=e("../../manager/mgrI18n"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonRandom=null,t.buttonSure=null,t.labelName=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPlayerNameDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonRandom:{varname:"buttonRandom",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonRandom"}]},CC_buttonSure:{varname:"buttonSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_labelName:{varname:"labelName",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),this.sendMsg("MSG_GUIDE_POINT",{id:"vPlayerNameDialog.onResourceLoaded"})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=c.default.getLanguage();this.labelName.string=s.default.calcRandomName(e)},t.prototype.fillData=function(){},t.prototype.onTouchButtonRandom=function(e){if(e.isClick()){var t=c.default.getLanguage(),o=s.default.calcRandomName(t);cc.log("random name:",o,t),this.labelName.string=o}},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.labelName.string;cc.log("vPlayerNameDialog.onTouchButtonSure",t),t.length<=0?l.default.showMsgTip(c.default.getText("msg.15")):(s.default.setName(t),this.closeDialog(),this.sendMsg("MSG_GUIDE_POINT",{id:"vPlayerNameDialog.onTouchButtonSure"}))}},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vPromptDialog:[function(e,t,o){"use strict";cc._RF.push(t,"1ae53LpSWxJTYS5zS3gAoda","vPromptDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrTip"),l=e("../../manager/mgrI18n"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.button3=null,t.buttonClose=null,t.labelContent=null,t.labelTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:{varname:"button1",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton1"}]},CC_button2:{varname:"button2",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton2"}]},CC_button3:{varname:"button3",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton3"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.string=this.context.title||l.default.getText("ui.20"),this.labelContent.string=this.context.content||l.default.getText("ui.20");for(var t=this.context.btnTexts||[],o=0;o<2;o++){var n=this["button"+(o+1)],a=n.node.getComponentInChildren(cc.Label);null!=t[o]?a.string=t[o]:n.node.active=!1}this.buttonClose.node.active=!1,s.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&this.triggerCallback(1)},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrI18n":"mgrI18n","../../manager/mgrTip":"mgrTip"}],vRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"1b99e03sNNDPq2etOFDd4Sy","vRankItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("./vLevelBar"),c=e("../../manager/mgrI18n"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.labelIndex=null,t.labelName=null,t.labelScore=null,t.nodeIndexOne=null,t.nodeIndexOther=null,t.nodeIndexThree=null,t.nodeIndexTwo=null,t.nodeLevel=null,t.nodeSelect=null,t.nodeUnselect=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_labelIndex:{varname:"labelIndex",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_labelScore:{varname:"labelScore",vartype:cc.Label},CC_nodeIndexOne:{varname:"nodeIndexOne",vartype:cc.Node},CC_nodeIndexOther:{varname:"nodeIndexOther",vartype:cc.Node},CC_nodeIndexThree:{varname:"nodeIndexThree",vartype:cc.Node},CC_nodeIndexTwo:{varname:"nodeIndexTwo",vartype:cc.Node},CC_nodeLevel:{varname:"nodeLevel",vartype:cc.Node},CC_nodeSelect:{varname:"nodeSelect",vartype:cc.Node},CC_nodeUnselect:{varname:"nodeUnselect",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.context.playerData&&this.fillByPlayerData(this.context.playerData.data,this.context.playerData.bSelect)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new l.default;e.parent=this.nodeLevel,this.levelBar=e},t.prototype.fillByPlayerData=function(e,t){if(this.context.playerData={data:e,bSelect:t},this.context.player=e,this.isResourceLoaded()){this.nodeIndexOne.active=1==e.rank,this.nodeIndexTwo.active=2==e.rank,this.nodeIndexThree.active=3==e.rank,this.nodeIndexOther.active=e.rank>3,this.labelIndex.string=e.rank.toString(),e.rank<=3&&(this.labelIndex.string="");var o=this.labelIndex.getComponent(cc.LabelOutline);o&&(o.color=t?cc.color(223,103,24):cc.color(156,67,141));var n=e.score,a=s.default.get_from_arena_level_db(n);a&&(this.labelScore.string=c.default.getText(a.name),this.levelBar.setSpace(0),this.levelBar.setLevel(5,a.star+1));var r=this.labelScore.getComponent(cc.LabelOutline);r&&(r.color=t?cc.color(223,103,24):cc.color(156,67,141)),this.labelName.string=e.name,this.nodeSelect.active=t,this.nodeUnselect.active=!t}},t.prototype.onTouchButtonItem=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.player)},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","./vLevelBar":"vLevelBar"}],vRankPartItem:[function(e,t,o){"use strict";cc._RF.push(t,"fb3a8X7M2pFx7AhwLZkckn+","vRankPartItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrPlayer"),c=e("./vLevelBar"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.nodeHad=null,t.nodeHeart=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vRankPartItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_nodeHad:{varname:"nodeHad",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new c.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(e){this.context.partId=e,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.partId;if(e){var t=s.default.get_from_part_db(e);t&&(this.spriteIcon.loadSpriteFrame(t.icon),this.nodeHad.active=l.default.getItemAmount(e)>0,this.levelBar&&this.levelBar.setLevel(5,t.level))}},t.prototype.onTouchButtonItem=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.partId)},t=a([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","./vLevelBar":"vLevelBar"}],vReapDialog:[function(e,t,o){"use strict";cc._RF.push(t,"460e7QVaONNwYfeCxJV5uPL","vReapDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPool"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrRole"),u=e("../../manager/mgrSound"),d=e("../../manager/mgrTip"),p=e("../../manager/mgrI18n"),f=e("../../manager/mgrAd"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonClose=null,t.buttonReap=null,t.labelDesc=null,t.labelLeft=null,t.nodeFlowerNew=null,t.nodeFlowerOld=null,t.nodeNew=null,t.nodeOld=null,t.spriteLandNew=null,t.spriteLandOld=null,t._spineRefs=[],t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vReapDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonReap:{varname:"buttonReap",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonReap"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelLeft:{varname:"labelLeft",vartype:cc.Label},CC_nodeFlowerNew:{varname:"nodeFlowerNew",vartype:cc.Node},CC_nodeFlowerOld:{varname:"nodeFlowerOld",vartype:cc.Node},CC_nodeNew:{varname:"nodeNew",vartype:cc.Node},CC_nodeOld:{varname:"nodeOld",vartype:cc.Node},CC_spriteLandNew:{varname:"spriteLandNew",vartype:cc.Sprite},CC_spriteLandOld:{varname:"spriteLandOld",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),f.default.triggerAdEvent("wrap_reap")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){for(var t=0;t<this._spineRefs.length;t++){var o=this._spineRefs[t];o&&(o.removeFromParent(),s.default.put(o),this._spineRefs[t]=null)}e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e,t=this.context.roleId,o=l.default.get_from_role_db(t,0);if(o){var n=c.default.getEvolveLevel(t),a=n+1,r=o.flowerSpineId,i=o.flowerSpineId;this.context.spineId=r,this.context.spr=o.flowerSprs[n],(e=s.default.get("spine",r)).parent=this.nodeFlowerOld,e.play(o.idleMovs[n]),this._spineRefs.push(e),this.spriteLandOld.loadSpriteFrame(o.landSprite),(e=s.default.get("spine",i)).parent=this.nodeFlowerNew,e.play(o.idleMovs[a]),this._spineRefs.push(e),this.spriteLandNew.loadSpriteFrame(o.landSprite);var u=30*n;this.labelLeft.string=ul.format(p.default.getText("ui.27"),n,u);var d=c.default.getRoleMaxLevel(t),f=c.default.getNextRoleMaxLevel(t),h=l.default.get_from_role_db(t,d),g=l.default.get_from_role_db(t,f);h&&g&&(this.labelDesc.string=ul.format(p.default.getText("ui.79")+"%d -> %d\n"+p.default.getText("ui.80")+p.default.getText("ui.81")+"\n"+p.default.getText("ui.80")+p.default.getText("ui.81"),h.level,g.level,h.level,h.outPutTime,h.outPutCount,g.level,g.outPutTime,g.outPutCount))}},t.prototype.fillData=function(){},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonReap=function(e){var t=this;if(e.isClick()){var o=this.context.roleId;if(c.default.addEvolveLevel(o)){u.default.play(107);var n=this.nodeNew,a=n.parent.convertToWorldSpaceAR(n.getPosition());n.removeFromParent(),n.parent=d.default.getTipRootNode(),n.setPosition(n.parent.convertToNodeSpaceAR(a));var r=this._spineRefs[1];this._spineRefs[1]=null,this.sendMsg("MSG_REAP_LEVEL_ADD",{roleId:o,nodeNew:n,spineRef:r,scale:n.scale}),this.runAction(cc.sequence(cc.delayTime(.1),cc.fadeOut(.2),cc.callFunc(function(){t.closeDialog(!0)})))}}},t=a([g],t)}(i.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip"}],vReapLevelItem:[function(e,t,o){"use strict";cc._RF.push(t,"2a3d3Gc73lEzL3a911ZZTOW","vReapLevelItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vReapLevelItem"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vRoleItem:[function(e,t,o){"use strict";cc._RF.push(t,"5c515gFINNNQZ8HvRKxMK7c","vRoleItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPool"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrRole"),c=e("../../manager/mgrDirector"),u=e("../../../ulframework/utils/Tools"),d=e("./vFlowerItem"),p=e("../../manager/mgrTip"),f=e("../../manager/mgrGuide"),h=e("../../manager/mgrAd"),g=e("../../../ulframework/utils/Timer"),_=e("../../Const"),m={15:{isRoleOnBack:!0,bflip:!1,rolePos:[40,30],heartPos:[55,185]},14:{isRoleOnBack:!0,bflip:!1,rolePos:[30,35],heartPos:[80,170]},13:{isRoleOnBack:!0,bflip:!1,rolePos:[-80,35],heartPos:[-20,80]},12:{isRoleOnBack:!0,bflip:!1,rolePos:[54,31],heartPos:[0,84]},11:{isRoleOnBack:!0,bflip:!0,rolePos:[-60,20],heartPos:[-117,32]}},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonAdTouchFlower=null,t.buttonEvolve=null,t.buttonLevel=null,t.buttonUnlock=null,t.labelCdDur=null,t.labelLevel=null,t.nodeEffectMax=null,t.nodeFlower1=null,t.nodeFlower2=null,t.nodeGuideUpgrade=null,t.nodeLevel=null,t.nodeRoleBack=null,t.nodeRoleFront=null,t.spriteLand=null,t._spineRef=null,t._flowers=[],t._timer=null,t._count=0,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vRoleItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:{varname:"buttonAd",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAd"}]},CC_buttonAdTouchFlower:{varname:"buttonAdTouchFlower",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAdTouchFlower"}]},CC_buttonEvolve:{varname:"buttonEvolve",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonEvolve"}]},CC_buttonLevel:{varname:"buttonLevel",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonLevel"}]},CC_buttonUnlock:{varname:"buttonUnlock",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonUnlock"}]},CC_labelCdDur:{varname:"labelCdDur",vartype:cc.Label},CC_labelLevel:{varname:"labelLevel",vartype:cc.Label},CC_nodeEffectMax:{varname:"nodeEffectMax",vartype:cc.Node},CC_nodeFlower1:{varname:"nodeFlower1",vartype:cc.Node},CC_nodeFlower2:{varname:"nodeFlower2",vartype:cc.Node},CC_nodeGuideUpgrade:{varname:"nodeGuideUpgrade",vartype:cc.Node},CC_nodeLevel:{varname:"nodeLevel",vartype:cc.Node},CC_nodeRoleBack:{varname:"nodeRoleBack",vartype:cc.Node},CC_nodeRoleFront:{varname:"nodeRoleFront",vartype:cc.Node},CC_spriteLand:{varname:"spriteLand",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),this.registerListeners({MSG_ROLE_UPGRADE:this.onMsgRoleUpgrade,MSG_REAP_LEVEL_ADD:this.onMsgReapLevelAdd,MSG_ROLE_GUIDE_LVUPGRADE:this.onMsgGuideLvUpgrade,MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_LUCKY_TIME_BEGIN:this.onMsgLuckyTimeBegin,MSG_LUCKY_TIME_END:this.onMsgLuckyTimeEnd,MSG_ADV_VALID_COUNT:this.onMsgAdValidCount,MSG_AD_TOUCH_FLOWER_CLOSE:this.onMsgAdTouchFlowerClose,MSG_AD_TOUCH_FLOWER_OPEN:this.onMsgAdTouchFlowerOpen}),this._tryGuide(),g.default.callLoop(10,this.fillData.bind(this),this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this.tryStopTimer(),this.closeLuckyTime(),this._spineRef&&(this._spineRef.removeFromParent(),i.default.put(this._spineRef),this._spineRef=null),e.prototype.onDestroy.call(this)},t.prototype.getNodeRole=function(){var e=this.context.roleId;return(m[e]||{}).isRoleOnBack?this.nodeRoleBack:this.nodeRoleFront},t.prototype.buildUi=function(){var e=this.context.roleId,t=s.default.get_from_role_db(e,0);if(t){var o=m[e],n=this.getNodeRole(),a=i.default.get("spine",t.spineId);a.parent=n,a.play("mov_1"),this._spineRef=a;var r=new d.default({roleId:e,index:0});r.parent=this.nodeFlower1,r.setContentSize(160,80),this._flowers.push(r);var c=o.heartPos;this.buttonLevel.node.position=cc.v2(c[0],c[1]);var u=o.rolePos;n.position=cc.v2(u[0],u[1]),o.bflip&&(n.scaleX=-n.scaleX),l.default.isLuckyRoleTime()&&this.startLuckyTime(),this.buttonAdTouchFlower.node.active=!1}},t.prototype.fillData=function(){var e=this.context.roleId,t=l.default.getRoleLevel(e),o=(l.default.getRoleMaxLevel(e),l.default.getEvolveLevel(e)),n=l.default.canAddEvolveLv(e),a=0==t;if(this.buttonUnlock.node.active=a,this.labelLevel.string="LV"+t,this.buttonEvolve.node.active=n,this.buttonAd.node.active=!1,this.nodeEffectMax.active=o==l.ROLE_MAX_REAP_LEVEL,l.default.getIsGuideLvUpgrade()||a)this.nodeGuideUpgrade.stopAllActions(),this.nodeGuideUpgrade.active=!1;else if(this.nodeGuideUpgrade.active=!0,!this.nodeGuideUpgrade.getActionByTag(1)){this.nodeGuideUpgrade.stopAllActions(),this.nodeGuideUpgrade.setScale(0);var r=u.default.random(10,20),i=u.default.random(10,30)/10;this.nodeGuideUpgrade.runAction(cc.repeatForever(cc.sequence(cc.delayTime(r/2),cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.delayTime(i),cc.scaleTo(.5,0).easing(cc.easeBackIn()),cc.delayTime(r/2)))).setTag(1)}var c=l.default.canShowUpgrade(e),d=l.default.isGoldEnoughUpgrade(e);p.default.setCountBadgeValue(this.buttonLevel.node,c&&d?1:0,5,5);var f=s.default.get_from_role_db(e,0);f&&this.spriteLand.loadSpriteFrame(f.landSprite)},t.prototype._tryGuide=function(){f.default.registerGuideNode("vRoleItem.buttonUnlock"+this.context.roleId,this.buttonUnlock.node),f.default.registerGuideNode("vRoleItem.nodeFlower1_"+this.context.roleId,this.nodeFlower1),f.default.registerGuideNode("vRoleItem.nodeFlower2_"+this.context.roleId,this.nodeFlower2),this.sendMsg("MSG_GUIDE_POINT",{id:"vRoleItem.onResourceLoaded",roleId:this.context.roleId})},t.prototype.startLuckyTime=function(){this._spineRef&&this._spineRef.setTimeScale(2)},t.prototype.closeLuckyTime=function(){this._spineRef&&this._spineRef.setTimeScale(1)},t.prototype.getThisPosition=function(){return cc.v2(this.x-9,this.y-11)},t.prototype.tryStopTimer=function(){this._timer&&this._timer.stop()},t.prototype._onMsgTimerLoop=function(e){var t=this;if(this._count--,this.buttonAdTouchFlower.node.active&&(this.labelCdDur.string=u.default.formatTime(this._count,"%M:%S"),this._count<=0)){this._count=0,this.tryStopTimer(),l.default.setTouchFlowerCd(),this.labelCdDur.string="";var o=this.buttonAdTouchFlower.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.3,0).easing(cc.easeBackIn()),cc.callFunc(function(){t.buttonAdTouchFlower.node.active=!1})))}},t.prototype.onTouchButtonAd=function(e){e.isClick()&&h.default.triggerAdEvent("role_double",null,!0)},t.prototype.onTouchButtonAdTouchFlower=function(e){e.isClick()&&(this._count<=0||(this.sendMsg("MSG_AD_TOUCH_FLOWER_OPEN"),c.default.openDialog("vTouchFlowerDialog",{roleId:this.context.roleId})))},t.prototype.onTouchButtonEvolve=function(e){e.isClick()&&c.default.openDialog("vReapDialog",{roleId:this.context.roleId})},t.prototype.onTouchButtonUnlock=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vRoleItem.buttonUnlock"+this.context.roleId+".click"}),c.default.openDialog("vRoleUpgradeDialog",{roleId:this.context.roleId}))},t.prototype.onTouchButtonLevel=function(e){if(e.isClick()){var t=this.context.roleId;c.default.openDialog("vRoleUpgradeDialog",{roleId:t}),l.default.getIsGuideLvUpgrade()||(l.default.guidedLvUpgrade(),this.fillData())}},t.prototype.onMsgRoleUpgrade=function(e){e.roleId==this.context.roleId&&this.fillData()},t.prototype.onMsgReapLevelAdd=function(e){var t=this,o=e,n=o.roleId,a=this.context.roleId;if(n==a){this.fillData(),this.nodeLevel.scale=0;for(var r=this._flowers.length-1;r>=0;r--){this._flowers[r].onMsgReapDo1()}var u=o.nodeNew;if(cc.isValid(u)){o.scale;var d=o.spineRef,f=u.parent.convertToNodeSpaceAR(cc.v2(c.default.width/2,c.default.height/2)),h=u.parent.convertToNodeSpaceAR(this.parent.convertToWorldSpaceAR(this.getThisPosition())),g=i.default.get("animNode","jiesuan");g.play(),g.parent=u,g.zIndex=-1,g.scale=0,g.y=-10,g.runAction(cc.scaleTo(.5,1.5));var _=s.default.get_from_role_db(a,0),m=l.default.getEvolveLevel(a),v=_.touchMovs[m],y=_.idleMovs[m];u.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1.2),cc.moveTo(.5,f)),cc.callFunc(function(){d.play([v,y])}))),d.registerEventCallback(function(e){if("cpmplete"==e.name&&e.movKey==v){if(!cc.isValid(u))return;u.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){g.runAction(cc.scaleTo(.5,0))}),cc.spawn(cc.scaleTo(.5,0).easing(cc.easeIn(1.5)),cc.moveTo(.5,h).easing(cc.easeIn(1.5))),cc.callFunc(function(){if(cc.isValid(t)){var o=t.parent.convertToWorldSpaceAR(t.getThisPosition());p.default.playAnimNodeOnce56("reap",o.x,o.y),t.playButter(o);for(var n=function(n){var a=t._flowers[n];a.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){p.default.playAnimNodeOnce56("reap1",o.x,o.y),a.onMsgReapLevelAdd(e)}),cc.delayTime(.4),cc.callFunc(function(){cc.isValid(t)&&t.playHeart()})))},a=t._flowers.length-1;a>=0;a--)n(a);u.removeFromParent(),u.destroy()}})))}})}}},t.prototype.onMsgGuideLvUpgrade=function(){this.fillData()},t.prototype.onMsgItemAmountChanged=function(e){e.itemId==_.default.ITEM_ID_GOLD&&this.fillData()},t.prototype.playButter=function(e){for(var t=function(t){var o=cc.v2(u.default.random(e.x-60,e.x+60),u.default.random(e.y-40,e.y+40)),n=cc.v2(u.default.random(o.x-200,o.x+200),u.default.random(o.y-200,o.y+200)),a=n.sub(o).normalize(),r=u.default.vectorToDegress(a)+90,i=u.default.random(10,30)/100;c.default.loadRes("2d/anim_node/56_shengji/56_hudie",cc.Prefab,function(e,t){if(!e){var a=cc.instantiate(t),s=p.default.getTipRootNode();a.parent=s,a.scale=0,a.setPosition(s.convertToNodeSpaceAR(o)),a.rotation=r,a.runAction(cc.spawn(cc.moveTo(2,s.convertToNodeSpaceAR(n)),cc.sequence(cc.spawn(cc.scaleTo(.5,i),cc.delayTime(1)),cc.fadeOut(1))))}})},o=0;o<12;o++)t()},t.prototype.playHeart=function(){var e=this.context.roleId,t=(l.default.getEvolveLevel(e),this.nodeLevel);t.stopAllActions(),t.runAction(cc.sequence(cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.delayTime(.2),cc.callFunc(function(){l.default.tryAfterReapUpgrade(e)})))},t.prototype.onMsgLuckyTimeBegin=function(e){this.startLuckyTime(),this.fillData()},t.prototype.onMsgLuckyTimeEnd=function(e){this.closeLuckyTime()},t.prototype.onMsgAdValidCount=function(e){this.fillData()},t.prototype.onMsgAdTouchFlowerClose=function(e){var t=this;e.roleId==this.context.roleId&&g.default.callLater(.3,function(){t.labelCdDur.string=u.default.formatTime(t._count,"%M:%S");var o=t.buttonAdTouchFlower.node;o.active=!0,o.stopAllActions(),o.scale=0,o.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut())),e.bFirstCreate&&(t.tryStopTimer(),t._timer=new g.default(1,-1,t._onMsgTimerLoop.bind(t)),t._timer.start(!0),t._count=90,t._onMsgTimerLoop(t._timer))},this)},t.prototype.onMsgAdTouchFlowerOpen=function(){this.buttonAdTouchFlower.node.active=!1},t.prototype.tuochScene=function(e){if(this.isResourceLoaded()&&!this.onTouchItem(e))for(var t=this._flowers.length-1;t>=0;t--)this._flowers[t].tuochItem(e)},t.prototype.onTouchItem=function(e){var t=u.default.calcNodeBoundingBoxToWorld(this.getNodeRole()),o=e.getLocation();if(t.contains(o)){if(e.isClick()){var n=this.context.roleId;c.default.openDialog("vRoleUpgradeDialog",{roleId:n})}return!0}},t}(r.default);o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole","../../manager/mgrTip":"mgrTip","./vFlowerItem":"vFlowerItem"}],vRoleUpgradeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a96d5lPWqxNVIMp1lw9nzGn","vRoleUpgradeDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrRole"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrGuide"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrAd"),p=e("../../manager/mgrPool"),f=e("../../manager/mgrTip"),h=e("../../manager/mgrDirector"),g=e("../../manager/mgrI18n"),_=e("../node/vReapLevelItem"),m=cc._decorator,v=m.ccclass,y=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.buttonReap=null,t.buttonSimpleAd=null,t.buttonUpgrade=null,t.labelAd=null,t.labelCost=null,t.labelCurDesc=null,t.labelLevel=null,t.labelNextDesc=null,t.labelRoleName=null,t.labelSimpleAdCost=null,t.labelUpgrade=null,t.nodeEffect=null,t.nodeLayoutLevel=null,t.nodeRole=null,t.nodeSimpleAd=null,t.nodeSimpleAdCost=null,t.nodeSimpleAdIcon=null,t.spriteLevel=null,t.toggleSimpleAd=null,t._spineRef=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vRoleUpgradeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:{varname:"buttonAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAd"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonReap:{varname:"buttonReap",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonReap"}]},CC_buttonSimpleAd:{varname:"buttonSimpleAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSimpleAd"}]},CC_buttonUpgrade:{varname:"buttonUpgrade",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonUpgrade"}]},CC_labelAd:{varname:"labelAd",vartype:cc.Label},CC_labelCost:{varname:"labelCost",vartype:cc.Label},CC_labelCurDesc:{varname:"labelCurDesc",vartype:cc.Label},CC_labelLevel:{varname:"labelLevel",vartype:cc.Label},CC_labelNextDesc:{varname:"labelNextDesc",vartype:cc.Label},CC_labelRoleName:{varname:"labelRoleName",vartype:cc.Label},CC_labelSimpleAdCost:{varname:"labelSimpleAdCost",vartype:cc.Label},CC_labelUpgrade:{varname:"labelUpgrade",vartype:cc.Label},CC_nodeEffect:{varname:"nodeEffect",vartype:cc.Node},CC_nodeLayoutLevel:{varname:"nodeLayoutLevel",vartype:cc.Node},CC_nodeRole:{varname:"nodeRole",vartype:cc.Node},CC_nodeSimpleAd:{varname:"nodeSimpleAd",vartype:cc.Node},CC_nodeSimpleAdCost:{varname:"nodeSimpleAdCost",vartype:cc.Node},CC_nodeSimpleAdIcon:{varname:"nodeSimpleAdIcon",vartype:cc.Node},CC_spriteLevel:{varname:"spriteLevel",vartype:cc.Sprite},CC_toggleSimpleAd:{varname:"toggleSimpleAd",vartype:cc.Toggle}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),this.fillAd(),this.registerListeners({MSG_ROLE_UPGRADE:this.onMsgRoleUpgrade}),d.default.triggerAdEvent("wrap_upgrade"),this.sendMsg("MSG_GUIDE_POINT",{id:"vRoleUpgradeDialog.onOpenDialogCompleted"}),f.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this._spineRef&&(this._spineRef.removeFromParent(),p.default.put(this._spineRef),this._spineRef=null),e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.buildUi=function(){var e=this.context.roleId,t=l.default.get_from_role_db(e,0);if(t){var o=p.default.get("spine",t.spineId);o.parent=this.nodeRole,o.play("mov_1"),this._spineRef=o;for(var n=s.default.getEvolveLevel(e),a=0;a<n;a++){var r=new _.default;r.setContentSize(35,35),r.parent=this.nodeLayoutLevel}this.context.bEvo&&this.playAction(),c.default.registerGuideNode("vRoleUpgradeDialog.buttonUpgrade",this.buttonUpgrade.node),c.default.registerGuideNode("vRoleUpgradeDialog.buttonClose",this.buttonClose.node),this.toggleSimpleAd.node.on("toggle",this.refreshToggleIcon.bind(this)),this.refreshToggleIcon()}},t.prototype.playAction=function(){var e=this.nodeRole.convertToNodeSpaceAR(this.nodeLayoutLevel.convertToWorldSpaceAR(cc.v2(0,0))).add(cc.v2(0,100)),t=new _.default;t.opacity=0,t.parent=this.nodeLayoutLevel,(p.default.get("particle","p_xingxing_fashe_05")||new cc.Node).parent=t,t.runAction(cc.sequence(cc.fadeIn(.3),cc.moveTo(.3,e),cc.fadeOut(.3),cc.callFunc(function(){t.removeFromParent(),t.destroy()})))},t.prototype.refreshToggleIcon=function(){var e=this.toggleSimpleAd.isChecked;this.nodeSimpleAdIcon.active=e,this.nodeSimpleAdCost.active=!e},t.prototype.fillData=function(){var e=this.context.roleId,t=s.default.getRoleLevel(e),o=s.default.getRoleMaxLevel(e),n=l.default.get_from_role_db(e,t);if(n){this.labelRoleName.string=g.default.getText(n.name),this.labelCurDesc.string="Lv."+t+"\uff1a"+u.default.formatNumToStr(n.outPutCount),this.labelLevel.string=t.toString(),this.spriteLevel.fillRange=t/o,this.labelCost.string=u.default.formatNumToStr(n.upgradeCost),this.labelSimpleAdCost.string=u.default.formatNumToStr(n.upgradeCost);var a=l.default.get_from_role_db(e,t+1);a?(this.labelNextDesc.node.parent.active=!0,this.labelNextDesc.string="Lv."+(t+1)+"\uff1a"+u.default.formatNumToStr(a.outPutCount)):this.labelNextDesc.node.parent.active=!1}},t.prototype.fillAd=function(){var e=this.context.roleId,t=s.default.canShowFreeUpgrade(e),o=s.default.canShowUpgrade(e),n=c.default.isGuiding(),a=s.default.getRoleLevel(e)>0,r=s.default.isFreeGoldLessThanUpgrade(e),i=d.default.isAdCareful();this.labelUpgrade.string=a?g.default.getText("ui.59"):g.default.getText("ui.49"),this.labelAd.string=a?g.default.getText("ui.24"):g.default.getText("ui.60"),this.buttonUpgrade.node.active=n||o&&(!t||t&&i),this.buttonAd.node.active=o&&!n&&t&&r&&i,this.nodeSimpleAd.active=o&&!n&&t&&!i,this.buttonReap.node.active=!o&&s.default.canAddEvolveLv(e)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vRoleUpgradeDialog.buttonClose.click"}),this.closeDialog())},t.prototype.onTouchButtonAd=function(e){e.isClick()&&d.default.triggerAdEvent("role_upgrade",{roleId:this.context.roleId},!0)},t.prototype.onTouchButtonUpgrade=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vRoleUpgradeDialog.buttonUpgrade.click"});var t=this.context.roleId;s.default.upgradeRole(t)}},t.prototype.onTouchButtonReap=function(e){e.isClick()&&(this.closeDialog(!0),h.default.openDialog("vReapDialog",{roleId:this.context.roleId}))},t.prototype.onTouchButtonSimpleAd=function(e){if(e.isClick())if(this.toggleSimpleAd.isChecked)d.default.triggerAdEvent("role_upgrade",{roleId:this.context.roleId},!0);else{var t=this.context.roleId;s.default.upgradeRole(t)}},t.prototype.onMsgRoleUpgrade=function(e){if(e.roleId==this.context.roleId){this.fillData(),this.fillAd();var t=this.nodeEffect.parent.convertToWorldSpaceAR(this.nodeEffect.getPosition());f.default.playParticleOnce("p_ui_upgrade",t.x,t.y,1.2)}},t=a([v],t)}(i.default));o.default=y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole","../../manager/mgrTip":"mgrTip","../node/vReapLevelItem":"vReapLevelItem"}],vSelectPartAdDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b35eaqnh2NJwr0sK3iXds1V","vSelectPartAdDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrSelectPart"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonTake=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSelectPartAdDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonTake=function(e){e.isClick()&&s.default.triggerAdEvent("free_select_part",null,!0)},t.prototype.onMsgAdEventSuccessd=function(e){"free_select_part"==e.adEventId&&(l.default.addCount(3),this.closeDialog())},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrSelectPart":"mgrSelectPart"}],vSelectPartExchangeItem:[function(e,t,o){"use strict";cc._RF.push(t,"cf7b7zElU9B+r8CrYFf8hDg","vSelectPartExchangeItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("./vLevelBar"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrPlayer"),u=e("../../Const"),d=e("../../manager/mgrAchievement"),p=e("../../manager/mgrTip"),f=e("../../manager/mgrGuide"),h=e("../../manager/mgrI18n"),g=cc._decorator,_=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.labelAchievementDesc=null,t.nodeAchievement=null,t.nodeHad=null,t.nodeHeart=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSelectPartExchangeItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_labelAchievementDesc:{varname:"labelAchievementDesc",vartype:cc.Label},CC_nodeAchievement:{varname:"nodeAchievement",vartype:cc.Node},CC_nodeHad:{varname:"nodeHad",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh(),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new s.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(e){this.context.partId=e.partId,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.partId;if(e){var t=l.default.get_from_part_db(e);if(t){this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.nodeHad.active=c.default.getItemAmount(e)>0,this.levelBar&&this.levelBar.setLevel(5,t.level);var o=d.default.getAchievement(e),n=0;if(o)switch(o.state){case u.AchievementState.unlocked:this.labelAchievementDesc.string=ul.format(h.default.getText("ui.78"),o.template.data1);break;case u.AchievementState.finished:this.labelAchievementDesc.string=h.default.getText("ui.74"),n=1;break;default:this.labelAchievementDesc.string=h.default.getText("ui.55")}p.default.setCountBadgeValue(this.buttonItem.node,n)}}},t.prototype._tryGuide=function(){f.default.registerGuideNode("vSelectPartExchangeScene.buttonItem"+this.parent.__cell_id,this.buttonItem.node)},t.prototype.onTouchButtonItem=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartExchangeScene.buttonItem.click"});var t=this.context.partId,o=d.default.getAchievement(t);if(o)switch(o.state){case u.AchievementState.unlocked:p.default.showMsgTip(ul.format(h.default.getText("ui.78")+h.default.getText("ui.75"),o.template.data1));break;case u.AchievementState.finished:var n=d.default.obtainReward(t,h.default.getText("ui.76")),a=n[0],r=n[1];p.default.addGotItemTip(a,r);break;default:p.default.showMsgTip(h.default.getText("ui.55"))}}},t=a([_],t)}(i.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","./vLevelBar":"vLevelBar"}],vSelectPartExchangeScene:[function(e,t,o){"use strict";cc._RF.push(t,"93236vE4D5PhZYJU9TK+41B","vSelectPartExchangeScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/utils/Timer"),c=e("../../manager/mgrChannel"),u=e("../../../ulframework/view/ReuseList"),d=e("../node/vSuitRoleItem"),p=e("../../manager/mgrCfg"),f=e("../../manager/mgrTip"),h=e("../../manager/mgrSelectPart"),g=e("../../manager/mgrAd"),_=e("../node/vSelectPartExchangeItem"),m=e("../../../ulframework/view/ReuseLayouterHBox"),v=e("../../../ulframework/utils/Tools"),y=e("../../manager/mgrGuide"),C=e("../../manager/mgrI18n"),b=cc._decorator,S=b.ccclass,R=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.buttonStart=null,t.labelRemianCount=null,t.labelSuitName=null,t.nodeBottom=null,t.nodeLeft=null,t.nodeLeftTop=null,t.nodeListPart=null,t.nodeListRole=null,t.nodeParticle=null,t.nodeRight=null,t.nodeTop=null,t.spritePrint=null,t.listPart=null,t.roleItem=null,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vSelectPartExchangeScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_buttonStart:{varname:"buttonStart",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonStart"}]},CC_labelRemianCount:{varname:"labelRemianCount",vartype:cc.Label},CC_labelSuitName:{varname:"labelSuitName",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeListPart:{varname:"nodeListPart",vartype:cc.Node},CC_nodeListRole:{varname:"nodeListRole",vartype:cc.Node},CC_nodeParticle:{varname:"nodeParticle",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.uiFadeIn(),this.buildUi(),this.fillData(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_ADV_VALID_COUNT:this.onMsgAdValidCount,MSG_ACHIEVEMENT_STATE_CHANGED:this.onMsgAchievementStateChanged,MSG_SELECT_PART_COUNT_CHANGE:this.onMsgSelectPartCountChange}),f.default.showNativeBanner("ban_part_select_exchange",this),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),g.default.closeAdv("ban_part_select_exchange")},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=s.default.height/2,this.nodeBottom.y=-s.default.height/2+160,this.nodeRight.x=s.default.width/2,this.nodeLeft.x=-s.default.width/2,this.nodeLeftTop.x=-s.default.width/2,this.nodeLeftTop.y=s.default.height/2,s.default.isDeviceOverHeight()&&(this.nodeTop.y=s.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeRight.__op=this.nodeRight.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeRight.x+=200,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;l.default.callLater(.2,function(){e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op))},this)},t.prototype.buildUi=function(){this.spritePrint.node.active=c.default.isChannel4399();var e=new d.default({bSelectPart:!0});e.parent=this.nodeListRole,this.roleItem=e;var t=(new m.default).setCellSize(140,190).setGap(5).setPending(5),o=new u.default;o.parent=this.nodeListPart,o.setContentSize(this.nodeListPart.getContentSize()),o.setLayouter(t),o.setElasticEnabled(!1),o.setCreator(function(e){var t=new _.default;t.parent=e,e.item=t}),o.setSetter(function(e,t){e.item.fillData(t)}),this.listPart=o},t.prototype.fillData=function(){var e=p.default.get_from_select_part_db(1).suitIds[0];if(e){this.roleItem.fillData(e);var t=p.default.get_from_suit_db(e);if(t){this.labelSuitName.string=t.name||"";var o=this.listPart.layouter.getContainerSize(t.partIds.length);this.nodeListPart.width=Math.min(this.nodeBottom.width-20,o.width),this.listPart.setContentSize(this.nodeListPart.getContentSize());for(var n=[],a=0;a<t.partIds.length;a++){var r=p.default.get_from_achievement_db(t.partIds[a]);r&&n.push({partId:t.partIds[a],order:r.order})}var i=v.default.sortArrayByField(n,"order");this.listPart.setDatas(i),this.listPart.jumpToHead(),this.refreshBtns()}}},t.prototype.refreshBtns=function(){var e=h.default.getCanJoinCount(),t=e[0],o=e[1];this.labelRemianCount.string=ul.format("%d/%d",Math.max(0,t),o),f.default.setCountBadgeValue(this.buttonStart.node,t)},t.prototype._tryGuide=function(){var e=this;l.default.callLater(.3,function(){y.default.registerGuideNode("vSelectPartExchangeScene.guideNode1",e.nodeListPart),y.default.registerGuideNode("vSelectPartExchangeScene.buttonStart",e.buttonStart.node),e.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartExchangeScene.onResourceLoaded"})})},t.prototype.onTouchButtonBack=function(e){e.isClick()&&s.default.warpSceneWithEffect("vHubScene")},t.prototype.onTouchButtonStart=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartExchangeScene.buttonStart.click"});var t=h.default.getCanJoinCount(),o=t[0];t[1];o<=0?g.default.preCheckCanTriggerAdEvent("free_select_part")&&g.default.getAdEventRemainCount("free_select_part")>0?s.default.openDialog("vSelectPartAdDialog"):f.default.showMsgTip(C.default.getText("ui.77")):s.default.warpSceneWithEffect("vSelectPartScene")}},t.prototype.onMsgItemAmountChanged=function(e){this.listPart.refreshActiveCells()},t.prototype.onMsgAdValidCount=function(e){this.refreshBtns()},t.prototype.onMsgAchievementStateChanged=function(e){this.listPart.refreshActiveCells()},t.prototype.onMsgSelectPartCountChange=function(e){this.refreshBtns()},t=a([S],t)}(i.default));o.default=R,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/SceneBase":"SceneBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrSelectPart":"mgrSelectPart","../../manager/mgrTip":"mgrTip","../node/vSelectPartExchangeItem":"vSelectPartExchangeItem","../node/vSuitRoleItem":"vSuitRoleItem"}],vSelectPartItem:[function(e,t,o){"use strict";cc._RF.push(t,"abf1c36JHhDObyD8Dl3nODs","vSelectPartItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrGuide"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.spriteCorrect=null,t.spriteIcon=null,t.spriteWrong=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSelectPartItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_spriteCorrect:{varname:"spriteCorrect",vartype:cc.Sprite},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite},CC_spriteWrong:{varname:"spriteWrong",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh(),this._tryGuide()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.partId=e,this.isResourceLoaded()&&this.refresh()},t.prototype.setCorrect=function(e){this.context.bCorrect=e,this.isResourceLoaded()&&this.refresh()},t.prototype.setWrong=function(e){this.context.bWrong=e,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.partId;if(e){var t=s.default.get_from_part_db(e);t&&(this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.spriteCorrect.node.active=this.context.bCorrect||!1,this.spriteCorrect.node.scale=2,this.spriteCorrect.node.runAction(cc.scaleTo(.3,1).easing(cc.easeIn(2))),this.spriteWrong.node.active=this.context.bWrong||!1,this.spriteWrong.node.scale=2,this.spriteWrong.node.runAction(cc.scaleTo(.3,1).easing(cc.easeIn(2))))}},t.prototype._tryGuide=function(){l.default.registerGuideNode("vSelectPartScene.buttonItem"+this.parent.__cell_id,this.buttonItem.node)},t.prototype.onTouchButtonItem=function(e){e.isClick()&&(this.context.fOnClickItem&&this.context.fOnClickItem(this.context.partId),this.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartScene.buttonItem.click"}))},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide"}],vSelectPartScene:[function(e,t,o){"use strict";cc._RF.push(t,"63ccfISx8pF2Z+B64TtSszW","vSelectPartScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/FSMSceneBase"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/utils/Timer"),c=e("../../manager/mgrChannel"),u=e("../../manager/mgrPool"),d=e("../node/vComboAvatar"),p=e("../../../ulframework/view/ReuseLayouterHBox"),f=e("../../../ulframework/view/ReuseList"),h=e("../../manager/mgrSelectPart"),g=e("../../manager/mgrCfg"),_=e("../../../ulframework/utils/Tools"),m=e("../../manager/mgrTip"),v=e("../../manager/mgrPlayer"),y=e("../../Const"),C=e("../node/vSelectPartItem"),b=e("../../manager/mgrAd"),S=e("../../manager/mgrGuide"),R=e("../../manager/mgrI18n"),T=cc._decorator,L=T.ccclass,w=(T.property,function(e){function t(){var t,o=null!==e&&e.apply(this,arguments)||this;return o.buttonAd=null,o.buttonAd2=null,o.buttonBack=null,o.labelDesc=null,o.labelDescAd=null,o.labelRemianCount=null,o.nodeAvatar=null,o.nodeBottom=null,o.nodeLeft=null,o.nodeLeftTop=null,o.nodeListPart=null,o.nodeParticle=null,o.nodeRemianCount=null,o.nodeResult=null,o.nodeRight=null,o.nodeRole=null,o.nodeTop=null,o.nodeZero=null,o.spritePrint=null,o.spriteResult=null,o.ST_REQUEST_COMMON=1,o.ST_WAIT=2,o.ST_IN=3,o.ST_CHOOSE=4,o.ST_RESULT=5,o.ST_REWARD=6,o.ST_OUT=7,o.ST_NO_DATA=8,o.avatar=null,o.listPart=null,o.selectedPartId=0,o.bResult=!1,o.stageData=null,o.result=0,o.correctData={},o._remainTime=0,o.RESULT={WIN:1,FAIL:2},o.SPRITE_RESULT=((t={})[1]="2d/ui/select_part/art_04.png",t[2]="2d/ui/select_part/art_03.png",t),o}return n(t,e),t.prototype._getResourceName=function(){return"scene/vSelectPartScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:{varname:"buttonAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAd"}]},CC_buttonAd2:{varname:"buttonAd2",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAd2"}]},CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelDescAd:{varname:"labelDescAd",vartype:cc.Label},CC_labelRemianCount:{varname:"labelRemianCount",vartype:cc.Label},CC_nodeAvatar:{varname:"nodeAvatar",vartype:cc.Node},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeListPart:{varname:"nodeListPart",vartype:cc.Node},CC_nodeParticle:{varname:"nodeParticle",vartype:cc.Node},CC_nodeRemianCount:{varname:"nodeRemianCount",vartype:cc.Node},CC_nodeResult:{varname:"nodeResult",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeRole:{varname:"nodeRole",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_nodeZero:{varname:"nodeZero",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite},CC_spriteResult:{varname:"spriteResult",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.uiFadeIn(),this.buildUi(),this.registerState(this.ST_REQUEST_COMMON,"onEnterRequestCommon","onExecuteRequestCommon","onLeaveRequestCommon"),this.registerState(this.ST_WAIT,"onEnterWait","onExecuteWait","onLeaveWait"),this.registerState(this.ST_IN,"onEnterIn","onExecuteIn","onLeaveIn"),this.registerState(this.ST_CHOOSE,"onEnterChoose","onExecuteChoose","onLeaveChoose"),this.registerState(this.ST_RESULT,"onEnterResult","onExecuteResult","onLeaveResult"),this.registerState(this.ST_REWARD,"onEnterReward","onExecuteReward","onLeaveReward"),this.registerState(this.ST_OUT,"onEnterOut","onExecuteOut","onLeaveOut"),this.registerState(this.ST_NO_DATA,"onEnterNoData","onExecuteNoData","onLeaveNoData"),this.setNextState(this.ST_REQUEST_COMMON),this.registerListeners({MSG_SELECT_PART_COUNT_CHANGE:this.onMsgSelectPartCountChange.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this)}),m.default.showNativeBanner("ban_part_select",this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),b.default.closeAdv("ban_part_select")},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=s.default.height/2,this.nodeBottom.y=-s.default.height/2+160,this.nodeRight.x=s.default.width/2,this.nodeLeft.x=-s.default.width/2,this.nodeLeftTop.x=-s.default.width/2,this.nodeLeftTop.y=s.default.height/2,s.default.isDeviceOverHeight()&&(this.nodeTop.y=s.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeRight.__op=this.nodeRight.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeRight.x+=200,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;l.default.callLater(.2,function(){e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op))},this)},t.prototype.buildUi=function(){var e=this;this.spritePrint.node.active=c.default.isChannel4399();var t=new d.default;t.parent=this.nodeAvatar,this.avatar=t;var o=(new p.default).setCellSize(100,100).setGap(10).setPending(40),n=new f.default;n.parent=this.nodeListPart,n.setContentSize(this.nodeListPart.getContentSize()),n.setLayouter(o),n.setElasticEnabled(!1),n.setCreator(function(t){var o=new C.default({fOnClickItem:e.onClickItem.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(t,o){var n=t.item;n.fillData(o);var a=e.selectedPartId==o,r=e.bResult&&a&&e.stageData.correctPartIds[0]==e.selectedPartId,i=e.bResult&&a&&e.stageData.correctPartIds[0]!=e.selectedPartId;n.setCorrect(r),n.setWrong(i),r&&(e.correctData[o]=t)}),this.listPart=n,this.nodeResult.active=!1,this.nodeResult.scale=0},t.prototype.onClickItem=function(e){if(!this.bResult&&!this.selectedPartId){var t=h.default.getCanJoinCount(),o=t[0];t[1];o<=0?b.default.preCheckCanTriggerAdEvent("free_select_part")&&b.default.getAdEventRemainCount("free_select_part")>0?m.default.showMsgTip(R.default.getText("msg.14")):m.default.showMsgTip(R.default.getText("ui.77")):(this.selectedPartId=e,this.listPart.refreshActiveCells(),this.setNextState(this.ST_RESULT))}},t.prototype.fillData=function(){var e=h.default.getCanJoinCount(),t=e[0],o=e[1];this.labelRemianCount.string=ul.format(R.default.getText("ui.56")+"%d/%d",Math.max(0,t),o),this.labelDesc.node.active=!0,this.buttonAd2.node.active=!1,t<=0&&b.default.preCheckCanTriggerAdEvent("free_select_part")&&b.default.getAdEventRemainCount("free_select_part")>0&&(this.labelDesc.node.active=!1,this.buttonAd2.node.active=!0,this.labelDescAd.string=R.default.getText("ui.85"))},t.prototype.fillPlayer=function(){var e=this.stageData;this.avatar.fillByPartIds(e.showPartIds),this.avatar.refresh();var t=this.listPart.layouter.getContainerSize(e.optionalPartIds.length);this.nodeListPart.width=Math.min(this.nodeBottom.width-20,t.width),this.listPart.setContentSize(this.nodeListPart.getContentSize()),this.listPart.setDatas(e.optionalPartIds),this._tryGuide()},t.prototype._tryGuide=function(){var e=this;l.default.callLater(.3,function(){S.default.registerGuideNode("vSelectPartScene.buttonBack",e.buttonBack.node),e.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartScene.onResourceLoaded"})})},t.prototype.onEnterRequestCommon=function(){this.selectedPartId=0,this.bResult=!1,this.nodeResult.active=!1,this.nodeResult.scale=0,this.fillData(),this.setNextState(this.ST_REWARD)},t.prototype.onExecuteRequestCommon=function(e){},t.prototype.onLeaveRequestCommon=function(){},t.prototype.onEnterWait=function(){var e=this;this.selectedPartId=0,this.bResult=!1,this.correctData=[],this.nodeResult.active=!1,this.nodeResult.scale=0;var t=g.default.get_from_select_part_db(1),o=t.stageIds[_.default.random(t.stageIds.length)-1];S.default.isGuideCompleted(110)||(o=1),this.stageData=g.default.get_from_select_part_stage_db(o),this.fillPlayer(),this.nodeAvatar.active=!0,this.nodeListPart.active=!0,this.nodeAvatar.opacity=0,this.nodeListPart.opacity=0,g.default.forDb_from_part_type_db(function(t,o){o&&o.id&&e.avatar.setPartBlack(o.id)}),this.fillData(),this.setNextState(this.ST_IN)},t.prototype.onExecuteWait=function(e){},t.prototype.onLeaveWait=function(){},t.prototype.onEnterIn=function(){this.nodeAvatar.runAction(cc.fadeIn(.5)),this.nodeListPart.runAction(cc.fadeIn(.5))},t.prototype.onExecuteIn=function(e){},t.prototype.onLeaveIn=function(){},t.prototype.onEnterChoose=function(){},t.prototype.onExecuteChoose=function(e){},t.prototype.onLeaveChoose=function(){},t.prototype.onEnterResult=function(){var e=this;this.bResult=!0;var t=this.selectedPartId,o=this.stageData.correctPartIds[0];this.result=t==o?this.RESULT.WIN:this.RESULT.FAIL,this.listPart.refreshActiveCells();var n=this.nodeAvatar.convertToWorldSpace(cc.v2(0,0)),a=.5,r=function(e){var t=g.default.get_from_part_db(e),o=i.correctData[e],r=o.convertToWorldSpace(cc.v2(0,0)),s=o.getContentSize(),l=new cc.Node;l.parent=i.nodeZero,l.position=cc.v2(r.x+s.width/2,r.y+s.height/2),l.scale=0;var c=l.addComponent(cc.Sprite);c.loadSpriteFrame(t.icon);var d=u.default.get("particle","p_xingxing_fashe_05")||new cc.Node;d.parent=l,d.position=cc.v2(c.node.getContentSize().width/2,c.node.getContentSize().height/2),l.runAction(cc.sequence(cc.delayTime(a),cc.scaleTo(0,1),cc.moveTo(.3,cc.v2(n.x,n.y+1e3)),cc.scaleTo(.3,0),cc.callFunc(function(){m.default.playAnimNodeOnce("p_xingxing_bao_03",n.x,n.y+1e3),l.removeFromParent(),l.destroy()}))),a+=.3},i=this;for(var s in this.correctData)r(s);l.default.callLater(1.5,function(){g.default.forDb_from_part_type_db(function(t,o){o&&o.id&&e.avatar.setPartNormal(o.id)})}),l.default.callLater(2,function(){e.nodeResult.stopAllActions(),e.nodeResult.active=!0,e.nodeResult.scale=0,1==e.result?e.spriteResult.loadLocalziedSpriteFrame("others.guess_win"):2==e.result&&e.spriteResult.loadLocalziedSpriteFrame("others.guess_wrong"),e.nodeResult.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut()))}),this._remainTime=3},t.prototype.onExecuteResult=function(e){this._remainTime=this._remainTime-e,this._remainTime<=0&&this.setNextState(this.ST_REWARD)},t.prototype.onLeaveResult=function(){},t.prototype.onEnterReward=function(){this.result?(h.default.markJoined(),this.result==this.RESULT.WIN&&(v.default.addItemAmount(y.default.ITEM_ID_SELECT_PART_SUCCESS_COUNT,1,"\u7edf\u8ba1"),this.sendMsg("MSG_PART_SELECT_SUCCESS"),this.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartScene.onSelectSuccess"}))):this.setNextState(this.ST_OUT)},t.prototype.onExecuteReward=function(e){m.default.isAllGotItemTipDisplayed()&&this.setNextState(this.ST_OUT)},t.prototype.onLeaveReward=function(){},t.prototype.onEnterOut=function(){var e=this;this.nodeAvatar.runAction(cc.fadeIn(.5)),this.nodeListPart.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){e.nodeAvatar.active=!1,e.nodeListPart.active=!1,e.setNextState(e.ST_WAIT)})))},t.prototype.onExecuteOut=function(e){},t.prototype.onLeaveOut=function(){},t.prototype.onEnterNoData=function(){},t.prototype.onExecuteNoData=function(e){},t.prototype.onLeaveNoData=function(){},t.prototype.onTouchButtonAd=function(e){},t.prototype.onTouchButtonBack=function(e){e.isClick()&&(this.bResult||(this.sendMsg("MSG_GUIDE_POINT",{id:"vSelectPartScene.buttonBack.click"}),s.default.warpSceneWithEffect("vSelectPartExchangeScene")))},t.prototype.onTouchButtonAd2=function(e){e.isClick()&&b.default.triggerAdEvent("free_select_part",null,!0)},t.prototype.onMsgSelectPartCountChange=function(e){this.fillData()},t.prototype.onMsgAdEventSuccessd=function(e){"free_select_part"==e.adEventId&&h.default.addCount(3)},t=a([L],t)}(i.default));o.default=w,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/FSMSceneBase":"FSMSceneBase","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSelectPart":"mgrSelectPart","../../manager/mgrTip":"mgrTip","../node/vComboAvatar":"vComboAvatar","../node/vSelectPartItem":"vSelectPartItem"}],vSetLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"1df4aJ17BBBAZuDL3bdTrPW","vSetLanguage");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../../../ulframework/view/ReuseList"),s=e("../../../ulframework/view/ReuseLayouterVBox"),l=e("../../../ulframework/utils/Tools"),c=e("../node/vLanguageItem"),u=e("../../manager/mgrI18n"),d=cc._decorator,p=(d.ccclass,d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.layoutList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSetLanguage"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutList:{varname:"layoutList",vartype:cc.Layout}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.registerListeners({MSG_CLOSE_LABGUAGE_VIEW:this.onCloseDialog})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=[{text:"English",value:"en"},{text:"Orang indonesia",value:"id"},{text:"Ti\u1ebfng vi\u1ec7t",value:"vi"},{text:"\u0939\u093f\u0928\u094d\u0926\u0940",value:"hi"},{text:"Portugu\xeas",value:"pt"},{text:"\u4e2d\u6587",value:"zhcn"}],t=l.default.scaleInRange(e.length,8.5,17.5,515,1001);this.nodeResource.height=t;for(var o=this.nodeResource.getComponentsInChildren(cc.Widget),n=0;n<o.length;n++){o[n].updateAlignment()}this.labelTitle.string=u.default.getText("ui.64");var a=this.layoutList,r=new i.default;r.setLayouter((new s.default).setCellSize(390,80).setGap(5).setPending(10)),r.setCreator(function(e){var t=new c.default;t.parent=e,e.item=t}),r.setSetter(function(e,t){e.item.fillData(t)}),r.parent=a.node,r.setContentSize(a.node.getContentSize()),r.setDatas(e)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onCloseDialog=function(){this.closeDialog()},t}(r.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrI18n":"mgrI18n","../node/vLanguageItem":"vLanguageItem"}],vSettingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"fcce9xfeQpFV7AQZO+qyhst","vSettingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrSound"),l=e("../../manager/mgrTip"),c=e("../../../ulframework/utils/Tools"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrChannel"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCdk=null,t.buttonChoiseLanguage=null,t.buttonClose=null,t.buttonEffect=null,t.buttonMusic=null,t.buttonVideoRecord=null,t.nodeBg=null,t.nodeEffectPlay=null,t.nodeEffectStop=null,t.nodeKefuEmail=null,t.nodeMusicPlay=null,t.nodeMusicStop=null,t.nodeVideotPlay=null,t.nodeVideotStop=null,t.nodeVideoRecord=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSettingDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCdk:{varname:"buttonCdk",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCdk"}]},CC_buttonChoiseLanguage:{varname:"buttonChoiseLanguage",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonChoiseLanguage"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonEffect:{varname:"buttonEffect",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonEffect"}]},CC_buttonMusic:{varname:"buttonMusic",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonMusic"}]},CC_buttonVideoRecord:{varname:"buttonVideoRecord",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonVideoRecord"}]},CC_nodeBg:{varname:"nodeBg",vartype:cc.Node},CC_nodeEffectPlay:{varname:"nodeEffectPlay",vartype:cc.Node},CC_nodeEffectStop:{varname:"nodeEffectStop",vartype:cc.Node},CC_nodeKefuEmail:{varname:"nodeKefuEmail",vartype:cc.Node},CC_nodeMusicPlay:{varname:"nodeMusicPlay",vartype:cc.Node},CC_nodeMusicStop:{varname:"nodeMusicStop",vartype:cc.Node},CC_nodeVideotPlay:{varname:"nodeVideotPlay",vartype:cc.Node},CC_nodeVideotStop:{varname:"nodeVideotStop",vartype:cc.Node},CC_nodeVideoRecord:{varname:"nodeVideoRecord",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshEffect(),this.refreshMusic(),this.refreshVideoRecord(),this.nodeVideoRecord.active=d.default.haveVideoRecord(),this.buttonCdk.node.active=!1,this.nodeKefuEmail.active=!1,this.buttonChoiseLanguage.node.active=!0,c.default.registerTouchHandler(this.nodeBg,this.onTouchNodeBg.bind(this)),l.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refreshEffect=function(){var e=s.default.getEffectVolume()>0;this.nodeEffectStop.active=!e,this.nodeEffectPlay.active=e},t.prototype.refreshMusic=function(){var e=s.default.getMusicVolmue()>0;this.nodeMusicStop.active=!e,this.nodeMusicPlay.active=e},t.prototype.refreshVideoRecord=function(){var e=d.default.canUseVideoRecord();this.nodeVideotStop.active=!e,this.nodeVideotPlay.active=e},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonEffect=function(e){e.isClick()&&(s.default.getEffectVolume()>0?s.default.setEffectVolume(0):s.default.setEffectVolume(1),this.refreshEffect())},t.prototype.onTouchButtonMusic=function(e){e.isClick()&&(s.default.getMusicVolmue()>0?s.default.setMusicVomue(0):s.default.setMusicVomue(1),this.refreshMusic())},t.prototype.onTouchButtonVideoRecord=function(e){e.isClick()&&(d.default.getUserOpenVideoRecord()?(d.default.setUserOpenVideoRecord(!1),l.default.showMsgTip("\u5173\u95ed\u81ea\u52a8\u5f55\u5236")):(d.default.setUserOpenVideoRecord(!0),l.default.showMsgTip("\u5f00\u542f\u81ea\u52a8\u5f55\u5236")),this.refreshVideoRecord())},t.prototype.onTouchButtonCdk=function(e){e.isClick()&&u.default.openDialog("vCdkDialog")},t.prototype.onTouchButtonChoiseLanguage=function(e){e.isClick()&&(cc.log("TODO vSettingDialog.onTouchButtonChoiseLanguage"),u.default.openDialog("vSetLanguage"),this.closeDialog())},t.prototype.onTouchNodeBg=function(e){if("began"==e.name)this._b_drag_to_right=!0,this._turn_count=0,this._b_poped=!1;else if("moved"==e.name){var t=e.getStartLocation(),o=e.getLocation();this._b_drag_to_right?o.x<t.x-20&&(this._b_drag_to_right=!1,this._turn_count++,cc.log("turn left",this._turn_count)):o.x>t.x+20&&(this._b_drag_to_right=!0,this._turn_count++,cc.log("turn right",this._turn_count)),this._b_poped||this._turn_count>=20&&(u.default.openDialog("vDebugInfoDialog",null,!0),this._b_poped=!0)}},t=a([f],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip"}],vShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"54c89bKdQtHYJy3XYteZH7x","vShareDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../../../ulframework/utils/Tools"),s=e("../../manager/mgrSdk"),l=e("../../manager/mgrChannel"),c=e("../../manager/mgrI18n"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonClose=null,t.buttonSure=null,t.labelCancel=null,t.labelContent=null,t.labelTitle=null,t.nodeCancelMask=null,t._timeOver=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonClose:{varname:"buttonClose",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonSure:{varname:"buttonSure",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_labelCancel:{varname:"labelCancel",vartype:cc.Label},CC_labelContent:{varname:"labelContent",vartype:cc.Label},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_nodeCancelMask:{varname:"nodeCancelMask",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.timeAction(),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgSdkShareResult})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=l.default.getShareDesc(),t=e[0],o=e[1],n=e[2];this.labelContent.string=c.default.getText("alert.14")+""+t+o+i.default.formatNumToStr(n)},t.prototype.timeAction=function(){var e=this,t=ul.actionFloat(3,3,0,function(t){e.labelCancel.string="\u53d6\u6d88("+Math.ceil(t)+"s)"});this.nodeCancelMask.active=!0,this.runAction(cc.sequence(t,cc.callFunc(function(){e.labelCancel.string="\u53d6\u6d88",e.nodeCancelMask.active=!1,e._timeOver=!0})))},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this._timeOver&&this.closeDialog()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){e.isClick()&&s.default.shareImage("","","","")},t.prototype.onMsgSdkShareResult=function(e){e.bSuccess&&this.closeDialog(!0)},t}(r.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrI18n":"mgrI18n","../../manager/mgrSdk":"mgrSdk"}],vShareReapDialog:[function(e,t,o){"use strict";cc._RF.push(t,"67f09+9xL9HB4CZAOZUtFKN","vShareReapDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrRole"),c=e("../../manager/mgrPool"),u=e("../../manager/mgrAd"),d=e("../../manager/mgrI18n"),p="after_reap_upgrade",f=cc._decorator,h=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonShare=null,t.buttonSure=null,t.labelDesc=null,t.nodeFlower=null,t.nodeNew=null,t.spriteLand=null,t._spineRef=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShareReapDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonShare:{varname:"buttonShare",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonShare"}]},CC_buttonSure:{varname:"buttonSure",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSure"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeFlower:{varname:"nodeFlower",vartype:cc.Node},CC_nodeNew:{varname:"nodeNew",vartype:cc.Node},CC_spriteLand:{varname:"spriteLand",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this._spineRef&&(this._spineRef.removeFromParent(),c.default.put(this._spineRef),this._spineRef=null),e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUi=function(){var e=this.context.roleId,t=s.default.get_from_role_db(e,0);if(t){this.spriteLand.loadSpriteFrame(t.landSprite);var o=l.default.getEvolveLevel(e),n=c.default.get("spine",t.flowerSpineId);n.parent=this.nodeFlower,n.play(t.idleMovs[o]),this._spineRef=n}},t.prototype.fillData=function(){var e=this.context.roleId,t=l.default.getRoleMaxLevel(e),o=Math.floor(t/2);this.labelDesc.string=ul.format(d.default.getText("ui.18"),t,o)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.context.roleId;t?u.default.triggerAdEvent(p,{roleId:t},!0):this.closeDialog()}},t.prototype.onMsgSdkShareResult=function(e){e.bSuccess&&this.closeDialog(!0)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==p&&this.closeDialog()},t=a([h],t)}(i.default));o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool","../../manager/mgrRole":"mgrRole"}],vShop01Dialog:[function(e,t,o){"use strict";cc._RF.push(t,"6bc6aYwBfBMQJFXw8dUJF+t","vShop01Dialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vShopItem"),l=e("../../manager/mgrShop"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrAd"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeLayout=null,t.nodeLeftTop=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShop01Dialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_nodeLayout:{varname:"nodeLayout",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(c.default.size),this.uiFadeIn(),this.buildUi(),this.registerListeners({MSG_SHOP_BUY_SUCCESSED:this.onMsgShopBuySuccessed}),u.default.triggerAdEvent("wrap_shop"),u.default.closeAdv("banner_all")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.uiFadeIn=function(){this.nodeLeftTop.x=-c.default.width/2,this.nodeLeftTop.y=c.default.height/2},t.prototype.buildUi=function(){for(var e=l.default.getAllShopItemListByCategory([2]),t=0;t<e.length;t++){var o=e[t],n=new s.default({shopId:o.id});n.setContentSize(554,280),n.parent=this.nodeLayout}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgShopBuySuccessed=function(e){},t=a([p],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrShop":"mgrShop","../node/vShopItem":"vShopItem"}],vShop02Dialog:[function(e,t,o){"use strict";cc._RF.push(t,"94bdemRN4tMxZ/rwvo5Aq/I","vShop02Dialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrShop"),l=e("../node/vShopItem"),c=e("../../manager/mgrRole"),u=e("../../../ulframework/utils/Tools"),d=e("../../manager/mgrAd"),p=e("../../manager/mgrDirector"),f=e("../../manager/mgrI18n"),h=cc._decorator,g=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.buttonHadTake=null,t.labelDesc=null,t.nodeLayout=null,t.nodeLeftTop=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShop02Dialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:{varname:"buttonAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAd"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonHadTake:{varname:"buttonHadTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonHadTake"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_nodeLayout:{varname:"nodeLayout",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(p.default.size),this.uiFadeIn(),this.buildUi(),this.fillData(),this.registerListeners({MSG_SHOP_BUY_SUCCESSED:this.onMsgShopBuySuccessed,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),d.default.triggerAdEvent("wrap_shop"),d.default.closeAdv("banner_all")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.uiFadeIn=function(){this.nodeLeftTop.x=-p.default.width/2,this.nodeLeftTop.y=p.default.height/2},t.prototype.buildUi=function(){for(var e=s.default.getAllShopItemListByCategory([2]),t=0;t<e.length;t++){var o=e[t],n=new l.default({shopId:o.id});n.setContentSize(554,280),n.parent=this.nodeLayout}},t.prototype.fillData=function(){var e=c.default.getOneHourIncome();this.labelDesc.string=ul.format(f.default.getText("ui.15"),u.default.formatNumToStr(e)),this.buttonHadTake.node.active=!1,this.buttonAd.node.active=!0},t.prototype.onTouchButtonAd=function(e){e.isClick()&&d.default.triggerAdEvent("free_gold",null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonHadTake=function(e){e.isClick()},t.prototype.onMsgShopBuySuccessed=function(e){},t.prototype.onMsgAdEventSuccessd=function(e){"free_gold"==e.adEventId&&(this.buttonHadTake.node.active=!0,this.buttonAd.node.active=!1)},t=a([g],t)}(i.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrRole":"mgrRole","../../manager/mgrShop":"mgrShop","../node/vShopItem":"vShopItem"}],vShopItem:[function(e,t,o){"use strict";cc._RF.push(t,"722fe6ZBe9Ck6mzv9GUiN5U","vShopItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrShop"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.labelDesc=null,t.labelPrice=null,t.spriteBg=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vShopItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:{varname:"buttonBuy",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBuy"}]},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelPrice:{varname:"labelPrice",vartype:cc.Label},CC_spriteBg:{varname:"spriteBg",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this.context.shopId,t=s.default.get_from_shop_template_db(e);if(t){this.spriteBg.loadSpriteFrame(t.sprBg),this.labelPrice.string=t.price+"\u5143\u8d2d\u4e70",this.labelDesc.string=t.desc;var o=this.labelDesc.getComponent(cc.LabelOutline);if(o){var n=t.labelColor;o.color=cc.color(n[0],n[1],n[2])}}},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&l.default.requestBuy(this.context.shopId)},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrShop":"mgrShop"}],vSignDialog:[function(e,t,o){"use strict";cc._RF.push(t,"31106ESJ2RPm5M3zahmRYia","vSignDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrSign"),l=e("../../Const"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrSdk"),d=e("../node/vSignItemSmall"),p=e("../node/vSignItemLarge"),f=e("../../manager/mgrAd"),h=e("../../manager/mgrDirector"),g=e("../../../ulframework/utils/Tools"),_=e("../../manager/mgrChannel"),m=e("../../manager/mgrI18n"),v=cc._decorator,y=v.ccclass,C=(v.property,"double_reward_sign"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCarefulAdGiveup=null,t.buttonCarefulAdSign=null,t.buttonClose=null,t.buttonNoAdSign=null,t.buttonSimpleAdSign=null,t.labelCarefulAdCancel=null,t.labelCarefulAdSure=null,t.labelNoAd=null,t.nodeCarefulAd=null,t.nodeItemLast=null,t.nodeLayout=null,t.nodeNoAd=null,t.nodeSimpleAd=null,t.nodeSimpleAdIcon=null,t.toggleSimpleAd=null,t.items=[],t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSignDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCarefulAdGiveup:{varname:"buttonCarefulAdGiveup",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAdGiveup"}]},CC_buttonCarefulAdSign:{varname:"buttonCarefulAdSign",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCarefulAdSign"}]},CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonNoAdSign:{varname:"buttonNoAdSign",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonNoAdSign"}]},CC_buttonSimpleAdSign:{varname:"buttonSimpleAdSign",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonSimpleAdSign"}]},CC_labelCarefulAdCancel:{varname:"labelCarefulAdCancel",vartype:cc.Label},CC_labelCarefulAdSure:{varname:"labelCarefulAdSure",vartype:cc.Label},CC_labelNoAd:{varname:"labelNoAd",vartype:cc.Label},CC_nodeCarefulAd:{varname:"nodeCarefulAd",vartype:cc.Node},CC_nodeItemLast:{varname:"nodeItemLast",vartype:cc.Node},CC_nodeLayout:{varname:"nodeLayout",vartype:cc.Node},CC_nodeNoAd:{varname:"nodeNoAd",vartype:cc.Node},CC_nodeSimpleAd:{varname:"nodeSimpleAd",vartype:cc.Node},CC_nodeSimpleAdIcon:{varname:"nodeSimpleAdIcon",vartype:cc.Node},CC_toggleSimpleAd:{varname:"toggleSimpleAd",vartype:cc.Toggle}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&this.bClosing},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.buildUI(),this.fillData()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUI=function(){for(var e=1;e<=6;e++){var t=new d.default({day:e,fOnClick:this.onClickItem.bind(this)});t.setContentSize(137,148),t.parent=this.nodeLayout,this.items.push(t)}var o=new p.default({day:7,fOnClick:this.onClickItem.bind(this)});o.parent=this.nodeItemLast,this.items.push(o),this.toggleSimpleAd.node.on("toggle",this.refreshToggleIcon.bind(this)),this.refreshToggleIcon();var n=s.default.getNextSignRewardGold();this.labelCarefulAdCancel.string="+"+g.default.formatNumToStr(n),this.labelCarefulAdSure.string="+"+g.default.formatNumToStr(2*n)},t.prototype.refreshToggleIcon=function(){var e=this.toggleSimpleAd.isChecked;this.nodeSimpleAdIcon.active=e},t.prototype.fillData=function(){for(var e=s.default.getSignDay(),t=s.default.getState()==l.SignState.canSign,o=0;o<this.items.length;o++){var n=this.items[o];n.fillData(),e==o+1&&t?n.__focused=!0:(n.__focused=!1,n.stopAllActions(),n.setScale(1))}this.labelNoAd.string=t?m.default.getText("ui.1"):m.default.getText("ui.55");var a=s.default.isGoldNextSignRewardItem(),r=f.default.isAdCareful(),i=f.default.preCheckCanTriggerAdEvent(C);this.nodeNoAd.active=!t||!a||!i,this.nodeSimpleAd.active=t&&a&&i&&!r,this.nodeCarefulAd.active=t&&a&&i&&r,this.buttonCarefulAdSign.node.getActionByTag(1)||this.buttonCarefulAdSign.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeInOut(1.5))))).setTag(1)},t.prototype._sign=function(){var e=s.default.sign();if(e.bSuccessd){for(var t=0;t<e.rewards.length;t++){var o=e.rewards[t],n=o[0],a=o[1];c.default.addGotItemTip(n,a)}this.fillData()}},t.prototype.trySign=function(){var e=s.default.getState();e==l.SignState.canSign?(this._sign(),u.default.statisCommonEvent("\u7b7e\u5230\u6210\u529f_\u7b7e\u5230")):e==l.SignState.signed?c.default.showMsgTip(m.default.getText("msg.18")):e==l.SignState.signOver?c.default.showMsgTip(m.default.getText("msg.19")):e==l.SignState.waitGap&&c.default.showMsgTip(m.default.getText("msg.20"))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.closeDialog(),_.default.isChannelBaidu()&&h.default.openDialog("vFindMeBaiduDialog"))},t.prototype.onTouchButtonCarefulAdGiveup=function(e){e.isClick()&&this.trySign()},t.prototype.onTouchButtonCarefulAdSign=function(e){e.isClick()&&f.default.triggerAdEvent(C)},t.prototype.onTouchButtonNoAdSign=function(e){e.isClick()&&this.trySign()},t.prototype.onTouchButtonSimpleAdSign=function(e){e.isClick()&&(this.toggleSimpleAd.isChecked?f.default.triggerAdEvent(C):this.trySign())},t.prototype.onClickItem=function(e){var t=s.default.getSignDay();e<t?c.default.showMsgTip(m.default.getText("msg.21")):e==t?this.trySign():c.default.showMsgTip(m.default.getText("msg.20"))},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==C&&this.fillData()},t=a([y],t)}(i.default);o.default=b,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSign":"mgrSign","../../manager/mgrTip":"mgrTip","../node/vSignItemLarge":"vSignItemLarge","../node/vSignItemSmall":"vSignItemSmall"}],vSignItemLarge:[function(e,t,o){"use strict";cc._RF.push(t,"1b312j5gzxD9oB4oW1P+cae","vSignItemLarge");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelAmount1=null,t.labelAmount2=null,t.labelAmount3=null,t.labelTime=null,t.node1=null,t.node2=null,t.nodeAdd=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteIcon3=null,t.spriteMask=null,t.spriteReceived=null,t.spriteSignNow=null,t.labelTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSignItemLarge"},t.prototype._getResourceBindingConfig=function(){return{CC_labelAmount1:{varname:"labelAmount1",vartype:cc.Label},CC_labelAmount2:{varname:"labelAmount2",vartype:cc.Label},CC_labelAmount3:{varname:"labelAmount3",vartype:cc.Label},CC_labelTime:{varname:"labelTime",vartype:cc.Label},CC_node1:{varname:"node1",vartype:cc.Node},CC_node2:{varname:"node2",vartype:cc.Node},CC_nodeAdd:{varname:"nodeAdd",vartype:cc.Node},CC_spriteIcon1:{varname:"spriteIcon1",vartype:cc.Sprite},CC_spriteIcon2:{varname:"spriteIcon2",vartype:cc.Sprite},CC_spriteIcon3:{varname:"spriteIcon3",vartype:cc.Sprite},CC_spriteMask:{varname:"spriteMask",vartype:cc.Sprite},CC_spriteReceived:{varname:"spriteReceived",vartype:cc.Sprite},CC_spriteSignNow:{varname:"spriteSignNow",vartype:cc.Sprite},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label}}},t.prototype.fillExtraData=function(){this.labelAmount2.string=""},t}(e("./vSignItemSmall").default);o.default=a,cc._RF.pop()},{"./vSignItemSmall":"vSignItemSmall"}],vSignItemSmall:[function(e,t,o){"use strict";cc._RF.push(t,"7880fVZQ/JLjYP0xrV1vpck","vSignItemSmall");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrSign"),s=e("../../manager/mgrCfg"),l=e("../../Const"),c=e("../../../ulframework/utils/Tools"),u=e("../../manager/mgrI18n"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelAmount1=null,t.labelAmount2=null,t.labelTime=null,t.node1=null,t.node2=null,t.nodeAdd=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteMask=null,t.spriteReceived=null,t.spriteSignNow=null,t.labelTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSignItemSmall"},t.prototype._getResourceBindingConfig=function(){return{CC_labelAmount1:{varname:"labelAmount1",vartype:cc.Label},CC_labelAmount2:{varname:"labelAmount2",vartype:cc.Label},CC_labelTime:{varname:"labelTime",vartype:cc.Label},CC_node1:{varname:"node1",vartype:cc.Node},CC_node2:{varname:"node2",vartype:cc.Node},CC_nodeAdd:{varname:"nodeAdd",vartype:cc.Node},CC_spriteIcon1:{varname:"spriteIcon1",vartype:cc.Sprite},CC_spriteIcon2:{varname:"spriteIcon2",vartype:cc.Sprite},CC_spriteMask:{varname:"spriteMask",vartype:cc.Sprite},CC_spriteReceived:{varname:"spriteReceived",vartype:cc.Sprite},CC_spriteSignNow:{varname:"spriteSignNow",vartype:cc.Sprite},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUI(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUI=function(){},t.prototype.fillData=function(){if(this.isResourceLoaded()){var e=this.context.day,t=i.default.getSignDay(),o=i.default.getSignIndex(),n=null;e<t?(this.setRemainTime(0),n=s.default.get_from_sign_db(e,0),this.spriteReceived.node.active=!0,this.spriteMask.node.active=!0,this.spriteSignNow.node.active=!1):e==t?(n=s.default.get_from_sign_db(e,o))?(this.setRemainTime(i.default.getRemainTime()),this.spriteReceived.node.active=!1,this.spriteMask.node.active=!1,this.spriteSignNow.node.active=i.default.getState()==l.SignState.canSign):(this.setRemainTime(0),n=s.default.get_from_sign_db(e,0),this.spriteReceived.node.active=!0,this.spriteMask.node.active=!0,this.spriteSignNow.node.active=!1):(this.setRemainTime(0),n=s.default.get_from_sign_db(e,0),this.spriteReceived.node.active=!1,this.spriteMask.node.active=!1,this.spriteSignNow.node.active=!1),this.labelTitle.string=u.default.getText(n.titleSpr);var a=n.rewards,r=a.length<=1;this.nodeAdd.active=!r,this.node2.active=!r,this.labelAmount1.fontSize=r?20:16,this.labelAmount2.fontSize=r?20:16,this.node2.parent.x=r?0:10;for(var d=0;d<a.length;d++){var p=a[d],f=p[0],h=p[1],g=s.default.get_from_item_template_db(f),_=n.customIcons[d]?n.customIcons[d]:g.icon;this["spriteIcon"+(d+1)].loadSpriteFrame(_),this["labelAmount"+(d+1)].string=h<=1?"":c.default.formatNumToStr(h)}this.fillExtraData()}},t.prototype.fillExtraData=function(){},t.prototype.setRemainTime=function(e){if(e<=0)this.spriteMask.node.active=!1,this.labelTime.node.active=!1;else{this.spriteMask.node.active=!0,this.labelTime.node.active=!0;var t=Math.floor(e/3600),o=Math.floor(e/60)%60,n=e%60;this.labelTime.string=ul.format("%02d:%02d:%02d",t,o,n)}},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.day)},t=a([p],t)}(r.default));o.default=f,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrSign":"mgrSign"}],vSuitPartAwardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"cb268OkxJtBX5qooyhDMur9","vSuitPartAwardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonCancel=null,t.buttonTake=null,t.labelNotice=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSuitPartAwardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCancel:{varname:"buttonCancel",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonCancel"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_labelNotice:{varname:"labelNotice",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.onTouchButtonCancel=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonTake=function(e){e.isClick()&&s.default.triggerAdEvent("wrap_suit_free",{suitId:this.context.suitId})},t.prototype.onMsgAdEventSuccessd=function(e){"wrap_suit_free"==e.adEventId&&this.closeDialog()},t=a([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vSuitPartItem:[function(e,t,o){"use strict";cc._RF.push(t,"4366bXDTcFEuId1MJif3JRm","vSuitPartItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("./vLevelBar"),l=e("../../manager/mgrPlayer"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrPart"),p=e("../../manager/mgrAchievement"),f=e("../../Const"),h=e("../../manager/mgrTip"),g=e("../../manager/mgrI18n"),_=cc._decorator,m=_.ccclass,v=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonItem=null,t.labelAchievementDesc=null,t.nodeAchievement=null,t.nodeGradeGet=null,t.nodeHad=null,t.nodeHeart=null,t.nodeSignGet=null,t.spriteIcon=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSuitPartItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonItem:{varname:"buttonItem",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonItem"}]},CC_labelAchievementDesc:{varname:"labelAchievementDesc",vartype:cc.Label},CC_nodeAchievement:{varname:"nodeAchievement",vartype:cc.Node},CC_nodeGradeGet:{varname:"nodeGradeGet",vartype:cc.Node},CC_nodeHad:{varname:"nodeHad",vartype:cc.Node},CC_nodeHeart:{varname:"nodeHeart",vartype:cc.Node},CC_nodeSignGet:{varname:"nodeSignGet",vartype:cc.Node},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new s.default;e.parent=this.nodeHeart,this.levelBar=e},t.prototype.fillData=function(e){this.context.partId=e,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.partId;if(e){var t=c.default.get_from_part_db(e);if(t&&(this.spriteIcon.loadSpriteFrame(t.icon),this.nodeHad.active=l.default.getItemAmount(e)>0,this.levelBar&&this.levelBar.setLevel(5,t.level),this.nodeSignGet.active=l.default.getItemAmount(e)<=0&&d.default.isPartSignGet(e),this.nodeGradeGet.active=l.default.getItemAmount(e)<=0&&d.default.isPartGradeGet(e),this.nodeAchievement.active=!1,this.context.bSelectPart)){this.nodeAchievement.active=!0;var o=p.default.getAchievement(e);if(o)switch(o.state){case f.AchievementState.unlocked:this.labelAchievementDesc.string=o.template.desc;break;case f.AchievementState.finished:this.labelAchievementDesc.string="\u53ef\u9886\u53d6";break;default:this.nodeAchievement.active=!1}}}},t.prototype.onTouchButtonItem=function(e){if(e.isClick())if(this.context.bSelectPart){var t=this.context.partId,o=p.default.getAchievement(t);if(o)switch(o.state){case f.AchievementState.unlocked:h.default.showMsgTip(ul.format(g.default.getText("ui.78")+g.default.getText("ui.75"),o.template.data1));break;case f.AchievementState.finished:var n=p.default.obtainReward(t,g.default.getText("ui.76")),a=n[0],r=n[1];h.default.addGotItemTip(a,r);break;default:h.default.showMsgTip(g.default.getText("ui.55"))}}else u.default.openDialog("vPartDetailDialog",{partId:this.context.partId})},t=a([m],t)}(i.default));o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","./vLevelBar":"vLevelBar"}],vSuitRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"ea470frIUtIhb/8C/1zExVv","vSuitRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),r=e("../../../ulframework/view/DialogBase"),i=e("../../manager/mgrCfg"),s=e("../../manager/mgrPart"),l=e("../../manager/mgrAd"),c=e("../../../ulframework/utils/Tools"),u=e("../../manager/mgrI18n"),d="double_reward_suit",p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdCancel=null,t.buttonAdSure=null,t.buttonClose=null,t.buttonNoAd=null,t.labelAdCancel=null,t.labelAdSure=null,t.labelDesc=null,t.labelName=null,t.nodeAd=null,t.nodeNoAd=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSuitRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdCancel:{varname:"buttonAdCancel",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAdCancel"}]},CC_buttonAdSure:{varname:"buttonAdSure",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAdSure"}]},CC_buttonClose:{varname:"buttonClose",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonNoAd:{varname:"buttonNoAd",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonNoAd"}]},CC_labelAdCancel:{varname:"labelAdCancel",vartype:cc.Label},CC_labelAdSure:{varname:"labelAdSure",vartype:cc.Label},CC_labelDesc:{varname:"labelDesc",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_nodeAd:{varname:"nodeAd",vartype:cc.Node},CC_nodeNoAd:{varname:"nodeNoAd",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.fillAd(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.fillData=function(){var e=this.context.suitId,t=i.default.get_from_suit_db(e);if(t){var o=s.default.getSuitRewardCount();this.labelName.string=u.default.getText(t.name),this.labelDesc.string=c.default.formatNumToStr(o),this.labelAdCancel.string="+"+c.default.formatNumToStr(o),this.labelAdSure.string="+"+c.default.formatNumToStr(2*o)}},t.prototype.fillAd=function(){var e=l.default.preCheckCanTriggerAdEventNoCd(d);this.nodeAd.active=e,this.nodeNoAd.active=!e,this.buttonClose.node.active=e,e&&(this.labelDesc.string=c.default.formatNumToStr(s.default.getSuitRewardCount())+"*2")},t.prototype.onTouchButtonAdCancel=function(e){e.isClick()&&(this.closeDialog(!0),s.default.takeSuitReward(this.context.suitId))},t.prototype.onTouchButtonAdSure=function(e){e.isClick()&&l.default.triggerAdEvent(d,null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.closeDialog(!0),s.default.takeSuitReward(this.context.suitId))},t.prototype.onTouchButtonNoAd=function(e){e.isClick()&&(this.closeDialog(!0),s.default.takeSuitReward(this.context.suitId))},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==d&&(this.closeDialog(!0),s.default.takeSuitReward(this.context.suitId,2))},t}(r.default);o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPart":"mgrPart"}],vSuitRoleItem:[function(e,t,o){"use strict";cc._RF.push(t,"33a397rw/VCVrBrQdPfTEe1","vSuitRoleItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("./vComboAvatar"),c=e("../../manager/mgrPart"),u=e("../../manager/mgrDirector"),d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonReward=null,t.labelName=null,t.labelProcess=null,t.nodeAvatar=null,t.nodeFull=null,t.nodeName=null,t.nodeProgress=null,t.nodeReward=null,t.progressBarProgress=null,t._comboAvatar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSuitRoleItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonReward:{varname:"buttonReward",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonReward"}]},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_labelProcess:{varname:"labelProcess",vartype:cc.Label},CC_nodeAvatar:{varname:"nodeAvatar",vartype:cc.Node},CC_nodeFull:{varname:"nodeFull",vartype:cc.Node},CC_nodeName:{varname:"nodeName",vartype:cc.Node},CC_nodeProgress:{varname:"nodeProgress",vartype:cc.Node},CC_nodeReward:{varname:"nodeReward",vartype:cc.Node},CC_progressBarProgress:{varname:"progressBarProgress",vartype:cc.ProgressBar}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this._comboAvatar=new l.default,this._comboAvatar.parent=this.nodeAvatar},t.prototype.fillData=function(e){this.context.suitId=e,this.isResourceLoaded()&&this.refresh()},t.prototype.refresh=function(){var e=this.context.suitId;if(e){var t=s.default.get_from_suit_db(e);if(t){var o=this.context.bSelectPart,n=c.default.getSuitProgress(e),a=n[0],r=n[1];if(this.labelProcess.string=a+"/"+r,this.progressBarProgress.progress=a/r,this.nodeProgress.active=!o,this._comboAvatar.fillByPartIds(t.partIds),this._comboAvatar.refresh(),this.nodeFull.active=c.default.isSuitFull(e)&&!o,this.nodeReward.active=c.default.canTakeSuitReward(e)&&!o,this.nodeReward.active){this.nodeReward.stopAllActions();this.nodeReward.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(.5))))}}}},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){var t=this.context.suitId;t&&u.default.openDialog("vSuitRewardDialog",{suitId:t})}},t=a([p],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPart":"mgrPart","./vComboAvatar":"vComboAvatar"}],vSuitScene:[function(e,t,o){"use strict";cc._RF.push(t,"af01dy2jjdCXaifyz0K10Ya","vSuitScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/view/ReuseLayouterHBox"),c=e("../../../ulframework/view/ReusePageView"),u=e("../node/vSuitRoleItem"),d=e("../../../ulframework/utils/Tools"),p=e("../../../ulframework/view/ReuseList"),f=e("../node/vSuitPartItem"),h=e("../../manager/mgrCfg"),g=e("../../../ulframework/view/ReuseLayouterHGrid"),_=e("../../../ulframework/utils/Timer"),m=e("../../manager/mgrPart"),v=e("../../manager/mgrGuide"),y=e("../../manager/mgrAd"),C=e("../../manager/mgrPlayer"),b=e("../../Const"),S=e("../../manager/mgrShop"),R=e("../../manager/mgrTip"),T=e("../../manager/mgrChannel"),L=e("../../manager/mgrI18n"),w=cc._decorator,A=w.ccclass,D=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdd=null,t.buttonBack=null,t.buttonExchange=null,t.buttonExchangeAd=null,t.buttonPvp=null,t.labelCost=null,t.labelGold=null,t.nodeBottom=null,t.nodeCost=null,t.nodeLeft=null,t.nodeLeftTop=null,t.nodeListPart=null,t.nodeListRole=null,t.nodeParticle=null,t.nodeRight=null,t.nodeTop=null,t.spritePrint=null,t.listRole=null,t.listPart=null,t.curSuitId=0,t.timeFull=0,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vSuitScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdd:{varname:"buttonAdd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonAdd"}]},CC_buttonBack:{varname:"buttonBack",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonBack"}]},CC_buttonExchange:{varname:"buttonExchange",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonExchange"}]},CC_buttonExchangeAd:{varname:"buttonExchangeAd",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonExchangeAd"}]},CC_buttonPvp:{varname:"buttonPvp",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonPvp"}]},CC_labelCost:{varname:"labelCost",vartype:cc.Label},CC_labelGold:{varname:"labelGold",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeCost:{varname:"nodeCost",vartype:cc.Node},CC_nodeLeft:{varname:"nodeLeft",vartype:cc.Node},CC_nodeLeftTop:{varname:"nodeLeftTop",vartype:cc.Node},CC_nodeListPart:{varname:"nodeListPart",vartype:cc.Node},CC_nodeListRole:{varname:"nodeListRole",vartype:cc.Node},CC_nodeParticle:{varname:"nodeParticle",vartype:cc.Node},CC_nodeRight:{varname:"nodeRight",vartype:cc.Node},CC_nodeTop:{varname:"nodeTop",vartype:cc.Node},CC_spritePrint:{varname:"spritePrint",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.uiFadeIn(),this.buildUi(),this.fillData(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_PART_GET:this.onMsgPartGet,MSG_ADV_VALID_COUNT:this.onMsgAdValidCount,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_RECORD_UI_REFRESH:this.onMsgRecordUiRefresh,MSG_SUIT_FULL:this.onMsgSuitFull}),this._tryGuide(),y.default.trigMutexBannerIntersitial("ban_suit",this,"wrap_suit")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){y.default.closeAdv("ban_suit"),e.prototype.onDestroy.call(this)},t.prototype._tryGuide=function(){v.default.registerGuideNode("vSuitScene.buttonExchange",this.buttonExchange.node),v.default.registerGuideNode("vSuitScene.buttonBack",this.buttonBack.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vSuitScene.onResourceLoaded"})},t.prototype.uiFadeIn=function(){var e=this;this.nodeTop.y=s.default.height/2,this.nodeBottom.y=-s.default.height/2+160,this.nodeRight.x=s.default.width/2,this.nodeLeft.x=-s.default.width/2,this.nodeLeftTop.x=-s.default.width/2,this.nodeLeftTop.y=s.default.height/2,s.default.isDeviceOverHeight()&&(this.nodeTop.y=s.default.height/2-50),this.nodeTop.__op=this.nodeTop.position,this.nodeBottom.__op=this.nodeBottom.position,this.nodeRight.__op=this.nodeRight.position,this.nodeLeft.__op=this.nodeLeft.position,this.nodeLeftTop.__op=this.nodeLeftTop.position,this.nodeTop.y+=200,this.nodeRight.x+=200,this.nodeLeft.x-=200,this.nodeLeftTop.x-=200;_.default.callLater(.2,function(){if(e.nodeTop.runAction(cc.moveTo(.2,e.nodeTop.__op)),e.nodeRight.runAction(cc.moveTo(.2,e.nodeRight.__op)),e.nodeLeft.runAction(cc.moveTo(.2,e.nodeLeft.__op)),e.nodeLeftTop.runAction(cc.moveTo(.2,e.nodeLeftTop.__op)),e.context.suitIndex)e.listRole.scrollToIndex(e.context.suitIndex);else{var t=m.default.nearlyNotFullSuit();e.listRole.scrollToIndex(t)}},this)},t.prototype.buildUi=function(){this.spritePrint.node.active=T.default.isChannel4399();var e=this.nodeListRole.getContentSize(),t=(new l.default).setCellSize(328,600*.82).setGap(5).setPending((e.width-328)/2),o=new c.default;o.parent=this.nodeListRole,o.setContentSize(this.nodeListRole.getContentSize()),o.setLayouter(t),o.setCreator(function(e){var t=new u.default;t.parent=e,e.item=t}),o.setSetter(function(e,t){e.item.fillData(t.id)}),o.setOnCellMovedListener(function(t,o,n){var a=d.default.scaleInRange(o,0,1,.82,1);t.item.setScale(a),t.zIndex=e.width-n}),o.setOnContainerMoved(this.onListContainerMoved.bind(this)),this.listRole=o;var n=(new g.default).setCellSize(80,80).setRows(2).setGap(10,10).setPending(10),a=new p.default;a.parent=this.nodeListPart,a.setContentSize(this.nodeListPart.getContentSize()),a.setLayouter(n),a.setElasticEnabled(!1),a.setCreator(function(e){var t=new f.default;t.parent=e,e.item=t}),a.setSetter(function(e,t){e.item.fillData(t)}),this.listPart=a},t.prototype.fillData=function(){var e=[];h.default.forDb_from_suit_db(function(t,o){e.push(o)}),this.listRole.setDatas(e),this.updateLabelGold(),this.refreshBtns()},t.prototype.loadPartList=function(e){if(this.curSuitId!=e){this.curSuitId=e;var t=h.default.get_from_suit_db(e);if(t){var o=this.listPart.layouter.getContainerSize(t.partIds.length);this.nodeListPart.width=Math.min(this.nodeBottom.width-20,o.width),this.listPart.setContentSize(this.nodeListPart.getContentSize()),this.listPart.setDatas(t.partIds),this.listPart.jumpToHead(),this.refreshCost(),this.refreshAd()}}},t.prototype.refreshCost=function(){var e=this.curSuitId;if(e){var t=h.default.get_from_suit_db(e),o=m.default.getSuitProgress(e),n=o[0];if(n==o[1])this.buttonExchange.node.parent.active=!1,this.buttonPvp.node.active=!0,this.labelCost.string="0";else{this.buttonExchange.node.parent.active=!0,this.buttonPvp.node.active=!1,this.labelCost.string=d.default.formatNumToStr(t.costArr[n]);var a=m.default.getEchangeChance(e);a>0&&(this.labelCost.string=ul.format(L.default.getText("msg.24"),a))}var r=m.default.isGoldEnoughToExchange(e)||m.default.getEchangeChance(e)>0;R.default.setCountBadgeValue(this.buttonExchange.node,r?1:0,-10,-5)}else this.labelCost.string=""},t.prototype.updateLabelGold=function(){this.labelGold.string=d.default.formatNumToStr(C.default.getItemAmount(b.default.ITEM_ID_GOLD))},t.prototype.refreshBtns=function(){this.buttonAdd.node.active=S.default.canSupplyItem()},t.prototype.refreshAd=function(){var e=this.curSuitId,t=h.default.get_from_suit_db(e),o=m.default.getSuitProgress(e),n=o[0],a=(o[1],m.default.isGoldEnoughToExchange(e)||m.default.getEchangeChance(e)>0),r=m.default.canShowAdExchange();this.buttonExchangeAd.node.active=!a&&r&&!y.default.isAdCareful(),this.buttonExchange.node.active=!(!a&&r&&!y.default.isAdCareful());var i=t.costArr[n];this.nodeCost.active=!0,i||(this.buttonExchangeAd.node.active=!1,this.buttonExchange.node.active=!1,this.nodeCost.active=!1)},t.prototype.onTouchButtonBack=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vSuitScene.buttonBack.click"}),s.default.warpSceneWithEffect("vHubScene"))},t.prototype.onTouchButtonExchange=function(e){e.isClick()&&this.curSuitId&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vSuitScene.buttonExchange.click"}),m.default.randomExchangePart(this.curSuitId))},t.prototype.onTouchButtonAdd=function(e){e.isClick()&&S.default.tryOpenShop()},t.prototype.onTouchButtonExchangeAd=function(e){e.isClick()&&this.curSuitId&&y.default.triggerAdEvent("free_exchange",{suitId:this.curSuitId},!0)},t.prototype.onTouchButtonPvp=function(e){e.isClick()&&(d.default.time()-this.timeFull<3||s.default.openDialog("vArenaStagePreviewDialog",{suitId:this.curSuitId},!0))},t.prototype.onListContainerMoved=function(e,t){if(0!=t.length){var o=e.getListCenterInScrollX(),n=e.calcNearestIndex(),a=e.getDatas()[n];this.loadPartList(a.id);var r=e.getCellByDataIndex(n),i=r.getContentSize(),s=o-r.getPosition().x;this.nodeListPart.x=-s;var l=d.default.scaleInRange(Math.abs(s),5,i.width,0,Math.PI/2),c=d.default.scaleInRange(Math.sin(l),0,.6,255,0);this.nodeListPart.opacity=c}},t.prototype.onMsgItemAmountChanged=function(e){this.listRole.refreshActiveCells(),this.listPart.refreshActiveCells(),this.refreshCost(),e.itemId==b.default.ITEM_ID_GOLD&&this.updateLabelGold()},t.prototype.onMsgAdValidCount=function(e){this.refreshBtns()},t.prototype.onMsgAdEventSuccessd=function(e){this.refreshBtns()},t.prototype.onMsgRecordUiRefresh=function(){this.updateLabelGold(),this.refreshCost(),this.listPart.refreshActiveCells(),this.listRole.refreshActiveCells()},t.prototype.onMsgPartGet=function(){this.refreshCost()},t.prototype.onMsgSuitFull=function(){for(var e=this.listPart.cells,t=[],o=0;o<e.length;o++){var n=e[o];t.push(n.parent.convertToWorldSpaceAR(n.getPosition()))}s.default.openDialog("vSuitShowDialog",{posArr:t,suitId:this.curSuitId}),this.timeFull=d.default.time()},t=a([A],t)}(i.default));o.default=D,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","../../../ulframework/view/ReuseLayouterHGrid":"ReuseLayouterHGrid","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/ReusePageView":"ReusePageView","../../../ulframework/view/SceneBase":"SceneBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPart":"mgrPart","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrShop":"mgrShop","../../manager/mgrTip":"mgrTip","../node/vSuitPartItem":"vSuitPartItem","../node/vSuitRoleItem":"vSuitRoleItem"}],vSuitShowDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f7b6apJUNxMaLBvcwHYpJtZ","vSuitShowDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrDirector"),c=e("../node/vComboAvatar"),u=e("../../../ulframework/utils/Tools"),d=e("../../../ulframework/utils/Timer"),p=e("../../manager/mgrSound"),f=e("../../manager/mgrOfflinePartRank"),h=e("../../manager/mgrSdk"),g=e("../../manager/mgrTip"),_=e("../../manager/mgrRole"),m=e("../../manager/mgrChannel"),v=[1001,1002,1003,1010,1014,1018,1021,1024],y=0,C=cc._decorator,b=C.ccclass,S=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonShare=null,t.buttonShareClose=null,t.buttonVideoShare=null,t.labelPartNum=null,t.labelRank=null,t.labelShareDesc=null,t.labelShareReward=null,t.labelSuitReward=null,t.nodeAnim=null,t.nodeAvatar=null,t.nodeInfo=null,t.nodeShare=null,t.nodeSuitRewardGold=null,t._sprGroup=[],t._comboAvatar=null,t._actionFinished=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSuitShowDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonShare:{varname:"buttonShare",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonShare"}]},CC_buttonShareClose:{varname:"buttonShareClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonShareClose"}]},CC_buttonVideoShare:{varname:"buttonVideoShare",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonVideoShare"}]},CC_labelPartNum:{varname:"labelPartNum",vartype:cc.Label},CC_labelRank:{varname:"labelRank",vartype:cc.Label},CC_labelShareDesc:{varname:"labelShareDesc",vartype:cc.Label},CC_labelShareReward:{varname:"labelShareReward",vartype:cc.Label},CC_labelSuitReward:{varname:"labelSuitReward",vartype:cc.Label},CC_nodeAnim:{varname:"nodeAnim",vartype:cc.Node},CC_nodeAvatar:{varname:"nodeAvatar",vartype:cc.Node},CC_nodeInfo:{varname:"nodeInfo",vartype:cc.Node},CC_nodeShare:{varname:"nodeShare",vartype:cc.Node},CC_nodeSuitRewardGold:{varname:"nodeSuitRewardGold",vartype:cc.Node}}},t.prototype.onLoad=function(){for(var t=this,o=function(e){d.default.callLater(.05*e,function(){var o=s.default.get_from_suit_db(v[e]);if(o){var n=new c.default;n.parent=t,n.fillByPartIds(o.partIds),n.refresh(),n.y=2e3,n.scale=.1}},n)},n=this,a=0;a<v.length;a++)o(a);d.default.callLater(.05*(v.length+1),function(){e.prototype.onLoad.call(t)},this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.buildUi(),this.fillData(),this.hideOther(),y=u.default.time(),m.default.canUseVideoRecord()&&h.default.recordGameVidoe("start",120),this.playRandomSuit(),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgSdkShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult})},t.prototype.isClickShadowClose=function(){return!1},t.prototype.____getSuitPartUrls=function(){for(var e="",t=0;t<v.length;t++){var o=v[t],n=s.default.get_from_suit_db(o);if(!n)return;for(var a=0;a<n.partIds.length;a++)for(var r=n.partIds[a],i=s.default.get_from_part_db(r),l=0;l<i.resources.length;l++)e+='"'+i.resources[l]+'",\n';e+="\n"}cc.log(e)},t.prototype.buildUi=function(){var e=this.context.suitId,t=s.default.get_from_suit_db(e);if(t){var o=this.context.posArr;if(o.length==t.partIds.length){for(var n=0;n<o.length;n++){var a=o[n],r=t.partIds[n],i=s.default.get_from_part_db(r);if(i){var u=l.default.createSpriteNode(i.icon);u.parent=this,u.setPosition(this.convertToNodeSpaceAR(a)),u.scale=.8,u.opacity=0,this._sprGroup.push({sprNode:u,partId:r})}}this._comboAvatar=new c.default,this._comboAvatar.parent=this.nodeAvatar,this._comboAvatar.refresh()}else this.closeDialog(!0)}else this.closeDialog(!0)},t.prototype.fillData=function(){f.default.getAllDatas();f.default.getOwnData();var e=this.context.suitId;if(s.default.get_from_suit_db(e)){this.labelPartNum.string="0",this.labelRank.string="0",this.labelSuitReward.string=u.default.formatNumToStr(this.getSuitRewardCount());var t=m.default.canShare(),o=m.default.canUseVideoRecord();if(o){var n=m.default.getVideoShareDesc(),a=n[0],r=(n[1],n[2]);this.labelShareDesc.string=a,this.labelShareReward.string=u.default.formatNumToStr(r)}else{var i=m.default.getShareDesc();a=i[0],i[1],r=i[2];this.labelShareDesc.string=a,this.labelShareReward.string=u.default.formatNumToStr(r)}this.buttonVideoShare.node.active=o,this.buttonShare.node.active=!o&&t}},t.prototype.hideOther=function(){this.nodeInfo.active=!1,this.nodeShare.active=!1,this.buttonClose.node.active=!1},t.prototype.playRandomSuit=function(){for(var e=[],t=[],o=this.context.suitId,n=0;n<v.length;n++){var a=v[n];a!=o&&e.push(a)}if(!(e.length<7)){for(n=0;n<7;n++){var r=u.default.random(0,e.length-1),i=e[r];e.splice(r,1),t.push(i)}this._comboAvatar.setToDefault(),this._comboAvatar.refresh(),this.playIcon()}},t.prototype.changeSuit=function(e){var t=s.default.get_from_suit_db(e);t&&(this._comboAvatar.fillByPartIds(t.partIds),this._comboAvatar.refresh())},t.prototype.playIcon=function(){for(var e=this,t=.6,o=this.context.posArr,n=function(n){var r=a._sprGroup[n],i=s.default.get_from_part_db(r.partId),l=o[n],c=a._comboAvatar.convertToWorldSpaceAR(i.resourcePoses[0]);a.playBezierFlyIconEffect(t,r.sprNode,l,c,function(){e._comboAvatar.partReplace(r.partId),e._comboAvatar.refresh(),n==e._sprGroup.length-1&&e.playAnim()},a),t+=.6},a=this,r=0;r<this._sprGroup.length;r++)n(r)},t.prototype.playBezierFlyIconEffect=function(e,t,o,n,a,r,i){void 0===a&&(a=null),void 0===r&&(r=null),void 0===i&&(i=.8);var s=r,l=s.convertToNodeSpaceAR(o),c=s.convertToNodeSpaceAR(n);c.x+=u.default.random(-20,20),c.y+=u.default.random(-20,20);var d=cc.v2((l.x+c.x)/2,(l.y+c.y)/2),f=Math.abs(c.y-l.y);u.default.random(100)<=50?(d.x+=u.default.random(-100,-200),d.y+=u.default.random(.4*-f,.4*f)):(d.x+=u.default.random(100,200),d.y+=u.default.random(.4*-f,.4*f));for(var h=[l.clone(),d.clone(),c.clone()],_=0;_<h.length;_++){var m=h[_];m.x-=l.x,m.y-=l.y}t.opacity=0,t.scale=1*i,t.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){}),cc.fadeIn(0),cc.spawn(cc.cardinalSplineBy(1,h,0).easing(cc.easeBezierAction(0,.6,.3,1)),cc.sequence(cc.scaleTo(.3,1.5*i),cc.delayTime(.4),cc.scaleTo(.3,1*i)).easing(cc.easeBezierAction(0,.6,.3,1))),cc.callFunc(function(){t.active=!1;var e=t.convertToWorldSpaceAR(cc.v2(0,0));g.default.playParticleOnce("p_ui_upgrade",e.x,e.y,1),p.default.play(108),a instanceof Function&&a()})))},t.prototype.playAnim=function(){this.nodeAnim.active=!0;var e=this.nodeAnim.getComponent(cc.Animation);e.play(e.defaultClip.name),e.on("finished",this.playIconFinish,this)},t.prototype.playIconFinish=function(){var e=this;this.nodeAnim.active=!1;this.nodeInfo.active=!0,this.nodeInfo.opacity=0,this.nodeInfo.runAction(cc.fadeIn(.5)),(m.default.canShare()||m.default.canUseVideoRecord())&&(this.nodeShare.active=!0,this.nodeShare.opacity=0,this.nodeShare.runAction(cc.sequence(cc.delayTime(2),cc.fadeIn(.5)))),this.buttonClose.node.active=!0,this.buttonClose.node.opacity=0,this.buttonClose.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){m.default.canUseVideoRecord()&&h.default.recordGameVidoe("stop")}),cc.fadeIn(.5))),this.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e._actionFinished=!0;var t=u.default.time()-y+1.5;cc.log("time ",t)})));var t=f.default.getOwnData();t&&(this.labelPartNum.node.runAction(ul.actionFloat(2,0,t.partNum,function(t){e.labelPartNum.string=Math.floor(t).toString()})),this.labelRank.node.runAction(ul.actionFloat(2,0,t.rank,function(t){e.labelRank.string=Math.floor(t).toString()})))},t.prototype.getSuitRewardCount=function(){return 10*_.default.getOneMinuteIncome()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this._actionFinished&&this.closeDialog()},t.prototype.onTouchButtonShare=function(e){e.isClick()&&h.default.shareImage("","","","")},t.prototype.onTouchButtonShareClose=function(e){e.isClick()&&this._actionFinished&&this.closeDialog()},t.prototype.onTouchButtonVideoShare=function(e){e.isClick()&&h.default.shareGameVideo()},t.prototype.onMsgSdkShareResult=function(e){e.bSuccess&&(this.nodeShare.active=!1)},t.prototype.onMsgSdkShareVideoResult=function(e){e.bSuccessful&&(this.nodeShare.active=!1)},t=a([b],t)}(i.default));o.default=S,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrOfflinePartRank":"mgrOfflinePartRank","../../manager/mgrRole":"mgrRole","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vComboAvatar":"vComboAvatar"}],vTouchFlowerDialog:[function(e,t,o){"use strict";cc._RF.push(t,"87fe6LppndBIatGZqm0Xj0O","vTouchFlowerDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrTip"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonTake=null,t.labelContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vTouchFlowerDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:{varname:"buttonClose",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_buttonTake:{varname:"buttonTake",vartype:r.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonTake"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),l.default.tryAddGuessYouLikeNode(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){},t.prototype.onTouchButtonTake=function(e){e.isClick()&&s.default.triggerAdEvent("touch_flower",null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.closeDialog(),this.sendMsg("MSG_AD_TOUCH_FLOWER_CLOSE",{roleId:this.context.roleId,bFirstCreate:this.context.bFirstCreate}))},t.prototype.onMsgAdEventSuccessd=function(e){"touch_flower"==e.adEventId&&this.closeDialog()},t=a([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrTip":"mgrTip"}],vUpdaterSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"c62363WFOdOTol2y4eu214a","vUpdaterSceneBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var a=e("../view/SceneBase"),r=e("../utils/Timer"),i=e("../../game/view/node/LayerColorTwo"),s=e("../../game/manager/mgrDirector"),l=e("../../game/Const"),c=cc._decorator,u=(c.ccclass,c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patchInfo=null,t.localPid=null,t.patchs=null,t.patchIdx=null,t.TIMEOUT=5,t.requestPatchInfoXhr=null,t.timeoutTimer=null,t.bNeedRestart=!1,t.bGameStarted=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){t.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},t.prototype.onUiMsg=function(e,t){},t.prototype.needPlayLogo=function(){return"true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE")?(cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1):!!this.getLogoTextures()},t.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var o=e.CONF;if(!o)return null;var n=o.LOGO_TEXTURES;return Array.isArray(n)?n:null},t.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var o=this.getLogoTextures(),n=o.length-1;n>=0;n--){var a=o[n];cc.loader._getResUuid(a)||(cc.warn(ul.format("vUpdaterSceneBase.playLogo logoTexture not found! fileName=[%s]",a)),o.splice(n,1))}if(o.length<=0)e();else{this.nodeResource.active=!1;var r=new i.default(cc.color(0,0,0,255));r.parent=this,r.setContentSize(s.default.size);for(n=0;n<o.length;n++){a=o[n];var l=s.default.createSpriteNode(a);l.parent=this,l.opacity=0;var c=[];n>0&&c.push(cc.delayTime(3*n)),c.push(cc.fadeIn(.6)),c.push(cc.delayTime(1.8)),c.push(cc.fadeOut(.6)),n==o.length-1&&c.push(cc.callFunc(function(){t.nodeResource.active=!0,r.destroy(),e()}));var u=cc.sequence(c);l.runAction(u)}}},t.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)l.default.GAME_VERSION=t;else{var o=this.patchInfo.VERSION;o&&(cc.sys.localStorage.setItem("GAME_VERSION",o),l.default.GAME_VERSION=o)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},t.prototype.resetPatch=function(e,t,o,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var a=this.getPatchPath();jsb.fileUtils.isDirectoryExist(a)&&jsb.fileUtils.removeDirectory(a),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n),cc.sys.localStorage.setItem("GAME_VERSION",""),this.bNeedRestart=!0},t.prototype.prepareUpdate=function(){cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=e;var o=cc.sys.localStorage.getItem("GAME_VERSION");o||(o=e.VERSION),l.default.GAME_VERSION=o;var n=e.B_ID,a=e.P_ID,r=e.CHANNEL,i=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),s=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),c=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),u=cc.sys.localStorage.getItem("PATCH_CHANNEL"),d=null;n!=i?d=ul.format("bid not match! package = %s, record = %d",n,i):r!=u?d=ul.format("channel not match! package = %s, record = %d",r,u):a!=c?d=ul.format("package pid not match! package = %s, record = %d",a,c):a>(isNaN(s)?0:s)&&(d=ul.format("package pid is higher! package = %s, record = %s",a,s)),d&&this.resetPatch(d,n,a,r);var p=null;(s=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(p=s,cc.log("use record pid",p)):(p=e.P_ID||0,cc.log("use patch_info pid",p)),this.localPid=p;var f=this.getPatchPath();if(!jsb.fileUtils.createDirectory(f))return cc.log("patchPath create faild!",f),void this.startGame();this.buildUi(),this.checkNewVersion()},t.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,o=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,t.CHANNEL,t.PATCH_INFO_FILENAME),n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(n.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",n.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",n.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()};n.open("GET",o),n.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=n,this.startTimeoutTimer(),n.send()},t.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var o=parseInt(e.P_ID)||0,n=this.localPid;cc.log("pid:",n,o),n>o&&(cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),this.startGame());for(var a=[],i=0;i<e.PATCH_LIST.length;i++){var s=e.PATCH_LIST[i];s.pid>n&&(cc.log("ADD PATCH ->",s.pid,s.version),a.push(s))}this.patchInfo=e,a.length>0?(this.patchs=a,this.patchIdx=0,r.default.callLater(.016,function(){t.downloadPatchByIndexed()},this)):this.startGame(!0)},t.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=this.patchs[this.patchIdx],o=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,e.CHANNEL,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",o,t.pid));var n={};n[ul.format("%d.zip",t.pid)]={size:0,md5:"",compressed:!0};var a=JSON.stringify({packageUrl:o,version:(this.localPid-1).toString()}),i=new jsb.Manifest(a,this.getPatchPath()),s=JSON.stringify({packageUrl:o,version:t.pid.toString(),assets:n}),l=new jsb.Manifest(s,this.getPatchPath()),c=new jsb.AssetsManager("",this.getPatchPath());c.setEventCallback(this.onAssetsManagerEvent.bind(this)),this.assetsManager=c;var u=new r.default(.016,-1,function(){cc.isValid(c)&&c.update()});this.assetsManagerTimer=u,c.loadLocalManifest(i,this.getPatchPath()),c.loadRemoteManifest(l),c.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),c.setVerifyCallback(function(e,t){return!0}),u.startAndBindToNode(this)},t.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},t.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},t.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},t.prototype.onTimeout=function(){this.startGame()},t.prototype.startTimeoutTimer=function(){var e=this,t=new r.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this)},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},t.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManager&&(this.assetsManager.setEventCallback(null),this.assetsManager=null)},t}(a.default));o.default=u,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColorTwo":"LayerColorTwo","../utils/Timer":"Timer","../view/SceneBase":"SceneBase"}],vUpdaterScene:[function(e,t,o){"use strict";cc._RF.push(t,"af3f0IjSjlP96U4ugYAGRJe","vUpdaterScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../manager/mgrDirector"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/updater/vUpdaterSceneBase"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelInformation=null,t.labelProgress=null,t.progressBarLoading=null,t.spriteLogo=null,t}return n(t,e),t.prototype._getResourceName=function(){return"scene/vUpdaterScene"},t.prototype._getResourceBindingConfig=function(){return{CC_labelInformation:{varname:"labelInformation",vartype:cc.Label},CC_labelProgress:{varname:"labelProgress",vartype:cc.Label},CC_progressBarLoading:{varname:"progressBarLoading",vartype:cc.ProgressBar},CC_spriteLogo:{varname:"spriteLogo",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){e.prototype.buildUi.call(this)},t.prototype.onUiMsg=function(t,o){if(e.prototype.onUiMsg.call(this,t,o),"UPDATER_UI_MSG_GET_VERSION"==t)this.progressBarLoading.progress=0,this.labelProgress.string="0%";else if("UPDATER_UI_MSG_DOWNLOAD_PROGRESS"==t){if(!o)return;var n=i.default.clampf(o.bytePercent||0,0,1),a=(i.default.clampf(o.filePercent||0,0,1),this.patchs.length),s=(n+this.patchIdx)/a;this.progressBarLoading.progress=s,this.labelProgress.string=ul.format("%d%",Math.round(100*s))}else"UPDATER_UI_MSG_DOWNLOAD_SUCCESS"==t?(this.progressBarLoading.progress=1,this.labelProgress.string="100%"):"UPDATER_UI_MSG_ENTER_NEXT_SCENE"==t&&r.default.enterScene("vLoadingScene")},t=a([c],t)}(s.default));o.default=u,cc._RF.pop()},{"../../../ulframework/updater/vUpdaterSceneBase":"vUpdaterSceneBase","../../../ulframework/utils/Tools":"Tools","../../manager/mgrDirector":"mgrDirector"}],vWarpSceneNode:[function(e,t,o){"use strict";cc._RF.push(t,"24990fPxkpB16/hRDlVyB4a","vWarpSceneNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(r<3?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrDirector"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTip=null,t.nodeBottom=null,t.nodeCloudLeftBottom=null,t.nodeCloudLeftTop=null,t.nodeCloudRightBottom=null,t.nodeCloudRightTop=null,t.nodeMask=null,t.originPos=[],t.duration=.8,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vWarpSceneNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTip:{varname:"labelTip",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeCloudLeftBottom:{varname:"nodeCloudLeftBottom",vartype:cc.Node},CC_nodeCloudLeftTop:{varname:"nodeCloudLeftTop",vartype:cc.Node},CC_nodeCloudRightBottom:{varname:"nodeCloudRightBottom",vartype:cc.Node},CC_nodeCloudRightTop:{varname:"nodeCloudRightTop",vartype:cc.Node},CC_nodeMask:{varname:"nodeMask",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(i.default.size),this.originPos.push(this.nodeCloudLeftTop.getPosition()),this.originPos.push(this.nodeCloudLeftBottom.getPosition()),this.originPos.push(this.nodeCloudRightTop.getPosition()),this.originPos.push(this.nodeCloudRightBottom.getPosition()),this.originPos.push(this.nodeBottom.getPosition()),this.duration=this.context.duration||this.duration,this.registerListeners({MSG_SCENE_LOADED:this.onMsgSceneLoaded}),this.playEffectIn()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.playEffectIn=function(){var e=this,t=this.nodeCloudLeftTop;t.stopAllActions(),t.setPosition(cc.v2(-i.default.size.width,i.default.size.height)),t.runAction(cc.sequence(cc.moveTo(this.duration,this.originPos[0]).easing(cc.easeIn(1.5)),cc.delayTime(.01),cc.callFunc(function(){cc.log("    fOnFadeInCompleted"),e.context.fOnFadeInCompleted instanceof Function&&e.context.fOnFadeInCompleted()}))),(t=this.nodeCloudLeftBottom).stopAllActions(),t.setPosition(cc.v2(-i.default.size.width,-i.default.size.height)),t.runAction(cc.moveTo(this.duration,this.originPos[1]).easing(cc.easeIn(1.5))),(t=this.nodeCloudRightTop).stopAllActions(),t.setPosition(cc.v2(i.default.size.width,i.default.size.height)),t.runAction(cc.moveTo(this.duration,this.originPos[2]).easing(cc.easeIn(1.5))),(t=this.nodeCloudRightBottom).stopAllActions(),t.setPosition(cc.v2(i.default.size.width,-i.default.size.height)),t.runAction(cc.moveTo(this.duration,this.originPos[3]).easing(cc.easeIn(1.5)))},t.prototype.playEffectOut=function(){var e=this,t=this.nodeCloudLeftTop;t.stopAllActions(),t.runAction(cc.sequence(cc.moveTo(this.duration,cc.v2(-i.default.size.width,i.default.size.height)).easing(cc.easeOut(1.5)),cc.delayTime(.01),cc.callFunc(function(){e.context.fOnFadeOutCompleted instanceof Function&&(e.context.fOnFadeOutCompleted(),e.removeFromParent(),e.destroy())}))),(t=this.nodeCloudLeftBottom).stopAllActions(),t.runAction(cc.moveTo(this.duration,cc.v2(-i.default.size.width,-i.default.size.height)).easing(cc.easeOut(1.5))),(t=this.nodeCloudRightTop).stopAllActions(),t.runAction(cc.moveTo(this.duration,cc.v2(i.default.size.width,i.default.size.height)).easing(cc.easeOut(1.5))),(t=this.nodeCloudRightBottom).stopAllActions(),t.runAction(cc.moveTo(this.duration,cc.v2(i.default.size.width,-i.default.size.height)).easing(cc.easeOut(1.5)))},t.prototype.onMsgSceneLoaded=function(){this.playEffectOut()},t=a([l],t)}(r.default));o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector"}],vi:[function(e,t,o){"use strict";cc._RF.push(t,"470fdyegLRJuZ2UPpvHKE2Z","vi"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.vi={ui:{56:"S\u1ed1 l\u1ea7n c\xf2n l\u1ea1i:",77:"Kh\xf4ng c\xf2n n\u1eefa, ng\xe0y mai quay l\u1ea1i",54:"Nh\u1ea5n \u0111\u1ec3 b\u1eaft \u0111\u1ea7u tr\xf2 ch\u01a1i",51:"BXH",48:"N\xe2ng c\u1ea5p",43:"B\u1ea1n c\xf3 th\u1ec3 d\xf9ng th\u1eed mi\u1ec5n ph\xed m\u1ed9t l\u1ea7n",60:"M\u1edf kho\xe1 mi\u1ec5n ph\xed",61:"Ph\u1ea7n th\u01b0\u1edfng c\u1ee7a th\u1ee9 h\u1ea1ng",63:"B\u1ed9 s\u01b0u t\u1eadp",64:"Ch\u1ecdn ng\xf4n ng\u1eef",53:"Th\u1eddi Gian May M\u1eafn",66:"Ch\u1ecdn nh\u1eefng ph\u1ea7n c\xf4 \u1ea5y s\u1eed d\u1ee5ng!",67:"\u0110o\xe1n l\u1ea1i",68:"Xem tr\u01b0\u1edbc ph\u1ea7n th\u01b0\u1edfng",69:"C\xf3 xem qu\u1ea3ng c\xe1o th\xeam ba l\u1ea7n kh\xf4ng",80:"Hi\u1ec7u \u1ee9ng c\u1ea5p %d:",52:"B\u1ea1n kh\xf4ng c\xf3 lo\u1ea1i v\u1eadt ph\u1ea9m n\xe0y",86:"G\u1ea5p \u0111\xf4i thu nh\u1eadp",84:"Th\u1eed",85:"\u0110o\xe1n th\xeam ba l\u1ea7n n\u1eefa",24:"N\xe2ng c\u1ea5p mi\u1ec5n ph\xed",25:"\u0110\u1ed9 l\u1edbn",26:"Ti\xeau Xu",27:"Tr\u01b0\u1edfng th\xe0nh %d l\u1ea7n +%d",20:"Me\u0323o",21:"T\xf9y ch\u1ecdn",22:"Mi\u1ec5n ph\xed",23:"N\xe2ng c\u1ea5p",46:"Th\u1eed th\xe1ch mi\u1ec5n ph\xed",47:"Th\u1eddi Gian May M\u1eafn",44:"Thay \u0111\u1ed5i \u0111\u1ed1i th\u1ee7",45:"M\u1edf Th\u1eed th\xe1ch",42:"Th\u1eed",29:"T\xean",40:"Xem QC \u0111\u1ec3 nh\xe2n \u0111\xf4i xu",41:"L\u01b0u",1:"NH\u1eacN",82:"L\u1ed7i, th\u1eed l\u1ea1i sau",3:"X2",2:"Ch\xfac m\u1eebng!",5:"Th\u1eddi gian ngo\u1ea1i tuy\u1ebfn",4:"X2",7:"B\u1ea1n t\xecm th\u1ea5y r\u1ea5t nhi\u1ec1u xu khi h\xe1i hoa. Ch\xfac m\u1eebng!",6:"Xem QC",9:"B\u1ea3ng x\u1ebfp h\u1ea1ng t\u1ea5t c\u1ea3",8:"Gi\u1ea3i th\u01b0\u1edfng",83:"Ph\u1ea7n th\u01b0\u1edfng th\xeam",81:"Ti\u1ec1n %d c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1ea3n xu\u1ea5t m\u1ed7i %d gi\xe2y",39:"Nhi\u1ec7m v\u1ee5 ng\xe0y",65:"Nh\u1eadn ng\u1eabu nhi\xean nh\u1eefng v\u1eadt ph\u1ea9m sau",76:"B\u1ed9 s\u01b0u t\u1eadp qu\u1ea7n \xe1o \u0111\u1ed1",75:"\u0111\u1ec3 nh\u1eadn, ti\u1ebfp t\u1ee5c tham gia v\xe0o b\xe0i ki\u1ec3m tra",38:"Ti\u1ebfn \u0111\u1ed9",73:"Thay th\u1ebf",72:"C\u1ed1 g\u1eafng \u0111\u1ec3 gi\xe0nh chi\u1ebfn th\u1eafng",71:"Ch\u01a1i m\u1ed9t l\xfac v\xe0 quay l\u1ea1i \u0111\u1ec3 nh\u1eadn ph\u1ea7n th\u01b0\u1edfng c\u1ee7a b\u1ea1n",70:"Nh\u1eadn th\xeam",59:"N\xe2ng c\u1ea5p",79:"C\u1ea5p \u0111\u1ed9 m\u0169:",78:"\u0110o\xe1n \u0111\xfang %d l\u1ea7n",11:"Gi\u1ea3i th\u01b0\u1edfng",10:"\u0110\u1ea1o c\u1ee5",13:"Ch\xfac m\u1eebng! B\u1ea1n \u0111\xe3 c\xf3 m\u1ed9t l\u1ea7n th\u1eed mi\u1ec5n ph\xed r\xfat th\u0103m may m\u1eafn",12:"H\u1ee7y",15:"Xem QC \u0111\u1ec3 nh\u1eadn xu c\xf3 tr\u1ecb gi\xe1 b\u1eb1ng 1 gi\u1edd s\u1ea3n xu\u1ea5t c\u1ee7a c\xe1c ti\xean t\u1eed: %s",14:"NH\u1eacN",16:"N\xe2ng c\u1ea5p mi\u1ec5n ph\xed",19:"Ch\xfac m\u1eebng! B\u1ea1n \u0111\xe3 c\xf3 hoa m\u1edbi",18:"Tr\u01b0\u1edfng th\xe0nh th\xe0nh c\xf4ng. H\u1ea1n ch\u1ebf c\u1ea5p \u0111\u1ed9 l\xean c\u1ea5p %d. Xem QC \u0111\u1ec3 n\xe2ng c\u1ea5p \u0111\u1ebfn c\u1ea5p %d?",31:"C\xf3",49:"M\u1edf kho\xe1",37:"X2",36:"Xu s\u1ea3n xu\u1ea5t t\u1eeb t\u1ea5t c\u1ea3 hoa s\u1ebd nh\xe2n \u0111\xf4i, k\xe9o d\xe0i 15 ph\xfat",35:"H\u1ee7y",34:"\u0110\u1ebfn",33:"B\u1ea1n c\xf3 \u0111\u1ee7 xu \u0111\u1ec3 mua qu\u1ea7n \xe1o m\u1edbi",55:"\u0110\xe3 nh\u1eadn",74:"Y\xeau c\u1ea7u b\u1ed3i th\u01b0\u1eddng",32:"H\u1ea1ng c\u1ee7a t\xf4i",57:"H\u1ea1ng c\u1ee7a t\xf4i",50:"T\xean"},daily_task_db_desc:{1:"Th\xe1ch \u0111\u1ea5u \u1edf \u0110\u01b0\u1eddng Ti\xean T\u1eed 3 l\u1ea7n",3:"H\xe1i hoa 10 l\u1ea7n",2:"N\xe2ng c\u1ea5p ti\xean t\u1eed 1 l\u1ea7n"},arena_level_db_stage:{1:"\u0110\u01b0\u1eddng Ti\xean T\u1eed"},sign_db_title:{1:"Ng\xe0y 1",3:"Ng\xe0y 3",2:"Ng\xe0y 2",5:"Ng\xe0y 5",4:"Ng\xe0y 4",7:"Ng\xe0y 7",6:"Ng\xe0y 6"},alert:{11:"Tho\xe1t tr\xf2 ch\u01a1i ngay?",12:"Tho\xe1t tr\xf2 ch\u01a1i",3:"Ti\u1ec1n th\u01b0\u1edfng:%s!",5:"C\xe0i l\u1ea1i",4:"B\u1ea1n c\xf3 mu\u1ed1n kh\xf4i ph\u1ee5c l\u1ea1i trang ph\u1ee5c?",7:"tuy\u1ec7t l\u1eafm",6:"T\u1ed5 h\u1ee3p hi\u1ec7n t\u1ea1i gi\u1ed1ng nh\u01b0 \u1ea3nh \u0111\xe3 l\u01b0u",9:"\u0110\xe3 l\u01b0u!",8:"\u0102n m\u1eb7c \u0111\xfang tr\u01b0\u1edbc khi y\xeau c\u1ea7u"},shop_template_db_name:{1:"Gunakan stamina:",2:"Gunakan stamina:"},item_template_db_desc:{2:"Xu",5:"S\u1ed1 l\u1ea7n tham gia",4:"S\u1ed1 l\u1ea7n \u0111\u1ea5u tr\u01b0\u1eddng",7:"S\u1ed1 l\u1ea7n mi\u1ec5n ph\xed t\u1ed1i \u0111a",6:"Th\u1eafng"},item_template_db_name:{15:"S\u1ed1 l\u1ea7n tham gia mi\u1ec5n ph\xed",17:"Th\u1eafng",16:"S\u1ed1 l\u1ea7n tham gia",19:"B\xe0i ki\u1ec3m tra widget",18:"S\u1ed1 l\u1ea7n mi\u1ec5n ph\xed t\u1ed1i \u0111a",1:"Kim c\u01b0\u01a1ng",3:"Th\u1ec3 l\u1ef1c",2:"Xu",5:"D\xf9ng v\xe1y th\u1eed mi\u1ec5n ph\xed",4:"Th\u1ec3 l\u1ef1c t\u1ed1i \u0111a",9:"Ng\u01b0\u1eddi ch\u01a1i",8:"B\u1ecf qua QC"},msg:{24:"%d mi\u1ec5n ph\xed",25:"Ph\xf2ng thay \u0111\u1ed3",20:"H\xe3y \u0111\u1ee3i",21:"Kh\xf4ng ph\u1ea3i th\u1eddi gian check-in",22:"Ch\u01b0a s\u1edf h\u1eefu",23:"Out b\u1ea3ng",1:"Th\xe0nh t\xedch ho\xe0n th\xe0nh",3:"Nh\u1eadn v\u1eadt ph\u1ea9m khi check-in",2:"Ch\xfac m\u1eebng! B\u1ea1n \u0111\xe3 c\xf3 m\u1ed9t l\u1ea7n th\u1eed mi\u1ec5n ph\xed r\xfat th\u0103m may m\u1eafn",5:"Kh\xf4ng th\u1ec3 nh\u1eadn ngay",4:"\u0110\xe3 thu th\u1eadp t\u1ea5t c\u1ea3",7:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng",6:"T\u0103ng c\u1ea5p \u1ea5n t\u01b0\u1ee3ng",9:"\u0110ang mua v\u1eadt ph\u1ea9m kh\xe1c, th\u1eed l\u1ea1i sau",8:"\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",11:"Kh\xf4ng \u0111\u1ee7 [%s]",10:"\u0110ang x\u1eed l\xfd y\xeau c\u1ea7u nh\u1eadn, th\u1eed l\u1ea1i sau",13:"\u0110ang kh\xf4i ph\u1ee5c \u0111\u1ed5i \u0111\u1ed1i th\u1ee7, h\xe3y \u0111\u1ee3i",12:"\u0110\xe3 \u0111\u1ed5i \u0111\u1ed1i th\u1ee7!",15:"T\xean",14:"Kh\xf4ng \u0111\u1ee7 s\u1ed1 l\u1ea7n",19:"Kh\xf4ng th\u1ec3 check-in l\u1ea1i",18:"B\u1ea1n \u0111\xe3 check-in"},arena_level_db_name:{1:"Ph\u1ed5 bi\u1ebfn",3:"Gi\u1ecfi",2:"Trung c\u1ea5p",5:"Thi\xeang li\xeang",4:"S\u1eed thi",6:"T\u1ed1i cao"},guide_db_content:{1:"Tr\u1ed3ng hoa v\u1edbi c\xe1c ti\xean t\u1eed!",3:"Ki\u1ec3m tra b\u1ed9 \u0111\u1ed3 m\xe0 b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c",2:"M\u1ed9t ti\xean t\u1eed \u0111\xe3 t\u1eb7ng b\u1ea1n xu! L\u1ea5y ch\xfang \u0111i!",5:"\u0110o\xe1n \u0111\xfang \u0111\u1ec3 nh\u1eadn m\u1ed9t b\u1ed9 \u0111\u1ed3 m\u1edbi!",4:"\u0110\xe3 l\u01b0u! Tr\xf4ng b\u1ea1n t\u01b0\u01a1i m\u1edbi \u0111\u1ea5y, tuy\u1ec7t l\u1eafm",6:"\u0110\xe3 \u0111\u1ebfn th\u1eddi \u0111i\u1ec3m phi\xeau l\u01b0u!"},role_base_db_name:{1:"Lolly",3:"Pheeling",2:"Peacock",5:"Aya",4:"Molly"}},cc._RF.pop()},{}],zhcn:[function(e,t,o){"use strict";cc._RF.push(t,"ad9bbd3YzJLVohwfPs166hi","zhcn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zhcn={ui:{56:"\u5269\u4f59\u6b21\u6570\uff1a",77:"\u5df2\u7ecf\u6ca1\u6709\u6b21\u6570\u4e86\uff0c\u660e\u5929\u518d\u6765\u5427",54:"\u70b9\u51fb\u5c4f\u5e55\u8fdb\u5165\u6e38\u620f",51:"\u6392\u884c\u699c",48:"\u70b9\u51fb\u5347\u7ea7",43:"\u770b\u5e7f\u544a\u53ef\u514d\u8d39\u8bd5\u7528\u4e00\u6b21\u54e6",60:"\u514d\u8d39\u89e3\u9501",61:"\u661f\u7ea7\u5bf9\u5e94\u5956\u52b1",63:"\u670d\u88c5\u6536\u96c6",64:"\u9009\u62e9\u8bed\u8a00",53:"\u6301\u7eed\u53cc\u500d\u5956\u52b1",66:"\u9009\u51fa\u5979\u4f7f\u7528\u7684\u90e8\u4ef6\u5427\uff01",67:"\u518d\u731c\u4e00\u6b21",68:"\u5956\u52b1\u9884\u89c8",69:"\u662f\u5426\u770b\u5e7f\u544a\u989d\u5916\u83b7\u5f97\u4e09\u6b21\u6b21\u6570",80:"%d\u7ea7\u6548\u679c\uff1a",52:"\u6682\u672a\u62e5\u6709\u8be5\u7c7b\u7269\u54c1",86:"\u53cc\u500d\u4ea7\u51fa",84:"\u8bd5\u7528",85:"\u518d\u731c\u4e09\u6b21",24:"\u514d\u8d39\u5347\u7ea7",25:"\u6210\u957f",26:"\u6d88\u8017",27:"\u5df2\u6210\u957f%d\u6b21+%d",20:"\u63d0 \u793a",21:"\u8bbe \u7f6e",22:"\u89c6\u9891\u514d\u8d39",23:"\u5347\u7ea7",46:"\u514d\u8d39\u6311\u6218",47:"\u5e78\u8fd0\u65f6\u523b",44:"\u66f4\u6362\u5bf9\u624b",45:"\u5f00\u59cb\u6311\u6218",42:"\u514d\u8d39\u8bd5\u7528",29:"\u6635\u79f0\uff1a",40:"\u662f\u5426\u770b\u5e7f\u544a\u9886\u53d6\u53cc\u500d\u5956\u52b1",41:"\u4fdd\u5b58\u5f62\u8c61",1:"\u9886\u53d6",82:"\u9519\u8bef\uff0c\u7a0d\u540e\u518d\u8bd5",3:"\u53cc\u500d\u9886\u53d6",2:"\u606d\u559c\u83b7\u5f97",5:"\u79bb\u7ebf\u65f6\u95f4",4:"\u53cc\u500d\u5956\u52b1",7:"\u672c\u6b21\u6458\u82b1\u8fc7\u7a0b\u4e2d\u53f6\u7f57\u4e3d\u4ed9\u5b50\u53d1\u73b0\u4e86\u5927\u91cf\u91d1\u5e01\uff0c\u606d\u559c\u4f60\u54e6\uff01",6:"\u5e7f\u544a",9:"\u5168\u670d\u6392\u540d:",8:"\u5956\u52b1\uff1a",83:"\u989d\u5916\u5956\u52b1",81:"\u6bcf%d\u79d2\u53ef\u4ee5\u4ea7\u51fa%d\u91d1\u5e01",39:"\u6bcf\u65e5\u4efb\u52a1",65:"\u968f\u673a\u83b7\u5f97\u4ee5\u4e0b\u90e8\u4ef6",76:"\u670d\u88c5\u7ade\u731c\u9886\u53d6",75:"\u624d\u80fd\u9886\u53d6\uff0c\u7ee7\u7eed\u53c2\u4e0e\u7ade\u731c\u5427",38:"\u4efb\u52a1\u5b8c\u6210\u5ea6",73:"\u6362\u4eba",72:"\u8bd5\u73a9\u5f97\u5956",71:"\u8bd5\u73a9\u4e00\u6bb5\u65f6\u95f4\uff0c\u5373\u53ef\u56de\u6765\u9886\u53d6\u5956\u52b1",70:"\u989d\u5916\u83b7\u53d6",59:"\u5347\u7ea7",79:"\u7b49\u7ea7\u4e0a\u9650\uff1a",78:"\u731c\u5bf9%d\u6b21",11:"\u5957\u88c5\u5956\u52b1",10:"\u90e8\u4ef6\u6570\uff1a",13:"\u606d\u559c\u4f60\u83b7\u5f971\u6b21\u514d\u8d39\u62bd\u53d6\u673a\u4f1a",12:"\u653e\u5f03",15:"\u770b\u5e7f\u544a\u7acb\u5373\u83b7\u5f97\u4e00\u5c0f\u65f6\u6240\u6709\u4ed9\u5b50\u4ea7\u51fa %s \u91d1\u5e01",14:"\u5355\u500d\u9886\u53d6",16:"\u514d\u8d39\u5347\u7ea7",19:"\u606d\u559c\u83b7\u5f97\u66f4\u9ad8\u7ea7\u82b1\u4e1b",18:"\u606d\u559c\u6210\u957f\u6210\u529f\uff0c\u7b49\u7ea7\u4e0a\u9650\u53d8\u4e3a%d,\u662f\u5426\u770b\u89c6\u9891\u76f4\u63a5\u5347\u7ea7\u5230%d\u7ea7",31:"\u786e\u5b9a",49:"\u89e3\u9501",37:"\u53cc\u500d",36:"\u53ef\u83b7\u5f97 \u6240\u6709\u82b1\u6735\u4ea7\u51fa\u901f\u5ea6\u52a0\u500d \u6548\u679c\uff0c\u6301\u7eed15\u5206\u949f",35:"\u53d6\u6d88",34:"\u524d\u5f80",33:"\u5c0f\u4e3b\u7684\u91d1\u5e01\u5df2\u7ecf\u5f88\u591a\u4e86\uff0c\u53ef\u4ee5\u83b7\u5f97\u65b0\u7684\u65f6\u88c5\u90e8\u4ef6\u4e86",55:"\u5df2\u9886\u53d6",74:"\u53ef\u9886\u53d6",32:"\u6211\u7684\u6392\u540d:",57:"\u6211\u7684\u6392\u540d\uff1a",50:"\u89d2\u8272\u8d77\u540d"},daily_task_db_desc:{1:"\u4ed9\u5b50\u4e4b\u8def\u6311\u62183\u6b21",3:"\u6536\u83b7\u82b1\u673510\u6b21",2:"\u4ed9\u5b50\u5347\u7ea71\u6b21"},arena_level_db_stage:{1:"\u5723\u6bbf"},sign_db_title:{1:"\u7b2c\u4e00\u5929",3:"\u7b2c\u4e09\u5929",2:"\u7b2c\u4e8c\u5929",5:"\u7b2c\u4e94\u5929",4:"\u7b2c\u56db\u5929",7:"\u7b2c\u4e03\u5929",6:"\u7b2c\u516d\u5929"},alert:{11:"\u662f\u5426\u9000\u51fa\u6e38\u620f",12:"\u9000\u51fa\u6e38\u620f",3:"\u672c\u6b21\u5956\u52b1\u603b\u6536\u76ca%s\uff01",5:"\u6062\u590d",4:"\u8981\u6062\u590d\u9ed8\u8ba4\u88c5\u626e\u5417\uff1f",7:"\u597d\u7684",6:"\u5f53\u524d\u642d\u914d\u4e0e\u4e4b\u524d\u4fdd\u5b58\u7684\u5185\u5bb9\u4e00\u81f4",9:"\u4fdd\u5b58\u6210\u529f\uff01",8:"\u5fc5\u987b\u7a7f\u597d\u8863\u670d\u624d\u53ef\u4ee5\u63d0\u4ea4"},shop_template_db_name:{1:"\u6d88\u8017\u4f53\u529b\uff1a",2:"\u6d88\u8017\u4f53\u529b\uff1a"},item_template_db_desc:{2:"\u8d27\u5e01",5:"\u7ade\u6280\u573a\u53c2\u52a0\u6b21\u6570",4:"\u7ade\u6280\u573a\u6b21\u6570",7:"\u7ade\u6280\u573a\u6700\u5927\u514d\u8d39\u6b21\u6570",6:"\u7ade\u6280\u573a\u80dc\u5229\u6b21\u6570"},item_template_db_name:{15:"\u7ade\u6280\u573a\u514d\u8d39\u6b21\u6570",17:"\u7ade\u6280\u573a\u80dc\u5229\u6b21\u6570",16:"\u7ade\u6280\u573a\u53c2\u52a0\u6b21\u6570",19:"\u90e8\u4ef6\u7ade\u731c\u5e7f\u544a\u6b21\u6570",18:"\u7ade\u6280\u573a\u6700\u5927\u514d\u8d39\u6b21\u6570",1:"\u94bb\u77f3",3:"\u4f53\u529b",2:"\u91d1\u5e01",5:"\u670d\u88c5\u8bd5\u7528\u6b21\u6570",4:"\u4f53\u529b\u4e0a\u9650",9:"\u73a9\u5bb6",8:"\u8df3\u8fc7\u5e7f\u544a"},msg:{24:"%d\u6b21\u514d\u8d39",25:"\u81ea\u7531\u642d\u914d",20:"\u518d\u7b49\u7b49",21:"\u7b7e\u5230\u65f6\u95f4\u5df2\u8fc7",22:"\u5c1a\u672a\u62e5\u6709",23:"\u672a\u4e0a\u699c",1:"\u6210\u5c31\u5b8c\u6210",3:"\u90e8\u4ef6\u9700\u7b7e\u5230\u83b7\u53d6",2:"\u606d\u559c\u4f60\u83b7\u5f971\u6b21\u514d\u8d39\u62bd\u53d6\u673a\u4f1a",5:"\u73b0\u5728\u4e0d\u80fd\u9886\u53d6\u54e6",4:"\u5f53\u524d\u5957\u88c5\u5df2\u7ecf\u5168\u90e8\u96c6\u9f50",7:"\u767b\u5f55\u6210\u529f",6:"\u597d\u611f\u7b49\u7ea7\u63d0\u5347",9:"\u6709\u5546\u54c1\u6b63\u5728\u652f\u4ed8\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8d2d\u4e70",8:"\u767b\u5f55\u5931\u8d25",11:"[%s]\u4e0d\u8db3",10:"\u9886\u53d6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u9886\u53d6",13:"\u66f4\u6362\u5bf9\u624b\u51b7\u5374\u4e2d\uff0c\u8bf7\u7a0d\u5019\u3002",12:"\u6210\u529f\u66f4\u6362\u5bf9\u624b\uff01",15:"\u8bf7\u8f93\u5165\u6635\u79f0",14:"\u6b21\u6570\u4e0d\u8db3",19:"\u5df2\u7ecf\u4e0d\u80fd\u7b7e\u5230\u4e86",18:"\u5df2\u7ecf\u7b7e\u5230\u8fc7\u4e86"},arena_level_db_name:{1:"\u521d\u9636\u82b1\u4ed9",3:"\u9ad8\u9636\u82b1\u4ed9",2:"\u4e2d\u9636\u82b1\u4ed9",5:"\u5723\u9636\u82b1\u4ed9",4:"\u795e\u9636\u82b1\u4ed9",6:"\u81f3\u5c0a\u4ed9\u738b"},guide_db_content:{1:"\u6765\u548c\u4ed9\u5b50\u4eec\u4e00\u8d77\u79cd\u82b1\u5427\uff01",3:"\u6765\u770b\u770b\u6211\u4eec\u6536\u96c6\u7684\u5957\u88c5\u3002",2:"\u4ed9\u5b50\u9001\u4e0a\u4e86\u91d1\u5e01\uff0c\u5feb\u6536\u96c6\u8d77\u6765\u5427\uff01",5:"\u731c\u5bf9\u5c31\u80fd\u83b7\u5f97\u65b0\u670d\u88c5\u54e6\uff01",4:"\u4fdd\u5b58\u6210\u529f\uff0c\u5f62\u8c61\u7115\u7136\u4e00\u65b0\uff01-\u597d\u7684",6:"\u63a5\u4e0b\u91cc\u5c31\u53ef\u4ee5\u81ea\u7531\u5192\u9669\u4e86\uff01"},role_base_db_name:{1:"\u7f57\u4e3d",3:"\u83f2\u7075",2:"\u5b54\u96c0",5:"\u4eae\u5f69",4:"\u8309\u8389"}},cc._RF.pop()},{}]},{},["en","hi","id","pt","vi","zhcn","Const","_template","mgrAchievement","mgrAd","mgrAdNative","mgrAlu","mgrCfg","mgrChannel","mgrCop","mgrDailyLottery","mgrDailyTask","mgrDebug","mgrDirector","mgrGuide","mgrI18n","mgrNative","mgrNativeAdSdk","mgrNetwork","mgrOfflineArena","mgrOfflinePartRank","mgrOnline","mgrPart","mgrPlayer","mgrPool","mgrPvp","mgrRecord","mgrRole","mgrSdk","mgrSelectPart","mgrShop","mgrSign","mgrSound","mgrStage","mgrText","mgrTip","mgrUnitTest","mgrWordFilter","sAchievement","sAvatar","sRankPlayer","TestAnimNode","TestParticle","TestSound","TestSpine","vAfterReapUpgradeDialog","vArenaRankDialog","vArenaRewardDialog","vArenaStagePreviewCommitDialog","vArenaStagePreviewDialog","vCdkDialog","vClothSaveSuccessDialog","vClothTrialDialog","vCommitDialog","vDailyAdConfirmDialog","vDailyDialog","vDebugInfoDialog","vDoubleRewardDialog","vFindMeBaiduDialog","vFindMeDouyinDialog","vFindMeToutiaoDialog","vFreeGoldDialog","vGotDailyRewardDialog","vGotItemDialog","vGotoSuitDialog","vJumpOtherGameDialog","vJumpOtherGameWelfareDialog","vMoreGameDialog","vNativeDialog","vOfflineDialog","vOnlineDialog","vPartDetailDialog","vPartRankDialog","vPlayerNameDialog","vPromptDialog","vReapDialog","vRoleUpgradeDialog","vSelectPartAdDialog","vSetLanguage","vSettingDialog","vShareDialog","vShareReapDialog","vShop01Dialog","vShop02Dialog","vSignDialog","vSuitPartAwardDialog","vSuitRewardDialog","vSuitShowDialog","vTouchFlowerDialog","LayerColorTwo","singlePageReuseList","vArenaRewardDetailItem","vArenaRewardItem","vAvatar","vClothPartItem","vClothTypeItem","vClothWearItem","vComboAvatar","vDailyItem","vFlowerItem","vFlowerTip","vGoldTip","vGuessYouLike","vGuessYouLikeItem","vGuideArrow","vGuideMask","vGuideTip","vGuideView","vJumpGameItem","vJumpGameWelfareItem","vJumpOtherGame","vLanguageItem","vLevelBar","vMark","vMsgTip","vNativeBanner","vPartDetailText","vPartRankItem","vRankItem","vRankPartItem","vReapLevelItem","vRoleItem","vSelectPartExchangeItem","vSelectPartItem","vShopItem","vSignItemLarge","vSignItemSmall","vSuitPartItem","vSuitRoleItem","vWarpSceneNode","vArenaResultScene","vClothScene","vDevTestScene","vHubScene","vLoadingScene","vSelectPartExchangeScene","vSelectPartScene","vSuitScene","vUpdaterScene","init","main","ConstBase","LifeCycleMonitor","ScleableButton","ColorEx","LabelEx","NodeEx","RichTextEx","SpriteEx","Manager","ManagerDirectorBase","CustomMaterialBase","CustomSpineMaterial","CustomSpriteMaterial","ShaderLib","NetworkAdapterBase","NetworkAdapterHttp","NetworkAdapterHttpUlServer","NetworkManager","NetworkTask","vUpdaterSceneBase","Base64","CfgParser","EventTouchEx","FSMObject","IPoolManagerCacheableObject","MsgHandler","PoolManager","Randomizer","TaskManager","Timer","Tools","ULNativeControllerHtml5","UnitTestCase","ul","AnimNode","DebugMenu","DebugMouseControlNode","DialogBase","FSMSceneBase","IReuseLayouter","LayerColor","Particle","ReuseLayouterHBox","ReuseLayouterHGrid","ReuseLayouterVBox","ReuseLayouterVGrid","ReuseList","ReusePageView","SceneBase","Spine","SpriteBasedClippingNode","ViewBase","ULConsts","cConfig","ULAdvBase","ULAdvItem","ULAdvManager","ULAdvTrimErrorManager","ULChannelInfo","ULChannelModuleBase","ULChannelModuleWebmobileBase","ULClipboardManager","ULConfig","ULCopManager","ULModuleBase","ULModuleCheckerManager","ULSdkManager","ULSdkModuleLoader","ULStatisManager","ULStorageManager","ULEvent","ULEventDispatcher","ULEventListener","ULSdkMiddleware","ULAdViewBase","ULBannerView","ULInterView","IMCPanel","MCConsts","MCItem","MCPanelCreator","MCPanelLaya","ULModuleCdk","ULModuleClipboard","ULModuleMegadata","ULModuleUserData","ULAdvFacebook","ULModuleFaceBook","ULModuleGoogleAnalytics","ULBase64","ULMd5","ULSDK","ULTimer","ULTools","ULWebSocket","LanguageData","LocalizedLabel","LocalizedSprite","LocalizedSpriteFixedUrl","SpriteFrameSet","polyglot.min"]);